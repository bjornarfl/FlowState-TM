const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/YamlEditor-Bjju96T-.js","assets/YamlEditor-1Vu5eckG.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dy={exports:{}},Oc={};var tx;function zj(){if(tx)return Oc;tx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:e,type:a,key:l,ref:s!==void 0?s:null,props:o}}return Oc.Fragment=t,Oc.jsx=r,Oc.jsxs=r,Oc}var nx;function Lj(){return nx||(nx=1,dy.exports=zj()),dy.exports}var v=Lj(),fy={exports:{}},ot={};var rx;function Ij(){if(rx)return ot;rx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function y($){return $===null||typeof $!="object"?null:($=g&&$[g]||$["@@iterator"],typeof $=="function"?$:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function x($,B,K){this.props=$,this.context=B,this.refs=w,this.updater=K||_}x.prototype.isReactComponent={},x.prototype.setState=function($,B){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,B,"setState")},x.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function S(){}S.prototype=x.prototype;function C($,B,K){this.props=$,this.context=B,this.refs=w,this.updater=K||_}var A=C.prototype=new S;A.constructor=C,b(A,x.prototype),A.isPureReactComponent=!0;var E=Array.isArray;function j(){}var T={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function L($,B,K){var P=K.ref;return{$$typeof:e,type:$,key:B,ref:P!==void 0?P:null,props:K}}function V($,B){return L($.type,B,$.props)}function F($){return typeof $=="object"&&$!==null&&$.$$typeof===e}function M($){var B={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(K){return B[K]})}var O=/\/+/g;function R($,B){return typeof $=="object"&&$!==null&&$.key!=null?M(""+$.key):B.toString(36)}function G($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(j,j):($.status="pending",$.then(function(B){$.status==="pending"&&($.status="fulfilled",$.value=B)},function(B){$.status==="pending"&&($.status="rejected",$.reason=B)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function H($,B,K,P,q){var J=typeof $;(J==="undefined"||J==="boolean")&&($=null);var le=!1;if($===null)le=!0;else switch(J){case"bigint":case"string":case"number":le=!0;break;case"object":switch($.$$typeof){case e:case t:le=!0;break;case m:return le=$._init,H(le($._payload),B,K,P,q)}}if(le)return q=q($),le=P===""?"."+R($,0):P,E(q)?(K="",le!=null&&(K=le.replace(O,"$&/")+"/"),H(q,B,K,"",function(ve){return ve})):q!=null&&(F(q)&&(q=V(q,K+(q.key==null||$&&$.key===q.key?"":(""+q.key).replace(O,"$&/")+"/")+le)),B.push(q)),1;le=0;var oe=P===""?".":P+":";if(E($))for(var he=0;he<$.length;he++)P=$[he],J=oe+R(P,he),le+=H(P,B,K,J,q);else if(he=y($),typeof he=="function")for($=he.call($),he=0;!(P=$.next()).done;)P=P.value,J=oe+R(P,he++),le+=H(P,B,K,J,q);else if(J==="object"){if(typeof $.then=="function")return H(G($),B,K,P,q);throw B=String($),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return le}function U($,B,K){if($==null)return $;var P=[],q=0;return H($,P,"","",function(J){return B.call(K,J,q++)}),P}function Z($){if($._status===-1){var B=$._result;B=B(),B.then(function(K){($._status===0||$._status===-1)&&($._status=1,$._result=K)},function(K){($._status===0||$._status===-1)&&($._status=2,$._result=K)}),$._status===-1&&($._status=0,$._result=B)}if($._status===1)return $._result.default;throw $._result}var X=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},Q={map:U,forEach:function($,B,K){U($,function(){B.apply(this,arguments)},K)},count:function($){var B=0;return U($,function(){B++}),B},toArray:function($){return U($,function(B){return B})||[]},only:function($){if(!F($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return ot.Activity=p,ot.Children=Q,ot.Component=x,ot.Fragment=r,ot.Profiler=s,ot.PureComponent=C,ot.StrictMode=a,ot.Suspense=d,ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,ot.__COMPILER_RUNTIME={__proto__:null,c:function($){return T.H.useMemoCache($)}},ot.cache=function($){return function(){return $.apply(null,arguments)}},ot.cacheSignal=function(){return null},ot.cloneElement=function($,B,K){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var P=b({},$.props),q=$.key;if(B!=null)for(J in B.key!==void 0&&(q=""+B.key),B)!z.call(B,J)||J==="key"||J==="__self"||J==="__source"||J==="ref"&&B.ref===void 0||(P[J]=B[J]);var J=arguments.length-2;if(J===1)P.children=K;else if(1<J){for(var le=Array(J),oe=0;oe<J;oe++)le[oe]=arguments[oe+2];P.children=le}return L($.type,q,P)},ot.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:o,_context:$},$},ot.createElement=function($,B,K){var P,q={},J=null;if(B!=null)for(P in B.key!==void 0&&(J=""+B.key),B)z.call(B,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(q[P]=B[P]);var le=arguments.length-2;if(le===1)q.children=K;else if(1<le){for(var oe=Array(le),he=0;he<le;he++)oe[he]=arguments[he+2];q.children=oe}if($&&$.defaultProps)for(P in le=$.defaultProps,le)q[P]===void 0&&(q[P]=le[P]);return L($,J,q)},ot.createRef=function(){return{current:null}},ot.forwardRef=function($){return{$$typeof:u,render:$}},ot.isValidElement=F,ot.lazy=function($){return{$$typeof:m,_payload:{_status:-1,_result:$},_init:Z}},ot.memo=function($,B){return{$$typeof:f,type:$,compare:B===void 0?null:B}},ot.startTransition=function($){var B=T.T,K={};T.T=K;try{var P=$(),q=T.S;q!==null&&q(K,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(j,X)}catch(J){X(J)}finally{B!==null&&K.types!==null&&(B.types=K.types),T.T=B}},ot.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},ot.use=function($){return T.H.use($)},ot.useActionState=function($,B,K){return T.H.useActionState($,B,K)},ot.useCallback=function($,B){return T.H.useCallback($,B)},ot.useContext=function($){return T.H.useContext($)},ot.useDebugValue=function(){},ot.useDeferredValue=function($,B){return T.H.useDeferredValue($,B)},ot.useEffect=function($,B){return T.H.useEffect($,B)},ot.useEffectEvent=function($){return T.H.useEffectEvent($)},ot.useId=function(){return T.H.useId()},ot.useImperativeHandle=function($,B,K){return T.H.useImperativeHandle($,B,K)},ot.useInsertionEffect=function($,B){return T.H.useInsertionEffect($,B)},ot.useLayoutEffect=function($,B){return T.H.useLayoutEffect($,B)},ot.useMemo=function($,B){return T.H.useMemo($,B)},ot.useOptimistic=function($,B){return T.H.useOptimistic($,B)},ot.useReducer=function($,B,K){return T.H.useReducer($,B,K)},ot.useRef=function($){return T.H.useRef($)},ot.useState=function($){return T.H.useState($)},ot.useSyncExternalStore=function($,B,K){return T.H.useSyncExternalStore($,B,K)},ot.useTransition=function(){return T.H.useTransition()},ot.version="19.2.4",ot}var ix;function _u(){return ix||(ix=1,fy.exports=Ij()),fy.exports}var N=_u();const ht=xu(N);var hy={exports:{}},zc={},my={exports:{}},py={};var ax;function Pj(){return ax||(ax=1,(function(e){function t(H,U){var Z=H.length;H.push(U);e:for(;0<Z;){var X=Z-1>>>1,Q=H[X];if(0<s(Q,U))H[X]=U,H[Z]=Q,Z=X;else break e}}function r(H){return H.length===0?null:H[0]}function a(H){if(H.length===0)return null;var U=H[0],Z=H.pop();if(Z!==U){H[0]=Z;e:for(var X=0,Q=H.length,$=Q>>>1;X<$;){var B=2*(X+1)-1,K=H[B],P=B+1,q=H[P];if(0>s(K,Z))P<Q&&0>s(q,K)?(H[X]=q,H[P]=Z,X=P):(H[X]=K,H[B]=Z,X=B);else if(P<Q&&0>s(q,Z))H[X]=q,H[P]=Z,X=P;else break e}}return U}function s(H,U){var Z=H.sortIndex-U.sortIndex;return Z!==0?Z:H.id-U.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],f=[],m=1,p=null,g=3,y=!1,_=!1,b=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function A(H){for(var U=r(f);U!==null;){if(U.callback===null)a(f);else if(U.startTime<=H)a(f),U.sortIndex=U.expirationTime,t(d,U);else break;U=r(f)}}function E(H){if(b=!1,A(H),!_)if(r(d)!==null)_=!0,j||(j=!0,M());else{var U=r(f);U!==null&&G(E,U.startTime-H)}}var j=!1,T=-1,z=5,L=-1;function V(){return w?!0:!(e.unstable_now()-L<z)}function F(){if(w=!1,j){var H=e.unstable_now();L=H;var U=!0;try{e:{_=!1,b&&(b=!1,S(T),T=-1),y=!0;var Z=g;try{t:{for(A(H),p=r(d);p!==null&&!(p.expirationTime>H&&V());){var X=p.callback;if(typeof X=="function"){p.callback=null,g=p.priorityLevel;var Q=X(p.expirationTime<=H);if(H=e.unstable_now(),typeof Q=="function"){p.callback=Q,A(H),U=!0;break t}p===r(d)&&a(d),A(H)}else a(d);p=r(d)}if(p!==null)U=!0;else{var $=r(f);$!==null&&G(E,$.startTime-H),U=!1}}break e}finally{p=null,g=Z,y=!1}U=void 0}}finally{U?M():j=!1}}}var M;if(typeof C=="function")M=function(){C(F)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,R=O.port2;O.port1.onmessage=F,M=function(){R.postMessage(null)}}else M=function(){x(F,0)};function G(H,U){T=x(function(){H(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(H){switch(g){case 1:case 2:case 3:var U=3;break;default:U=g}var Z=g;g=U;try{return H()}finally{g=Z}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(H,U){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Z=g;g=H;try{return U()}finally{g=Z}},e.unstable_scheduleCallback=function(H,U,Z){var X=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?X+Z:X):Z=X,H){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=Z+Q,H={id:m++,callback:U,priorityLevel:H,startTime:Z,expirationTime:Q,sortIndex:-1},Z>X?(H.sortIndex=Z,t(f,H),r(d)===null&&H===r(f)&&(b?(S(T),T=-1):b=!0,G(E,Z-X))):(H.sortIndex=Q,t(d,H),_||y||(_=!0,j||(j=!0,M()))),H},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(H){var U=g;return function(){var Z=g;g=U;try{return H.apply(this,arguments)}finally{g=Z}}}})(py)),py}var sx;function Bj(){return sx||(sx=1,my.exports=Pj()),my.exports}var gy={exports:{}},Xn={};var ox;function Hj(){if(ox)return Xn;ox=1;var e=_u();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:d,containerInfo:f,implementation:m}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Xn.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,m)},Xn.flushSync=function(d){var f=l.T,m=a.p;try{if(l.T=null,a.p=2,d)return d()}finally{l.T=f,a.p=m,a.d.f()}},Xn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,a.d.C(d,f))},Xn.prefetchDNS=function(d){typeof d=="string"&&a.d.D(d)},Xn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,p=u(m,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?a.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):m==="script"&&a.d.X(d,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Xn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=u(f.as,f.crossOrigin);a.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&a.d.M(d)},Xn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,p=u(m,f.crossOrigin);a.d.L(d,m,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Xn.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=u(f.as,f.crossOrigin);a.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else a.d.m(d)},Xn.requestFormReset=function(d){a.d.r(d)},Xn.unstable_batchedUpdates=function(d,f){return d(f)},Xn.useFormState=function(d,f,m){return l.H.useFormState(d,f,m)},Xn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Xn.version="19.2.4",Xn}var lx;function W2(){if(lx)return gy.exports;lx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),gy.exports=Hj(),gy.exports}var cx;function Uj(){if(cx)return zc;cx=1;var e=Bj(),t=_u(),r=W2();function a(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var i=n,c=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(c=i.return),n=i.return;while(n)}return i.tag===3?c:null}function l(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function u(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function d(n){if(o(n)!==n)throw Error(a(188))}function f(n){var i=n.alternate;if(!i){if(i=o(n),i===null)throw Error(a(188));return i!==n?null:n}for(var c=n,h=i;;){var k=c.return;if(k===null)break;var D=k.alternate;if(D===null){if(h=k.return,h!==null){c=h;continue}break}if(k.child===D.child){for(D=k.child;D;){if(D===c)return d(k),n;if(D===h)return d(k),i;D=D.sibling}throw Error(a(188))}if(c.return!==h.return)c=k,h=D;else{for(var Y=!1,ee=k.child;ee;){if(ee===c){Y=!0,c=k,h=D;break}if(ee===h){Y=!0,h=k,c=D;break}ee=ee.sibling}if(!Y){for(ee=D.child;ee;){if(ee===c){Y=!0,c=D,h=k;break}if(ee===h){Y=!0,h=D,c=k;break}ee=ee.sibling}if(!Y)throw Error(a(189))}}if(c.alternate!==h)throw Error(a(190))}if(c.tag!==3)throw Error(a(188));return c.stateNode.current===c?n:i}function m(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=m(n),i!==null)return i;n=n.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function M(n){return n===null||typeof n!="object"?null:(n=F&&n[F]||n["@@iterator"],typeof n=="function"?n:null)}var O=Symbol.for("react.client.reference");function R(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===O?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case b:return"Fragment";case x:return"Profiler";case w:return"StrictMode";case E:return"Suspense";case j:return"SuspenseList";case L:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case _:return"Portal";case C:return n.displayName||"Context";case S:return(n._context.displayName||"Context")+".Consumer";case A:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case T:return i=n.displayName||null,i!==null?i:R(n.type)||"Memo";case z:i=n._payload,n=n._init;try{return R(n(i))}catch{}}return null}var G=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},X=[],Q=-1;function $(n){return{current:n}}function B(n){0>Q||(n.current=X[Q],X[Q]=null,Q--)}function K(n,i){Q++,X[Q]=n.current,n.current=i}var P=$(null),q=$(null),J=$(null),le=$(null);function oe(n,i){switch(K(J,i),K(q,n),K(P,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Cw(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Cw(i),n=Ew(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}B(P),K(P,n)}function he(){B(P),B(q),B(J)}function ve(n){n.memoizedState!==null&&K(le,n);var i=P.current,c=Ew(i,n.type);i!==c&&(K(q,n),K(P,c))}function W(n){q.current===n&&(B(P),B(q)),le.current===n&&(B(le),Dc._currentValue=Z)}var ie,ae;function I(n){if(ie===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);ie=i&&i[1]||"",ae=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ie+n+ae}var ue=!1;function ce(n,i){if(!n||ue)return"";ue=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(i){var De=function(){throw Error()};if(Object.defineProperty(De.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(De,[])}catch(Ee){var Se=Ee}Reflect.construct(n,[],De)}else{try{De.call()}catch(Ee){Se=Ee}n.call(De.prototype)}}else{try{throw Error()}catch(Ee){Se=Ee}(De=n())&&typeof De.catch=="function"&&De.catch(function(){})}}catch(Ee){if(Ee&&Se&&typeof Ee.stack=="string")return[Ee.stack,Se.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var k=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");k&&k.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=h.DetermineComponentFrameRoot(),Y=D[0],ee=D[1];if(Y&&ee){var de=Y.split(`
`),xe=ee.split(`
`);for(k=h=0;h<de.length&&!de[h].includes("DetermineComponentFrameRoot");)h++;for(;k<xe.length&&!xe[k].includes("DetermineComponentFrameRoot");)k++;if(h===de.length||k===xe.length)for(h=de.length-1,k=xe.length-1;1<=h&&0<=k&&de[h]!==xe[k];)k--;for(;1<=h&&0<=k;h--,k--)if(de[h]!==xe[k]){if(h!==1||k!==1)do if(h--,k--,0>k||de[h]!==xe[k]){var je=`
`+de[h].replace(" at new "," at ");return n.displayName&&je.includes("<anonymous>")&&(je=je.replace("<anonymous>",n.displayName)),je}while(1<=h&&0<=k);break}}}finally{ue=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?I(c):""}function re(n,i){switch(n.tag){case 26:case 27:case 5:return I(n.type);case 16:return I("Lazy");case 13:return n.child!==i&&i!==null?I("Suspense Fallback"):I("Suspense");case 19:return I("SuspenseList");case 0:case 15:return ce(n.type,!1);case 11:return ce(n.type.render,!1);case 1:return ce(n.type,!0);case 31:return I("Activity");default:return""}}function ne(n){try{var i="",c=null;do i+=re(n,c),c=n,n=n.return;while(n);return i}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var fe=Object.prototype.hasOwnProperty,Ce=e.unstable_scheduleCallback,ke=e.unstable_cancelCallback,ye=e.unstable_shouldYield,Re=e.unstable_requestPaint,Pe=e.unstable_now,Le=e.unstable_getCurrentPriorityLevel,Fe=e.unstable_ImmediatePriority,Ue=e.unstable_UserBlockingPriority,Ne=e.unstable_NormalPriority,$e=e.unstable_LowPriority,Ae=e.unstable_IdlePriority,Ve=e.log,He=e.unstable_setDisableYieldValue,Be=null,Ye=null;function mt(n){if(typeof Ve=="function"&&He(n),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(Be,n)}catch{}}var nt=Math.clz32?Math.clz32:Jt,Ot=Math.log,Kt=Math.LN2;function Jt(n){return n>>>=0,n===0?32:31-(Ot(n)/Kt|0)|0}var Et=256,it=262144,ut=4194304;function kt(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ft(n,i,c){var h=n.pendingLanes;if(h===0)return 0;var k=0,D=n.suspendedLanes,Y=n.pingedLanes;n=n.warmLanes;var ee=h&134217727;return ee!==0?(h=ee&~D,h!==0?k=kt(h):(Y&=ee,Y!==0?k=kt(Y):c||(c=ee&~n,c!==0&&(k=kt(c))))):(ee=h&~D,ee!==0?k=kt(ee):Y!==0?k=kt(Y):c||(c=h&~n,c!==0&&(k=kt(c)))),k===0?0:i!==0&&i!==k&&(i&D)===0&&(D=k&-k,c=i&-i,D>=c||D===32&&(c&4194048)!==0)?i:k}function wn(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function fn(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qt(){var n=ut;return ut<<=1,(ut&62914560)===0&&(ut=4194304),n}function xn(n){for(var i=[],c=0;31>c;c++)i.push(n);return i}function an(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Xt(n,i,c,h,k,D){var Y=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var ee=n.entanglements,de=n.expirationTimes,xe=n.hiddenUpdates;for(c=Y&~c;0<c;){var je=31-nt(c),De=1<<je;ee[je]=0,de[je]=-1;var Se=xe[je];if(Se!==null)for(xe[je]=null,je=0;je<Se.length;je++){var Ee=Se[je];Ee!==null&&(Ee.lane&=-536870913)}c&=~De}h!==0&&_n(n,h,0),D!==0&&k===0&&n.tag!==0&&(n.suspendedLanes|=D&~(Y&~i))}function _n(n,i,c){n.pendingLanes|=i,n.suspendedLanes&=~i;var h=31-nt(i);n.entangledLanes|=i,n.entanglements[h]=n.entanglements[h]|1073741824|c&261930}function An(n,i){var c=n.entangledLanes|=i;for(n=n.entanglements;c;){var h=31-nt(c),k=1<<h;k&i|n[h]&i&&(n[h]|=i),c&=~k}}function $n(n,i){var c=i&-i;return c=(c&42)!==0?1:br(c),(c&(n.suspendedLanes|i))!==0?0:c}function br(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Sn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function qn(){var n=U.p;return n!==0?n:(n=window.event,n===void 0?32:Kw(n.type))}function sr(n,i){var c=U.p;try{return U.p=n,i()}finally{U.p=c}}var Vn=Math.random().toString(36).slice(2),sn="__reactFiber$"+Vn,hn="__reactProps$"+Vn,Qr="__reactContainer$"+Vn,yi="__reactEvents$"+Vn,ba="__reactListeners$"+Vn,ps="__reactHandles$"+Vn,Or="__reactResources$"+Vn,zr="__reactMarker$"+Vn;function wa(n){delete n[sn],delete n[hn],delete n[yi],delete n[ba],delete n[ps]}function or(n){var i=n[sn];if(i)return i;for(var c=n.parentNode;c;){if(i=c[Qr]||c[sn]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(n=Rw(n);n!==null;){if(c=n[sn])return c;n=Rw(n)}return i}n=c,c=n.parentNode}return null}function vi(n){if(n=n[sn]||n[Qr]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function wr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(a(33))}function bi(n){var i=n[Or];return i||(i=n[Or]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Zt(n){n[zr]=!0}var Lr=new Set,fo={};function Ir(n,i){Jr(n,i),Jr(n+"Capture",i)}function Jr(n,i){for(fo[n]=i,n=0;n<i.length;n++)Lr.add(i[n])}var Yn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wn={},gs={};function xr(n){return fe.call(gs,n)?!0:fe.call(Wn,n)?!1:Yn.test(n)?gs[n]=!0:(Wn[n]=!0,!1)}function ei(n,i,c){if(xr(i))if(c===null)n.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var h=i.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+c)}}function Qn(n,i,c){if(c===null)n.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+c)}}function jn(n,i,c,h){if(h===null)n.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(i,c,""+h)}}function Mn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ti(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ys(n,i,c){var h=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var k=h.get,D=h.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return k.call(this)},set:function(Y){c=""+Y,D.call(this,Y)}}),Object.defineProperty(n,i,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(Y){c=""+Y},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function _r(n){if(!n._valueTracker){var i=ti(n)?"checked":"value";n._valueTracker=ys(n,i,""+n[i])}}function xa(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var c=i.getValue(),h="";return n&&(h=ti(n)?n.checked?"true":"false":n.value),n=h,n!==c?(i.setValue(n),!0):!1}function lr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ho=/[\n"\\]/g;function On(n){return n.replace(ho,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Cn(n,i,c,h,k,D,Y,ee){n.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?n.type=Y:n.removeAttribute("type"),i!=null?Y==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Mn(i)):n.value!==""+Mn(i)&&(n.value=""+Mn(i)):Y!=="submit"&&Y!=="reset"||n.removeAttribute("value"),i!=null?Pr(n,Y,Mn(i)):c!=null?Pr(n,Y,Mn(c)):h!=null&&n.removeAttribute("value"),k==null&&D!=null&&(n.defaultChecked=!!D),k!=null&&(n.checked=k&&typeof k!="function"&&typeof k!="symbol"),ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?n.name=""+Mn(ee):n.removeAttribute("name")}function _a(n,i,c,h,k,D,Y,ee){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(n.type=D),i!=null||c!=null){if(!(D!=="submit"&&D!=="reset"||i!=null)){_r(n);return}c=c!=null?""+Mn(c):"",i=i!=null?""+Mn(i):c,ee||i===n.value||(n.value=i),n.defaultValue=i}h=h??k,h=typeof h!="function"&&typeof h!="symbol"&&!!h,n.checked=ee?n.checked:!!h,n.defaultChecked=!!h,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(n.name=Y),_r(n)}function Pr(n,i,c){i==="number"&&lr(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function cr(n,i,c,h){if(n=n.options,i){i={};for(var k=0;k<c.length;k++)i["$"+c[k]]=!0;for(c=0;c<n.length;c++)k=i.hasOwnProperty("$"+n[c].value),n[c].selected!==k&&(n[c].selected=k),k&&h&&(n[c].defaultSelected=!0)}else{for(c=""+Mn(c),i=null,k=0;k<n.length;k++){if(n[k].value===c){n[k].selected=!0,h&&(n[k].defaultSelected=!0);return}i!==null||n[k].disabled||(i=n[k])}i!==null&&(i.selected=!0)}}function vs(n,i,c){if(i!=null&&(i=""+Mn(i),i!==n.value&&(n.value=i),c==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=c!=null?""+Mn(c):""}function Sa(n,i,c,h){if(i==null){if(h!=null){if(c!=null)throw Error(a(92));if(G(h)){if(1<h.length)throw Error(a(93));h=h[0]}c=h}c==null&&(c=""),i=c}c=Mn(i),n.defaultValue=c,h=n.textContent,h===c&&h!==""&&h!==null&&(n.value=h),_r(n)}function Br(n,i){if(i){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=i;return}}n.textContent=i}var zl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ll(n,i,c){var h=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":h?n.setProperty(i,c):typeof c!="number"||c===0||zl.has(i)?i==="float"?n.cssFloat=c:n[i]=(""+c).trim():n[i]=c+"px"}function wi(n,i,c){if(i!=null&&typeof i!="object")throw Error(a(62));if(n=n.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||i!=null&&i.hasOwnProperty(h)||(h.indexOf("--")===0?n.setProperty(h,""):h==="float"?n.cssFloat="":n[h]="");for(var k in i)h=i[k],i.hasOwnProperty(k)&&c[k]!==h&&Ll(n,k,h)}else for(var D in i)i.hasOwnProperty(D)&&Ll(n,D,i[D])}function bs(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xi(n){return Hr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Sr(){}var mo=null;function Xe(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Bt=null,Ca=null;function ws(n){var i=vi(n);if(i&&(n=i.stateNode)){var c=n[hn]||null;e:switch(n=i.stateNode,i.type){case"input":if(Cn(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+On(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var h=c[i];if(h!==n&&h.form===n.form){var k=h[hn]||null;if(!k)throw Error(a(90));Cn(h,k.value,k.defaultValue,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name)}}for(i=0;i<c.length;i++)h=c[i],h.form===n.form&&xa(h)}break e;case"textarea":vs(n,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&cr(n,!!c.multiple,i,!1)}}}var Il=!1;function Ht(n,i,c){if(Il)return n(i,c);Il=!0;try{var h=n(i);return h}finally{if(Il=!1,(Bt!==null||Ca!==null)&&(Bd(),Bt&&(i=Bt,n=Ca,Ca=Bt=null,ws(i),n)))for(i=0;i<n.length;i++)ws(n[i])}}function Li(n,i){var c=n.stateNode;if(c===null)return null;var h=c[hn]||null;if(h===null)return null;c=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(a(231,i,typeof c));return c}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),po=!1;if(Kn)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){po=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch{po=!1}var mn=null,go=null,xs=null;function Pl(){if(xs)return xs;var n,i=go,c=i.length,h,k="value"in mn?mn.value:mn.textContent,D=k.length;for(n=0;n<c&&i[n]===k[n];n++);var Y=c-n;for(h=1;h<=Y&&i[c-h]===k[D-h];h++);return xs=k.slice(n,1<h?1-h:void 0)}function _s(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function yo(){return!0}function Bl(){return!1}function zn(n){function i(c,h,k,D,Y){this._reactName=c,this._targetInst=k,this.type=h,this.nativeEvent=D,this.target=Y,this.currentTarget=null;for(var ee in n)n.hasOwnProperty(ee)&&(c=n[ee],this[ee]=c?c(D):D[ee]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?yo:Bl,this.isPropagationStopped=Bl,this}return p(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=yo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=yo)},persist:function(){},isPersistent:yo}),i}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ea=zn(Ii),Jn=p({},Ii,{view:0,detail:0}),Pi=zn(Jn),vo,Hl,Ss,bo=p({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ul,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ss&&(Ss&&n.type==="mousemove"?(vo=n.screenX-Ss.screenX,Hl=n.screenY-Ss.screenY):Hl=vo=0,Ss=n),vo)},movementY:function(n){return"movementY"in n?n.movementY:Hl}}),Bu=zn(bo),ap=p({},bo,{dataTransfer:0}),Hu=zn(ap),Uu=p({},Jn,{relatedTarget:0}),wo=zn(Uu),sp=p({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),tn=zn(sp),_i=p({},Ii,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),on=zn(_i),Si=p({},Ii,{data:0}),Fu=zn(Si),op={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function up(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=cp[n])?!!i[n]:!1}function Ul(){return up}var dp=p({},Jn,{key:function(n){if(n.key){var i=op[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=_s(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?lp[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ul,charCode:function(n){return n.type==="keypress"?_s(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?_s(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),fp=zn(dp),hp=p({},bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qu=zn(hp),mp=p({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ul}),Ci=zn(mp),Cs=p({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),pp=zn(Cs),Cr=p({},bo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),gp=zn(Cr),yp=p({},Ii,{newState:0,oldState:0}),vp=zn(yp),bp=[9,13,27,32],Fl=Kn&&"CompositionEvent"in window,Es=null;Kn&&"documentMode"in document&&(Es=document.documentMode);var wp=Kn&&"TextEvent"in window&&!Es,Vu=Kn&&(!Fl||Es&&8<Es&&11>=Es),Yu=" ",Gu=!1;function ql(n,i){switch(n){case"keyup":return bp.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Bi=!1;function Ku(n,i){switch(n){case"compositionend":return Vl(i);case"keypress":return i.which!==32?null:(Gu=!0,Yu);case"textInput":return n=i.data,n===Yu&&Gu?null:n;default:return null}}function xp(n,i){if(Bi)return n==="compositionend"||!Fl&&ql(n,i)?(n=Pl(),xs=go=mn=null,Bi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Vu&&i.locale!=="ko"?null:i.data;default:return null}}var _p={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xu(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!_p[n.type]:i==="textarea"}function Zu(n,i,c,h){Bt?Ca?Ca.push(h):Ca=[h]:Bt=h,i=Gd(i,"onChange"),0<i.length&&(c=new Ea("onChange","change",null,c,h),n.push({event:c,listeners:i}))}var ks=null,Ns=null;function Sp(n){vw(n,0)}function xo(n){var i=wr(n);if(xa(i))return n}function Wu(n,i){if(n==="change")return i}var Qu=!1;if(Kn){var Yl;if(Kn){var Gl="oninput"in document;if(!Gl){var Ju=document.createElement("div");Ju.setAttribute("oninput","return;"),Gl=typeof Ju.oninput=="function"}Yl=Gl}else Yl=!1;Qu=Yl&&(!document.documentMode||9<document.documentMode)}function ed(){ks&&(ks.detachEvent("onpropertychange",td),Ns=ks=null)}function td(n){if(n.propertyName==="value"&&xo(Ns)){var i=[];Zu(i,Ns,n,Xe(n)),Ht(Sp,i)}}function Kl(n,i,c){n==="focusin"?(ed(),ks=i,Ns=c,ks.attachEvent("onpropertychange",td)):n==="focusout"&&ed()}function _o(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return xo(Ns)}function Cp(n,i){if(n==="click")return xo(i)}function Ep(n,i){if(n==="input"||n==="change")return xo(i)}function kp(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var er=typeof Object.is=="function"?Object.is:kp;function As(n,i){if(er(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var c=Object.keys(n),h=Object.keys(i);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var k=c[h];if(!fe.call(i,k)||!er(n[k],i[k]))return!1}return!0}function nd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rd(n,i){var c=nd(n);n=0;for(var h;c;){if(c.nodeType===3){if(h=n+c.textContent.length,n<=i&&h>=i)return{node:c,offset:i-n};n=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=nd(c)}}function So(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?So(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Xl(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=lr(n.document);i instanceof n.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)n=i.contentWindow;else break;i=lr(n.document)}return i}function Zl(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var Np=Kn&&"documentMode"in document&&11>=document.documentMode,ka=null,Wl=null,Hi=null,Ql=!1;function id(n,i,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ql||ka==null||ka!==lr(h)||(h=ka,"selectionStart"in h&&Zl(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Hi&&As(Hi,h)||(Hi=h,h=Gd(Wl,"onSelect"),0<h.length&&(i=new Ea("onSelect","select",null,i,c),n.push({event:i,listeners:h}),i.target=ka)))}function Er(n,i){var c={};return c[n.toLowerCase()]=i.toLowerCase(),c["Webkit"+n]="webkit"+i,c["Moz"+n]="moz"+i,c}var ni={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionrun:Er("Transition","TransitionRun"),transitionstart:Er("Transition","TransitionStart"),transitioncancel:Er("Transition","TransitionCancel"),transitionend:Er("Transition","TransitionEnd")},Jl={},ad={};Kn&&(ad=document.createElement("div").style,"AnimationEvent"in window||(delete ni.animationend.animation,delete ni.animationiteration.animation,delete ni.animationstart.animation),"TransitionEvent"in window||delete ni.transitionend.transition);function Ui(n){if(Jl[n])return Jl[n];if(!ni[n])return n;var i=ni[n],c;for(c in i)if(i.hasOwnProperty(c)&&c in ad)return Jl[n]=i[c];return n}var sd=Ui("animationend"),Co=Ui("animationiteration"),od=Ui("animationstart"),ld=Ui("transitionrun"),Ap=Ui("transitionstart"),jp=Ui("transitioncancel"),ec=Ui("transitionend"),cd=new Map,tc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tc.push("scrollEnd");function te(n,i){cd.set(n,i),Ir(i,[n])}var se=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},me=[],_e=0,Oe=0;function qe(){for(var n=_e,i=Oe=_e=0;i<n;){var c=me[i];me[i++]=null;var h=me[i];me[i++]=null;var k=me[i];me[i++]=null;var D=me[i];if(me[i++]=null,h!==null&&k!==null){var Y=h.pending;Y===null?k.next=k:(k.next=Y.next,Y.next=k),h.pending=k}D!==0&&Ge(c,k,D)}}function Ie(n,i,c,h){me[_e++]=n,me[_e++]=i,me[_e++]=c,me[_e++]=h,Oe|=h,n.lanes|=h,n=n.alternate,n!==null&&(n.lanes|=h)}function Me(n,i,c,h){return Ie(n,i,c,h),We(n)}function be(n,i){return Ie(n,null,null,i),We(n)}function Ge(n,i,c){n.lanes|=c;var h=n.alternate;h!==null&&(h.lanes|=c);for(var k=!1,D=n.return;D!==null;)D.childLanes|=c,h=D.alternate,h!==null&&(h.childLanes|=c),D.tag===22&&(n=D.stateNode,n===null||n._visibility&1||(k=!0)),n=D,D=D.return;return n.tag===3?(D=n.stateNode,k&&i!==null&&(k=31-nt(c),n=D.hiddenUpdates,h=n[k],h===null?n[k]=[i]:h.push(i),i.lane=c|536870912),D):null}function We(n){if(50<Cc)throw Cc=0,Og=null,Error(a(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Qe={};function ln(n,i,c,h){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(n,i,c,h){return new ln(n,i,c,h)}function dt(n){return n=n.prototype,!(!n||!n.isReactComponent)}function at(n,i){var c=n.alternate;return c===null?(c=Dt(n.tag,i,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=i,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&65011712,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,i=n.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function Ut(n,i){n.flags&=65011714;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,i=c.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Ur(n,i,c,h,k,D){var Y=0;if(h=n,typeof n=="function")dt(n)&&(Y=1);else if(typeof n=="string")Y=Cj(n,c,P.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case L:return n=Dt(31,c,i,k),n.elementType=L,n.lanes=D,n;case b:return Ei(c.children,k,D,i);case w:Y=8,k|=24;break;case x:return n=Dt(12,c,i,k|2),n.elementType=x,n.lanes=D,n;case E:return n=Dt(13,c,i,k),n.elementType=E,n.lanes=D,n;case j:return n=Dt(19,c,i,k),n.elementType=j,n.lanes=D,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case C:Y=10;break e;case S:Y=9;break e;case A:Y=11;break e;case T:Y=14;break e;case z:Y=16,h=null;break e}Y=29,c=Error(a(130,n===null?"null":typeof n,"")),h=null}return i=Dt(Y,c,i,k),i.elementType=n,i.type=h,i.lanes=D,i}function Ei(n,i,c,h){return n=Dt(7,n,h,i),n.lanes=c,n}function ud(n,i,c){return n=Dt(6,n,null,i),n.lanes=c,n}function Na(n){var i=Dt(18,null,null,0);return i.stateNode=n,i}function nc(n,i,c){return i=Dt(4,n.children!==null?n.children:[],n.key,i),i.lanes=c,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Eo=new WeakMap;function ur(n,i){if(typeof n=="object"&&n!==null){var c=Eo.get(n);return c!==void 0?c:(i={value:n,source:i,stack:ne(i)},Eo.set(n,i),i)}return{value:n,source:i,stack:ne(i)}}var Aa=[],ko=0,dd=null,rc=0,Fr=[],qr=0,ja=null,ki=1,Ni="";function Fi(n,i){Aa[ko++]=rc,Aa[ko++]=dd,dd=n,rc=i}function rb(n,i,c){Fr[qr++]=ki,Fr[qr++]=Ni,Fr[qr++]=ja,ja=n;var h=ki;n=Ni;var k=32-nt(h)-1;h&=~(1<<k),c+=1;var D=32-nt(i)+k;if(30<D){var Y=k-k%5;D=(h&(1<<Y)-1).toString(32),h>>=Y,k-=Y,ki=1<<32-nt(i)+k|c<<k|h,Ni=D+n}else ki=1<<D|c<<k|h,Ni=n}function Tp(n){n.return!==null&&(Fi(n,1),rb(n,1,0))}function Dp(n){for(;n===dd;)dd=Aa[--ko],Aa[ko]=null,rc=Aa[--ko],Aa[ko]=null;for(;n===ja;)ja=Fr[--qr],Fr[qr]=null,Ni=Fr[--qr],Fr[qr]=null,ki=Fr[--qr],Fr[qr]=null}function ib(n,i){Fr[qr++]=ki,Fr[qr++]=Ni,Fr[qr++]=ja,ki=i.id,Ni=i.overflow,ja=n}var Ln=null,Vt=null,St=!1,Ta=null,Vr=!1,Rp=Error(a(519));function Da(n){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ic(ur(i,n)),Rp}function ab(n){var i=n.stateNode,c=n.type,h=n.memoizedProps;switch(i[sn]=n,i[hn]=h,c){case"dialog":vt("cancel",i),vt("close",i);break;case"iframe":case"object":case"embed":vt("load",i);break;case"video":case"audio":for(c=0;c<kc.length;c++)vt(kc[c],i);break;case"source":vt("error",i);break;case"img":case"image":case"link":vt("error",i),vt("load",i);break;case"details":vt("toggle",i);break;case"input":vt("invalid",i),_a(i,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":vt("invalid",i);break;case"textarea":vt("invalid",i),Sa(i,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||h.suppressHydrationWarning===!0||_w(i.textContent,c)?(h.popover!=null&&(vt("beforetoggle",i),vt("toggle",i)),h.onScroll!=null&&vt("scroll",i),h.onScrollEnd!=null&&vt("scrollend",i),h.onClick!=null&&(i.onclick=Sr),i=!0):i=!1,i||Da(n,!0)}function sb(n){for(Ln=n.return;Ln;)switch(Ln.tag){case 5:case 31:case 13:Vr=!1;return;case 27:case 3:Vr=!0;return;default:Ln=Ln.return}}function No(n){if(n!==Ln)return!1;if(!St)return sb(n),St=!0,!1;var i=n.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||Zg(n.type,n.memoizedProps)),c=!c),c&&Vt&&Da(n),sb(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Vt=Dw(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Vt=Dw(n)}else i===27?(i=Vt,Va(n.type)?(n=ty,ty=null,Vt=n):Vt=i):Vt=Ln?Gr(n.stateNode.nextSibling):null;return!0}function js(){Vt=Ln=null,St=!1}function $p(){var n=Ta;return n!==null&&(mr===null?mr=n:mr.push.apply(mr,n),Ta=null),n}function ic(n){Ta===null?Ta=[n]:Ta.push(n)}var Mp=$(null),Ts=null,qi=null;function Ra(n,i,c){K(Mp,i._currentValue),i._currentValue=c}function Vi(n){n._currentValue=Mp.current,B(Mp)}function Op(n,i,c){for(;n!==null;){var h=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),n===c)break;n=n.return}}function zp(n,i,c,h){var k=n.child;for(k!==null&&(k.return=n);k!==null;){var D=k.dependencies;if(D!==null){var Y=k.child;D=D.firstContext;e:for(;D!==null;){var ee=D;D=k;for(var de=0;de<i.length;de++)if(ee.context===i[de]){D.lanes|=c,ee=D.alternate,ee!==null&&(ee.lanes|=c),Op(D.return,c,n),h||(Y=null);break e}D=ee.next}}else if(k.tag===18){if(Y=k.return,Y===null)throw Error(a(341));Y.lanes|=c,D=Y.alternate,D!==null&&(D.lanes|=c),Op(Y,c,n),Y=null}else Y=k.child;if(Y!==null)Y.return=k;else for(Y=k;Y!==null;){if(Y===n){Y=null;break}if(k=Y.sibling,k!==null){k.return=Y.return,Y=k;break}Y=Y.return}k=Y}}function Ao(n,i,c,h){n=null;for(var k=i,D=!1;k!==null;){if(!D){if((k.flags&524288)!==0)D=!0;else if((k.flags&262144)!==0)break}if(k.tag===10){var Y=k.alternate;if(Y===null)throw Error(a(387));if(Y=Y.memoizedProps,Y!==null){var ee=k.type;er(k.pendingProps.value,Y.value)||(n!==null?n.push(ee):n=[ee])}}else if(k===le.current){if(Y=k.alternate,Y===null)throw Error(a(387));Y.memoizedState.memoizedState!==k.memoizedState.memoizedState&&(n!==null?n.push(Dc):n=[Dc])}k=k.return}n!==null&&zp(i,n,c,h),i.flags|=262144}function fd(n){for(n=n.firstContext;n!==null;){if(!er(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ds(n){Ts=n,qi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function In(n){return ob(Ts,n)}function hd(n,i){return Ts===null&&Ds(n),ob(n,i)}function ob(n,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},qi===null){if(n===null)throw Error(a(308));qi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else qi=qi.next=i;return c}var wA=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(c,h){n.push(h)}};this.abort=function(){i.aborted=!0,n.forEach(function(c){return c()})}},xA=e.unstable_scheduleCallback,_A=e.unstable_NormalPriority,pn={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lp(){return{controller:new wA,data:new Map,refCount:0}}function ac(n){n.refCount--,n.refCount===0&&xA(_A,function(){n.controller.abort()})}var sc=null,Ip=0,jo=0,To=null;function SA(n,i){if(sc===null){var c=sc=[];Ip=0,jo=Hg(),To={status:"pending",value:void 0,then:function(h){c.push(h)}}}return Ip++,i.then(lb,lb),i}function lb(){if(--Ip===0&&sc!==null){To!==null&&(To.status="fulfilled");var n=sc;sc=null,jo=0,To=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function CA(n,i){var c=[],h={status:"pending",value:null,reason:null,then:function(k){c.push(k)}};return n.then(function(){h.status="fulfilled",h.value=i;for(var k=0;k<c.length;k++)(0,c[k])(i)},function(k){for(h.status="rejected",h.reason=k,k=0;k<c.length;k++)(0,c[k])(void 0)}),h}var cb=H.S;H.S=function(n,i){Y1=Pe(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&SA(n,i),cb!==null&&cb(n,i)};var Rs=$(null);function Pp(){var n=Rs.current;return n!==null?n:Pt.pooledCache}function md(n,i){i===null?K(Rs,Rs.current):K(Rs,i.pool)}function ub(){var n=Pp();return n===null?null:{parent:pn._currentValue,pool:n}}var Do=Error(a(460)),Bp=Error(a(474)),pd=Error(a(542)),gd={then:function(){}};function db(n){return n=n.status,n==="fulfilled"||n==="rejected"}function fb(n,i,c){switch(c=n[c],c===void 0?n.push(i):c!==i&&(i.then(Sr,Sr),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,mb(n),n;default:if(typeof i.status=="string")i.then(Sr,Sr);else{if(n=Pt,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=i,n.status="pending",n.then(function(h){if(i.status==="pending"){var k=i;k.status="fulfilled",k.value=h}},function(h){if(i.status==="pending"){var k=i;k.status="rejected",k.reason=h}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,mb(n),n}throw Ms=i,Do}}function $s(n){try{var i=n._init;return i(n._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ms=c,Do):c}}var Ms=null;function hb(){if(Ms===null)throw Error(a(459));var n=Ms;return Ms=null,n}function mb(n){if(n===Do||n===pd)throw Error(a(483))}var Ro=null,oc=0;function yd(n){var i=oc;return oc+=1,Ro===null&&(Ro=[]),fb(Ro,n,i)}function lc(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function vd(n,i){throw i.$$typeof===g?Error(a(525)):(n=Object.prototype.toString.call(i),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function pb(n){function i(ge,pe){if(n){var we=ge.deletions;we===null?(ge.deletions=[pe],ge.flags|=16):we.push(pe)}}function c(ge,pe){if(!n)return null;for(;pe!==null;)i(ge,pe),pe=pe.sibling;return null}function h(ge){for(var pe=new Map;ge!==null;)ge.key!==null?pe.set(ge.key,ge):pe.set(ge.index,ge),ge=ge.sibling;return pe}function k(ge,pe){return ge=at(ge,pe),ge.index=0,ge.sibling=null,ge}function D(ge,pe,we){return ge.index=we,n?(we=ge.alternate,we!==null?(we=we.index,we<pe?(ge.flags|=67108866,pe):we):(ge.flags|=67108866,pe)):(ge.flags|=1048576,pe)}function Y(ge){return n&&ge.alternate===null&&(ge.flags|=67108866),ge}function ee(ge,pe,we,Te){return pe===null||pe.tag!==6?(pe=ud(we,ge.mode,Te),pe.return=ge,pe):(pe=k(pe,we),pe.return=ge,pe)}function de(ge,pe,we,Te){var tt=we.type;return tt===b?je(ge,pe,we.props.children,Te,we.key):pe!==null&&(pe.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===z&&$s(tt)===pe.type)?(pe=k(pe,we.props),lc(pe,we),pe.return=ge,pe):(pe=Ur(we.type,we.key,we.props,null,ge.mode,Te),lc(pe,we),pe.return=ge,pe)}function xe(ge,pe,we,Te){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==we.containerInfo||pe.stateNode.implementation!==we.implementation?(pe=nc(we,ge.mode,Te),pe.return=ge,pe):(pe=k(pe,we.children||[]),pe.return=ge,pe)}function je(ge,pe,we,Te,tt){return pe===null||pe.tag!==7?(pe=Ei(we,ge.mode,Te,tt),pe.return=ge,pe):(pe=k(pe,we),pe.return=ge,pe)}function De(ge,pe,we){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return pe=ud(""+pe,ge.mode,we),pe.return=ge,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case y:return we=Ur(pe.type,pe.key,pe.props,null,ge.mode,we),lc(we,pe),we.return=ge,we;case _:return pe=nc(pe,ge.mode,we),pe.return=ge,pe;case z:return pe=$s(pe),De(ge,pe,we)}if(G(pe)||M(pe))return pe=Ei(pe,ge.mode,we,null),pe.return=ge,pe;if(typeof pe.then=="function")return De(ge,yd(pe),we);if(pe.$$typeof===C)return De(ge,hd(ge,pe),we);vd(ge,pe)}return null}function Se(ge,pe,we,Te){var tt=pe!==null?pe.key:null;if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return tt!==null?null:ee(ge,pe,""+we,Te);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case y:return we.key===tt?de(ge,pe,we,Te):null;case _:return we.key===tt?xe(ge,pe,we,Te):null;case z:return we=$s(we),Se(ge,pe,we,Te)}if(G(we)||M(we))return tt!==null?null:je(ge,pe,we,Te,null);if(typeof we.then=="function")return Se(ge,pe,yd(we),Te);if(we.$$typeof===C)return Se(ge,pe,hd(ge,we),Te);vd(ge,we)}return null}function Ee(ge,pe,we,Te,tt){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return ge=ge.get(we)||null,ee(pe,ge,""+Te,tt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case y:return ge=ge.get(Te.key===null?we:Te.key)||null,de(pe,ge,Te,tt);case _:return ge=ge.get(Te.key===null?we:Te.key)||null,xe(pe,ge,Te,tt);case z:return Te=$s(Te),Ee(ge,pe,we,Te,tt)}if(G(Te)||M(Te))return ge=ge.get(we)||null,je(pe,ge,Te,tt,null);if(typeof Te.then=="function")return Ee(ge,pe,we,yd(Te),tt);if(Te.$$typeof===C)return Ee(ge,pe,we,hd(pe,Te),tt);vd(pe,Te)}return null}function Ke(ge,pe,we,Te){for(var tt=null,Nt=null,Je=pe,ft=pe=0,xt=null;Je!==null&&ft<we.length;ft++){Je.index>ft?(xt=Je,Je=null):xt=Je.sibling;var At=Se(ge,Je,we[ft],Te);if(At===null){Je===null&&(Je=xt);break}n&&Je&&At.alternate===null&&i(ge,Je),pe=D(At,pe,ft),Nt===null?tt=At:Nt.sibling=At,Nt=At,Je=xt}if(ft===we.length)return c(ge,Je),St&&Fi(ge,ft),tt;if(Je===null){for(;ft<we.length;ft++)Je=De(ge,we[ft],Te),Je!==null&&(pe=D(Je,pe,ft),Nt===null?tt=Je:Nt.sibling=Je,Nt=Je);return St&&Fi(ge,ft),tt}for(Je=h(Je);ft<we.length;ft++)xt=Ee(Je,ge,ft,we[ft],Te),xt!==null&&(n&&xt.alternate!==null&&Je.delete(xt.key===null?ft:xt.key),pe=D(xt,pe,ft),Nt===null?tt=xt:Nt.sibling=xt,Nt=xt);return n&&Je.forEach(function(Za){return i(ge,Za)}),St&&Fi(ge,ft),tt}function rt(ge,pe,we,Te){if(we==null)throw Error(a(151));for(var tt=null,Nt=null,Je=pe,ft=pe=0,xt=null,At=we.next();Je!==null&&!At.done;ft++,At=we.next()){Je.index>ft?(xt=Je,Je=null):xt=Je.sibling;var Za=Se(ge,Je,At.value,Te);if(Za===null){Je===null&&(Je=xt);break}n&&Je&&Za.alternate===null&&i(ge,Je),pe=D(Za,pe,ft),Nt===null?tt=Za:Nt.sibling=Za,Nt=Za,Je=xt}if(At.done)return c(ge,Je),St&&Fi(ge,ft),tt;if(Je===null){for(;!At.done;ft++,At=we.next())At=De(ge,At.value,Te),At!==null&&(pe=D(At,pe,ft),Nt===null?tt=At:Nt.sibling=At,Nt=At);return St&&Fi(ge,ft),tt}for(Je=h(Je);!At.done;ft++,At=we.next())At=Ee(Je,ge,ft,At.value,Te),At!==null&&(n&&At.alternate!==null&&Je.delete(At.key===null?ft:At.key),pe=D(At,pe,ft),Nt===null?tt=At:Nt.sibling=At,Nt=At);return n&&Je.forEach(function(Oj){return i(ge,Oj)}),St&&Fi(ge,ft),tt}function It(ge,pe,we,Te){if(typeof we=="object"&&we!==null&&we.type===b&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case y:e:{for(var tt=we.key;pe!==null;){if(pe.key===tt){if(tt=we.type,tt===b){if(pe.tag===7){c(ge,pe.sibling),Te=k(pe,we.props.children),Te.return=ge,ge=Te;break e}}else if(pe.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===z&&$s(tt)===pe.type){c(ge,pe.sibling),Te=k(pe,we.props),lc(Te,we),Te.return=ge,ge=Te;break e}c(ge,pe);break}else i(ge,pe);pe=pe.sibling}we.type===b?(Te=Ei(we.props.children,ge.mode,Te,we.key),Te.return=ge,ge=Te):(Te=Ur(we.type,we.key,we.props,null,ge.mode,Te),lc(Te,we),Te.return=ge,ge=Te)}return Y(ge);case _:e:{for(tt=we.key;pe!==null;){if(pe.key===tt)if(pe.tag===4&&pe.stateNode.containerInfo===we.containerInfo&&pe.stateNode.implementation===we.implementation){c(ge,pe.sibling),Te=k(pe,we.children||[]),Te.return=ge,ge=Te;break e}else{c(ge,pe);break}else i(ge,pe);pe=pe.sibling}Te=nc(we,ge.mode,Te),Te.return=ge,ge=Te}return Y(ge);case z:return we=$s(we),It(ge,pe,we,Te)}if(G(we))return Ke(ge,pe,we,Te);if(M(we)){if(tt=M(we),typeof tt!="function")throw Error(a(150));return we=tt.call(we),rt(ge,pe,we,Te)}if(typeof we.then=="function")return It(ge,pe,yd(we),Te);if(we.$$typeof===C)return It(ge,pe,hd(ge,we),Te);vd(ge,we)}return typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint"?(we=""+we,pe!==null&&pe.tag===6?(c(ge,pe.sibling),Te=k(pe,we),Te.return=ge,ge=Te):(c(ge,pe),Te=ud(we,ge.mode,Te),Te.return=ge,ge=Te),Y(ge)):c(ge,pe)}return function(ge,pe,we,Te){try{oc=0;var tt=It(ge,pe,we,Te);return Ro=null,tt}catch(Je){if(Je===Do||Je===pd)throw Je;var Nt=Dt(29,Je,null,ge.mode);return Nt.lanes=Te,Nt.return=ge,Nt}}}var Os=pb(!0),gb=pb(!1),$a=!1;function Hp(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Up(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ma(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Oa(n,i,c){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Tt&2)!==0){var k=h.pending;return k===null?i.next=i:(i.next=k.next,k.next=i),h.pending=i,i=We(n),Ge(n,null,c),i}return Ie(n,h,i,c),We(n)}function cc(n,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var h=i.lanes;h&=n.pendingLanes,c|=h,i.lanes=c,An(n,c)}}function Fp(n,i){var c=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var k=null,D=null;if(c=c.firstBaseUpdate,c!==null){do{var Y={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};D===null?k=D=Y:D=D.next=Y,c=c.next}while(c!==null);D===null?k=D=i:D=D.next=i}else k=D=i;c={baseState:h.baseState,firstBaseUpdate:k,lastBaseUpdate:D,shared:h.shared,callbacks:h.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=i:n.next=i,c.lastBaseUpdate=i}var qp=!1;function uc(){if(qp){var n=To;if(n!==null)throw n}}function dc(n,i,c,h){qp=!1;var k=n.updateQueue;$a=!1;var D=k.firstBaseUpdate,Y=k.lastBaseUpdate,ee=k.shared.pending;if(ee!==null){k.shared.pending=null;var de=ee,xe=de.next;de.next=null,Y===null?D=xe:Y.next=xe,Y=de;var je=n.alternate;je!==null&&(je=je.updateQueue,ee=je.lastBaseUpdate,ee!==Y&&(ee===null?je.firstBaseUpdate=xe:ee.next=xe,je.lastBaseUpdate=de))}if(D!==null){var De=k.baseState;Y=0,je=xe=de=null,ee=D;do{var Se=ee.lane&-536870913,Ee=Se!==ee.lane;if(Ee?(wt&Se)===Se:(h&Se)===Se){Se!==0&&Se===jo&&(qp=!0),je!==null&&(je=je.next={lane:0,tag:ee.tag,payload:ee.payload,callback:null,next:null});e:{var Ke=n,rt=ee;Se=i;var It=c;switch(rt.tag){case 1:if(Ke=rt.payload,typeof Ke=="function"){De=Ke.call(It,De,Se);break e}De=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=rt.payload,Se=typeof Ke=="function"?Ke.call(It,De,Se):Ke,Se==null)break e;De=p({},De,Se);break e;case 2:$a=!0}}Se=ee.callback,Se!==null&&(n.flags|=64,Ee&&(n.flags|=8192),Ee=k.callbacks,Ee===null?k.callbacks=[Se]:Ee.push(Se))}else Ee={lane:Se,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},je===null?(xe=je=Ee,de=De):je=je.next=Ee,Y|=Se;if(ee=ee.next,ee===null){if(ee=k.shared.pending,ee===null)break;Ee=ee,ee=Ee.next,Ee.next=null,k.lastBaseUpdate=Ee,k.shared.pending=null}}while(!0);je===null&&(de=De),k.baseState=de,k.firstBaseUpdate=xe,k.lastBaseUpdate=je,D===null&&(k.shared.lanes=0),Ba|=Y,n.lanes=Y,n.memoizedState=De}}function yb(n,i){if(typeof n!="function")throw Error(a(191,n));n.call(i)}function vb(n,i){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)yb(c[n],i)}var $o=$(null),bd=$(0);function bb(n,i){n=ea,K(bd,n),K($o,i),ea=n|i.baseLanes}function Vp(){K(bd,ea),K($o,$o.current)}function Yp(){ea=bd.current,B($o),B(bd)}var kr=$(null),Yr=null;function za(n){var i=n.alternate;K(cn,cn.current&1),K(kr,n),Yr===null&&(i===null||$o.current!==null||i.memoizedState!==null)&&(Yr=n)}function Gp(n){K(cn,cn.current),K(kr,n),Yr===null&&(Yr=n)}function wb(n){n.tag===22?(K(cn,cn.current),K(kr,n),Yr===null&&(Yr=n)):La()}function La(){K(cn,cn.current),K(kr,kr.current)}function Nr(n){B(kr),Yr===n&&(Yr=null),B(cn)}var cn=$(0);function wd(n){for(var i=n;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Jg(c)||ey(c)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Yi=0,lt=null,zt=null,gn=null,xd=!1,Mo=!1,zs=!1,_d=0,fc=0,Oo=null,EA=0;function nn(){throw Error(a(321))}function Kp(n,i){if(i===null)return!1;for(var c=0;c<i.length&&c<n.length;c++)if(!er(n[c],i[c]))return!1;return!0}function Xp(n,i,c,h,k,D){return Yi=D,lt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=n===null||n.memoizedState===null?r1:ug,zs=!1,D=c(h,k),zs=!1,Mo&&(D=_b(i,c,h,k)),xb(n),D}function xb(n){H.H=pc;var i=zt!==null&&zt.next!==null;if(Yi=0,gn=zt=lt=null,xd=!1,fc=0,Oo=null,i)throw Error(a(300));n===null||yn||(n=n.dependencies,n!==null&&fd(n)&&(yn=!0))}function _b(n,i,c,h){lt=n;var k=0;do{if(Mo&&(Oo=null),fc=0,Mo=!1,25<=k)throw Error(a(301));if(k+=1,gn=zt=null,n.updateQueue!=null){var D=n.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}H.H=i1,D=i(c,h)}while(Mo);return D}function kA(){var n=H.H,i=n.useState()[0];return i=typeof i.then=="function"?hc(i):i,n=n.useState()[0],(zt!==null?zt.memoizedState:null)!==n&&(lt.flags|=1024),i}function Zp(){var n=_d!==0;return _d=0,n}function Wp(n,i,c){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~c}function Qp(n){if(xd){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}xd=!1}Yi=0,gn=zt=lt=null,Mo=!1,fc=_d=0,Oo=null}function tr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?lt.memoizedState=gn=n:gn=gn.next=n,gn}function un(){if(zt===null){var n=lt.alternate;n=n!==null?n.memoizedState:null}else n=zt.next;var i=gn===null?lt.memoizedState:gn.next;if(i!==null)gn=i,zt=n;else{if(n===null)throw lt.alternate===null?Error(a(467)):Error(a(310));zt=n,n={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},gn===null?lt.memoizedState=gn=n:gn=gn.next=n}return gn}function Sd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hc(n){var i=fc;return fc+=1,Oo===null&&(Oo=[]),n=fb(Oo,n,i),i=lt,(gn===null?i.memoizedState:gn.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?r1:ug),n}function Cd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return hc(n);if(n.$$typeof===C)return In(n)}throw Error(a(438,String(n)))}function Jp(n){var i=null,c=lt.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var h=lt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(i={data:h.data.map(function(k){return k.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=Sd(),lt.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(n),h=0;h<n;h++)c[h]=V;return i.index++,c}function Gi(n,i){return typeof i=="function"?i(n):i}function Ed(n){var i=un();return eg(i,zt,n)}function eg(n,i,c){var h=n.queue;if(h===null)throw Error(a(311));h.lastRenderedReducer=c;var k=n.baseQueue,D=h.pending;if(D!==null){if(k!==null){var Y=k.next;k.next=D.next,D.next=Y}i.baseQueue=k=D,h.pending=null}if(D=n.baseState,k===null)n.memoizedState=D;else{i=k.next;var ee=Y=null,de=null,xe=i,je=!1;do{var De=xe.lane&-536870913;if(De!==xe.lane?(wt&De)===De:(Yi&De)===De){var Se=xe.revertLane;if(Se===0)de!==null&&(de=de.next={lane:0,revertLane:0,gesture:null,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),De===jo&&(je=!0);else if((Yi&Se)===Se){xe=xe.next,Se===jo&&(je=!0);continue}else De={lane:0,revertLane:xe.revertLane,gesture:null,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},de===null?(ee=de=De,Y=D):de=de.next=De,lt.lanes|=Se,Ba|=Se;De=xe.action,zs&&c(D,De),D=xe.hasEagerState?xe.eagerState:c(D,De)}else Se={lane:De,revertLane:xe.revertLane,gesture:xe.gesture,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},de===null?(ee=de=Se,Y=D):de=de.next=Se,lt.lanes|=De,Ba|=De;xe=xe.next}while(xe!==null&&xe!==i);if(de===null?Y=D:de.next=ee,!er(D,n.memoizedState)&&(yn=!0,je&&(c=To,c!==null)))throw c;n.memoizedState=D,n.baseState=Y,n.baseQueue=de,h.lastRenderedState=D}return k===null&&(h.lanes=0),[n.memoizedState,h.dispatch]}function tg(n){var i=un(),c=i.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=n;var h=c.dispatch,k=c.pending,D=i.memoizedState;if(k!==null){c.pending=null;var Y=k=k.next;do D=n(D,Y.action),Y=Y.next;while(Y!==k);er(D,i.memoizedState)||(yn=!0),i.memoizedState=D,i.baseQueue===null&&(i.baseState=D),c.lastRenderedState=D}return[D,h]}function Sb(n,i,c){var h=lt,k=un(),D=St;if(D){if(c===void 0)throw Error(a(407));c=c()}else c=i();var Y=!er((zt||k).memoizedState,c);if(Y&&(k.memoizedState=c,yn=!0),k=k.queue,ig(kb.bind(null,h,k,n),[n]),k.getSnapshot!==i||Y||gn!==null&&gn.memoizedState.tag&1){if(h.flags|=2048,zo(9,{destroy:void 0},Eb.bind(null,h,k,c,i),null),Pt===null)throw Error(a(349));D||(Yi&127)!==0||Cb(h,i,c)}return c}function Cb(n,i,c){n.flags|=16384,n={getSnapshot:i,value:c},i=lt.updateQueue,i===null?(i=Sd(),lt.updateQueue=i,i.stores=[n]):(c=i.stores,c===null?i.stores=[n]:c.push(n))}function Eb(n,i,c,h){i.value=c,i.getSnapshot=h,Nb(i)&&Ab(n)}function kb(n,i,c){return c(function(){Nb(i)&&Ab(n)})}function Nb(n){var i=n.getSnapshot;n=n.value;try{var c=i();return!er(n,c)}catch{return!0}}function Ab(n){var i=be(n,2);i!==null&&pr(i,n,2)}function ng(n){var i=tr();if(typeof n=="function"){var c=n;if(n=c(),zs){mt(!0);try{c()}finally{mt(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:n},i}function jb(n,i,c,h){return n.baseState=c,eg(n,zt,typeof h=="function"?h:Gi)}function NA(n,i,c,h,k){if(Ad(n))throw Error(a(485));if(n=i.action,n!==null){var D={payload:k,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){D.listeners.push(Y)}};H.T!==null?c(!0):D.isTransition=!1,h(D),c=i.pending,c===null?(D.next=i.pending=D,Tb(i,D)):(D.next=c.next,i.pending=c.next=D)}}function Tb(n,i){var c=i.action,h=i.payload,k=n.state;if(i.isTransition){var D=H.T,Y={};H.T=Y;try{var ee=c(k,h),de=H.S;de!==null&&de(Y,ee),Db(n,i,ee)}catch(xe){rg(n,i,xe)}finally{D!==null&&Y.types!==null&&(D.types=Y.types),H.T=D}}else try{D=c(k,h),Db(n,i,D)}catch(xe){rg(n,i,xe)}}function Db(n,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){Rb(n,i,h)},function(h){return rg(n,i,h)}):Rb(n,i,c)}function Rb(n,i,c){i.status="fulfilled",i.value=c,$b(i),n.state=c,i=n.pending,i!==null&&(c=i.next,c===i?n.pending=null:(c=c.next,i.next=c,Tb(n,c)))}function rg(n,i,c){var h=n.pending;if(n.pending=null,h!==null){h=h.next;do i.status="rejected",i.reason=c,$b(i),i=i.next;while(i!==h)}n.action=null}function $b(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Mb(n,i){return i}function Ob(n,i){if(St){var c=Pt.formState;if(c!==null){e:{var h=lt;if(St){if(Vt){t:{for(var k=Vt,D=Vr;k.nodeType!==8;){if(!D){k=null;break t}if(k=Gr(k.nextSibling),k===null){k=null;break t}}D=k.data,k=D==="F!"||D==="F"?k:null}if(k){Vt=Gr(k.nextSibling),h=k.data==="F!";break e}}Da(h)}h=!1}h&&(i=c[0])}}return c=tr(),c.memoizedState=c.baseState=i,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mb,lastRenderedState:i},c.queue=h,c=e1.bind(null,lt,h),h.dispatch=c,h=ng(!1),D=cg.bind(null,lt,!1,h.queue),h=tr(),k={state:i,dispatch:null,action:n,pending:null},h.queue=k,c=NA.bind(null,lt,k,D,c),k.dispatch=c,h.memoizedState=n,[i,c,!1]}function zb(n){var i=un();return Lb(i,zt,n)}function Lb(n,i,c){if(i=eg(n,i,Mb)[0],n=Ed(Gi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var h=hc(i)}catch(Y){throw Y===Do?pd:Y}else h=i;i=un();var k=i.queue,D=k.dispatch;return c!==i.memoizedState&&(lt.flags|=2048,zo(9,{destroy:void 0},AA.bind(null,k,c),null)),[h,D,n]}function AA(n,i){n.action=i}function Ib(n){var i=un(),c=zt;if(c!==null)return Lb(i,c,n);un(),i=i.memoizedState,c=un();var h=c.queue.dispatch;return c.memoizedState=n,[i,h,!1]}function zo(n,i,c,h){return n={tag:n,create:c,deps:h,inst:i,next:null},i=lt.updateQueue,i===null&&(i=Sd(),lt.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=n.next=n:(h=c.next,c.next=n,n.next=h,i.lastEffect=n),n}function Pb(){return un().memoizedState}function kd(n,i,c,h){var k=tr();lt.flags|=n,k.memoizedState=zo(1|i,{destroy:void 0},c,h===void 0?null:h)}function Nd(n,i,c,h){var k=un();h=h===void 0?null:h;var D=k.memoizedState.inst;zt!==null&&h!==null&&Kp(h,zt.memoizedState.deps)?k.memoizedState=zo(i,D,c,h):(lt.flags|=n,k.memoizedState=zo(1|i,D,c,h))}function Bb(n,i){kd(8390656,8,n,i)}function ig(n,i){Nd(2048,8,n,i)}function jA(n){lt.flags|=4;var i=lt.updateQueue;if(i===null)i=Sd(),lt.updateQueue=i,i.events=[n];else{var c=i.events;c===null?i.events=[n]:c.push(n)}}function Hb(n){var i=un().memoizedState;return jA({ref:i,nextImpl:n}),function(){if((Tt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Ub(n,i){return Nd(4,2,n,i)}function Fb(n,i){return Nd(4,4,n,i)}function qb(n,i){if(typeof i=="function"){n=n();var c=i(n);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Vb(n,i,c){c=c!=null?c.concat([n]):null,Nd(4,4,qb.bind(null,i,n),c)}function ag(){}function Yb(n,i){var c=un();i=i===void 0?null:i;var h=c.memoizedState;return i!==null&&Kp(i,h[1])?h[0]:(c.memoizedState=[n,i],n)}function Gb(n,i){var c=un();i=i===void 0?null:i;var h=c.memoizedState;if(i!==null&&Kp(i,h[1]))return h[0];if(h=n(),zs){mt(!0);try{n()}finally{mt(!1)}}return c.memoizedState=[h,i],h}function sg(n,i,c){return c===void 0||(Yi&1073741824)!==0&&(wt&261930)===0?n.memoizedState=i:(n.memoizedState=c,n=K1(),lt.lanes|=n,Ba|=n,c)}function Kb(n,i,c,h){return er(c,i)?c:$o.current!==null?(n=sg(n,c,h),er(n,i)||(yn=!0),n):(Yi&42)===0||(Yi&1073741824)!==0&&(wt&261930)===0?(yn=!0,n.memoizedState=c):(n=K1(),lt.lanes|=n,Ba|=n,i)}function Xb(n,i,c,h,k){var D=U.p;U.p=D!==0&&8>D?D:8;var Y=H.T,ee={};H.T=ee,cg(n,!1,i,c);try{var de=k(),xe=H.S;if(xe!==null&&xe(ee,de),de!==null&&typeof de=="object"&&typeof de.then=="function"){var je=CA(de,h);mc(n,i,je,Tr(n))}else mc(n,i,h,Tr(n))}catch(De){mc(n,i,{then:function(){},status:"rejected",reason:De},Tr())}finally{U.p=D,Y!==null&&ee.types!==null&&(Y.types=ee.types),H.T=Y}}function TA(){}function og(n,i,c,h){if(n.tag!==5)throw Error(a(476));var k=Zb(n).queue;Xb(n,k,i,Z,c===null?TA:function(){return Wb(n),c(h)})}function Zb(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:Z},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:c},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Wb(n){var i=Zb(n);i.next===null&&(i=n.alternate.memoizedState),mc(n,i.next.queue,{},Tr())}function lg(){return In(Dc)}function Qb(){return un().memoizedState}function Jb(){return un().memoizedState}function DA(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var c=Tr();n=Ma(c);var h=Oa(i,n,c);h!==null&&(pr(h,i,c),cc(h,i,c)),i={cache:Lp()},n.payload=i;return}i=i.return}}function RA(n,i,c){var h=Tr();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ad(n)?t1(i,c):(c=Me(n,i,c,h),c!==null&&(pr(c,n,h),n1(c,i,h)))}function e1(n,i,c){var h=Tr();mc(n,i,c,h)}function mc(n,i,c,h){var k={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ad(n))t1(i,k);else{var D=n.alternate;if(n.lanes===0&&(D===null||D.lanes===0)&&(D=i.lastRenderedReducer,D!==null))try{var Y=i.lastRenderedState,ee=D(Y,c);if(k.hasEagerState=!0,k.eagerState=ee,er(ee,Y))return Ie(n,i,k,0),Pt===null&&qe(),!1}catch{}if(c=Me(n,i,k,h),c!==null)return pr(c,n,h),n1(c,i,h),!0}return!1}function cg(n,i,c,h){if(h={lane:2,revertLane:Hg(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Ad(n)){if(i)throw Error(a(479))}else i=Me(n,c,h,2),i!==null&&pr(i,n,2)}function Ad(n){var i=n.alternate;return n===lt||i!==null&&i===lt}function t1(n,i){Mo=xd=!0;var c=n.pending;c===null?i.next=i:(i.next=c.next,c.next=i),n.pending=i}function n1(n,i,c){if((c&4194048)!==0){var h=i.lanes;h&=n.pendingLanes,c|=h,i.lanes=c,An(n,c)}}var pc={readContext:In,use:Cd,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useLayoutEffect:nn,useInsertionEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useSyncExternalStore:nn,useId:nn,useHostTransitionStatus:nn,useFormState:nn,useActionState:nn,useOptimistic:nn,useMemoCache:nn,useCacheRefresh:nn};pc.useEffectEvent=nn;var r1={readContext:In,use:Cd,useCallback:function(n,i){return tr().memoizedState=[n,i===void 0?null:i],n},useContext:In,useEffect:Bb,useImperativeHandle:function(n,i,c){c=c!=null?c.concat([n]):null,kd(4194308,4,qb.bind(null,i,n),c)},useLayoutEffect:function(n,i){return kd(4194308,4,n,i)},useInsertionEffect:function(n,i){kd(4,2,n,i)},useMemo:function(n,i){var c=tr();i=i===void 0?null:i;var h=n();if(zs){mt(!0);try{n()}finally{mt(!1)}}return c.memoizedState=[h,i],h},useReducer:function(n,i,c){var h=tr();if(c!==void 0){var k=c(i);if(zs){mt(!0);try{c(i)}finally{mt(!1)}}}else k=i;return h.memoizedState=h.baseState=k,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:k},h.queue=n,n=n.dispatch=RA.bind(null,lt,n),[h.memoizedState,n]},useRef:function(n){var i=tr();return n={current:n},i.memoizedState=n},useState:function(n){n=ng(n);var i=n.queue,c=e1.bind(null,lt,i);return i.dispatch=c,[n.memoizedState,c]},useDebugValue:ag,useDeferredValue:function(n,i){var c=tr();return sg(c,n,i)},useTransition:function(){var n=ng(!1);return n=Xb.bind(null,lt,n.queue,!0,!1),tr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,c){var h=lt,k=tr();if(St){if(c===void 0)throw Error(a(407));c=c()}else{if(c=i(),Pt===null)throw Error(a(349));(wt&127)!==0||Cb(h,i,c)}k.memoizedState=c;var D={value:c,getSnapshot:i};return k.queue=D,Bb(kb.bind(null,h,D,n),[n]),h.flags|=2048,zo(9,{destroy:void 0},Eb.bind(null,h,D,c,i),null),c},useId:function(){var n=tr(),i=Pt.identifierPrefix;if(St){var c=Ni,h=ki;c=(h&~(1<<32-nt(h)-1)).toString(32)+c,i="_"+i+"R_"+c,c=_d++,0<c&&(i+="H"+c.toString(32)),i+="_"}else c=EA++,i="_"+i+"r_"+c.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:lg,useFormState:Ob,useActionState:Ob,useOptimistic:function(n){var i=tr();i.memoizedState=i.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=cg.bind(null,lt,!0,c),c.dispatch=i,[n,i]},useMemoCache:Jp,useCacheRefresh:function(){return tr().memoizedState=DA.bind(null,lt)},useEffectEvent:function(n){var i=tr(),c={impl:n};return i.memoizedState=c,function(){if((Tt&2)!==0)throw Error(a(440));return c.impl.apply(void 0,arguments)}}},ug={readContext:In,use:Cd,useCallback:Yb,useContext:In,useEffect:ig,useImperativeHandle:Vb,useInsertionEffect:Ub,useLayoutEffect:Fb,useMemo:Gb,useReducer:Ed,useRef:Pb,useState:function(){return Ed(Gi)},useDebugValue:ag,useDeferredValue:function(n,i){var c=un();return Kb(c,zt.memoizedState,n,i)},useTransition:function(){var n=Ed(Gi)[0],i=un().memoizedState;return[typeof n=="boolean"?n:hc(n),i]},useSyncExternalStore:Sb,useId:Qb,useHostTransitionStatus:lg,useFormState:zb,useActionState:zb,useOptimistic:function(n,i){var c=un();return jb(c,zt,n,i)},useMemoCache:Jp,useCacheRefresh:Jb};ug.useEffectEvent=Hb;var i1={readContext:In,use:Cd,useCallback:Yb,useContext:In,useEffect:ig,useImperativeHandle:Vb,useInsertionEffect:Ub,useLayoutEffect:Fb,useMemo:Gb,useReducer:tg,useRef:Pb,useState:function(){return tg(Gi)},useDebugValue:ag,useDeferredValue:function(n,i){var c=un();return zt===null?sg(c,n,i):Kb(c,zt.memoizedState,n,i)},useTransition:function(){var n=tg(Gi)[0],i=un().memoizedState;return[typeof n=="boolean"?n:hc(n),i]},useSyncExternalStore:Sb,useId:Qb,useHostTransitionStatus:lg,useFormState:Ib,useActionState:Ib,useOptimistic:function(n,i){var c=un();return zt!==null?jb(c,zt,n,i):(c.baseState=n,[n,c.queue.dispatch])},useMemoCache:Jp,useCacheRefresh:Jb};i1.useEffectEvent=Hb;function dg(n,i,c,h){i=n.memoizedState,c=c(h,i),c=c==null?i:p({},i,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var fg={enqueueSetState:function(n,i,c){n=n._reactInternals;var h=Tr(),k=Ma(h);k.payload=i,c!=null&&(k.callback=c),i=Oa(n,k,h),i!==null&&(pr(i,n,h),cc(i,n,h))},enqueueReplaceState:function(n,i,c){n=n._reactInternals;var h=Tr(),k=Ma(h);k.tag=1,k.payload=i,c!=null&&(k.callback=c),i=Oa(n,k,h),i!==null&&(pr(i,n,h),cc(i,n,h))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var c=Tr(),h=Ma(c);h.tag=2,i!=null&&(h.callback=i),i=Oa(n,h,c),i!==null&&(pr(i,n,c),cc(i,n,c))}};function a1(n,i,c,h,k,D,Y){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,D,Y):i.prototype&&i.prototype.isPureReactComponent?!As(c,h)||!As(k,D):!0}function s1(n,i,c,h){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,h),i.state!==n&&fg.enqueueReplaceState(i,i.state,null)}function Ls(n,i){var c=i;if("ref"in i){c={};for(var h in i)h!=="ref"&&(c[h]=i[h])}if(n=n.defaultProps){c===i&&(c=p({},c));for(var k in n)c[k]===void 0&&(c[k]=n[k])}return c}function o1(n){se(n)}function l1(n){console.error(n)}function c1(n){se(n)}function jd(n,i){try{var c=n.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(h){setTimeout(function(){throw h})}}function u1(n,i,c){try{var h=n.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(k){setTimeout(function(){throw k})}}function hg(n,i,c){return c=Ma(c),c.tag=3,c.payload={element:null},c.callback=function(){jd(n,i)},c}function d1(n){return n=Ma(n),n.tag=3,n}function f1(n,i,c,h){var k=c.type.getDerivedStateFromError;if(typeof k=="function"){var D=h.value;n.payload=function(){return k(D)},n.callback=function(){u1(i,c,h)}}var Y=c.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(n.callback=function(){u1(i,c,h),typeof k!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var ee=h.stack;this.componentDidCatch(h.value,{componentStack:ee!==null?ee:""})})}function $A(n,i,c,h,k){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(i=c.alternate,i!==null&&Ao(i,c,k,!0),c=kr.current,c!==null){switch(c.tag){case 31:case 13:return Yr===null?Hd():c.alternate===null&&rn===0&&(rn=3),c.flags&=-257,c.flags|=65536,c.lanes=k,h===gd?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([h]):i.add(h),Ig(n,h,k)),!1;case 22:return c.flags|=65536,h===gd?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([h]):c.add(h)),Ig(n,h,k)),!1}throw Error(a(435,c.tag))}return Ig(n,h,k),Hd(),!1}if(St)return i=kr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=k,h!==Rp&&(n=Error(a(422),{cause:h}),ic(ur(n,c)))):(h!==Rp&&(i=Error(a(423),{cause:h}),ic(ur(i,c))),n=n.current.alternate,n.flags|=65536,k&=-k,n.lanes|=k,h=ur(h,c),k=hg(n.stateNode,h,k),Fp(n,k),rn!==4&&(rn=2)),!1;var D=Error(a(520),{cause:h});if(D=ur(D,c),Sc===null?Sc=[D]:Sc.push(D),rn!==4&&(rn=2),i===null)return!0;h=ur(h,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,n=k&-k,c.lanes|=n,n=hg(c.stateNode,h,n),Fp(c,n),!1;case 1:if(i=c.type,D=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Ha===null||!Ha.has(D))))return c.flags|=65536,k&=-k,c.lanes|=k,k=d1(k),f1(k,n,c,h),Fp(c,k),!1}c=c.return}while(c!==null);return!1}var mg=Error(a(461)),yn=!1;function Pn(n,i,c,h){i.child=n===null?gb(i,null,c,h):Os(i,n.child,c,h)}function h1(n,i,c,h,k){c=c.render;var D=i.ref;if("ref"in h){var Y={};for(var ee in h)ee!=="ref"&&(Y[ee]=h[ee])}else Y=h;return Ds(i),h=Xp(n,i,c,Y,D,k),ee=Zp(),n!==null&&!yn?(Wp(n,i,k),Ki(n,i,k)):(St&&ee&&Tp(i),i.flags|=1,Pn(n,i,h,k),i.child)}function m1(n,i,c,h,k){if(n===null){var D=c.type;return typeof D=="function"&&!dt(D)&&D.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=D,p1(n,i,D,h,k)):(n=Ur(c.type,null,h,i,i.mode,k),n.ref=i.ref,n.return=i,i.child=n)}if(D=n.child,!_g(n,k)){var Y=D.memoizedProps;if(c=c.compare,c=c!==null?c:As,c(Y,h)&&n.ref===i.ref)return Ki(n,i,k)}return i.flags|=1,n=at(D,h),n.ref=i.ref,n.return=i,i.child=n}function p1(n,i,c,h,k){if(n!==null){var D=n.memoizedProps;if(As(D,h)&&n.ref===i.ref)if(yn=!1,i.pendingProps=h=D,_g(n,k))(n.flags&131072)!==0&&(yn=!0);else return i.lanes=n.lanes,Ki(n,i,k)}return pg(n,i,c,h,k)}function g1(n,i,c,h){var k=h.children,D=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((i.flags&128)!==0){if(D=D!==null?D.baseLanes|c:c,n!==null){for(h=i.child=n.child,k=0;h!==null;)k=k|h.lanes|h.childLanes,h=h.sibling;h=k&~D}else h=0,i.child=null;return y1(n,i,D,c,h)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&md(i,D!==null?D.cachePool:null),D!==null?bb(i,D):Vp(),wb(i);else return h=i.lanes=536870912,y1(n,i,D!==null?D.baseLanes|c:c,c,h)}else D!==null?(md(i,D.cachePool),bb(i,D),La(),i.memoizedState=null):(n!==null&&md(i,null),Vp(),La());return Pn(n,i,k,c),i.child}function gc(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function y1(n,i,c,h,k){var D=Pp();return D=D===null?null:{parent:pn._currentValue,pool:D},i.memoizedState={baseLanes:c,cachePool:D},n!==null&&md(i,null),Vp(),wb(i),n!==null&&Ao(n,i,h,!0),i.childLanes=k,null}function Td(n,i){return i=Rd({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function v1(n,i,c){return Os(i,n.child,null,c),n=Td(i,i.pendingProps),n.flags|=2,Nr(i),i.memoizedState=null,n}function MA(n,i,c){var h=i.pendingProps,k=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(St){if(h.mode==="hidden")return n=Td(i,h),i.lanes=536870912,gc(null,n);if(Gp(i),(n=Vt)?(n=Tw(n,Vr),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:ja!==null?{id:ki,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},c=Na(n),c.return=i,i.child=c,Ln=i,Vt=null)):n=null,n===null)throw Da(i);return i.lanes=536870912,null}return Td(i,h)}var D=n.memoizedState;if(D!==null){var Y=D.dehydrated;if(Gp(i),k)if(i.flags&256)i.flags&=-257,i=v1(n,i,c);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(a(558));else if(yn||Ao(n,i,c,!1),k=(c&n.childLanes)!==0,yn||k){if(h=Pt,h!==null&&(Y=$n(h,c),Y!==0&&Y!==D.retryLane))throw D.retryLane=Y,be(n,Y),pr(h,n,Y),mg;Hd(),i=v1(n,i,c)}else n=D.treeContext,Vt=Gr(Y.nextSibling),Ln=i,St=!0,Ta=null,Vr=!1,n!==null&&ib(i,n),i=Td(i,h),i.flags|=4096;return i}return n=at(n.child,{mode:h.mode,children:h.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Dd(n,i){var c=i.ref;if(c===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(a(284));(n===null||n.ref!==c)&&(i.flags|=4194816)}}function pg(n,i,c,h,k){return Ds(i),c=Xp(n,i,c,h,void 0,k),h=Zp(),n!==null&&!yn?(Wp(n,i,k),Ki(n,i,k)):(St&&h&&Tp(i),i.flags|=1,Pn(n,i,c,k),i.child)}function b1(n,i,c,h,k,D){return Ds(i),i.updateQueue=null,c=_b(i,h,c,k),xb(n),h=Zp(),n!==null&&!yn?(Wp(n,i,D),Ki(n,i,D)):(St&&h&&Tp(i),i.flags|=1,Pn(n,i,c,D),i.child)}function w1(n,i,c,h,k){if(Ds(i),i.stateNode===null){var D=Qe,Y=c.contextType;typeof Y=="object"&&Y!==null&&(D=In(Y)),D=new c(h,D),i.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=fg,i.stateNode=D,D._reactInternals=i,D=i.stateNode,D.props=h,D.state=i.memoizedState,D.refs={},Hp(i),Y=c.contextType,D.context=typeof Y=="object"&&Y!==null?In(Y):Qe,D.state=i.memoizedState,Y=c.getDerivedStateFromProps,typeof Y=="function"&&(dg(i,c,Y,h),D.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(Y=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),Y!==D.state&&fg.enqueueReplaceState(D,D.state,null),dc(i,h,D,k),uc(),D.state=i.memoizedState),typeof D.componentDidMount=="function"&&(i.flags|=4194308),h=!0}else if(n===null){D=i.stateNode;var ee=i.memoizedProps,de=Ls(c,ee);D.props=de;var xe=D.context,je=c.contextType;Y=Qe,typeof je=="object"&&je!==null&&(Y=In(je));var De=c.getDerivedStateFromProps;je=typeof De=="function"||typeof D.getSnapshotBeforeUpdate=="function",ee=i.pendingProps!==ee,je||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(ee||xe!==Y)&&s1(i,D,h,Y),$a=!1;var Se=i.memoizedState;D.state=Se,dc(i,h,D,k),uc(),xe=i.memoizedState,ee||Se!==xe||$a?(typeof De=="function"&&(dg(i,c,De,h),xe=i.memoizedState),(de=$a||a1(i,c,de,h,Se,xe,Y))?(je||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(i.flags|=4194308)):(typeof D.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=xe),D.props=h,D.state=xe,D.context=Y,h=de):(typeof D.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{D=i.stateNode,Up(n,i),Y=i.memoizedProps,je=Ls(c,Y),D.props=je,De=i.pendingProps,Se=D.context,xe=c.contextType,de=Qe,typeof xe=="object"&&xe!==null&&(de=In(xe)),ee=c.getDerivedStateFromProps,(xe=typeof ee=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(Y!==De||Se!==de)&&s1(i,D,h,de),$a=!1,Se=i.memoizedState,D.state=Se,dc(i,h,D,k),uc();var Ee=i.memoizedState;Y!==De||Se!==Ee||$a||n!==null&&n.dependencies!==null&&fd(n.dependencies)?(typeof ee=="function"&&(dg(i,c,ee,h),Ee=i.memoizedState),(je=$a||a1(i,c,je,h,Se,Ee,de)||n!==null&&n.dependencies!==null&&fd(n.dependencies))?(xe||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(h,Ee,de),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(h,Ee,de)),typeof D.componentDidUpdate=="function"&&(i.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof D.componentDidUpdate!="function"||Y===n.memoizedProps&&Se===n.memoizedState||(i.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||Y===n.memoizedProps&&Se===n.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=Ee),D.props=h,D.state=Ee,D.context=de,h=je):(typeof D.componentDidUpdate!="function"||Y===n.memoizedProps&&Se===n.memoizedState||(i.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||Y===n.memoizedProps&&Se===n.memoizedState||(i.flags|=1024),h=!1)}return D=h,Dd(n,i),h=(i.flags&128)!==0,D||h?(D=i.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:D.render(),i.flags|=1,n!==null&&h?(i.child=Os(i,n.child,null,k),i.child=Os(i,null,c,k)):Pn(n,i,c,k),i.memoizedState=D.state,n=i.child):n=Ki(n,i,k),n}function x1(n,i,c,h){return js(),i.flags|=256,Pn(n,i,c,h),i.child}var gg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yg(n){return{baseLanes:n,cachePool:ub()}}function vg(n,i,c){return n=n!==null?n.childLanes&~c:0,i&&(n|=jr),n}function _1(n,i,c){var h=i.pendingProps,k=!1,D=(i.flags&128)!==0,Y;if((Y=D)||(Y=n!==null&&n.memoizedState===null?!1:(cn.current&2)!==0),Y&&(k=!0,i.flags&=-129),Y=(i.flags&32)!==0,i.flags&=-33,n===null){if(St){if(k?za(i):La(),(n=Vt)?(n=Tw(n,Vr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:ja!==null?{id:ki,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},c=Na(n),c.return=i,i.child=c,Ln=i,Vt=null)):n=null,n===null)throw Da(i);return ey(n)?i.lanes=32:i.lanes=536870912,null}var ee=h.children;return h=h.fallback,k?(La(),k=i.mode,ee=Rd({mode:"hidden",children:ee},k),h=Ei(h,k,c,null),ee.return=i,h.return=i,ee.sibling=h,i.child=ee,h=i.child,h.memoizedState=yg(c),h.childLanes=vg(n,Y,c),i.memoizedState=gg,gc(null,h)):(za(i),bg(i,ee))}var de=n.memoizedState;if(de!==null&&(ee=de.dehydrated,ee!==null)){if(D)i.flags&256?(za(i),i.flags&=-257,i=wg(n,i,c)):i.memoizedState!==null?(La(),i.child=n.child,i.flags|=128,i=null):(La(),ee=h.fallback,k=i.mode,h=Rd({mode:"visible",children:h.children},k),ee=Ei(ee,k,c,null),ee.flags|=2,h.return=i,ee.return=i,h.sibling=ee,i.child=h,Os(i,n.child,null,c),h=i.child,h.memoizedState=yg(c),h.childLanes=vg(n,Y,c),i.memoizedState=gg,i=gc(null,h));else if(za(i),ey(ee)){if(Y=ee.nextSibling&&ee.nextSibling.dataset,Y)var xe=Y.dgst;Y=xe,h=Error(a(419)),h.stack="",h.digest=Y,ic({value:h,source:null,stack:null}),i=wg(n,i,c)}else if(yn||Ao(n,i,c,!1),Y=(c&n.childLanes)!==0,yn||Y){if(Y=Pt,Y!==null&&(h=$n(Y,c),h!==0&&h!==de.retryLane))throw de.retryLane=h,be(n,h),pr(Y,n,h),mg;Jg(ee)||Hd(),i=wg(n,i,c)}else Jg(ee)?(i.flags|=192,i.child=n.child,i=null):(n=de.treeContext,Vt=Gr(ee.nextSibling),Ln=i,St=!0,Ta=null,Vr=!1,n!==null&&ib(i,n),i=bg(i,h.children),i.flags|=4096);return i}return k?(La(),ee=h.fallback,k=i.mode,de=n.child,xe=de.sibling,h=at(de,{mode:"hidden",children:h.children}),h.subtreeFlags=de.subtreeFlags&65011712,xe!==null?ee=at(xe,ee):(ee=Ei(ee,k,c,null),ee.flags|=2),ee.return=i,h.return=i,h.sibling=ee,i.child=h,gc(null,h),h=i.child,ee=n.child.memoizedState,ee===null?ee=yg(c):(k=ee.cachePool,k!==null?(de=pn._currentValue,k=k.parent!==de?{parent:de,pool:de}:k):k=ub(),ee={baseLanes:ee.baseLanes|c,cachePool:k}),h.memoizedState=ee,h.childLanes=vg(n,Y,c),i.memoizedState=gg,gc(n.child,h)):(za(i),c=n.child,n=c.sibling,c=at(c,{mode:"visible",children:h.children}),c.return=i,c.sibling=null,n!==null&&(Y=i.deletions,Y===null?(i.deletions=[n],i.flags|=16):Y.push(n)),i.child=c,i.memoizedState=null,c)}function bg(n,i){return i=Rd({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Rd(n,i){return n=Dt(22,n,null,i),n.lanes=0,n}function wg(n,i,c){return Os(i,n.child,null,c),n=bg(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function S1(n,i,c){n.lanes|=i;var h=n.alternate;h!==null&&(h.lanes|=i),Op(n.return,i,c)}function xg(n,i,c,h,k,D){var Y=n.memoizedState;Y===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:k,treeForkCount:D}:(Y.isBackwards=i,Y.rendering=null,Y.renderingStartTime=0,Y.last=h,Y.tail=c,Y.tailMode=k,Y.treeForkCount=D)}function C1(n,i,c){var h=i.pendingProps,k=h.revealOrder,D=h.tail;h=h.children;var Y=cn.current,ee=(Y&2)!==0;if(ee?(Y=Y&1|2,i.flags|=128):Y&=1,K(cn,Y),Pn(n,i,h,c),h=St?rc:0,!ee&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&S1(n,c,i);else if(n.tag===19)S1(n,c,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(k){case"forwards":for(c=i.child,k=null;c!==null;)n=c.alternate,n!==null&&wd(n)===null&&(k=c),c=c.sibling;c=k,c===null?(k=i.child,i.child=null):(k=c.sibling,c.sibling=null),xg(i,!1,k,c,D,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,k=i.child,i.child=null;k!==null;){if(n=k.alternate,n!==null&&wd(n)===null){i.child=k;break}n=k.sibling,k.sibling=c,c=k,k=n}xg(i,!0,c,null,D,h);break;case"together":xg(i,!1,null,null,void 0,h);break;default:i.memoizedState=null}return i.child}function Ki(n,i,c){if(n!==null&&(i.dependencies=n.dependencies),Ba|=i.lanes,(c&i.childLanes)===0)if(n!==null){if(Ao(n,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(a(153));if(i.child!==null){for(n=i.child,c=at(n,n.pendingProps),i.child=c,c.return=i;n.sibling!==null;)n=n.sibling,c=c.sibling=at(n,n.pendingProps),c.return=i;c.sibling=null}return i.child}function _g(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&fd(n)))}function OA(n,i,c){switch(i.tag){case 3:oe(i,i.stateNode.containerInfo),Ra(i,pn,n.memoizedState.cache),js();break;case 27:case 5:ve(i);break;case 4:oe(i,i.stateNode.containerInfo);break;case 10:Ra(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Gp(i),null;break;case 13:var h=i.memoizedState;if(h!==null)return h.dehydrated!==null?(za(i),i.flags|=128,null):(c&i.child.childLanes)!==0?_1(n,i,c):(za(i),n=Ki(n,i,c),n!==null?n.sibling:null);za(i);break;case 19:var k=(n.flags&128)!==0;if(h=(c&i.childLanes)!==0,h||(Ao(n,i,c,!1),h=(c&i.childLanes)!==0),k){if(h)return C1(n,i,c);i.flags|=128}if(k=i.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),K(cn,cn.current),h)break;return null;case 22:return i.lanes=0,g1(n,i,c,i.pendingProps);case 24:Ra(i,pn,n.memoizedState.cache)}return Ki(n,i,c)}function E1(n,i,c){if(n!==null)if(n.memoizedProps!==i.pendingProps)yn=!0;else{if(!_g(n,c)&&(i.flags&128)===0)return yn=!1,OA(n,i,c);yn=(n.flags&131072)!==0}else yn=!1,St&&(i.flags&1048576)!==0&&rb(i,rc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var h=i.pendingProps;if(n=$s(i.elementType),i.type=n,typeof n=="function")dt(n)?(h=Ls(n,h),i.tag=1,i=w1(null,i,n,h,c)):(i.tag=0,i=pg(null,i,n,h,c));else{if(n!=null){var k=n.$$typeof;if(k===A){i.tag=11,i=h1(null,i,n,h,c);break e}else if(k===T){i.tag=14,i=m1(null,i,n,h,c);break e}}throw i=R(n)||n,Error(a(306,i,""))}}return i;case 0:return pg(n,i,i.type,i.pendingProps,c);case 1:return h=i.type,k=Ls(h,i.pendingProps),w1(n,i,h,k,c);case 3:e:{if(oe(i,i.stateNode.containerInfo),n===null)throw Error(a(387));h=i.pendingProps;var D=i.memoizedState;k=D.element,Up(n,i),dc(i,h,null,c);var Y=i.memoizedState;if(h=Y.cache,Ra(i,pn,h),h!==D.cache&&zp(i,[pn],c,!0),uc(),h=Y.element,D.isDehydrated)if(D={element:h,isDehydrated:!1,cache:Y.cache},i.updateQueue.baseState=D,i.memoizedState=D,i.flags&256){i=x1(n,i,h,c);break e}else if(h!==k){k=ur(Error(a(424)),i),ic(k),i=x1(n,i,h,c);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Vt=Gr(n.firstChild),Ln=i,St=!0,Ta=null,Vr=!0,c=gb(i,null,h,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(js(),h===k){i=Ki(n,i,c);break e}Pn(n,i,h,c)}i=i.child}return i;case 26:return Dd(n,i),n===null?(c=zw(i.type,null,i.pendingProps,null))?i.memoizedState=c:St||(c=i.type,n=i.pendingProps,h=Kd(J.current).createElement(c),h[sn]=i,h[hn]=n,Bn(h,c,n),Zt(h),i.stateNode=h):i.memoizedState=zw(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return ve(i),n===null&&St&&(h=i.stateNode=$w(i.type,i.pendingProps,J.current),Ln=i,Vr=!0,k=Vt,Va(i.type)?(ty=k,Vt=Gr(h.firstChild)):Vt=k),Pn(n,i,i.pendingProps.children,c),Dd(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&St&&((k=h=Vt)&&(h=dj(h,i.type,i.pendingProps,Vr),h!==null?(i.stateNode=h,Ln=i,Vt=Gr(h.firstChild),Vr=!1,k=!0):k=!1),k||Da(i)),ve(i),k=i.type,D=i.pendingProps,Y=n!==null?n.memoizedProps:null,h=D.children,Zg(k,D)?h=null:Y!==null&&Zg(k,Y)&&(i.flags|=32),i.memoizedState!==null&&(k=Xp(n,i,kA,null,null,c),Dc._currentValue=k),Dd(n,i),Pn(n,i,h,c),i.child;case 6:return n===null&&St&&((n=c=Vt)&&(c=fj(c,i.pendingProps,Vr),c!==null?(i.stateNode=c,Ln=i,Vt=null,n=!0):n=!1),n||Da(i)),null;case 13:return _1(n,i,c);case 4:return oe(i,i.stateNode.containerInfo),h=i.pendingProps,n===null?i.child=Os(i,null,h,c):Pn(n,i,h,c),i.child;case 11:return h1(n,i,i.type,i.pendingProps,c);case 7:return Pn(n,i,i.pendingProps,c),i.child;case 8:return Pn(n,i,i.pendingProps.children,c),i.child;case 12:return Pn(n,i,i.pendingProps.children,c),i.child;case 10:return h=i.pendingProps,Ra(i,i.type,h.value),Pn(n,i,h.children,c),i.child;case 9:return k=i.type._context,h=i.pendingProps.children,Ds(i),k=In(k),h=h(k),i.flags|=1,Pn(n,i,h,c),i.child;case 14:return m1(n,i,i.type,i.pendingProps,c);case 15:return p1(n,i,i.type,i.pendingProps,c);case 19:return C1(n,i,c);case 31:return MA(n,i,c);case 22:return g1(n,i,c,i.pendingProps);case 24:return Ds(i),h=In(pn),n===null?(k=Pp(),k===null&&(k=Pt,D=Lp(),k.pooledCache=D,D.refCount++,D!==null&&(k.pooledCacheLanes|=c),k=D),i.memoizedState={parent:h,cache:k},Hp(i),Ra(i,pn,k)):((n.lanes&c)!==0&&(Up(n,i),dc(i,null,null,c),uc()),k=n.memoizedState,D=i.memoizedState,k.parent!==h?(k={parent:h,cache:h},i.memoizedState=k,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=k),Ra(i,pn,h)):(h=D.cache,Ra(i,pn,h),h!==k.cache&&zp(i,[pn],c,!0))),Pn(n,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Xi(n){n.flags|=4}function Sg(n,i,c,h,k){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(k&335544128)===k)if(n.stateNode.complete)n.flags|=8192;else if(Q1())n.flags|=8192;else throw Ms=gd,Bp}else n.flags&=-16777217}function k1(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Hw(i))if(Q1())n.flags|=8192;else throw Ms=gd,Bp}function $d(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?qt():536870912,n.lanes|=i,Bo|=i)}function yc(n,i){if(!St)switch(n.tailMode){case"hidden":i=n.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Yt(n){var i=n.alternate!==null&&n.alternate.child===n.child,c=0,h=0;if(i)for(var k=n.child;k!==null;)c|=k.lanes|k.childLanes,h|=k.subtreeFlags&65011712,h|=k.flags&65011712,k.return=n,k=k.sibling;else for(k=n.child;k!==null;)c|=k.lanes|k.childLanes,h|=k.subtreeFlags,h|=k.flags,k.return=n,k=k.sibling;return n.subtreeFlags|=h,n.childLanes=c,i}function zA(n,i,c){var h=i.pendingProps;switch(Dp(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(i),null;case 1:return Yt(i),null;case 3:return c=i.stateNode,h=null,n!==null&&(h=n.memoizedState.cache),i.memoizedState.cache!==h&&(i.flags|=2048),Vi(pn),he(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(No(i)?Xi(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,$p())),Yt(i),null;case 26:var k=i.type,D=i.memoizedState;return n===null?(Xi(i),D!==null?(Yt(i),k1(i,D)):(Yt(i),Sg(i,k,null,h,c))):D?D!==n.memoizedState?(Xi(i),Yt(i),k1(i,D)):(Yt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==h&&Xi(i),Yt(i),Sg(i,k,n,h,c)),null;case 27:if(W(i),c=J.current,k=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==h&&Xi(i);else{if(!h){if(i.stateNode===null)throw Error(a(166));return Yt(i),null}n=P.current,No(i)?ab(i):(n=$w(k,h,c),i.stateNode=n,Xi(i))}return Yt(i),null;case 5:if(W(i),k=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==h&&Xi(i);else{if(!h){if(i.stateNode===null)throw Error(a(166));return Yt(i),null}if(D=P.current,No(i))ab(i);else{var Y=Kd(J.current);switch(D){case 1:D=Y.createElementNS("http://www.w3.org/2000/svg",k);break;case 2:D=Y.createElementNS("http://www.w3.org/1998/Math/MathML",k);break;default:switch(k){case"svg":D=Y.createElementNS("http://www.w3.org/2000/svg",k);break;case"math":D=Y.createElementNS("http://www.w3.org/1998/Math/MathML",k);break;case"script":D=Y.createElement("div"),D.innerHTML="<script><\/script>",D=D.removeChild(D.firstChild);break;case"select":D=typeof h.is=="string"?Y.createElement("select",{is:h.is}):Y.createElement("select"),h.multiple?D.multiple=!0:h.size&&(D.size=h.size);break;default:D=typeof h.is=="string"?Y.createElement(k,{is:h.is}):Y.createElement(k)}}D[sn]=i,D[hn]=h;e:for(Y=i.child;Y!==null;){if(Y.tag===5||Y.tag===6)D.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===i)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===i)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}i.stateNode=D;e:switch(Bn(D,k,h),k){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Xi(i)}}return Yt(i),Sg(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,c),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==h&&Xi(i);else{if(typeof h!="string"&&i.stateNode===null)throw Error(a(166));if(n=J.current,No(i)){if(n=i.stateNode,c=i.memoizedProps,h=null,k=Ln,k!==null)switch(k.tag){case 27:case 5:h=k.memoizedProps}n[sn]=i,n=!!(n.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||_w(n.nodeValue,c)),n||Da(i,!0)}else n=Kd(n).createTextNode(h),n[sn]=i,i.stateNode=n}return Yt(i),null;case 31:if(c=i.memoizedState,n===null||n.memoizedState!==null){if(h=No(i),c!==null){if(n===null){if(!h)throw Error(a(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[sn]=i}else js(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Yt(i),n=!1}else c=$p(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=c),n=!0;if(!n)return i.flags&256?(Nr(i),i):(Nr(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Yt(i),null;case 13:if(h=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(k=No(i),h!==null&&h.dehydrated!==null){if(n===null){if(!k)throw Error(a(318));if(k=i.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(a(317));k[sn]=i}else js(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Yt(i),k=!1}else k=$p(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=k),k=!0;if(!k)return i.flags&256?(Nr(i),i):(Nr(i),null)}return Nr(i),(i.flags&128)!==0?(i.lanes=c,i):(c=h!==null,n=n!==null&&n.memoizedState!==null,c&&(h=i.child,k=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(k=h.alternate.memoizedState.cachePool.pool),D=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(D=h.memoizedState.cachePool.pool),D!==k&&(h.flags|=2048)),c!==n&&c&&(i.child.flags|=8192),$d(i,i.updateQueue),Yt(i),null);case 4:return he(),n===null&&Vg(i.stateNode.containerInfo),Yt(i),null;case 10:return Vi(i.type),Yt(i),null;case 19:if(B(cn),h=i.memoizedState,h===null)return Yt(i),null;if(k=(i.flags&128)!==0,D=h.rendering,D===null)if(k)yc(h,!1);else{if(rn!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(D=wd(n),D!==null){for(i.flags|=128,yc(h,!1),n=D.updateQueue,i.updateQueue=n,$d(i,n),i.subtreeFlags=0,n=c,c=i.child;c!==null;)Ut(c,n),c=c.sibling;return K(cn,cn.current&1|2),St&&Fi(i,h.treeForkCount),i.child}n=n.sibling}h.tail!==null&&Pe()>Id&&(i.flags|=128,k=!0,yc(h,!1),i.lanes=4194304)}else{if(!k)if(n=wd(D),n!==null){if(i.flags|=128,k=!0,n=n.updateQueue,i.updateQueue=n,$d(i,n),yc(h,!0),h.tail===null&&h.tailMode==="hidden"&&!D.alternate&&!St)return Yt(i),null}else 2*Pe()-h.renderingStartTime>Id&&c!==536870912&&(i.flags|=128,k=!0,yc(h,!1),i.lanes=4194304);h.isBackwards?(D.sibling=i.child,i.child=D):(n=h.last,n!==null?n.sibling=D:i.child=D,h.last=D)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=Pe(),n.sibling=null,c=cn.current,K(cn,k?c&1|2:c&1),St&&Fi(i,h.treeForkCount),n):(Yt(i),null);case 22:case 23:return Nr(i),Yp(),h=i.memoizedState!==null,n!==null?n.memoizedState!==null!==h&&(i.flags|=8192):h&&(i.flags|=8192),h?(c&536870912)!==0&&(i.flags&128)===0&&(Yt(i),i.subtreeFlags&6&&(i.flags|=8192)):Yt(i),c=i.updateQueue,c!==null&&$d(i,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),h=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),h!==c&&(i.flags|=2048),n!==null&&B(Rs),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Vi(pn),Yt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function LA(n,i){switch(Dp(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Vi(pn),he(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return W(i),null;case 31:if(i.memoizedState!==null){if(Nr(i),i.alternate===null)throw Error(a(340));js()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Nr(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(a(340));js()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return B(cn),null;case 4:return he(),null;case 10:return Vi(i.type),null;case 22:case 23:return Nr(i),Yp(),n!==null&&B(Rs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Vi(pn),null;case 25:return null;default:return null}}function N1(n,i){switch(Dp(i),i.tag){case 3:Vi(pn),he();break;case 26:case 27:case 5:W(i);break;case 4:he();break;case 31:i.memoizedState!==null&&Nr(i);break;case 13:Nr(i);break;case 19:B(cn);break;case 10:Vi(i.type);break;case 22:case 23:Nr(i),Yp(),n!==null&&B(Rs);break;case 24:Vi(pn)}}function vc(n,i){try{var c=i.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var k=h.next;c=k;do{if((c.tag&n)===n){h=void 0;var D=c.create,Y=c.inst;h=D(),Y.destroy=h}c=c.next}while(c!==k)}}catch(ee){$t(i,i.return,ee)}}function Ia(n,i,c){try{var h=i.updateQueue,k=h!==null?h.lastEffect:null;if(k!==null){var D=k.next;h=D;do{if((h.tag&n)===n){var Y=h.inst,ee=Y.destroy;if(ee!==void 0){Y.destroy=void 0,k=i;var de=c,xe=ee;try{xe()}catch(je){$t(k,de,je)}}}h=h.next}while(h!==D)}}catch(je){$t(i,i.return,je)}}function A1(n){var i=n.updateQueue;if(i!==null){var c=n.stateNode;try{vb(i,c)}catch(h){$t(n,n.return,h)}}}function j1(n,i,c){c.props=Ls(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(h){$t(n,i,h)}}function bc(n,i){try{var c=n.ref;if(c!==null){switch(n.tag){case 26:case 27:case 5:var h=n.stateNode;break;case 30:h=n.stateNode;break;default:h=n.stateNode}typeof c=="function"?n.refCleanup=c(h):c.current=h}}catch(k){$t(n,i,k)}}function Ai(n,i){var c=n.ref,h=n.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(k){$t(n,i,k)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(k){$t(n,i,k)}else c.current=null}function T1(n){var i=n.type,c=n.memoizedProps,h=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(k){$t(n,n.return,k)}}function Cg(n,i,c){try{var h=n.stateNode;aj(h,n.type,c,i),h[hn]=i}catch(k){$t(n,n.return,k)}}function D1(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Va(n.type)||n.tag===4}function Eg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||D1(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Va(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function kg(n,i,c){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(n,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(n),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Sr));else if(h!==4&&(h===27&&Va(n.type)&&(c=n.stateNode,i=null),n=n.child,n!==null))for(kg(n,i,c),n=n.sibling;n!==null;)kg(n,i,c),n=n.sibling}function Md(n,i,c){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?c.insertBefore(n,i):c.appendChild(n);else if(h!==4&&(h===27&&Va(n.type)&&(c=n.stateNode),n=n.child,n!==null))for(Md(n,i,c),n=n.sibling;n!==null;)Md(n,i,c),n=n.sibling}function R1(n){var i=n.stateNode,c=n.memoizedProps;try{for(var h=n.type,k=i.attributes;k.length;)i.removeAttributeNode(k[0]);Bn(i,h,c),i[sn]=n,i[hn]=c}catch(D){$t(n,n.return,D)}}var Zi=!1,vn=!1,Ng=!1,$1=typeof WeakSet=="function"?WeakSet:Set,Tn=null;function IA(n,i){if(n=n.containerInfo,Kg=tf,n=Xl(n),Zl(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var k=h.anchorOffset,D=h.focusNode;h=h.focusOffset;try{c.nodeType,D.nodeType}catch{c=null;break e}var Y=0,ee=-1,de=-1,xe=0,je=0,De=n,Se=null;t:for(;;){for(var Ee;De!==c||k!==0&&De.nodeType!==3||(ee=Y+k),De!==D||h!==0&&De.nodeType!==3||(de=Y+h),De.nodeType===3&&(Y+=De.nodeValue.length),(Ee=De.firstChild)!==null;)Se=De,De=Ee;for(;;){if(De===n)break t;if(Se===c&&++xe===k&&(ee=Y),Se===D&&++je===h&&(de=Y),(Ee=De.nextSibling)!==null)break;De=Se,Se=De.parentNode}De=Ee}c=ee===-1||de===-1?null:{start:ee,end:de}}else c=null}c=c||{start:0,end:0}}else c=null;for(Xg={focusedElem:n,selectionRange:c},tf=!1,Tn=i;Tn!==null;)if(i=Tn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Tn=n;else for(;Tn!==null;){switch(i=Tn,D=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(c=0;c<n.length;c++)k=n[c],k.ref.impl=k.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&D!==null){n=void 0,c=i,k=D.memoizedProps,D=D.memoizedState,h=c.stateNode;try{var Ke=Ls(c.type,k);n=h.getSnapshotBeforeUpdate(Ke,D),h.__reactInternalSnapshotBeforeUpdate=n}catch(rt){$t(c,c.return,rt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,c=n.nodeType,c===9)Qg(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Qg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=i.sibling,n!==null){n.return=i.return,Tn=n;break}Tn=i.return}}function M1(n,i,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Qi(n,c),h&4&&vc(5,c);break;case 1:if(Qi(n,c),h&4)if(n=c.stateNode,i===null)try{n.componentDidMount()}catch(Y){$t(c,c.return,Y)}else{var k=Ls(c.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(k,i,n.__reactInternalSnapshotBeforeUpdate)}catch(Y){$t(c,c.return,Y)}}h&64&&A1(c),h&512&&bc(c,c.return);break;case 3:if(Qi(n,c),h&64&&(n=c.updateQueue,n!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{vb(n,i)}catch(Y){$t(c,c.return,Y)}}break;case 27:i===null&&h&4&&R1(c);case 26:case 5:Qi(n,c),i===null&&h&4&&T1(c),h&512&&bc(c,c.return);break;case 12:Qi(n,c);break;case 31:Qi(n,c),h&4&&L1(n,c);break;case 13:Qi(n,c),h&4&&I1(n,c),h&64&&(n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(c=GA.bind(null,c),hj(n,c))));break;case 22:if(h=c.memoizedState!==null||Zi,!h){i=i!==null&&i.memoizedState!==null||vn,k=Zi;var D=vn;Zi=h,(vn=i)&&!D?Ji(n,c,(c.subtreeFlags&8772)!==0):Qi(n,c),Zi=k,vn=D}break;case 30:break;default:Qi(n,c)}}function O1(n){var i=n.alternate;i!==null&&(n.alternate=null,O1(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&wa(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Wt=null,dr=!1;function Wi(n,i,c){for(c=c.child;c!==null;)z1(n,i,c),c=c.sibling}function z1(n,i,c){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Be,c)}catch{}switch(c.tag){case 26:vn||Ai(c,i),Wi(n,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:vn||Ai(c,i);var h=Wt,k=dr;Va(c.type)&&(Wt=c.stateNode,dr=!1),Wi(n,i,c),Ac(c.stateNode),Wt=h,dr=k;break;case 5:vn||Ai(c,i);case 6:if(h=Wt,k=dr,Wt=null,Wi(n,i,c),Wt=h,dr=k,Wt!==null)if(dr)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(c.stateNode)}catch(D){$t(c,i,D)}else try{Wt.removeChild(c.stateNode)}catch(D){$t(c,i,D)}break;case 18:Wt!==null&&(dr?(n=Wt,Aw(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,c.stateNode),Ko(n)):Aw(Wt,c.stateNode));break;case 4:h=Wt,k=dr,Wt=c.stateNode.containerInfo,dr=!0,Wi(n,i,c),Wt=h,dr=k;break;case 0:case 11:case 14:case 15:Ia(2,c,i),vn||Ia(4,c,i),Wi(n,i,c);break;case 1:vn||(Ai(c,i),h=c.stateNode,typeof h.componentWillUnmount=="function"&&j1(c,i,h)),Wi(n,i,c);break;case 21:Wi(n,i,c);break;case 22:vn=(h=vn)||c.memoizedState!==null,Wi(n,i,c),vn=h;break;default:Wi(n,i,c)}}function L1(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ko(n)}catch(c){$t(i,i.return,c)}}}function I1(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ko(n)}catch(c){$t(i,i.return,c)}}function PA(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new $1),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new $1),i;default:throw Error(a(435,n.tag))}}function Od(n,i){var c=PA(n);i.forEach(function(h){if(!c.has(h)){c.add(h);var k=KA.bind(null,n,h);h.then(k,k)}})}function fr(n,i){var c=i.deletions;if(c!==null)for(var h=0;h<c.length;h++){var k=c[h],D=n,Y=i,ee=Y;e:for(;ee!==null;){switch(ee.tag){case 27:if(Va(ee.type)){Wt=ee.stateNode,dr=!1;break e}break;case 5:Wt=ee.stateNode,dr=!1;break e;case 3:case 4:Wt=ee.stateNode.containerInfo,dr=!0;break e}ee=ee.return}if(Wt===null)throw Error(a(160));z1(D,Y,k),Wt=null,dr=!1,D=k.alternate,D!==null&&(D.return=null),k.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)P1(i,n),i=i.sibling}var ri=null;function P1(n,i){var c=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:fr(i,n),hr(n),h&4&&(Ia(3,n,n.return),vc(3,n),Ia(5,n,n.return));break;case 1:fr(i,n),hr(n),h&512&&(vn||c===null||Ai(c,c.return)),h&64&&Zi&&(n=n.updateQueue,n!==null&&(h=n.callbacks,h!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var k=ri;if(fr(i,n),hr(n),h&512&&(vn||c===null||Ai(c,c.return)),h&4){var D=c!==null?c.memoizedState:null;if(h=n.memoizedState,c===null)if(h===null)if(n.stateNode===null){e:{h=n.type,c=n.memoizedProps,k=k.ownerDocument||k;t:switch(h){case"title":D=k.getElementsByTagName("title")[0],(!D||D[zr]||D[sn]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=k.createElement(h),k.head.insertBefore(D,k.querySelector("head > title"))),Bn(D,h,c),D[sn]=n,Zt(D),h=D;break e;case"link":var Y=Pw("link","href",k).get(h+(c.href||""));if(Y){for(var ee=0;ee<Y.length;ee++)if(D=Y[ee],D.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&D.getAttribute("rel")===(c.rel==null?null:c.rel)&&D.getAttribute("title")===(c.title==null?null:c.title)&&D.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){Y.splice(ee,1);break t}}D=k.createElement(h),Bn(D,h,c),k.head.appendChild(D);break;case"meta":if(Y=Pw("meta","content",k).get(h+(c.content||""))){for(ee=0;ee<Y.length;ee++)if(D=Y[ee],D.getAttribute("content")===(c.content==null?null:""+c.content)&&D.getAttribute("name")===(c.name==null?null:c.name)&&D.getAttribute("property")===(c.property==null?null:c.property)&&D.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&D.getAttribute("charset")===(c.charSet==null?null:c.charSet)){Y.splice(ee,1);break t}}D=k.createElement(h),Bn(D,h,c),k.head.appendChild(D);break;default:throw Error(a(468,h))}D[sn]=n,Zt(D),h=D}n.stateNode=h}else Bw(k,n.type,n.stateNode);else n.stateNode=Iw(k,h,n.memoizedProps);else D!==h?(D===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):D.count--,h===null?Bw(k,n.type,n.stateNode):Iw(k,h,n.memoizedProps)):h===null&&n.stateNode!==null&&Cg(n,n.memoizedProps,c.memoizedProps)}break;case 27:fr(i,n),hr(n),h&512&&(vn||c===null||Ai(c,c.return)),c!==null&&h&4&&Cg(n,n.memoizedProps,c.memoizedProps);break;case 5:if(fr(i,n),hr(n),h&512&&(vn||c===null||Ai(c,c.return)),n.flags&32){k=n.stateNode;try{Br(k,"")}catch(Ke){$t(n,n.return,Ke)}}h&4&&n.stateNode!=null&&(k=n.memoizedProps,Cg(n,k,c!==null?c.memoizedProps:k)),h&1024&&(Ng=!0);break;case 6:if(fr(i,n),hr(n),h&4){if(n.stateNode===null)throw Error(a(162));h=n.memoizedProps,c=n.stateNode;try{c.nodeValue=h}catch(Ke){$t(n,n.return,Ke)}}break;case 3:if(Wd=null,k=ri,ri=Xd(i.containerInfo),fr(i,n),ri=k,hr(n),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Ko(i.containerInfo)}catch(Ke){$t(n,n.return,Ke)}Ng&&(Ng=!1,B1(n));break;case 4:h=ri,ri=Xd(n.stateNode.containerInfo),fr(i,n),hr(n),ri=h;break;case 12:fr(i,n),hr(n);break;case 31:fr(i,n),hr(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,Od(n,h)));break;case 13:fr(i,n),hr(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Ld=Pe()),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,Od(n,h)));break;case 22:k=n.memoizedState!==null;var de=c!==null&&c.memoizedState!==null,xe=Zi,je=vn;if(Zi=xe||k,vn=je||de,fr(i,n),vn=je,Zi=xe,hr(n),h&8192)e:for(i=n.stateNode,i._visibility=k?i._visibility&-2:i._visibility|1,k&&(c===null||de||Zi||vn||Is(n)),c=null,i=n;;){if(i.tag===5||i.tag===26){if(c===null){de=c=i;try{if(D=de.stateNode,k)Y=D.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{ee=de.stateNode;var De=de.memoizedProps.style,Se=De!=null&&De.hasOwnProperty("display")?De.display:null;ee.style.display=Se==null||typeof Se=="boolean"?"":(""+Se).trim()}}catch(Ke){$t(de,de.return,Ke)}}}else if(i.tag===6){if(c===null){de=i;try{de.stateNode.nodeValue=k?"":de.memoizedProps}catch(Ke){$t(de,de.return,Ke)}}}else if(i.tag===18){if(c===null){de=i;try{var Ee=de.stateNode;k?jw(Ee,!0):jw(de.stateNode,!1)}catch(Ke){$t(de,de.return,Ke)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}h&4&&(h=n.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,Od(n,c))));break;case 19:fr(i,n),hr(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,Od(n,h)));break;case 30:break;case 21:break;default:fr(i,n),hr(n)}}function hr(n){var i=n.flags;if(i&2){try{for(var c,h=n.return;h!==null;){if(D1(h)){c=h;break}h=h.return}if(c==null)throw Error(a(160));switch(c.tag){case 27:var k=c.stateNode,D=Eg(n);Md(n,D,k);break;case 5:var Y=c.stateNode;c.flags&32&&(Br(Y,""),c.flags&=-33);var ee=Eg(n);Md(n,ee,Y);break;case 3:case 4:var de=c.stateNode.containerInfo,xe=Eg(n);kg(n,xe,de);break;default:throw Error(a(161))}}catch(je){$t(n,n.return,je)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function B1(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;B1(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Qi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)M1(n,i.alternate,i),i=i.sibling}function Is(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Ia(4,i,i.return),Is(i);break;case 1:Ai(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&j1(i,i.return,c),Is(i);break;case 27:Ac(i.stateNode);case 26:case 5:Ai(i,i.return),Is(i);break;case 22:i.memoizedState===null&&Is(i);break;case 30:Is(i);break;default:Is(i)}n=n.sibling}}function Ji(n,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var h=i.alternate,k=n,D=i,Y=D.flags;switch(D.tag){case 0:case 11:case 15:Ji(k,D,c),vc(4,D);break;case 1:if(Ji(k,D,c),h=D,k=h.stateNode,typeof k.componentDidMount=="function")try{k.componentDidMount()}catch(xe){$t(h,h.return,xe)}if(h=D,k=h.updateQueue,k!==null){var ee=h.stateNode;try{var de=k.shared.hiddenCallbacks;if(de!==null)for(k.shared.hiddenCallbacks=null,k=0;k<de.length;k++)yb(de[k],ee)}catch(xe){$t(h,h.return,xe)}}c&&Y&64&&A1(D),bc(D,D.return);break;case 27:R1(D);case 26:case 5:Ji(k,D,c),c&&h===null&&Y&4&&T1(D),bc(D,D.return);break;case 12:Ji(k,D,c);break;case 31:Ji(k,D,c),c&&Y&4&&L1(k,D);break;case 13:Ji(k,D,c),c&&Y&4&&I1(k,D);break;case 22:D.memoizedState===null&&Ji(k,D,c),bc(D,D.return);break;case 30:break;default:Ji(k,D,c)}i=i.sibling}}function Ag(n,i){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&ac(c))}function jg(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ac(n))}function ii(n,i,c,h){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)H1(n,i,c,h),i=i.sibling}function H1(n,i,c,h){var k=i.flags;switch(i.tag){case 0:case 11:case 15:ii(n,i,c,h),k&2048&&vc(9,i);break;case 1:ii(n,i,c,h);break;case 3:ii(n,i,c,h),k&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ac(n)));break;case 12:if(k&2048){ii(n,i,c,h),n=i.stateNode;try{var D=i.memoizedProps,Y=D.id,ee=D.onPostCommit;typeof ee=="function"&&ee(Y,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(de){$t(i,i.return,de)}}else ii(n,i,c,h);break;case 31:ii(n,i,c,h);break;case 13:ii(n,i,c,h);break;case 23:break;case 22:D=i.stateNode,Y=i.alternate,i.memoizedState!==null?D._visibility&2?ii(n,i,c,h):wc(n,i):D._visibility&2?ii(n,i,c,h):(D._visibility|=2,Lo(n,i,c,h,(i.subtreeFlags&10256)!==0||!1)),k&2048&&Ag(Y,i);break;case 24:ii(n,i,c,h),k&2048&&jg(i.alternate,i);break;default:ii(n,i,c,h)}}function Lo(n,i,c,h,k){for(k=k&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var D=n,Y=i,ee=c,de=h,xe=Y.flags;switch(Y.tag){case 0:case 11:case 15:Lo(D,Y,ee,de,k),vc(8,Y);break;case 23:break;case 22:var je=Y.stateNode;Y.memoizedState!==null?je._visibility&2?Lo(D,Y,ee,de,k):wc(D,Y):(je._visibility|=2,Lo(D,Y,ee,de,k)),k&&xe&2048&&Ag(Y.alternate,Y);break;case 24:Lo(D,Y,ee,de,k),k&&xe&2048&&jg(Y.alternate,Y);break;default:Lo(D,Y,ee,de,k)}i=i.sibling}}function wc(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=n,h=i,k=h.flags;switch(h.tag){case 22:wc(c,h),k&2048&&Ag(h.alternate,h);break;case 24:wc(c,h),k&2048&&jg(h.alternate,h);break;default:wc(c,h)}i=i.sibling}}var xc=8192;function Io(n,i,c){if(n.subtreeFlags&xc)for(n=n.child;n!==null;)U1(n,i,c),n=n.sibling}function U1(n,i,c){switch(n.tag){case 26:Io(n,i,c),n.flags&xc&&n.memoizedState!==null&&Ej(c,ri,n.memoizedState,n.memoizedProps);break;case 5:Io(n,i,c);break;case 3:case 4:var h=ri;ri=Xd(n.stateNode.containerInfo),Io(n,i,c),ri=h;break;case 22:n.memoizedState===null&&(h=n.alternate,h!==null&&h.memoizedState!==null?(h=xc,xc=16777216,Io(n,i,c),xc=h):Io(n,i,c));break;default:Io(n,i,c)}}function F1(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function _c(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var h=i[c];Tn=h,V1(h,n)}F1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)q1(n),n=n.sibling}function q1(n){switch(n.tag){case 0:case 11:case 15:_c(n),n.flags&2048&&Ia(9,n,n.return);break;case 3:_c(n);break;case 12:_c(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,zd(n)):_c(n);break;default:_c(n)}}function zd(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var h=i[c];Tn=h,V1(h,n)}F1(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Ia(8,i,i.return),zd(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,zd(i));break;default:zd(i)}n=n.sibling}}function V1(n,i){for(;Tn!==null;){var c=Tn;switch(c.tag){case 0:case 11:case 15:Ia(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:ac(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Tn=h;else e:for(c=n;Tn!==null;){h=Tn;var k=h.sibling,D=h.return;if(O1(h),h===c){Tn=null;break e}if(k!==null){k.return=D,Tn=k;break e}Tn=D}}}var BA={getCacheForType:function(n){var i=In(pn),c=i.data.get(n);return c===void 0&&(c=n(),i.data.set(n,c)),c},cacheSignal:function(){return In(pn).controller.signal}},HA=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Pt=null,yt=null,wt=0,Rt=0,Ar=null,Pa=!1,Po=!1,Tg=!1,ea=0,rn=0,Ba=0,Ps=0,Dg=0,jr=0,Bo=0,Sc=null,mr=null,Rg=!1,Ld=0,Y1=0,Id=1/0,Pd=null,Ha=null,En=0,Ua=null,Ho=null,ta=0,$g=0,Mg=null,G1=null,Cc=0,Og=null;function Tr(){return(Tt&2)!==0&&wt!==0?wt&-wt:H.T!==null?Hg():qn()}function K1(){if(jr===0)if((wt&536870912)===0||St){var n=it;it<<=1,(it&3932160)===0&&(it=262144),jr=n}else jr=536870912;return n=kr.current,n!==null&&(n.flags|=32),jr}function pr(n,i,c){(n===Pt&&(Rt===2||Rt===9)||n.cancelPendingCommit!==null)&&(Uo(n,0),Fa(n,wt,jr,!1)),an(n,c),((Tt&2)===0||n!==Pt)&&(n===Pt&&((Tt&2)===0&&(Ps|=c),rn===4&&Fa(n,wt,jr,!1)),ji(n))}function X1(n,i,c){if((Tt&6)!==0)throw Error(a(327));var h=!c&&(i&127)===0&&(i&n.expiredLanes)===0||wn(n,i),k=h?qA(n,i):Lg(n,i,!0),D=h;do{if(k===0){Po&&!h&&Fa(n,i,0,!1);break}else{if(c=n.current.alternate,D&&!UA(c)){k=Lg(n,i,!1),D=!1;continue}if(k===2){if(D=i,n.errorRecoveryDisabledLanes&D)var Y=0;else Y=n.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){i=Y;e:{var ee=n;k=Sc;var de=ee.current.memoizedState.isDehydrated;if(de&&(Uo(ee,Y).flags|=256),Y=Lg(ee,Y,!1),Y!==2){if(Tg&&!de){ee.errorRecoveryDisabledLanes|=D,Ps|=D,k=4;break e}D=mr,mr=k,D!==null&&(mr===null?mr=D:mr.push.apply(mr,D))}k=Y}if(D=!1,k!==2)continue}}if(k===1){Uo(n,0),Fa(n,i,0,!0);break}e:{switch(h=n,D=k,D){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Fa(h,i,jr,!Pa);break e;case 2:mr=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(k=Ld+300-Pe(),10<k)){if(Fa(h,i,jr,!Pa),Ft(h,0,!0)!==0)break e;ta=i,h.timeoutHandle=kw(Z1.bind(null,h,c,mr,Pd,Rg,i,jr,Ps,Bo,Pa,D,"Throttled",-0,0),k);break e}Z1(h,c,mr,Pd,Rg,i,jr,Ps,Bo,Pa,D,null,-0,0)}}break}while(!0);ji(n)}function Z1(n,i,c,h,k,D,Y,ee,de,xe,je,De,Se,Ee){if(n.timeoutHandle=-1,De=i.subtreeFlags,De&8192||(De&16785408)===16785408){De={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sr},U1(i,D,De);var Ke=(D&62914560)===D?Ld-Pe():(D&4194048)===D?Y1-Pe():0;if(Ke=kj(De,Ke),Ke!==null){ta=D,n.cancelPendingCommit=Ke(iw.bind(null,n,i,D,c,h,k,Y,ee,de,je,De,null,Se,Ee)),Fa(n,D,Y,!xe);return}}iw(n,i,D,c,h,k,Y,ee,de)}function UA(n){for(var i=n;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var k=c[h],D=k.getSnapshot;k=k.value;try{if(!er(D(),k))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Fa(n,i,c,h){i&=~Dg,i&=~Ps,n.suspendedLanes|=i,n.pingedLanes&=~i,h&&(n.warmLanes|=i),h=n.expirationTimes;for(var k=i;0<k;){var D=31-nt(k),Y=1<<D;h[D]=-1,k&=~Y}c!==0&&_n(n,c,i)}function Bd(){return(Tt&6)===0?(Ec(0),!1):!0}function zg(){if(yt!==null){if(Rt===0)var n=yt.return;else n=yt,qi=Ts=null,Qp(n),Ro=null,oc=0,n=yt;for(;n!==null;)N1(n.alternate,n),n=n.return;yt=null}}function Uo(n,i){var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,lj(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),ta=0,zg(),Pt=n,yt=c=at(n.current,null),wt=i,Rt=0,Ar=null,Pa=!1,Po=wn(n,i),Tg=!1,Bo=jr=Dg=Ps=Ba=rn=0,mr=Sc=null,Rg=!1,(i&8)!==0&&(i|=i&32);var h=n.entangledLanes;if(h!==0)for(n=n.entanglements,h&=i;0<h;){var k=31-nt(h),D=1<<k;i|=n[k],h&=~D}return ea=i,qe(),c}function W1(n,i){lt=null,H.H=pc,i===Do||i===pd?(i=hb(),Rt=3):i===Bp?(i=hb(),Rt=4):Rt=i===mg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ar=i,yt===null&&(rn=1,jd(n,ur(i,n.current)))}function Q1(){var n=kr.current;return n===null?!0:(wt&4194048)===wt?Yr===null:(wt&62914560)===wt||(wt&536870912)!==0?n===Yr:!1}function J1(){var n=H.H;return H.H=pc,n===null?pc:n}function ew(){var n=H.A;return H.A=BA,n}function Hd(){rn=4,Pa||(wt&4194048)!==wt&&kr.current!==null||(Po=!0),(Ba&134217727)===0&&(Ps&134217727)===0||Pt===null||Fa(Pt,wt,jr,!1)}function Lg(n,i,c){var h=Tt;Tt|=2;var k=J1(),D=ew();(Pt!==n||wt!==i)&&(Pd=null,Uo(n,i)),i=!1;var Y=rn;e:do try{if(Rt!==0&&yt!==null){var ee=yt,de=Ar;switch(Rt){case 8:zg(),Y=6;break e;case 3:case 2:case 9:case 6:kr.current===null&&(i=!0);var xe=Rt;if(Rt=0,Ar=null,Fo(n,ee,de,xe),c&&Po){Y=0;break e}break;default:xe=Rt,Rt=0,Ar=null,Fo(n,ee,de,xe)}}FA(),Y=rn;break}catch(je){W1(n,je)}while(!0);return i&&n.shellSuspendCounter++,qi=Ts=null,Tt=h,H.H=k,H.A=D,yt===null&&(Pt=null,wt=0,qe()),Y}function FA(){for(;yt!==null;)tw(yt)}function qA(n,i){var c=Tt;Tt|=2;var h=J1(),k=ew();Pt!==n||wt!==i?(Pd=null,Id=Pe()+500,Uo(n,i)):Po=wn(n,i);e:do try{if(Rt!==0&&yt!==null){i=yt;var D=Ar;t:switch(Rt){case 1:Rt=0,Ar=null,Fo(n,i,D,1);break;case 2:case 9:if(db(D)){Rt=0,Ar=null,nw(i);break}i=function(){Rt!==2&&Rt!==9||Pt!==n||(Rt=7),ji(n)},D.then(i,i);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:db(D)?(Rt=0,Ar=null,nw(i)):(Rt=0,Ar=null,Fo(n,i,D,7));break;case 5:var Y=null;switch(yt.tag){case 26:Y=yt.memoizedState;case 5:case 27:var ee=yt;if(Y?Hw(Y):ee.stateNode.complete){Rt=0,Ar=null;var de=ee.sibling;if(de!==null)yt=de;else{var xe=ee.return;xe!==null?(yt=xe,Ud(xe)):yt=null}break t}}Rt=0,Ar=null,Fo(n,i,D,5);break;case 6:Rt=0,Ar=null,Fo(n,i,D,6);break;case 8:zg(),rn=6;break e;default:throw Error(a(462))}}VA();break}catch(je){W1(n,je)}while(!0);return qi=Ts=null,H.H=h,H.A=k,Tt=c,yt!==null?0:(Pt=null,wt=0,qe(),rn)}function VA(){for(;yt!==null&&!ye();)tw(yt)}function tw(n){var i=E1(n.alternate,n,ea);n.memoizedProps=n.pendingProps,i===null?Ud(n):yt=i}function nw(n){var i=n,c=i.alternate;switch(i.tag){case 15:case 0:i=b1(c,i,i.pendingProps,i.type,void 0,wt);break;case 11:i=b1(c,i,i.pendingProps,i.type.render,i.ref,wt);break;case 5:Qp(i);default:N1(c,i),i=yt=Ut(i,ea),i=E1(c,i,ea)}n.memoizedProps=n.pendingProps,i===null?Ud(n):yt=i}function Fo(n,i,c,h){qi=Ts=null,Qp(i),Ro=null,oc=0;var k=i.return;try{if($A(n,k,i,c,wt)){rn=1,jd(n,ur(c,n.current)),yt=null;return}}catch(D){if(k!==null)throw yt=k,D;rn=1,jd(n,ur(c,n.current)),yt=null;return}i.flags&32768?(St||h===1?n=!0:Po||(wt&536870912)!==0?n=!1:(Pa=n=!0,(h===2||h===9||h===3||h===6)&&(h=kr.current,h!==null&&h.tag===13&&(h.flags|=16384))),rw(i,n)):Ud(i)}function Ud(n){var i=n;do{if((i.flags&32768)!==0){rw(i,Pa);return}n=i.return;var c=zA(i.alternate,i,ea);if(c!==null){yt=c;return}if(i=i.sibling,i!==null){yt=i;return}yt=i=n}while(i!==null);rn===0&&(rn=5)}function rw(n,i){do{var c=LA(n.alternate,n);if(c!==null){c.flags&=32767,yt=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(n=n.sibling,n!==null)){yt=n;return}yt=n=c}while(n!==null);rn=6,yt=null}function iw(n,i,c,h,k,D,Y,ee,de){n.cancelPendingCommit=null;do Fd();while(En!==0);if((Tt&6)!==0)throw Error(a(327));if(i!==null){if(i===n.current)throw Error(a(177));if(D=i.lanes|i.childLanes,D|=Oe,Xt(n,c,D,Y,ee,de),n===Pt&&(yt=Pt=null,wt=0),Ho=i,Ua=n,ta=c,$g=D,Mg=k,G1=h,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,XA(Ne,function(){return cw(),null})):(n.callbackNode=null,n.callbackPriority=0),h=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||h){h=H.T,H.T=null,k=U.p,U.p=2,Y=Tt,Tt|=4;try{IA(n,i,c)}finally{Tt=Y,U.p=k,H.T=h}}En=1,aw(),sw(),ow()}}function aw(){if(En===1){En=0;var n=Ua,i=Ho,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=H.T,H.T=null;var h=U.p;U.p=2;var k=Tt;Tt|=4;try{P1(i,n);var D=Xg,Y=Xl(n.containerInfo),ee=D.focusedElem,de=D.selectionRange;if(Y!==ee&&ee&&ee.ownerDocument&&So(ee.ownerDocument.documentElement,ee)){if(de!==null&&Zl(ee)){var xe=de.start,je=de.end;if(je===void 0&&(je=xe),"selectionStart"in ee)ee.selectionStart=xe,ee.selectionEnd=Math.min(je,ee.value.length);else{var De=ee.ownerDocument||document,Se=De&&De.defaultView||window;if(Se.getSelection){var Ee=Se.getSelection(),Ke=ee.textContent.length,rt=Math.min(de.start,Ke),It=de.end===void 0?rt:Math.min(de.end,Ke);!Ee.extend&&rt>It&&(Y=It,It=rt,rt=Y);var ge=rd(ee,rt),pe=rd(ee,It);if(ge&&pe&&(Ee.rangeCount!==1||Ee.anchorNode!==ge.node||Ee.anchorOffset!==ge.offset||Ee.focusNode!==pe.node||Ee.focusOffset!==pe.offset)){var we=De.createRange();we.setStart(ge.node,ge.offset),Ee.removeAllRanges(),rt>It?(Ee.addRange(we),Ee.extend(pe.node,pe.offset)):(we.setEnd(pe.node,pe.offset),Ee.addRange(we))}}}}for(De=[],Ee=ee;Ee=Ee.parentNode;)Ee.nodeType===1&&De.push({element:Ee,left:Ee.scrollLeft,top:Ee.scrollTop});for(typeof ee.focus=="function"&&ee.focus(),ee=0;ee<De.length;ee++){var Te=De[ee];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}tf=!!Kg,Xg=Kg=null}finally{Tt=k,U.p=h,H.T=c}}n.current=i,En=2}}function sw(){if(En===2){En=0;var n=Ua,i=Ho,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=H.T,H.T=null;var h=U.p;U.p=2;var k=Tt;Tt|=4;try{M1(n,i.alternate,i)}finally{Tt=k,U.p=h,H.T=c}}En=3}}function ow(){if(En===4||En===3){En=0,Re();var n=Ua,i=Ho,c=ta,h=G1;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?En=5:(En=0,Ho=Ua=null,lw(n,n.pendingLanes));var k=n.pendingLanes;if(k===0&&(Ha=null),Sn(c),i=i.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Be,i,void 0,(i.current.flags&128)===128)}catch{}if(h!==null){i=H.T,k=U.p,U.p=2,H.T=null;try{for(var D=n.onRecoverableError,Y=0;Y<h.length;Y++){var ee=h[Y];D(ee.value,{componentStack:ee.stack})}}finally{H.T=i,U.p=k}}(ta&3)!==0&&Fd(),ji(n),k=n.pendingLanes,(c&261930)!==0&&(k&42)!==0?n===Og?Cc++:(Cc=0,Og=n):Cc=0,Ec(0)}}function lw(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,ac(i)))}function Fd(){return aw(),sw(),ow(),cw()}function cw(){if(En!==5)return!1;var n=Ua,i=$g;$g=0;var c=Sn(ta),h=H.T,k=U.p;try{U.p=32>c?32:c,H.T=null,c=Mg,Mg=null;var D=Ua,Y=ta;if(En=0,Ho=Ua=null,ta=0,(Tt&6)!==0)throw Error(a(331));var ee=Tt;if(Tt|=4,q1(D.current),H1(D,D.current,Y,c),Tt=ee,Ec(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Be,D)}catch{}return!0}finally{U.p=k,H.T=h,lw(n,i)}}function uw(n,i,c){i=ur(c,i),i=hg(n.stateNode,i,2),n=Oa(n,i,2),n!==null&&(an(n,2),ji(n))}function $t(n,i,c){if(n.tag===3)uw(n,n,c);else for(;i!==null;){if(i.tag===3){uw(i,n,c);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ha===null||!Ha.has(h))){n=ur(c,n),c=d1(2),h=Oa(i,c,2),h!==null&&(f1(c,h,i,n),an(h,2),ji(h));break}}i=i.return}}function Ig(n,i,c){var h=n.pingCache;if(h===null){h=n.pingCache=new HA;var k=new Set;h.set(i,k)}else k=h.get(i),k===void 0&&(k=new Set,h.set(i,k));k.has(c)||(Tg=!0,k.add(c),n=YA.bind(null,n,i,c),i.then(n,n))}function YA(n,i,c){var h=n.pingCache;h!==null&&h.delete(i),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,Pt===n&&(wt&c)===c&&(rn===4||rn===3&&(wt&62914560)===wt&&300>Pe()-Ld?(Tt&2)===0&&Uo(n,0):Dg|=c,Bo===wt&&(Bo=0)),ji(n)}function dw(n,i){i===0&&(i=qt()),n=be(n,i),n!==null&&(an(n,i),ji(n))}function GA(n){var i=n.memoizedState,c=0;i!==null&&(c=i.retryLane),dw(n,c)}function KA(n,i){var c=0;switch(n.tag){case 31:case 13:var h=n.stateNode,k=n.memoizedState;k!==null&&(c=k.retryLane);break;case 19:h=n.stateNode;break;case 22:h=n.stateNode._retryCache;break;default:throw Error(a(314))}h!==null&&h.delete(i),dw(n,c)}function XA(n,i){return Ce(n,i)}var qd=null,qo=null,Pg=!1,Vd=!1,Bg=!1,qa=0;function ji(n){n!==qo&&n.next===null&&(qo===null?qd=qo=n:qo=qo.next=n),Vd=!0,Pg||(Pg=!0,WA())}function Ec(n,i){if(!Bg&&Vd){Bg=!0;do for(var c=!1,h=qd;h!==null;){if(n!==0){var k=h.pendingLanes;if(k===0)var D=0;else{var Y=h.suspendedLanes,ee=h.pingedLanes;D=(1<<31-nt(42|n)+1)-1,D&=k&~(Y&~ee),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(c=!0,pw(h,D))}else D=wt,D=Ft(h,h===Pt?D:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(D&3)===0||wn(h,D)||(c=!0,pw(h,D));h=h.next}while(c);Bg=!1}}function ZA(){fw()}function fw(){Vd=Pg=!1;var n=0;qa!==0&&oj()&&(n=qa);for(var i=Pe(),c=null,h=qd;h!==null;){var k=h.next,D=hw(h,i);D===0?(h.next=null,c===null?qd=k:c.next=k,k===null&&(qo=c)):(c=h,(n!==0||(D&3)!==0)&&(Vd=!0)),h=k}En!==0&&En!==5||Ec(n),qa!==0&&(qa=0)}function hw(n,i){for(var c=n.suspendedLanes,h=n.pingedLanes,k=n.expirationTimes,D=n.pendingLanes&-62914561;0<D;){var Y=31-nt(D),ee=1<<Y,de=k[Y];de===-1?((ee&c)===0||(ee&h)!==0)&&(k[Y]=fn(ee,i)):de<=i&&(n.expiredLanes|=ee),D&=~ee}if(i=Pt,c=wt,c=Ft(n,n===i?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h=n.callbackNode,c===0||n===i&&(Rt===2||Rt===9)||n.cancelPendingCommit!==null)return h!==null&&h!==null&&ke(h),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||wn(n,c)){if(i=c&-c,i===n.callbackPriority)return i;switch(h!==null&&ke(h),Sn(c)){case 2:case 8:c=Ue;break;case 32:c=Ne;break;case 268435456:c=Ae;break;default:c=Ne}return h=mw.bind(null,n),c=Ce(c,h),n.callbackPriority=i,n.callbackNode=c,i}return h!==null&&h!==null&&ke(h),n.callbackPriority=2,n.callbackNode=null,2}function mw(n,i){if(En!==0&&En!==5)return n.callbackNode=null,n.callbackPriority=0,null;var c=n.callbackNode;if(Fd()&&n.callbackNode!==c)return null;var h=wt;return h=Ft(n,n===Pt?h:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h===0?null:(X1(n,h,i),hw(n,Pe()),n.callbackNode!=null&&n.callbackNode===c?mw.bind(null,n):null)}function pw(n,i){if(Fd())return null;X1(n,i,!0)}function WA(){cj(function(){(Tt&6)!==0?Ce(Fe,ZA):fw()})}function Hg(){if(qa===0){var n=jo;n===0&&(n=Et,Et<<=1,(Et&261888)===0&&(Et=256)),qa=n}return qa}function gw(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:xi(""+n)}function yw(n,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,n.id&&c.setAttribute("form",n.id),i.parentNode.insertBefore(c,i),n=new FormData(n),c.parentNode.removeChild(c),n}function QA(n,i,c,h,k){if(i==="submit"&&c&&c.stateNode===k){var D=gw((k[hn]||null).action),Y=h.submitter;Y&&(i=(i=Y[hn]||null)?gw(i.formAction):Y.getAttribute("formAction"),i!==null&&(D=i,Y=null));var ee=new Ea("action","action",null,h,k);n.push({event:ee,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(qa!==0){var de=Y?yw(k,Y):new FormData(k);og(c,{pending:!0,data:de,method:k.method,action:D},null,de)}}else typeof D=="function"&&(ee.preventDefault(),de=Y?yw(k,Y):new FormData(k),og(c,{pending:!0,data:de,method:k.method,action:D},D,de))},currentTarget:k}]})}}for(var Ug=0;Ug<tc.length;Ug++){var Fg=tc[Ug],JA=Fg.toLowerCase(),ej=Fg[0].toUpperCase()+Fg.slice(1);te(JA,"on"+ej)}te(sd,"onAnimationEnd"),te(Co,"onAnimationIteration"),te(od,"onAnimationStart"),te("dblclick","onDoubleClick"),te("focusin","onFocus"),te("focusout","onBlur"),te(ld,"onTransitionRun"),te(Ap,"onTransitionStart"),te(jp,"onTransitionCancel"),te(ec,"onTransitionEnd"),Jr("onMouseEnter",["mouseout","mouseover"]),Jr("onMouseLeave",["mouseout","mouseover"]),Jr("onPointerEnter",["pointerout","pointerover"]),Jr("onPointerLeave",["pointerout","pointerover"]),Ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kc));function vw(n,i){i=(i&4)!==0;for(var c=0;c<n.length;c++){var h=n[c],k=h.event;h=h.listeners;e:{var D=void 0;if(i)for(var Y=h.length-1;0<=Y;Y--){var ee=h[Y],de=ee.instance,xe=ee.currentTarget;if(ee=ee.listener,de!==D&&k.isPropagationStopped())break e;D=ee,k.currentTarget=xe;try{D(k)}catch(je){se(je)}k.currentTarget=null,D=de}else for(Y=0;Y<h.length;Y++){if(ee=h[Y],de=ee.instance,xe=ee.currentTarget,ee=ee.listener,de!==D&&k.isPropagationStopped())break e;D=ee,k.currentTarget=xe;try{D(k)}catch(je){se(je)}k.currentTarget=null,D=de}}}}function vt(n,i){var c=i[yi];c===void 0&&(c=i[yi]=new Set);var h=n+"__bubble";c.has(h)||(bw(i,n,2,!1),c.add(h))}function qg(n,i,c){var h=0;i&&(h|=4),bw(c,n,h,i)}var Yd="_reactListening"+Math.random().toString(36).slice(2);function Vg(n){if(!n[Yd]){n[Yd]=!0,Lr.forEach(function(c){c!=="selectionchange"&&(tj.has(c)||qg(c,!1,n),qg(c,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Yd]||(i[Yd]=!0,qg("selectionchange",!1,i))}}function bw(n,i,c,h){switch(Kw(i)){case 2:var k=jj;break;case 8:k=Tj;break;default:k=sy}c=k.bind(null,i,c,n),k=void 0,!po||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(k=!0),h?k!==void 0?n.addEventListener(i,c,{capture:!0,passive:k}):n.addEventListener(i,c,!0):k!==void 0?n.addEventListener(i,c,{passive:k}):n.addEventListener(i,c,!1)}function Yg(n,i,c,h,k){var D=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var Y=h.tag;if(Y===3||Y===4){var ee=h.stateNode.containerInfo;if(ee===k)break;if(Y===4)for(Y=h.return;Y!==null;){var de=Y.tag;if((de===3||de===4)&&Y.stateNode.containerInfo===k)return;Y=Y.return}for(;ee!==null;){if(Y=or(ee),Y===null)return;if(de=Y.tag,de===5||de===6||de===26||de===27){h=D=Y;continue e}ee=ee.parentNode}}h=h.return}Ht(function(){var xe=D,je=Xe(c),De=[];e:{var Se=cd.get(n);if(Se!==void 0){var Ee=Ea,Ke=n;switch(n){case"keypress":if(_s(c)===0)break e;case"keydown":case"keyup":Ee=fp;break;case"focusin":Ke="focus",Ee=wo;break;case"focusout":Ke="blur",Ee=wo;break;case"beforeblur":case"afterblur":Ee=wo;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=Bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=Ci;break;case sd:case Co:case od:Ee=tn;break;case ec:Ee=pp;break;case"scroll":case"scrollend":Ee=Pi;break;case"wheel":Ee=gp;break;case"copy":case"cut":case"paste":Ee=on;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=qu;break;case"toggle":case"beforetoggle":Ee=vp}var rt=(i&4)!==0,It=!rt&&(n==="scroll"||n==="scrollend"),ge=rt?Se!==null?Se+"Capture":null:Se;rt=[];for(var pe=xe,we;pe!==null;){var Te=pe;if(we=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||we===null||ge===null||(Te=Li(pe,ge),Te!=null&&rt.push(Nc(pe,Te,we))),It)break;pe=pe.return}0<rt.length&&(Se=new Ee(Se,Ke,null,c,je),De.push({event:Se,listeners:rt}))}}if((i&7)===0){e:{if(Se=n==="mouseover"||n==="pointerover",Ee=n==="mouseout"||n==="pointerout",Se&&c!==mo&&(Ke=c.relatedTarget||c.fromElement)&&(or(Ke)||Ke[Qr]))break e;if((Ee||Se)&&(Se=je.window===je?je:(Se=je.ownerDocument)?Se.defaultView||Se.parentWindow:window,Ee?(Ke=c.relatedTarget||c.toElement,Ee=xe,Ke=Ke?or(Ke):null,Ke!==null&&(It=o(Ke),rt=Ke.tag,Ke!==It||rt!==5&&rt!==27&&rt!==6)&&(Ke=null)):(Ee=null,Ke=xe),Ee!==Ke)){if(rt=Bu,Te="onMouseLeave",ge="onMouseEnter",pe="mouse",(n==="pointerout"||n==="pointerover")&&(rt=qu,Te="onPointerLeave",ge="onPointerEnter",pe="pointer"),It=Ee==null?Se:wr(Ee),we=Ke==null?Se:wr(Ke),Se=new rt(Te,pe+"leave",Ee,c,je),Se.target=It,Se.relatedTarget=we,Te=null,or(je)===xe&&(rt=new rt(ge,pe+"enter",Ke,c,je),rt.target=we,rt.relatedTarget=It,Te=rt),It=Te,Ee&&Ke)t:{for(rt=nj,ge=Ee,pe=Ke,we=0,Te=ge;Te;Te=rt(Te))we++;Te=0;for(var tt=pe;tt;tt=rt(tt))Te++;for(;0<we-Te;)ge=rt(ge),we--;for(;0<Te-we;)pe=rt(pe),Te--;for(;we--;){if(ge===pe||pe!==null&&ge===pe.alternate){rt=ge;break t}ge=rt(ge),pe=rt(pe)}rt=null}else rt=null;Ee!==null&&ww(De,Se,Ee,rt,!1),Ke!==null&&It!==null&&ww(De,It,Ke,rt,!0)}}e:{if(Se=xe?wr(xe):window,Ee=Se.nodeName&&Se.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&Se.type==="file")var Nt=Wu;else if(Xu(Se))if(Qu)Nt=Ep;else{Nt=_o;var Je=Kl}else Ee=Se.nodeName,!Ee||Ee.toLowerCase()!=="input"||Se.type!=="checkbox"&&Se.type!=="radio"?xe&&bs(xe.elementType)&&(Nt=Wu):Nt=Cp;if(Nt&&(Nt=Nt(n,xe))){Zu(De,Nt,c,je);break e}Je&&Je(n,Se,xe),n==="focusout"&&xe&&Se.type==="number"&&xe.memoizedProps.value!=null&&Pr(Se,"number",Se.value)}switch(Je=xe?wr(xe):window,n){case"focusin":(Xu(Je)||Je.contentEditable==="true")&&(ka=Je,Wl=xe,Hi=null);break;case"focusout":Hi=Wl=ka=null;break;case"mousedown":Ql=!0;break;case"contextmenu":case"mouseup":case"dragend":Ql=!1,id(De,c,je);break;case"selectionchange":if(Np)break;case"keydown":case"keyup":id(De,c,je)}var ft;if(Fl)e:{switch(n){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else Bi?ql(n,c)&&(xt="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(xt="onCompositionStart");xt&&(Vu&&c.locale!=="ko"&&(Bi||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Bi&&(ft=Pl()):(mn=je,go="value"in mn?mn.value:mn.textContent,Bi=!0)),Je=Gd(xe,xt),0<Je.length&&(xt=new Fu(xt,n,null,c,je),De.push({event:xt,listeners:Je}),ft?xt.data=ft:(ft=Vl(c),ft!==null&&(xt.data=ft)))),(ft=wp?Ku(n,c):xp(n,c))&&(xt=Gd(xe,"onBeforeInput"),0<xt.length&&(Je=new Fu("onBeforeInput","beforeinput",null,c,je),De.push({event:Je,listeners:xt}),Je.data=ft)),QA(De,n,xe,c,je)}vw(De,i)})}function Nc(n,i,c){return{instance:n,listener:i,currentTarget:c}}function Gd(n,i){for(var c=i+"Capture",h=[];n!==null;){var k=n,D=k.stateNode;if(k=k.tag,k!==5&&k!==26&&k!==27||D===null||(k=Li(n,c),k!=null&&h.unshift(Nc(n,k,D)),k=Li(n,i),k!=null&&h.push(Nc(n,k,D))),n.tag===3)return h;n=n.return}return[]}function nj(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function ww(n,i,c,h,k){for(var D=i._reactName,Y=[];c!==null&&c!==h;){var ee=c,de=ee.alternate,xe=ee.stateNode;if(ee=ee.tag,de!==null&&de===h)break;ee!==5&&ee!==26&&ee!==27||xe===null||(de=xe,k?(xe=Li(c,D),xe!=null&&Y.unshift(Nc(c,xe,de))):k||(xe=Li(c,D),xe!=null&&Y.push(Nc(c,xe,de)))),c=c.return}Y.length!==0&&n.push({event:i,listeners:Y})}var rj=/\r\n?/g,ij=/\u0000|\uFFFD/g;function xw(n){return(typeof n=="string"?n:""+n).replace(rj,`
`).replace(ij,"")}function _w(n,i){return i=xw(i),xw(n)===i}function Lt(n,i,c,h,k,D){switch(c){case"children":typeof h=="string"?i==="body"||i==="textarea"&&h===""||Br(n,h):(typeof h=="number"||typeof h=="bigint")&&i!=="body"&&Br(n,""+h);break;case"className":Qn(n,"class",h);break;case"tabIndex":Qn(n,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Qn(n,c,h);break;case"style":wi(n,h,D);break;case"data":if(i!=="object"){Qn(n,"data",h);break}case"src":case"href":if(h===""&&(i!=="a"||c!=="href")){n.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(c);break}h=xi(""+h),n.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(c==="formAction"?(i!=="input"&&Lt(n,i,"name",k.name,k,null),Lt(n,i,"formEncType",k.formEncType,k,null),Lt(n,i,"formMethod",k.formMethod,k,null),Lt(n,i,"formTarget",k.formTarget,k,null)):(Lt(n,i,"encType",k.encType,k,null),Lt(n,i,"method",k.method,k,null),Lt(n,i,"target",k.target,k,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(c);break}h=xi(""+h),n.setAttribute(c,h);break;case"onClick":h!=null&&(n.onclick=Sr);break;case"onScroll":h!=null&&vt("scroll",n);break;case"onScrollEnd":h!=null&&vt("scrollend",n);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(a(61));if(c=h.__html,c!=null){if(k.children!=null)throw Error(a(60));n.innerHTML=c}}break;case"multiple":n.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":n.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){n.removeAttribute("xlink:href");break}c=xi(""+h),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(c,""+h):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":h===!0?n.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(c,h):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?n.setAttribute(c,h):n.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?n.removeAttribute(c):n.setAttribute(c,h);break;case"popover":vt("beforetoggle",n),vt("toggle",n),ei(n,"popover",h);break;case"xlinkActuate":jn(n,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":jn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":jn(n,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":jn(n,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":jn(n,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":jn(n,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":jn(n,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":jn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":jn(n,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":ei(n,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Gn.get(c)||c,ei(n,c,h))}}function Gg(n,i,c,h,k,D){switch(c){case"style":wi(n,h,D);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(a(61));if(c=h.__html,c!=null){if(k.children!=null)throw Error(a(60));n.innerHTML=c}}break;case"children":typeof h=="string"?Br(n,h):(typeof h=="number"||typeof h=="bigint")&&Br(n,""+h);break;case"onScroll":h!=null&&vt("scroll",n);break;case"onScrollEnd":h!=null&&vt("scrollend",n);break;case"onClick":h!=null&&(n.onclick=Sr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fo.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(k=c.endsWith("Capture"),i=c.slice(2,k?c.length-7:void 0),D=n[hn]||null,D=D!=null?D[c]:null,typeof D=="function"&&n.removeEventListener(i,D,k),typeof h=="function")){typeof D!="function"&&D!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(i,h,k);break e}c in n?n[c]=h:h===!0?n.setAttribute(c,""):ei(n,c,h)}}}function Bn(n,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",n),vt("load",n);var h=!1,k=!1,D;for(D in c)if(c.hasOwnProperty(D)){var Y=c[D];if(Y!=null)switch(D){case"src":h=!0;break;case"srcSet":k=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Lt(n,i,D,Y,c,null)}}k&&Lt(n,i,"srcSet",c.srcSet,c,null),h&&Lt(n,i,"src",c.src,c,null);return;case"input":vt("invalid",n);var ee=D=Y=k=null,de=null,xe=null;for(h in c)if(c.hasOwnProperty(h)){var je=c[h];if(je!=null)switch(h){case"name":k=je;break;case"type":Y=je;break;case"checked":de=je;break;case"defaultChecked":xe=je;break;case"value":D=je;break;case"defaultValue":ee=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(a(137,i));break;default:Lt(n,i,h,je,c,null)}}_a(n,D,ee,de,xe,Y,k,!1);return;case"select":vt("invalid",n),h=Y=D=null;for(k in c)if(c.hasOwnProperty(k)&&(ee=c[k],ee!=null))switch(k){case"value":D=ee;break;case"defaultValue":Y=ee;break;case"multiple":h=ee;default:Lt(n,i,k,ee,c,null)}i=D,c=Y,n.multiple=!!h,i!=null?cr(n,!!h,i,!1):c!=null&&cr(n,!!h,c,!0);return;case"textarea":vt("invalid",n),D=k=h=null;for(Y in c)if(c.hasOwnProperty(Y)&&(ee=c[Y],ee!=null))switch(Y){case"value":h=ee;break;case"defaultValue":k=ee;break;case"children":D=ee;break;case"dangerouslySetInnerHTML":if(ee!=null)throw Error(a(91));break;default:Lt(n,i,Y,ee,c,null)}Sa(n,h,k,D);return;case"option":for(de in c)c.hasOwnProperty(de)&&(h=c[de],h!=null)&&(de==="selected"?n.selected=h&&typeof h!="function"&&typeof h!="symbol":Lt(n,i,de,h,c,null));return;case"dialog":vt("beforetoggle",n),vt("toggle",n),vt("cancel",n),vt("close",n);break;case"iframe":case"object":vt("load",n);break;case"video":case"audio":for(h=0;h<kc.length;h++)vt(kc[h],n);break;case"image":vt("error",n),vt("load",n);break;case"details":vt("toggle",n);break;case"embed":case"source":case"link":vt("error",n),vt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(xe in c)if(c.hasOwnProperty(xe)&&(h=c[xe],h!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Lt(n,i,xe,h,c,null)}return;default:if(bs(i)){for(je in c)c.hasOwnProperty(je)&&(h=c[je],h!==void 0&&Gg(n,i,je,h,c,void 0));return}}for(ee in c)c.hasOwnProperty(ee)&&(h=c[ee],h!=null&&Lt(n,i,ee,h,c,null))}function aj(n,i,c,h){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var k=null,D=null,Y=null,ee=null,de=null,xe=null,je=null;for(Ee in c){var De=c[Ee];if(c.hasOwnProperty(Ee)&&De!=null)switch(Ee){case"checked":break;case"value":break;case"defaultValue":de=De;default:h.hasOwnProperty(Ee)||Lt(n,i,Ee,null,h,De)}}for(var Se in h){var Ee=h[Se];if(De=c[Se],h.hasOwnProperty(Se)&&(Ee!=null||De!=null))switch(Se){case"type":D=Ee;break;case"name":k=Ee;break;case"checked":xe=Ee;break;case"defaultChecked":je=Ee;break;case"value":Y=Ee;break;case"defaultValue":ee=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(a(137,i));break;default:Ee!==De&&Lt(n,i,Se,Ee,h,De)}}Cn(n,Y,ee,de,xe,je,D,k);return;case"select":Ee=Y=ee=Se=null;for(D in c)if(de=c[D],c.hasOwnProperty(D)&&de!=null)switch(D){case"value":break;case"multiple":Ee=de;default:h.hasOwnProperty(D)||Lt(n,i,D,null,h,de)}for(k in h)if(D=h[k],de=c[k],h.hasOwnProperty(k)&&(D!=null||de!=null))switch(k){case"value":Se=D;break;case"defaultValue":ee=D;break;case"multiple":Y=D;default:D!==de&&Lt(n,i,k,D,h,de)}i=ee,c=Y,h=Ee,Se!=null?cr(n,!!c,Se,!1):!!h!=!!c&&(i!=null?cr(n,!!c,i,!0):cr(n,!!c,c?[]:"",!1));return;case"textarea":Ee=Se=null;for(ee in c)if(k=c[ee],c.hasOwnProperty(ee)&&k!=null&&!h.hasOwnProperty(ee))switch(ee){case"value":break;case"children":break;default:Lt(n,i,ee,null,h,k)}for(Y in h)if(k=h[Y],D=c[Y],h.hasOwnProperty(Y)&&(k!=null||D!=null))switch(Y){case"value":Se=k;break;case"defaultValue":Ee=k;break;case"children":break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(a(91));break;default:k!==D&&Lt(n,i,Y,k,h,D)}vs(n,Se,Ee);return;case"option":for(var Ke in c)Se=c[Ke],c.hasOwnProperty(Ke)&&Se!=null&&!h.hasOwnProperty(Ke)&&(Ke==="selected"?n.selected=!1:Lt(n,i,Ke,null,h,Se));for(de in h)Se=h[de],Ee=c[de],h.hasOwnProperty(de)&&Se!==Ee&&(Se!=null||Ee!=null)&&(de==="selected"?n.selected=Se&&typeof Se!="function"&&typeof Se!="symbol":Lt(n,i,de,Se,h,Ee));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rt in c)Se=c[rt],c.hasOwnProperty(rt)&&Se!=null&&!h.hasOwnProperty(rt)&&Lt(n,i,rt,null,h,Se);for(xe in h)if(Se=h[xe],Ee=c[xe],h.hasOwnProperty(xe)&&Se!==Ee&&(Se!=null||Ee!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(a(137,i));break;default:Lt(n,i,xe,Se,h,Ee)}return;default:if(bs(i)){for(var It in c)Se=c[It],c.hasOwnProperty(It)&&Se!==void 0&&!h.hasOwnProperty(It)&&Gg(n,i,It,void 0,h,Se);for(je in h)Se=h[je],Ee=c[je],!h.hasOwnProperty(je)||Se===Ee||Se===void 0&&Ee===void 0||Gg(n,i,je,Se,h,Ee);return}}for(var ge in c)Se=c[ge],c.hasOwnProperty(ge)&&Se!=null&&!h.hasOwnProperty(ge)&&Lt(n,i,ge,null,h,Se);for(De in h)Se=h[De],Ee=c[De],!h.hasOwnProperty(De)||Se===Ee||Se==null&&Ee==null||Lt(n,i,De,Se,h,Ee)}function Sw(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function sj(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var k=c[h],D=k.transferSize,Y=k.initiatorType,ee=k.duration;if(D&&ee&&Sw(Y)){for(Y=0,ee=k.responseEnd,h+=1;h<c.length;h++){var de=c[h],xe=de.startTime;if(xe>ee)break;var je=de.transferSize,De=de.initiatorType;je&&Sw(De)&&(de=de.responseEnd,Y+=je*(de<ee?1:(ee-xe)/(de-xe)))}if(--h,i+=8*(D+Y)/(k.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Kg=null,Xg=null;function Kd(n){return n.nodeType===9?n:n.ownerDocument}function Cw(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ew(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Zg(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Wg=null;function oj(){var n=window.event;return n&&n.type==="popstate"?n===Wg?!1:(Wg=n,!0):(Wg=null,!1)}var kw=typeof setTimeout=="function"?setTimeout:void 0,lj=typeof clearTimeout=="function"?clearTimeout:void 0,Nw=typeof Promise=="function"?Promise:void 0,cj=typeof queueMicrotask=="function"?queueMicrotask:typeof Nw<"u"?function(n){return Nw.resolve(null).then(n).catch(uj)}:kw;function uj(n){setTimeout(function(){throw n})}function Va(n){return n==="head"}function Aw(n,i){var c=i,h=0;do{var k=c.nextSibling;if(n.removeChild(c),k&&k.nodeType===8)if(c=k.data,c==="/$"||c==="/&"){if(h===0){n.removeChild(k),Ko(i);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")Ac(n.ownerDocument.documentElement);else if(c==="head"){c=n.ownerDocument.head,Ac(c);for(var D=c.firstChild;D;){var Y=D.nextSibling,ee=D.nodeName;D[zr]||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&D.rel.toLowerCase()==="stylesheet"||c.removeChild(D),D=Y}}else c==="body"&&Ac(n.ownerDocument.body);c=k}while(c);Ko(i)}function jw(n,i){var c=n;n=0;do{var h=c.nextSibling;if(c.nodeType===1?i?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(i?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(n===0)break;n--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||n++;c=h}while(c)}function Qg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Qg(c),wa(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function dj(n,i,c,h){for(;n.nodeType===1;){var k=c;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!h&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(h){if(!n[zr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(D=n.getAttribute("rel"),D==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(D!==k.rel||n.getAttribute("href")!==(k.href==null||k.href===""?null:k.href)||n.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin)||n.getAttribute("title")!==(k.title==null?null:k.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(D=n.getAttribute("src"),(D!==(k.src==null?null:k.src)||n.getAttribute("type")!==(k.type==null?null:k.type)||n.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin))&&D&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var D=k.name==null?null:""+k.name;if(k.type==="hidden"&&n.getAttribute("name")===D)return n}else return n;if(n=Gr(n.nextSibling),n===null)break}return null}function fj(n,i,c){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=Gr(n.nextSibling),n===null))return null;return n}function Tw(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Gr(n.nextSibling),n===null))return null;return n}function Jg(n){return n.data==="$?"||n.data==="$~"}function ey(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function hj(n,i){var c=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||c.readyState!=="loading")i();else{var h=function(){i(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),n._reactRetry=h}}function Gr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var ty=null;function Dw(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"||c==="/&"){if(i===0)return Gr(n.nextSibling);i--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||i++}n=n.nextSibling}return null}function Rw(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(i===0)return n;i--}else c!=="/$"&&c!=="/&"||i++}n=n.previousSibling}return null}function $w(n,i,c){switch(i=Kd(c),n){case"html":if(n=i.documentElement,!n)throw Error(a(452));return n;case"head":if(n=i.head,!n)throw Error(a(453));return n;case"body":if(n=i.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function Ac(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);wa(n)}var Kr=new Map,Mw=new Set;function Xd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var na=U.d;U.d={f:mj,r:pj,D:gj,C:yj,L:vj,m:bj,X:xj,S:wj,M:_j};function mj(){var n=na.f(),i=Bd();return n||i}function pj(n){var i=vi(n);i!==null&&i.tag===5&&i.type==="form"?Wb(i):na.r(n)}var Vo=typeof document>"u"?null:document;function Ow(n,i,c){var h=Vo;if(h&&typeof i=="string"&&i){var k=On(i);k='link[rel="'+n+'"][href="'+k+'"]',typeof c=="string"&&(k+='[crossorigin="'+c+'"]'),Mw.has(k)||(Mw.add(k),n={rel:n,crossOrigin:c,href:i},h.querySelector(k)===null&&(i=h.createElement("link"),Bn(i,"link",n),Zt(i),h.head.appendChild(i)))}}function gj(n){na.D(n),Ow("dns-prefetch",n,null)}function yj(n,i){na.C(n,i),Ow("preconnect",n,i)}function vj(n,i,c){na.L(n,i,c);var h=Vo;if(h&&n&&i){var k='link[rel="preload"][as="'+On(i)+'"]';i==="image"&&c&&c.imageSrcSet?(k+='[imagesrcset="'+On(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(k+='[imagesizes="'+On(c.imageSizes)+'"]')):k+='[href="'+On(n)+'"]';var D=k;switch(i){case"style":D=Yo(n);break;case"script":D=Go(n)}Kr.has(D)||(n=p({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:n,as:i},c),Kr.set(D,n),h.querySelector(k)!==null||i==="style"&&h.querySelector(jc(D))||i==="script"&&h.querySelector(Tc(D))||(i=h.createElement("link"),Bn(i,"link",n),Zt(i),h.head.appendChild(i)))}}function bj(n,i){na.m(n,i);var c=Vo;if(c&&n){var h=i&&typeof i.as=="string"?i.as:"script",k='link[rel="modulepreload"][as="'+On(h)+'"][href="'+On(n)+'"]',D=k;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=Go(n)}if(!Kr.has(D)&&(n=p({rel:"modulepreload",href:n},i),Kr.set(D,n),c.querySelector(k)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Tc(D)))return}h=c.createElement("link"),Bn(h,"link",n),Zt(h),c.head.appendChild(h)}}}function wj(n,i,c){na.S(n,i,c);var h=Vo;if(h&&n){var k=bi(h).hoistableStyles,D=Yo(n);i=i||"default";var Y=k.get(D);if(!Y){var ee={loading:0,preload:null};if(Y=h.querySelector(jc(D)))ee.loading=5;else{n=p({rel:"stylesheet",href:n,"data-precedence":i},c),(c=Kr.get(D))&&ny(n,c);var de=Y=h.createElement("link");Zt(de),Bn(de,"link",n),de._p=new Promise(function(xe,je){de.onload=xe,de.onerror=je}),de.addEventListener("load",function(){ee.loading|=1}),de.addEventListener("error",function(){ee.loading|=2}),ee.loading|=4,Zd(Y,i,h)}Y={type:"stylesheet",instance:Y,count:1,state:ee},k.set(D,Y)}}}function xj(n,i){na.X(n,i);var c=Vo;if(c&&n){var h=bi(c).hoistableScripts,k=Go(n),D=h.get(k);D||(D=c.querySelector(Tc(k)),D||(n=p({src:n,async:!0},i),(i=Kr.get(k))&&ry(n,i),D=c.createElement("script"),Zt(D),Bn(D,"link",n),c.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},h.set(k,D))}}function _j(n,i){na.M(n,i);var c=Vo;if(c&&n){var h=bi(c).hoistableScripts,k=Go(n),D=h.get(k);D||(D=c.querySelector(Tc(k)),D||(n=p({src:n,async:!0,type:"module"},i),(i=Kr.get(k))&&ry(n,i),D=c.createElement("script"),Zt(D),Bn(D,"link",n),c.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},h.set(k,D))}}function zw(n,i,c,h){var k=(k=J.current)?Xd(k):null;if(!k)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=Yo(c.href),c=bi(k).hoistableStyles,h=c.get(i),h||(h={type:"style",instance:null,count:0,state:null},c.set(i,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=Yo(c.href);var D=bi(k).hoistableStyles,Y=D.get(n);if(Y||(k=k.ownerDocument||k,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(n,Y),(D=k.querySelector(jc(n)))&&!D._p&&(Y.instance=D,Y.state.loading=5),Kr.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Kr.set(n,c),D||Sj(k,n,c,Y.state))),i&&h===null)throw Error(a(528,""));return Y}if(i&&h!==null)throw Error(a(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Go(c),c=bi(k).hoistableScripts,h=c.get(i),h||(h={type:"script",instance:null,count:0,state:null},c.set(i,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function Yo(n){return'href="'+On(n)+'"'}function jc(n){return'link[rel="stylesheet"]['+n+"]"}function Lw(n){return p({},n,{"data-precedence":n.precedence,precedence:null})}function Sj(n,i,c,h){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?h.loading=1:(i=n.createElement("link"),h.preload=i,i.addEventListener("load",function(){return h.loading|=1}),i.addEventListener("error",function(){return h.loading|=2}),Bn(i,"link",c),Zt(i),n.head.appendChild(i))}function Go(n){return'[src="'+On(n)+'"]'}function Tc(n){return"script[async]"+n}function Iw(n,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var h=n.querySelector('style[data-href~="'+On(c.href)+'"]');if(h)return i.instance=h,Zt(h),h;var k=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(n.ownerDocument||n).createElement("style"),Zt(h),Bn(h,"style",k),Zd(h,c.precedence,n),i.instance=h;case"stylesheet":k=Yo(c.href);var D=n.querySelector(jc(k));if(D)return i.state.loading|=4,i.instance=D,Zt(D),D;h=Lw(c),(k=Kr.get(k))&&ny(h,k),D=(n.ownerDocument||n).createElement("link"),Zt(D);var Y=D;return Y._p=new Promise(function(ee,de){Y.onload=ee,Y.onerror=de}),Bn(D,"link",h),i.state.loading|=4,Zd(D,c.precedence,n),i.instance=D;case"script":return D=Go(c.src),(k=n.querySelector(Tc(D)))?(i.instance=k,Zt(k),k):(h=c,(k=Kr.get(D))&&(h=p({},c),ry(h,k)),n=n.ownerDocument||n,k=n.createElement("script"),Zt(k),Bn(k,"link",h),n.head.appendChild(k),i.instance=k);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(h=i.instance,i.state.loading|=4,Zd(h,c.precedence,n));return i.instance}function Zd(n,i,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),k=h.length?h[h.length-1]:null,D=k,Y=0;Y<h.length;Y++){var ee=h[Y];if(ee.dataset.precedence===i)D=ee;else if(D!==k)break}D?D.parentNode.insertBefore(n,D.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(n,i.firstChild))}function ny(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function ry(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Wd=null;function Pw(n,i,c){if(Wd===null){var h=new Map,k=Wd=new Map;k.set(c,h)}else k=Wd,h=k.get(c),h||(h=new Map,k.set(c,h));if(h.has(n))return h;for(h.set(n,null),c=c.getElementsByTagName(n),k=0;k<c.length;k++){var D=c[k];if(!(D[zr]||D[sn]||n==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=D.getAttribute(i)||"";Y=n+Y;var ee=h.get(Y);ee?ee.push(D):h.set(Y,[D])}}return h}function Bw(n,i,c){n=n.ownerDocument||n,n.head.insertBefore(c,i==="title"?n.querySelector("head > title"):null)}function Cj(n,i,c){if(c===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Hw(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Ej(n,i,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var k=Yo(h.href),D=i.querySelector(jc(k));if(D){i=D._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Qd.bind(n),i.then(n,n)),c.state.loading|=4,c.instance=D,Zt(D);return}D=i.ownerDocument||i,h=Lw(h),(k=Kr.get(k))&&ny(h,k),D=D.createElement("link"),Zt(D);var Y=D;Y._p=new Promise(function(ee,de){Y.onload=ee,Y.onerror=de}),Bn(D,"link",h),c.instance=D}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(c,i),(i=c.state.preload)&&(c.state.loading&3)===0&&(n.count++,c=Qd.bind(n),i.addEventListener("load",c),i.addEventListener("error",c))}}var iy=0;function kj(n,i){return n.stylesheets&&n.count===0&&ef(n,n.stylesheets),0<n.count||0<n.imgCount?function(c){var h=setTimeout(function(){if(n.stylesheets&&ef(n,n.stylesheets),n.unsuspend){var D=n.unsuspend;n.unsuspend=null,D()}},6e4+i);0<n.imgBytes&&iy===0&&(iy=62500*sj());var k=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ef(n,n.stylesheets),n.unsuspend)){var D=n.unsuspend;n.unsuspend=null,D()}},(n.imgBytes>iy?50:800)+i);return n.unsuspend=c,function(){n.unsuspend=null,clearTimeout(h),clearTimeout(k)}}:null}function Qd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ef(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Jd=null;function ef(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Jd=new Map,i.forEach(Nj,n),Jd=null,Qd.call(n))}function Nj(n,i){if(!(i.state.loading&4)){var c=Jd.get(n);if(c)var h=c.get(null);else{c=new Map,Jd.set(n,c);for(var k=n.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<k.length;D++){var Y=k[D];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(c.set(Y.dataset.precedence,Y),h=Y)}h&&c.set(null,h)}k=i.instance,Y=k.getAttribute("data-precedence"),D=c.get(Y)||h,D===h&&c.set(null,k),c.set(Y,k),this.count++,h=Qd.bind(this),k.addEventListener("load",h),k.addEventListener("error",h),D?D.parentNode.insertBefore(k,D.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(k,n.firstChild)),i.state.loading|=4}}var Dc={$$typeof:C,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function Aj(n,i,c,h,k,D,Y,ee,de){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xn(0),this.hiddenUpdates=xn(null),this.identifierPrefix=h,this.onUncaughtError=k,this.onCaughtError=D,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=de,this.incompleteTransitions=new Map}function Uw(n,i,c,h,k,D,Y,ee,de,xe,je,De){return n=new Aj(n,i,c,Y,de,xe,je,De,ee),i=1,D===!0&&(i|=24),D=Dt(3,null,null,i),n.current=D,D.stateNode=n,i=Lp(),i.refCount++,n.pooledCache=i,i.refCount++,D.memoizedState={element:h,isDehydrated:c,cache:i},Hp(D),n}function Fw(n){return n?(n=Qe,n):Qe}function qw(n,i,c,h,k,D){k=Fw(k),h.context===null?h.context=k:h.pendingContext=k,h=Ma(i),h.payload={element:c},D=D===void 0?null:D,D!==null&&(h.callback=D),c=Oa(n,h,i),c!==null&&(pr(c,n,i),cc(c,n,i))}function Vw(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<i?c:i}}function ay(n,i){Vw(n,i),(n=n.alternate)&&Vw(n,i)}function Yw(n){if(n.tag===13||n.tag===31){var i=be(n,67108864);i!==null&&pr(i,n,67108864),ay(n,67108864)}}function Gw(n){if(n.tag===13||n.tag===31){var i=Tr();i=br(i);var c=be(n,i);c!==null&&pr(c,n,i),ay(n,i)}}var tf=!0;function jj(n,i,c,h){var k=H.T;H.T=null;var D=U.p;try{U.p=2,sy(n,i,c,h)}finally{U.p=D,H.T=k}}function Tj(n,i,c,h){var k=H.T;H.T=null;var D=U.p;try{U.p=8,sy(n,i,c,h)}finally{U.p=D,H.T=k}}function sy(n,i,c,h){if(tf){var k=oy(h);if(k===null)Yg(n,i,h,nf,c),Xw(n,h);else if(Rj(k,n,i,c,h))h.stopPropagation();else if(Xw(n,h),i&4&&-1<Dj.indexOf(n)){for(;k!==null;){var D=vi(k);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var Y=kt(D.pendingLanes);if(Y!==0){var ee=D;for(ee.pendingLanes|=2,ee.entangledLanes|=2;Y;){var de=1<<31-nt(Y);ee.entanglements[1]|=de,Y&=~de}ji(D),(Tt&6)===0&&(Id=Pe()+500,Ec(0))}}break;case 31:case 13:ee=be(D,2),ee!==null&&pr(ee,D,2),Bd(),ay(D,2)}if(D=oy(h),D===null&&Yg(n,i,h,nf,c),D===k)break;k=D}k!==null&&h.stopPropagation()}else Yg(n,i,h,null,c)}}function oy(n){return n=Xe(n),ly(n)}var nf=null;function ly(n){if(nf=null,n=or(n),n!==null){var i=o(n);if(i===null)n=null;else{var c=i.tag;if(c===13){if(n=l(i),n!==null)return n;n=null}else if(c===31){if(n=u(i),n!==null)return n;n=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return nf=n,null}function Kw(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Le()){case Fe:return 2;case Ue:return 8;case Ne:case $e:return 32;case Ae:return 268435456;default:return 32}default:return 32}}var cy=!1,Ya=null,Ga=null,Ka=null,Rc=new Map,$c=new Map,Xa=[],Dj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xw(n,i){switch(n){case"focusin":case"focusout":Ya=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":Rc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":$c.delete(i.pointerId)}}function Mc(n,i,c,h,k,D){return n===null||n.nativeEvent!==D?(n={blockedOn:i,domEventName:c,eventSystemFlags:h,nativeEvent:D,targetContainers:[k]},i!==null&&(i=vi(i),i!==null&&Yw(i)),n):(n.eventSystemFlags|=h,i=n.targetContainers,k!==null&&i.indexOf(k)===-1&&i.push(k),n)}function Rj(n,i,c,h,k){switch(i){case"focusin":return Ya=Mc(Ya,n,i,c,h,k),!0;case"dragenter":return Ga=Mc(Ga,n,i,c,h,k),!0;case"mouseover":return Ka=Mc(Ka,n,i,c,h,k),!0;case"pointerover":var D=k.pointerId;return Rc.set(D,Mc(Rc.get(D)||null,n,i,c,h,k)),!0;case"gotpointercapture":return D=k.pointerId,$c.set(D,Mc($c.get(D)||null,n,i,c,h,k)),!0}return!1}function Zw(n){var i=or(n.target);if(i!==null){var c=o(i);if(c!==null){if(i=c.tag,i===13){if(i=l(c),i!==null){n.blockedOn=i,sr(n.priority,function(){Gw(c)});return}}else if(i===31){if(i=u(c),i!==null){n.blockedOn=i,sr(n.priority,function(){Gw(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function rf(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var c=oy(n.nativeEvent);if(c===null){c=n.nativeEvent;var h=new c.constructor(c.type,c);mo=h,c.target.dispatchEvent(h),mo=null}else return i=vi(c),i!==null&&Yw(i),n.blockedOn=c,!1;i.shift()}return!0}function Ww(n,i,c){rf(n)&&c.delete(i)}function $j(){cy=!1,Ya!==null&&rf(Ya)&&(Ya=null),Ga!==null&&rf(Ga)&&(Ga=null),Ka!==null&&rf(Ka)&&(Ka=null),Rc.forEach(Ww),$c.forEach(Ww)}function af(n,i){n.blockedOn===i&&(n.blockedOn=null,cy||(cy=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$j)))}var sf=null;function Qw(n){sf!==n&&(sf=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){sf===n&&(sf=null);for(var i=0;i<n.length;i+=3){var c=n[i],h=n[i+1],k=n[i+2];if(typeof h!="function"){if(ly(h||c)===null)continue;break}var D=vi(c);D!==null&&(n.splice(i,3),i-=3,og(D,{pending:!0,data:k,method:c.method,action:h},h,k))}}))}function Ko(n){function i(de){return af(de,n)}Ya!==null&&af(Ya,n),Ga!==null&&af(Ga,n),Ka!==null&&af(Ka,n),Rc.forEach(i),$c.forEach(i);for(var c=0;c<Xa.length;c++){var h=Xa[c];h.blockedOn===n&&(h.blockedOn=null)}for(;0<Xa.length&&(c=Xa[0],c.blockedOn===null);)Zw(c),c.blockedOn===null&&Xa.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var k=c[h],D=c[h+1],Y=k[hn]||null;if(typeof D=="function")Y||Qw(c);else if(Y){var ee=null;if(D&&D.hasAttribute("formAction")){if(k=D,Y=D[hn]||null)ee=Y.formAction;else if(ly(k)!==null)continue}else ee=Y.action;typeof ee=="function"?c[h+1]=ee:(c.splice(h,3),h-=3),Qw(c)}}}function Jw(){function n(D){D.canIntercept&&D.info==="react-transition"&&D.intercept({handler:function(){return new Promise(function(Y){return k=Y})},focusReset:"manual",scroll:"manual"})}function i(){k!==null&&(k(),k=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var D=navigation.currentEntry;D&&D.url!=null&&navigation.navigate(D.url,{state:D.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,k=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),k!==null&&(k(),k=null)}}}function uy(n){this._internalRoot=n}of.prototype.render=uy.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(a(409));var c=i.current,h=Tr();qw(c,h,n,i,null,null)},of.prototype.unmount=uy.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;qw(n.current,2,null,n,null,null),Bd(),i[Qr]=null}};function of(n){this._internalRoot=n}of.prototype.unstable_scheduleHydration=function(n){if(n){var i=qn();n={blockedOn:null,target:n,priority:i};for(var c=0;c<Xa.length&&i!==0&&i<Xa[c].priority;c++);Xa.splice(c,0,n),c===0&&Zw(n)}};var ex=t.version;if(ex!=="19.2.4")throw Error(a(527,ex,"19.2.4"));U.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=f(i),n=n!==null?m(n):null,n=n===null?null:n.stateNode,n};var Mj={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lf.isDisabled&&lf.supportsFiber)try{Be=lf.inject(Mj),Ye=lf}catch{}}return zc.createRoot=function(n,i){if(!s(n))throw Error(a(299));var c=!1,h="",k=o1,D=l1,Y=c1;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(k=i.onUncaughtError),i.onCaughtError!==void 0&&(D=i.onCaughtError),i.onRecoverableError!==void 0&&(Y=i.onRecoverableError)),i=Uw(n,1,!1,null,null,c,h,null,k,D,Y,Jw),n[Qr]=i.current,Vg(n),new uy(i)},zc.hydrateRoot=function(n,i,c){if(!s(n))throw Error(a(299));var h=!1,k="",D=o1,Y=l1,ee=c1,de=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(k=c.identifierPrefix),c.onUncaughtError!==void 0&&(D=c.onUncaughtError),c.onCaughtError!==void 0&&(Y=c.onCaughtError),c.onRecoverableError!==void 0&&(ee=c.onRecoverableError),c.formState!==void 0&&(de=c.formState)),i=Uw(n,1,!0,i,c??null,h,k,de,D,Y,ee,Jw),i.context=Fw(null),c=i.current,h=Tr(),h=br(h),k=Ma(h),k.callback=null,Oa(c,k,h),c=h,i.current.lanes=c,an(i,c),ji(i),n[Qr]=i.current,Vg(n),new of(i)},zc.version="19.2.4",zc}var ux;function Fj(){if(ux)return hy.exports;ux=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),hy.exports=Uj(),hy.exports}var qj=Fj();var dx="popstate";function Vj(e={}){function t(a,s){let{pathname:o,search:l,hash:u}=a.location;return o0("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(a,s){return typeof s=="string"?s:Jc(s)}return Gj(t,r,null,e)}function en(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function fi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Yj(){return Math.random().toString(36).substring(2,10)}function fx(e,t){return{usr:e.state,key:e.key,idx:t}}function o0(e,t,r=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?El(t):t,state:r,key:t&&t.key||a||Yj()}}function Jc({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function El(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function Gj(e,t,r,a={}){let{window:s=document.defaultView,v5Compat:o=!1}=a,l=s.history,u="POP",d=null,f=m();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function m(){return(l.state||{idx:null}).idx}function p(){u="POP";let w=m(),x=w==null?null:w-f;f=w,d&&d({action:u,location:b.location,delta:x})}function g(w,x){u="PUSH";let S=o0(b.location,w,x);f=m()+1;let C=fx(S,f),A=b.createHref(S);try{l.pushState(C,"",A)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(A)}o&&d&&d({action:u,location:b.location,delta:1})}function y(w,x){u="REPLACE";let S=o0(b.location,w,x);f=m();let C=fx(S,f),A=b.createHref(S);l.replaceState(C,"",A),o&&d&&d({action:u,location:b.location,delta:0})}function _(w){return Kj(w)}let b={get action(){return u},get location(){return e(s,l)},listen(w){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(dx,p),d=w,()=>{s.removeEventListener(dx,p),d=null}},createHref(w){return t(s,w)},createURL:_,encodeLocation(w){let x=_(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:y,go(w){return l.go(w)}};return b}function Kj(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),en(r,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:Jc(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=r+a),new URL(a,r)}function Q2(e,t,r="/"){return Xj(e,t,r,!1)}function Xj(e,t,r,a){let s=typeof t=="string"?El(t):t,o=ma(s.pathname||"/",r);if(o==null)return null;let l=J2(e);Zj(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=oT(o);u=aT(l[d],f,a)}return u}function J2(e,t=[],r=[],a="",s=!1){let o=(l,u,d=s,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(a)&&d)return;en(m.relativePath.startsWith(a),`Absolute route path "${m.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(a.length)}let p=ha([a,m.relativePath]),g=r.concat(m);l.children&&l.children.length>0&&(en(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),J2(l.children,t,g,p,d)),!(l.path==null&&!l.index)&&t.push({path:p,score:rT(p,l.index),routesMeta:g})};return e.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of eC(l.path))o(l,u,!0,d)}),t}function eC(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(a.length===0)return s?[o,""]:[o];let l=eC(a.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function Zj(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:iT(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var Wj=/^:[\w-]+$/,Qj=3,Jj=2,eT=1,tT=10,nT=-2,hx=e=>e==="*";function rT(e,t){let r=e.split("/"),a=r.length;return r.some(hx)&&(a+=nT),t&&(a+=Jj),r.filter(s=>!hx(s)).reduce((s,o)=>s+(Wj.test(o)?Qj:o===""?eT:tT),a)}function iT(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function aT(e,t,r=!1){let{routesMeta:a}=e,s={},o="/",l=[];for(let u=0;u<a.length;++u){let d=a[u],f=u===a.length-1,m=o==="/"?t:t.slice(o.length)||"/",p=Th({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},m),g=d.route;if(!p&&f&&r&&!a[a.length-1].route.index&&(p=Th({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:ha([o,p.pathname]),pathnameBase:dT(ha([o,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(o=ha([o,p.pathnameBase]))}return l}function Th(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=sT(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:a.reduce((f,{paramName:m,isOptional:p},g)=>{if(m==="*"){let _=u[g]||"";l=o.slice(0,o.length-_.length).replace(/(.)\/+$/,"$1")}const y=u[g];return p&&!y?f[m]=void 0:f[m]=(y||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:e}}function sT(e,t=!1,r=!0){fi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(a.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function oT(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return fi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ma(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}var lT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function cT(e,t="/"){let{pathname:r,search:a="",hash:s=""}=typeof e=="string"?El(e):e,o;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?o=mx(r.substring(1),"/"):o=mx(r,t)):o=t,{pathname:o,search:fT(a),hash:hT(s)}}function mx(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function yy(e,t,r,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uT(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function tC(e){let t=uT(e);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function nC(e,t,r,a=!1){let s;typeof e=="string"?s=El(e):(s={...e},en(!s.pathname||!s.pathname.includes("?"),yy("?","pathname","search",s)),en(!s.pathname||!s.pathname.includes("#"),yy("#","pathname","hash",s)),en(!s.search||!s.search.includes("#"),yy("#","search","hash",s)));let o=e===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=r;else{let p=t.length-1;if(!a&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}u=p>=0?t[p]:"/"}let d=cT(s,u),f=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(f||m)&&(d.pathname+="/"),d}var ha=e=>e.join("/").replace(/\/\/+/g,"/"),dT=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),fT=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,hT=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,mT=class{constructor(e,t,r,a=!1){this.status=e,this.statusText=t||"",this.internal=a,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function pT(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function gT(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var rC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function iC(e,t){let r=e;if(typeof r!="string"||!lT.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let a=r,s=!1;if(rC)try{let o=new URL(window.location.href),l=r.startsWith("//")?new URL(o.protocol+r):new URL(r),u=ma(l.pathname,t);l.origin===o.origin&&u!=null?r=u+l.search+l.hash:s=!0}catch{fi(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:s,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var aC=["POST","PUT","PATCH","DELETE"];new Set(aC);var yT=["GET",...aC];new Set(yT);var kl=N.createContext(null);kl.displayName="DataRouter";var pm=N.createContext(null);pm.displayName="DataRouterState";var vT=N.createContext(!1),sC=N.createContext({isTransitioning:!1});sC.displayName="ViewTransition";var bT=N.createContext(new Map);bT.displayName="Fetchers";var wT=N.createContext(null);wT.displayName="Await";var Wr=N.createContext(null);Wr.displayName="Navigation";var Su=N.createContext(null);Su.displayName="Location";var Oi=N.createContext({outlet:null,matches:[],isDataRoute:!1});Oi.displayName="Route";var ev=N.createContext(null);ev.displayName="RouteError";var oC="REACT_ROUTER_ERROR",xT="REDIRECT",_T="ROUTE_ERROR_RESPONSE";function ST(e){if(e.startsWith(`${oC}:${xT}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function CT(e){if(e.startsWith(`${oC}:${_T}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new mT(t.status,t.statusText,t.data)}catch{}}function ET(e,{relative:t}={}){en(Cu(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=N.useContext(Wr),{hash:s,pathname:o,search:l}=Eu(e,{relative:t}),u=o;return r!=="/"&&(u=o==="/"?r:ha([r,o])),a.createHref({pathname:u,search:l,hash:s})}function Cu(){return N.useContext(Su)!=null}function hs(){return en(Cu(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Su).location}var lC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cC(e){N.useContext(Wr).static||N.useLayoutEffect(e)}function tv(){let{isDataRoute:e}=N.useContext(Oi);return e?PT():kT()}function kT(){en(Cu(),"useNavigate() may be used only in the context of a <Router> component.");let e=N.useContext(kl),{basename:t,navigator:r}=N.useContext(Wr),{matches:a}=N.useContext(Oi),{pathname:s}=hs(),o=JSON.stringify(tC(a)),l=N.useRef(!1);return cC(()=>{l.current=!0}),N.useCallback((d,f={})=>{if(fi(l.current,lC),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=nC(d,JSON.parse(o),s,f.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:ha([t,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[t,r,o,s,e])}N.createContext(null);function NT(){let{matches:e}=N.useContext(Oi),t=e[e.length-1];return t?t.params:{}}function Eu(e,{relative:t}={}){let{matches:r}=N.useContext(Oi),{pathname:a}=hs(),s=JSON.stringify(tC(r));return N.useMemo(()=>nC(e,JSON.parse(s),a,t==="path"),[e,s,a,t])}function AT(e,t){return uC(e,t)}function uC(e,t,r,a,s){en(Cu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=N.useContext(Wr),{matches:l}=N.useContext(Oi),u=l[l.length-1],d=u?u.params:{},f=u?u.pathname:"/",m=u?u.pathnameBase:"/",p=u&&u.route;{let S=p&&p.path||"";fC(f,!p||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let g=hs(),y;if(t){let S=typeof t=="string"?El(t):t;en(m==="/"||S.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${S.pathname}" was given in the \`location\` prop.`),y=S}else y=g;let _=y.pathname||"/",b=_;if(m!=="/"){let S=m.replace(/^\//,"").split("/");b="/"+_.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=Q2(e,{pathname:b});fi(p||w!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),fi(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=$T(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},d,S.params),pathname:ha([m,o.encodeLocation?o.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?m:ha([m,o.encodeLocation?o.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),l,r,a,s);return t&&x?N.createElement(Su.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},x):x}function jT(){let e=IT(),t=pT(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},o={padding:"2px 4px",backgroundColor:a},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:o},"ErrorBoundary")," or"," ",N.createElement("code",{style:o},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:s},r):null,l)}var TT=N.createElement(jT,null),dC=class extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=CT(e.digest);r&&(e=r)}let t=e!==void 0?N.createElement(Oi.Provider,{value:this.props.routeContext},N.createElement(ev.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?N.createElement(DT,{error:e},t):t}};dC.contextType=vT;var vy=new WeakMap;function DT({children:e,error:t}){let{basename:r}=N.useContext(Wr);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let a=ST(t.digest);if(a){let s=vy.get(t);if(s)throw s;let o=iC(a.location,r);if(rC&&!vy.get(t))if(o.isExternal||a.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:a.replace}));throw vy.set(t,l),l}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return e}function RT({routeContext:e,match:t,children:r}){let a=N.useContext(kl);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(Oi.Provider,{value:e},r)}function $T(e,t=[],r=null,a=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=r?.errors;if(l!=null){let m=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);en(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let u=!1,d=-1;if(r)for(let m=0;m<o.length;m++){let p=o[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:g,errors:y}=r,_=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||_){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=r&&a?(m,p)=>{a(m,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:gT(r.matches),errorInfo:p})}:void 0;return o.reduceRight((m,p,g)=>{let y,_=!1,b=null,w=null;r&&(y=l&&p.route.id?l[p.route.id]:void 0,b=p.route.errorElement||TT,u&&(d<0&&g===0?(fC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,w=null):d===g&&(_=!0,w=p.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,g+1)),S=()=>{let C;return y?C=b:_?C=w:p.route.Component?C=N.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=m,N.createElement(RT,{match:p,routeContext:{outlet:m,matches:x,isDataRoute:r!=null},children:C})};return r&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?N.createElement(dC,{location:r.location,revalidation:r.revalidation,component:b,error:y,children:S(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:f}):S()},null)}function nv(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MT(e){let t=N.useContext(kl);return en(t,nv(e)),t}function OT(e){let t=N.useContext(pm);return en(t,nv(e)),t}function zT(e){let t=N.useContext(Oi);return en(t,nv(e)),t}function rv(e){let t=zT(e),r=t.matches[t.matches.length-1];return en(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function LT(){return rv("useRouteId")}function IT(){let e=N.useContext(ev),t=OT("useRouteError"),r=rv("useRouteError");return e!==void 0?e:t.errors?.[r]}function PT(){let{router:e}=MT("useNavigate"),t=rv("useNavigate"),r=N.useRef(!1);return cC(()=>{r.current=!0}),N.useCallback(async(s,o={})=>{fi(r.current,lC),r.current&&(typeof s=="number"?await e.navigate(s):await e.navigate(s,{fromRouteId:t,...o}))},[e,t])}var px={};function fC(e,t,r){!t&&!px[e]&&(px[e]=!0,fi(!1,r))}N.memo(BT);function BT({routes:e,future:t,state:r,onError:a}){return uC(e,void 0,r,a,t)}function l0(e){en(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function HT({basename:e="/",children:t=null,location:r,navigationType:a="POP",navigator:s,static:o=!1,unstable_useTransitions:l}){en(!Cu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:u,navigator:s,static:o,unstable_useTransitions:l,future:{}}),[u,s,o,l]);typeof r=="string"&&(r=El(r));let{pathname:f="/",search:m="",hash:p="",state:g=null,key:y="default"}=r,_=N.useMemo(()=>{let b=ma(f,u);return b==null?null:{location:{pathname:b,search:m,hash:p,state:g,key:y},navigationType:a}},[u,f,m,p,g,y,a]);return fi(_!=null,`<Router basename="${u}"> is not able to match the URL "${f}${m}${p}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:N.createElement(Wr.Provider,{value:d},N.createElement(Su.Provider,{children:t,value:_}))}function UT({children:e,location:t}){return AT(c0(e),t)}function c0(e,t=[]){let r=[];return N.Children.forEach(e,(a,s)=>{if(!N.isValidElement(a))return;let o=[...t,s];if(a.type===N.Fragment){r.push.apply(r,c0(a.props.children,o));return}en(a.type===l0,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),en(!a.props.index||!a.props.children,"An index route cannot have child routes.");let l={id:a.props.id||o.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=c0(a.props.children,o)),r.push(l)}),r}var ph="get",gh="application/x-www-form-urlencoded";function gm(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function FT(e){return gm(e)&&e.tagName.toLowerCase()==="button"}function qT(e){return gm(e)&&e.tagName.toLowerCase()==="form"}function VT(e){return gm(e)&&e.tagName.toLowerCase()==="input"}function YT(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function GT(e,t){return e.button===0&&(!t||t==="_self")&&!YT(e)}function u0(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let a=e[r];return t.concat(Array.isArray(a)?a.map(s=>[r,s]):[[r,a]])},[]))}function KT(e,t){let r=u0(e);return t&&t.forEach((a,s)=>{r.has(s)||t.getAll(s).forEach(o=>{r.append(s,o)})}),r}var uf=null;function XT(){if(uf===null)try{new FormData(document.createElement("form"),0),uf=!1}catch{uf=!0}return uf}var ZT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function by(e){return e!=null&&!ZT.has(e)?(fi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gh}"`),null):e}function WT(e,t){let r,a,s,o,l;if(qT(e)){let u=e.getAttribute("action");a=u?ma(u,t):null,r=e.getAttribute("method")||ph,s=by(e.getAttribute("enctype"))||gh,o=new FormData(e)}else if(FT(e)||VT(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(a=d?ma(d,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||ph,s=by(e.getAttribute("formenctype"))||by(u.getAttribute("enctype"))||gh,o=new FormData(u,e),!XT()){let{name:f,type:m,value:p}=e;if(m==="image"){let g=f?`${f}.`:"";o.append(`${g}x`,"0"),o.append(`${g}y`,"0")}else f&&o.append(f,p)}}else{if(gm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ph,a=null,s=gh,l=e}return o&&s==="text/plain"&&(l=o,o=void 0),{action:a,method:r.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function iv(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function QT(e,t,r,a){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${a}`:s.pathname=`${s.pathname}.${a}`:s.pathname==="/"?s.pathname=`_root.${a}`:t&&ma(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function JT(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function eD(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function tD(e,t,r){let a=await Promise.all(e.map(async s=>{let o=t.routes[s.route.id];if(o){let l=await JT(o,r);return l.links?l.links():[]}return[]}));return aD(a.flat(1).filter(eD).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function gx(e,t,r,a,s,o){let l=(d,f)=>r[f]?d.route.id!==r[f].route.id:!0,u=(d,f)=>r[f].pathname!==d.pathname||r[f].route.path?.endsWith("*")&&r[f].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,f)=>l(d,f)||u(d,f)):o==="data"?t.filter((d,f)=>{let m=a.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let p=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function nD(e,t,{includeHydrateFallback:r}={}){return rD(e.map(a=>{let s=t.routes[a.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function rD(e){return[...new Set(e)]}function iD(e){let t={},r=Object.keys(e).sort();for(let a of r)t[a]=e[a];return t}function aD(e,t){let r=new Set;return new Set(t),e.reduce((a,s)=>{let o=JSON.stringify(iD(s));return r.has(o)||(r.add(o),a.push({key:o,link:s})),a},[])}function hC(){let e=N.useContext(kl);return iv(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function sD(){let e=N.useContext(pm);return iv(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var av=N.createContext(void 0);av.displayName="FrameworkContext";function mC(){let e=N.useContext(av);return iv(e,"You must render this element inside a <HydratedRouter> element"),e}function oD(e,t){let r=N.useContext(av),[a,s]=N.useState(!1),[o,l]=N.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:m,onTouchStart:p}=t,g=N.useRef(null);N.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let b=x=>{x.forEach(S=>{l(S.isIntersecting)})},w=new IntersectionObserver(b,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[e]),N.useEffect(()=>{if(a){let b=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(b)}}},[a]);let y=()=>{s(!0)},_=()=>{s(!1),l(!1)};return r?e!=="intent"?[o,g,{}]:[o,g,{onFocus:Lc(u,y),onBlur:Lc(d,_),onMouseEnter:Lc(f,y),onMouseLeave:Lc(m,_),onTouchStart:Lc(p,y)}]:[!1,g,{}]}function Lc(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function lD({page:e,...t}){let{router:r}=hC(),a=N.useMemo(()=>Q2(r.routes,e,r.basename),[r.routes,e,r.basename]);return a?N.createElement(uD,{page:e,matches:a,...t}):null}function cD(e){let{manifest:t,routeModules:r}=mC(),[a,s]=N.useState([]);return N.useEffect(()=>{let o=!1;return tD(e,t,r).then(l=>{o||s(l)}),()=>{o=!0}},[e,t,r]),a}function uD({page:e,matches:t,...r}){let a=hs(),{future:s,manifest:o,routeModules:l}=mC(),{basename:u}=hC(),{loaderData:d,matches:f}=sD(),m=N.useMemo(()=>gx(e,t,f,o,a,"data"),[e,t,f,o,a]),p=N.useMemo(()=>gx(e,t,f,o,a,"assets"),[e,t,f,o,a]),g=N.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let b=new Set,w=!1;if(t.forEach(S=>{let C=o.routes[S.route.id];!C||!C.hasLoader||(!m.some(A=>A.route.id===S.route.id)&&S.route.id in d&&l[S.route.id]?.shouldRevalidate||C.hasClientLoader?w=!0:b.add(S.route.id))}),b.size===0)return[];let x=QT(e,u,s.unstable_trailingSlashAwareDataRequests,"data");return w&&b.size>0&&x.searchParams.set("_routes",t.filter(S=>b.has(S.route.id)).map(S=>S.route.id).join(",")),[x.pathname+x.search]},[u,s.unstable_trailingSlashAwareDataRequests,d,a,o,m,t,e,l]),y=N.useMemo(()=>nD(p,o),[p,o]),_=cD(p);return N.createElement(N.Fragment,null,g.map(b=>N.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),y.map(b=>N.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),_.map(({key:b,link:w})=>N.createElement("link",{key:b,nonce:r.nonce,...w,crossOrigin:w.crossOrigin??r.crossOrigin})))}function dD(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var fD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fD&&(window.__reactRouterVersion="7.13.0")}catch{}function hD({basename:e,children:t,unstable_useTransitions:r,window:a}){let s=N.useRef();s.current==null&&(s.current=Vj({window:a,v5Compat:!0}));let o=s.current,[l,u]=N.useState({action:o.action,location:o.location}),d=N.useCallback(f=>{r===!1?u(f):N.startTransition(()=>u(f))},[r]);return N.useLayoutEffect(()=>o.listen(d),[o,d]),N.createElement(HT,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:r})}var pC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gC=N.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:s,reloadDocument:o,replace:l,state:u,target:d,to:f,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:g,...y},_){let{basename:b,unstable_useTransitions:w}=N.useContext(Wr),x=typeof f=="string"&&pC.test(f),S=iC(f,b);f=S.to;let C=ET(f,{relative:s}),[A,E,j]=oD(a,y),T=yD(f,{replace:l,state:u,target:d,preventScrollReset:m,relative:s,viewTransition:p,unstable_defaultShouldRevalidate:g,unstable_useTransitions:w});function z(V){t&&t(V),V.defaultPrevented||T(V)}let L=N.createElement("a",{...y,...j,href:S.absoluteURL||C,onClick:S.isExternal||o?t:z,ref:dD(_,E),target:d,"data-discover":!x&&r==="render"?"true":void 0});return A&&!x?N.createElement(N.Fragment,null,L,N.createElement(lD,{page:C})):L});gC.displayName="Link";var mD=N.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:s=!1,style:o,to:l,viewTransition:u,children:d,...f},m){let p=Eu(l,{relative:f.relative}),g=hs(),y=N.useContext(pm),{navigator:_,basename:b}=N.useContext(Wr),w=y!=null&&SD(p)&&u===!0,x=_.encodeLocation?_.encodeLocation(p).pathname:p.pathname,S=g.pathname,C=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(S=S.toLowerCase(),C=C?C.toLowerCase():null,x=x.toLowerCase()),C&&b&&(C=ma(C,b)||C);const A=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let E=S===x||!s&&S.startsWith(x)&&S.charAt(A)==="/",j=C!=null&&(C===x||!s&&C.startsWith(x)&&C.charAt(x.length)==="/"),T={isActive:E,isPending:j,isTransitioning:w},z=E?t:void 0,L;typeof a=="function"?L=a(T):L=[a,E?"active":null,j?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let V=typeof o=="function"?o(T):o;return N.createElement(gC,{...f,"aria-current":z,className:L,ref:m,style:V,to:l,viewTransition:u},typeof d=="function"?d(T):d)});mD.displayName="NavLink";var pD=N.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:s,state:o,method:l=ph,action:u,onSubmit:d,relative:f,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:g,...y},_)=>{let{unstable_useTransitions:b}=N.useContext(Wr),w=xD(),x=_D(u,{relative:f}),S=l.toLowerCase()==="get"?"get":"post",C=typeof u=="string"&&pC.test(u),A=E=>{if(d&&d(E),E.defaultPrevented)return;E.preventDefault();let j=E.nativeEvent.submitter,T=j?.getAttribute("formmethod")||l,z=()=>w(j||E.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:s,state:o,relative:f,preventScrollReset:m,viewTransition:p,unstable_defaultShouldRevalidate:g});b&&r!==!1?N.startTransition(()=>z()):z()};return N.createElement("form",{ref:_,method:S,action:x,onSubmit:a?d:A,...y,"data-discover":!C&&e==="render"?"true":void 0})});pD.displayName="Form";function gD(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yC(e){let t=N.useContext(kl);return en(t,gD(e)),t}function yD(e,{target:t,replace:r,state:a,preventScrollReset:s,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let f=tv(),m=hs(),p=Eu(e,{relative:o});return N.useCallback(g=>{if(GT(g,t)){g.preventDefault();let y=r!==void 0?r:Jc(m)===Jc(p),_=()=>f(e,{replace:y,state:a,preventScrollReset:s,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u});d?N.startTransition(()=>_()):_()}},[m,f,p,r,a,t,e,s,o,l,u,d])}function vD(e){fi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=N.useRef(u0(e)),r=N.useRef(!1),a=hs(),s=N.useMemo(()=>KT(a.search,r.current?null:t.current),[a.search]),o=tv(),l=N.useCallback((u,d)=>{const f=u0(typeof u=="function"?u(new URLSearchParams(s)):u);r.current=!0,o("?"+f,d)},[o,s]);return[s,l]}var bD=0,wD=()=>`__${String(++bD)}__`;function xD(){let{router:e}=yC("useSubmit"),{basename:t}=N.useContext(Wr),r=LT(),a=e.fetch,s=e.navigate;return N.useCallback(async(o,l={})=>{let{action:u,method:d,encType:f,formData:m,body:p}=WT(o,t);if(l.navigate===!1){let g=l.fetcherKey||wD();await a(g,r,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:m,body:p,formMethod:l.method||d,formEncType:l.encType||f,flushSync:l.flushSync})}else await s(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:m,body:p,formMethod:l.method||d,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[a,s,t,r])}function _D(e,{relative:t}={}){let{basename:r}=N.useContext(Wr),a=N.useContext(Oi);en(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),o={...Eu(e||".",{relative:t})},l=hs();if(e==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(m=>m==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let m=u.toString();o.search=m?`?${m}`:""}}return(!e||e===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:ha([r,o.pathname])),Jc(o)}function SD(e,{relative:t}={}){let r=N.useContext(sC);en(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=yC("useViewTransitionState"),s=Eu(e,{relative:t});if(!r.isTransitioning)return!1;let o=ma(r.currentLocation.pathname,a)||r.currentLocation.pathname,l=ma(r.nextLocation.pathname,a)||r.nextLocation.pathname;return Th(s.pathname,l)!=null||Th(s.pathname,o)!=null}var da=W2();const CD="modulepreload",ED=function(e){return"/"+e},yx={},kD=function(t,r,a){let s=Promise.resolve();if(r&&r.length>0){let d=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");s=d(r.map(f=>{if(f=ED(f),f in yx)return;yx[f]=!0;const m=f.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const g=document.createElement("link");if(g.rel=m?"stylesheet":CD,m||(g.as="script"),g.crossOrigin="",g.href=f,u&&g.setAttribute("nonce",u),document.head.appendChild(g),m)return new Promise((y,_)=>{g.addEventListener("load",y),g.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})};var vC=Symbol.for("immer-nothing"),vx=Symbol.for("immer-draftable"),ir=Symbol.for("immer-state");function li(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var $r=Object,dl=$r.getPrototypeOf,Dh="constructor",ym="prototype",d0="configurable",Rh="enumerable",yh="writable",eu="value",ss=e=>!!e&&!!e[ir];function pa(e){return e?bC(e)||bm(e)||!!e[vx]||!!e[Dh]?.[vx]||wm(e)||xm(e):!1}var ND=$r[ym][Dh].toString(),bx=new WeakMap;function bC(e){if(!e||!sv(e))return!1;const t=dl(e);if(t===null||t===$r[ym])return!0;const r=$r.hasOwnProperty.call(t,Dh)&&t[Dh];if(r===Object)return!0;if(!tl(r))return!1;let a=bx.get(r);return a===void 0&&(a=Function.toString.call(r),bx.set(r,a)),a===ND}function vm(e,t,r=!0){ku(e)===0?(r?Reflect.ownKeys(e):$r.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((a,s)=>t(s,a,e))}function ku(e){const t=e[ir];return t?t.type_:bm(e)?1:wm(e)?2:xm(e)?3:0}var wx=(e,t,r=ku(e))=>r===2?e.has(t):$r[ym].hasOwnProperty.call(e,t),f0=(e,t,r=ku(e))=>r===2?e.get(t):e[t],$h=(e,t,r,a=ku(e))=>{a===2?e.set(t,r):a===3?e.add(r):e[t]=r};function AD(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var bm=Array.isArray,wm=e=>e instanceof Map,xm=e=>e instanceof Set,sv=e=>typeof e=="object",tl=e=>typeof e=="function",wy=e=>typeof e=="boolean";function jD(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var ua=e=>e.copy_||e.base_,ov=e=>e.modified_?e.copy_:e.base_;function h0(e,t){if(wm(e))return new Map(e);if(xm(e))return new Set(e);if(bm(e))return Array[ym].slice.call(e);const r=bC(e);if(t===!0||t==="class_only"&&!r){const a=$r.getOwnPropertyDescriptors(e);delete a[ir];let s=Reflect.ownKeys(a);for(let o=0;o<s.length;o++){const l=s[o],u=a[l];u[yh]===!1&&(u[yh]=!0,u[d0]=!0),(u.get||u.set)&&(a[l]={[d0]:!0,[yh]:!0,[Rh]:u[Rh],[eu]:e[l]})}return $r.create(dl(e),a)}else{const a=dl(e);if(a!==null&&r)return{...e};const s=$r.create(a);return $r.assign(s,e)}}function lv(e,t=!1){return _m(e)||ss(e)||!pa(e)||(ku(e)>1&&$r.defineProperties(e,{set:df,add:df,clear:df,delete:df}),$r.freeze(e),t&&vm(e,(r,a)=>{lv(a,!0)},!1)),e}function TD(){li(2)}var df={[eu]:TD};function _m(e){return e===null||!sv(e)?!0:$r.isFrozen(e)}var Mh="MapSet",m0="Patches",xx="ArrayMethods",wC={};function no(e){const t=wC[e];return t||li(0,e),t}var _x=e=>!!wC[e],tu,xC=()=>tu,DD=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:_x(Mh)?no(Mh):void 0,arrayMethodsPlugin_:_x(xx)?no(xx):void 0});function Sx(e,t){t&&(e.patchPlugin_=no(m0),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function p0(e){g0(e),e.drafts_.forEach(RD),e.drafts_=null}function g0(e){e===tu&&(tu=e.parent_)}var Cx=e=>tu=DD(tu,e);function RD(e){const t=e[ir];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Ex(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[ir].modified_&&(p0(t),li(4)),pa(e)&&(e=kx(t,e));const{patchPlugin_:s}=t;s&&s.generateReplacementPatches_(r[ir].base_,e,t)}else e=kx(t,r);return $D(t,e,!0),p0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==vC?e:void 0}function kx(e,t){if(_m(t))return t;const r=t[ir];if(!r)return Oh(t,e.handledSet_,e);if(!Sm(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:a}=r;if(a)for(;a.length>0;)a.pop()(e);CC(r,e)}return r.copy_}function $D(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&lv(t,r)}function _C(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Sm=(e,t)=>e.scope_===t,MD=[];function SC(e,t,r,a){const s=ua(e),o=e.type_;if(a!==void 0&&f0(s,a,o)===t){$h(s,a,r,o);return}if(!e.draftLocations_){const u=e.draftLocations_=new Map;vm(s,(d,f)=>{if(ss(f)){const m=u.get(f)||[];m.push(d),u.set(f,m)}})}const l=e.draftLocations_.get(t)??MD;for(const u of l)$h(s,u,r,o)}function OD(e,t,r){e.callbacks_.push(function(s){const o=t;if(!o||!Sm(o,s))return;s.mapSetPlugin_?.fixSetContents(o);const l=ov(o);SC(e,o.draft_??o,l,r),CC(o,s)})}function CC(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:a}=t;if(a){const s=a.getPath(e);s&&a.generatePatches_(e,s,t)}_C(e)}}function zD(e,t,r){const{scope_:a}=e;if(ss(r)){const s=r[ir];Sm(s,a)&&s.callbacks_.push(function(){vh(e);const l=ov(s);SC(e,r,l,t)})}else pa(r)&&e.callbacks_.push(function(){const o=ua(e);e.type_===3?o.has(r)&&Oh(r,a.handledSet_,a):f0(o,t,e.type_)===r&&a.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Oh(f0(e.copy_,t,e.type_),a.handledSet_,a)})}function Oh(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||ss(e)||t.has(e)||!pa(e)||_m(e)||(t.add(e),vm(e,(a,s)=>{if(ss(s)){const o=s[ir];if(Sm(o,r)){const l=ov(o);$h(e,a,l,e.type_),_C(o)}}else pa(s)&&Oh(s,t,r)})),e}function LD(e,t){const r=bm(e),a={type_:r?1:0,scope_:t?t.scope_:xC(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=a,o=zh;r&&(s=[a],o=nu);const{revoke:l,proxy:u}=Proxy.revocable(s,o);return a.draft_=u,a.revoke_=l,[u,a]}var zh={get(e,t){if(t===ir)return e;let r=e.scope_.arrayMethodsPlugin_;const a=e.type_===1&&typeof t=="string";if(a&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const s=ua(e);if(!wx(s,t,e.type_))return ID(e,s,t);const o=s[t];if(e.finalized_||!pa(o)||a&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&jD(t))return o;if(o===xy(e.base_,t)){vh(e);const l=e.type_===1?+t:t,u=v0(e.scope_,o,e,l);return e.copy_[l]=u}return o},has(e,t){return t in ua(e)},ownKeys(e){return Reflect.ownKeys(ua(e))},set(e,t,r){const a=EC(ua(e),t);if(a?.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const s=xy(ua(e),t),o=s?.[ir];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(AD(r,s)&&(r!==void 0||wx(e.base_,t,e.type_)))return!0;vh(e),y0(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),zD(e,t,r)),!0},deleteProperty(e,t){return vh(e),xy(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),y0(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=ua(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{[yh]:!0,[d0]:e.type_!==1||t!=="length",[Rh]:a[Rh],[eu]:r[t]}},defineProperty(){li(11)},getPrototypeOf(e){return dl(e.base_)},setPrototypeOf(){li(12)}},nu={};for(let e in zh){let t=zh[e];nu[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}nu.deleteProperty=function(e,t){return nu.set.call(this,e,t,void 0)};nu.set=function(e,t,r){return zh.set.call(this,e[0],t,r,e[0])};function xy(e,t){const r=e[ir];return(r?ua(r):e)[t]}function ID(e,t,r){const a=EC(t,r);return a?eu in a?a[eu]:a.get?.call(e.draft_):void 0}function EC(e,t){if(!(t in e))return;let r=dl(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=dl(r)}}function y0(e){e.modified_||(e.modified_=!0,e.parent_&&y0(e.parent_))}function vh(e){e.copy_||(e.assigned_=new Map,e.copy_=h0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var PD=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,r,a)=>{if(tl(t)&&!tl(r)){const o=r;r=t;const l=this;return function(d=o,...f){return l.produce(d,m=>r.call(this,m,...f))}}tl(r)||li(6),a!==void 0&&!tl(a)&&li(7);let s;if(pa(t)){const o=Cx(this),l=v0(o,t,void 0);let u=!0;try{s=r(l),u=!1}finally{u?p0(o):g0(o)}return Sx(o,a),Ex(s,o)}else if(!t||!sv(t)){if(s=r(t),s===void 0&&(s=t),s===vC&&(s=void 0),this.autoFreeze_&&lv(s,!0),a){const o=[],l=[];no(m0).generateReplacementPatches_(t,s,{patches_:o,inversePatches_:l}),a(o,l)}return s}else li(1,t)},this.produceWithPatches=(t,r)=>{if(tl(t))return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let a,s;return[this.produce(t,r,(l,u)=>{a=l,s=u}),a,s]},wy(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),wy(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),wy(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){pa(e)||li(8),ss(e)&&(e=BD(e));const t=Cx(this),r=v0(t,e,void 0);return r[ir].isManual_=!0,g0(t),r}finishDraft(e,t){const r=e&&e[ir];(!r||!r.isManual_)&&li(9);const{scope_:a}=r;return Sx(a,t),Ex(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const a=no(m0).applyPatches_;return ss(e)?a(e,t):this.produce(e,s=>a(s,t))}};function v0(e,t,r,a){const[s,o]=wm(t)?no(Mh).proxyMap_(t,r):xm(t)?no(Mh).proxySet_(t,r):LD(t,r);return(r?.scope_??xC()).drafts_.push(s),o.callbacks_=r?.callbacks_??[],o.key_=a,r&&a!==void 0?OD(r,o,a):o.callbacks_.push(function(d){d.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:f}=d;o.modified_&&f&&f.generatePatches_(o,[],d)}),s}function BD(e){return ss(e)||li(10,e),kC(e)}function kC(e){if(!pa(e)||_m(e))return e;const t=e[ir];let r,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=h0(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else r=h0(e,!0);return vm(r,(s,o)=>{$h(r,s,kC(o))},a),t&&(t.finalized_=!1),r}var HD=new PD,ct=HD.produce;function dn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,a;r<e.length;r++)(a=dn(e[r]))!==""&&(t+=(t&&" ")+a);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}var UD={value:()=>{}};function Cm(){for(var e=0,t=arguments.length,r={},a;e<t;++e){if(!(a=arguments[e]+"")||a in r||/[\s.]/.test(a))throw new Error("illegal type: "+a);r[a]=[]}return new bh(r)}function bh(e){this._=e}function FD(e,t){return e.trim().split(/^|\s+/).map(function(r){var a="",s=r.indexOf(".");if(s>=0&&(a=r.slice(s+1),r=r.slice(0,s)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:a}})}bh.prototype=Cm.prototype={constructor:bh,on:function(e,t){var r=this._,a=FD(e+"",r),s,o=-1,l=a.length;if(arguments.length<2){for(;++o<l;)if((s=(e=a[o]).type)&&(s=qD(r[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<l;)if(s=(e=a[o]).type)r[s]=Nx(r[s],e.name,t);else if(t==null)for(s in r)r[s]=Nx(r[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new bh(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var r=new Array(s),a=0,s,o;a<s;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],a=0,s=o.length;a<s;++a)o[a].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],s=0,o=a.length;s<o;++s)a[s].value.apply(t,r)}};function qD(e,t){for(var r=0,a=e.length,s;r<a;++r)if((s=e[r]).name===t)return s.value}function Nx(e,t,r){for(var a=0,s=e.length;a<s;++a)if(e[a].name===t){e[a]=UD,e=e.slice(0,a).concat(e.slice(a+1));break}return r!=null&&e.push({name:t,value:r}),e}var b0="http://www.w3.org/1999/xhtml";const Ax={svg:"http://www.w3.org/2000/svg",xhtml:b0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Em(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Ax.hasOwnProperty(t)?{space:Ax[t],local:e}:e}function VD(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===b0&&t.documentElement.namespaceURI===b0?t.createElement(e):t.createElementNS(r,e)}}function YD(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function NC(e){var t=Em(e);return(t.local?YD:VD)(t)}function GD(){}function cv(e){return e==null?GD:function(){return this.querySelector(e)}}function KD(e){typeof e!="function"&&(e=cv(e));for(var t=this._groups,r=t.length,a=new Array(r),s=0;s<r;++s)for(var o=t[s],l=o.length,u=a[s]=new Array(l),d,f,m=0;m<l;++m)(d=o[m])&&(f=e.call(d,d.__data__,m,o))&&("__data__"in d&&(f.__data__=d.__data__),u[m]=f);return new Mr(a,this._parents)}function XD(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ZD(){return[]}function AC(e){return e==null?ZD:function(){return this.querySelectorAll(e)}}function WD(e){return function(){return XD(e.apply(this,arguments))}}function QD(e){typeof e=="function"?e=WD(e):e=AC(e);for(var t=this._groups,r=t.length,a=[],s=[],o=0;o<r;++o)for(var l=t[o],u=l.length,d,f=0;f<u;++f)(d=l[f])&&(a.push(e.call(d,d.__data__,f,l)),s.push(d));return new Mr(a,s)}function jC(e){return function(){return this.matches(e)}}function TC(e){return function(t){return t.matches(e)}}var JD=Array.prototype.find;function eR(e){return function(){return JD.call(this.children,e)}}function tR(){return this.firstElementChild}function nR(e){return this.select(e==null?tR:eR(typeof e=="function"?e:TC(e)))}var rR=Array.prototype.filter;function iR(){return Array.from(this.children)}function aR(e){return function(){return rR.call(this.children,e)}}function sR(e){return this.selectAll(e==null?iR:aR(typeof e=="function"?e:TC(e)))}function oR(e){typeof e!="function"&&(e=jC(e));for(var t=this._groups,r=t.length,a=new Array(r),s=0;s<r;++s)for(var o=t[s],l=o.length,u=a[s]=[],d,f=0;f<l;++f)(d=o[f])&&e.call(d,d.__data__,f,o)&&u.push(d);return new Mr(a,this._parents)}function DC(e){return new Array(e.length)}function lR(){return new Mr(this._enter||this._groups.map(DC),this._parents)}function Lh(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Lh.prototype={constructor:Lh,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function cR(e){return function(){return e}}function uR(e,t,r,a,s,o){for(var l=0,u,d=t.length,f=o.length;l<f;++l)(u=t[l])?(u.__data__=o[l],a[l]=u):r[l]=new Lh(e,o[l]);for(;l<d;++l)(u=t[l])&&(s[l]=u)}function dR(e,t,r,a,s,o,l){var u,d,f=new Map,m=t.length,p=o.length,g=new Array(m),y;for(u=0;u<m;++u)(d=t[u])&&(g[u]=y=l.call(d,d.__data__,u,t)+"",f.has(y)?s[u]=d:f.set(y,d));for(u=0;u<p;++u)y=l.call(e,o[u],u,o)+"",(d=f.get(y))?(a[u]=d,d.__data__=o[u],f.delete(y)):r[u]=new Lh(e,o[u]);for(u=0;u<m;++u)(d=t[u])&&f.get(g[u])===d&&(s[u]=d)}function fR(e){return e.__data__}function hR(e,t){if(!arguments.length)return Array.from(this,fR);var r=t?dR:uR,a=this._parents,s=this._groups;typeof e!="function"&&(e=cR(e));for(var o=s.length,l=new Array(o),u=new Array(o),d=new Array(o),f=0;f<o;++f){var m=a[f],p=s[f],g=p.length,y=mR(e.call(m,m&&m.__data__,f,a)),_=y.length,b=u[f]=new Array(_),w=l[f]=new Array(_),x=d[f]=new Array(g);r(m,p,b,w,x,y,t);for(var S=0,C=0,A,E;S<_;++S)if(A=b[S]){for(S>=C&&(C=S+1);!(E=w[C])&&++C<_;);A._next=E||null}}return l=new Mr(l,a),l._enter=u,l._exit=d,l}function mR(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pR(){return new Mr(this._exit||this._groups.map(DC),this._parents)}function gR(e,t,r){var a=this.enter(),s=this,o=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),r==null?o.remove():r(o),a&&s?a.merge(s).order():s}function yR(e){for(var t=e.selection?e.selection():e,r=this._groups,a=t._groups,s=r.length,o=a.length,l=Math.min(s,o),u=new Array(s),d=0;d<l;++d)for(var f=r[d],m=a[d],p=f.length,g=u[d]=new Array(p),y,_=0;_<p;++_)(y=f[_]||m[_])&&(g[_]=y);for(;d<s;++d)u[d]=r[d];return new Mr(u,this._parents)}function vR(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var a=e[t],s=a.length-1,o=a[s],l;--s>=0;)(l=a[s])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function bR(e){e||(e=wR);function t(p,g){return p&&g?e(p.__data__,g.__data__):!p-!g}for(var r=this._groups,a=r.length,s=new Array(a),o=0;o<a;++o){for(var l=r[o],u=l.length,d=s[o]=new Array(u),f,m=0;m<u;++m)(f=l[m])&&(d[m]=f);d.sort(t)}return new Mr(s,this._parents).order()}function wR(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function xR(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _R(){return Array.from(this)}function SR(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var a=e[t],s=0,o=a.length;s<o;++s){var l=a[s];if(l)return l}return null}function CR(){let e=0;for(const t of this)++e;return e}function ER(){return!this.node()}function kR(e){for(var t=this._groups,r=0,a=t.length;r<a;++r)for(var s=t[r],o=0,l=s.length,u;o<l;++o)(u=s[o])&&e.call(u,u.__data__,o,s);return this}function NR(e){return function(){this.removeAttribute(e)}}function AR(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jR(e,t){return function(){this.setAttribute(e,t)}}function TR(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function DR(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function RR(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function $R(e,t){var r=Em(e);if(arguments.length<2){var a=this.node();return r.local?a.getAttributeNS(r.space,r.local):a.getAttribute(r)}return this.each((t==null?r.local?AR:NR:typeof t=="function"?r.local?RR:DR:r.local?TR:jR)(r,t))}function RC(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function MR(e){return function(){this.style.removeProperty(e)}}function OR(e,t,r){return function(){this.style.setProperty(e,t,r)}}function zR(e,t,r){return function(){var a=t.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,r)}}function LR(e,t,r){return arguments.length>1?this.each((t==null?MR:typeof t=="function"?zR:OR)(e,t,r??"")):fl(this.node(),e)}function fl(e,t){return e.style.getPropertyValue(t)||RC(e).getComputedStyle(e,null).getPropertyValue(t)}function IR(e){return function(){delete this[e]}}function PR(e,t){return function(){this[e]=t}}function BR(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function HR(e,t){return arguments.length>1?this.each((t==null?IR:typeof t=="function"?BR:PR)(e,t)):this.node()[e]}function $C(e){return e.trim().split(/^|\s+/)}function uv(e){return e.classList||new MC(e)}function MC(e){this._node=e,this._names=$C(e.getAttribute("class")||"")}MC.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function OC(e,t){for(var r=uv(e),a=-1,s=t.length;++a<s;)r.add(t[a])}function zC(e,t){for(var r=uv(e),a=-1,s=t.length;++a<s;)r.remove(t[a])}function UR(e){return function(){OC(this,e)}}function FR(e){return function(){zC(this,e)}}function qR(e,t){return function(){(t.apply(this,arguments)?OC:zC)(this,e)}}function VR(e,t){var r=$C(e+"");if(arguments.length<2){for(var a=uv(this.node()),s=-1,o=r.length;++s<o;)if(!a.contains(r[s]))return!1;return!0}return this.each((typeof t=="function"?qR:t?UR:FR)(r,t))}function YR(){this.textContent=""}function GR(e){return function(){this.textContent=e}}function KR(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function XR(e){return arguments.length?this.each(e==null?YR:(typeof e=="function"?KR:GR)(e)):this.node().textContent}function ZR(){this.innerHTML=""}function WR(e){return function(){this.innerHTML=e}}function QR(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function JR(e){return arguments.length?this.each(e==null?ZR:(typeof e=="function"?QR:WR)(e)):this.node().innerHTML}function e3(){this.nextSibling&&this.parentNode.appendChild(this)}function t3(){return this.each(e3)}function n3(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function r3(){return this.each(n3)}function i3(e){var t=typeof e=="function"?e:NC(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function a3(){return null}function s3(e,t){var r=typeof e=="function"?e:NC(e),a=t==null?a3:typeof t=="function"?t:cv(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),a.apply(this,arguments)||null)})}function o3(){var e=this.parentNode;e&&e.removeChild(this)}function l3(){return this.each(o3)}function c3(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function u3(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function d3(e){return this.select(e?u3:c3)}function f3(e){return arguments.length?this.property("__data__",e):this.node().__data__}function h3(e){return function(t){e.call(this,t,this.__data__)}}function m3(e){return e.trim().split(/^|\s+/).map(function(t){var r="",a=t.indexOf(".");return a>=0&&(r=t.slice(a+1),t=t.slice(0,a)),{type:t,name:r}})}function p3(e){return function(){var t=this.__on;if(t){for(var r=0,a=-1,s=t.length,o;r<s;++r)o=t[r],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++a]=o;++a?t.length=a:delete this.__on}}}function g3(e,t,r){return function(){var a=this.__on,s,o=h3(t);if(a){for(var l=0,u=a.length;l<u;++l)if((s=a[l]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=r),s.value=t;return}}this.addEventListener(e.type,o,r),s={type:e.type,name:e.name,value:t,listener:o,options:r},a?a.push(s):this.__on=[s]}}function y3(e,t,r){var a=m3(e+""),s,o=a.length,l;if(arguments.length<2){var u=this.node().__on;if(u){for(var d=0,f=u.length,m;d<f;++d)for(s=0,m=u[d];s<o;++s)if((l=a[s]).type===m.type&&l.name===m.name)return m.value}return}for(u=t?g3:p3,s=0;s<o;++s)this.each(u(a[s],t,r));return this}function LC(e,t,r){var a=RC(e),s=a.CustomEvent;typeof s=="function"?s=new s(t,r):(s=a.document.createEvent("Event"),r?(s.initEvent(t,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function v3(e,t){return function(){return LC(this,e,t)}}function b3(e,t){return function(){return LC(this,e,t.apply(this,arguments))}}function w3(e,t){return this.each((typeof t=="function"?b3:v3)(e,t))}function*x3(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var a=e[t],s=0,o=a.length,l;s<o;++s)(l=a[s])&&(yield l)}var IC=[null];function Mr(e,t){this._groups=e,this._parents=t}function Nu(){return new Mr([[document.documentElement]],IC)}function _3(){return this}Mr.prototype=Nu.prototype={constructor:Mr,select:KD,selectAll:QD,selectChild:nR,selectChildren:sR,filter:oR,data:hR,enter:lR,exit:pR,join:gR,merge:yR,selection:_3,order:vR,sort:bR,call:xR,nodes:_R,node:SR,size:CR,empty:ER,each:kR,attr:$R,style:LR,property:HR,classed:VR,text:XR,html:JR,raise:t3,lower:r3,append:i3,insert:s3,remove:l3,clone:d3,datum:f3,on:y3,dispatch:w3,[Symbol.iterator]:x3};function Rr(e){return typeof e=="string"?new Mr([[document.querySelector(e)]],[document.documentElement]):new Mr([[e]],IC)}function S3(e){let t;for(;t=e.sourceEvent;)e=t;return e}function si(e,t){if(e=S3(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var a=r.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(t.getScreenCTM().inverse()),[a.x,a.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const C3={passive:!1},ru={capture:!0,passive:!1};function _y(e){e.stopImmediatePropagation()}function ol(e){e.preventDefault(),e.stopImmediatePropagation()}function PC(e){var t=e.document.documentElement,r=Rr(e).on("dragstart.drag",ol,ru);"onselectstart"in t?r.on("selectstart.drag",ol,ru):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function BC(e,t){var r=e.document.documentElement,a=Rr(e).on("dragstart.drag",null);t&&(a.on("click.drag",ol,ru),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in r?a.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const ff=e=>()=>e;function w0(e,{sourceEvent:t,subject:r,target:a,identifier:s,active:o,x:l,y:u,dx:d,dy:f,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:m}})}w0.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function E3(e){return!e.ctrlKey&&!e.button}function k3(){return this.parentNode}function N3(e,t){return t??{x:e.x,y:e.y}}function A3(){return navigator.maxTouchPoints||"ontouchstart"in this}function HC(){var e=E3,t=k3,r=N3,a=A3,s={},o=Cm("start","drag","end"),l=0,u,d,f,m,p=0;function g(A){A.on("mousedown.drag",y).filter(a).on("touchstart.drag",w).on("touchmove.drag",x,C3).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(A,E){if(!(m||!e.call(this,A,E))){var j=C(this,t.call(this,A,E),A,E,"mouse");j&&(Rr(A.view).on("mousemove.drag",_,ru).on("mouseup.drag",b,ru),PC(A.view),_y(A),f=!1,u=A.clientX,d=A.clientY,j("start",A))}}function _(A){if(ol(A),!f){var E=A.clientX-u,j=A.clientY-d;f=E*E+j*j>p}s.mouse("drag",A)}function b(A){Rr(A.view).on("mousemove.drag mouseup.drag",null),BC(A.view,f),ol(A),s.mouse("end",A)}function w(A,E){if(e.call(this,A,E)){var j=A.changedTouches,T=t.call(this,A,E),z=j.length,L,V;for(L=0;L<z;++L)(V=C(this,T,A,E,j[L].identifier,j[L]))&&(_y(A),V("start",A,j[L]))}}function x(A){var E=A.changedTouches,j=E.length,T,z;for(T=0;T<j;++T)(z=s[E[T].identifier])&&(ol(A),z("drag",A,E[T]))}function S(A){var E=A.changedTouches,j=E.length,T,z;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),T=0;T<j;++T)(z=s[E[T].identifier])&&(_y(A),z("end",A,E[T]))}function C(A,E,j,T,z,L){var V=o.copy(),F=si(L||j,E),M,O,R;if((R=r.call(A,new w0("beforestart",{sourceEvent:j,target:g,identifier:z,active:l,x:F[0],y:F[1],dx:0,dy:0,dispatch:V}),T))!=null)return M=R.x-F[0]||0,O=R.y-F[1]||0,function G(H,U,Z){var X=F,Q;switch(H){case"start":s[z]=G,Q=l++;break;case"end":delete s[z],--l;case"drag":F=si(Z||U,E),Q=l;break}V.call(H,A,new w0(H,{sourceEvent:U,subject:R,target:g,identifier:z,active:Q,x:F[0]+M,y:F[1]+O,dx:F[0]-X[0],dy:F[1]-X[1],dispatch:V}),T)}}return g.filter=function(A){return arguments.length?(e=typeof A=="function"?A:ff(!!A),g):e},g.container=function(A){return arguments.length?(t=typeof A=="function"?A:ff(A),g):t},g.subject=function(A){return arguments.length?(r=typeof A=="function"?A:ff(A),g):r},g.touchable=function(A){return arguments.length?(a=typeof A=="function"?A:ff(!!A),g):a},g.on=function(){var A=o.on.apply(o,arguments);return A===o?g:A},g.clickDistance=function(A){return arguments.length?(p=(A=+A)*A,g):Math.sqrt(p)},g}function dv(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function UC(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function Au(){}var iu=.7,Ih=1/iu,ll="\\s*([+-]?\\d+)\\s*",au="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",j3=/^#([0-9a-f]{3,8})$/,T3=new RegExp(`^rgb\\(${ll},${ll},${ll}\\)$`),D3=new RegExp(`^rgb\\(${Ri},${Ri},${Ri}\\)$`),R3=new RegExp(`^rgba\\(${ll},${ll},${ll},${au}\\)$`),$3=new RegExp(`^rgba\\(${Ri},${Ri},${Ri},${au}\\)$`),M3=new RegExp(`^hsl\\(${au},${Ri},${Ri}\\)$`),O3=new RegExp(`^hsla\\(${au},${Ri},${Ri},${au}\\)$`),jx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dv(Au,ro,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Tx,formatHex:Tx,formatHex8:z3,formatHsl:L3,formatRgb:Dx,toString:Dx});function Tx(){return this.rgb().formatHex()}function z3(){return this.rgb().formatHex8()}function L3(){return FC(this).formatHsl()}function Dx(){return this.rgb().formatRgb()}function ro(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=j3.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Rx(t):r===3?new gr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?hf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?hf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=T3.exec(e))?new gr(t[1],t[2],t[3],1):(t=D3.exec(e))?new gr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=R3.exec(e))?hf(t[1],t[2],t[3],t[4]):(t=$3.exec(e))?hf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=M3.exec(e))?Ox(t[1],t[2]/100,t[3]/100,1):(t=O3.exec(e))?Ox(t[1],t[2]/100,t[3]/100,t[4]):jx.hasOwnProperty(e)?Rx(jx[e]):e==="transparent"?new gr(NaN,NaN,NaN,0):null}function Rx(e){return new gr(e>>16&255,e>>8&255,e&255,1)}function hf(e,t,r,a){return a<=0&&(e=t=r=NaN),new gr(e,t,r,a)}function I3(e){return e instanceof Au||(e=ro(e)),e?(e=e.rgb(),new gr(e.r,e.g,e.b,e.opacity)):new gr}function x0(e,t,r,a){return arguments.length===1?I3(e):new gr(e,t,r,a??1)}function gr(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}dv(gr,x0,UC(Au,{brighter(e){return e=e==null?Ih:Math.pow(Ih,e),new gr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?iu:Math.pow(iu,e),new gr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new gr(Zs(this.r),Zs(this.g),Zs(this.b),Ph(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$x,formatHex:$x,formatHex8:P3,formatRgb:Mx,toString:Mx}));function $x(){return`#${Ks(this.r)}${Ks(this.g)}${Ks(this.b)}`}function P3(){return`#${Ks(this.r)}${Ks(this.g)}${Ks(this.b)}${Ks((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mx(){const e=Ph(this.opacity);return`${e===1?"rgb(":"rgba("}${Zs(this.r)}, ${Zs(this.g)}, ${Zs(this.b)}${e===1?")":`, ${e})`}`}function Ph(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Zs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ks(e){return e=Zs(e),(e<16?"0":"")+e.toString(16)}function Ox(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ci(e,t,r,a)}function FC(e){if(e instanceof ci)return new ci(e.h,e.s,e.l,e.opacity);if(e instanceof Au||(e=ro(e)),!e)return new ci;if(e instanceof ci)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),o=Math.max(t,r,a),l=NaN,u=o-s,d=(o+s)/2;return u?(t===o?l=(r-a)/u+(r<a)*6:r===o?l=(a-t)/u+2:l=(t-r)/u+4,u/=d<.5?o+s:2-o-s,l*=60):u=d>0&&d<1?0:l,new ci(l,u,d,e.opacity)}function B3(e,t,r,a){return arguments.length===1?FC(e):new ci(e,t,r,a??1)}function ci(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}dv(ci,B3,UC(Au,{brighter(e){return e=e==null?Ih:Math.pow(Ih,e),new ci(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?iu:Math.pow(iu,e),new ci(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new gr(Sy(e>=240?e-240:e+120,s,a),Sy(e,s,a),Sy(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new ci(zx(this.h),mf(this.s),mf(this.l),Ph(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ph(this.opacity);return`${e===1?"hsl(":"hsla("}${zx(this.h)}, ${mf(this.s)*100}%, ${mf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function zx(e){return e=(e||0)%360,e<0?e+360:e}function mf(e){return Math.max(0,Math.min(1,e||0))}function Sy(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const fv=e=>()=>e;function H3(e,t){return function(r){return e+r*t}}function U3(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function F3(e){return(e=+e)==1?qC:function(t,r){return r-t?U3(t,r,e):fv(isNaN(t)?r:t)}}function qC(e,t){var r=t-e;return r?H3(e,r):fv(isNaN(e)?t:e)}const Bh=(function e(t){var r=F3(t);function a(s,o){var l=r((s=x0(s)).r,(o=x0(o)).r),u=r(s.g,o.g),d=r(s.b,o.b),f=qC(s.opacity,o.opacity);return function(m){return s.r=l(m),s.g=u(m),s.b=d(m),s.opacity=f(m),s+""}}return a.gamma=e,a})(1);function q3(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(o){for(s=0;s<r;++s)a[s]=e[s]*(1-o)+t[s]*o;return a}}function V3(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Y3(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),o=new Array(r),l;for(l=0;l<a;++l)s[l]=Kc(e[l],t[l]);for(;l<r;++l)o[l]=t[l];return function(u){for(l=0;l<a;++l)o[l]=s[l](u);return o}}function G3(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function Di(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function K3(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Kc(e[s],t[s]):a[s]=t[s];return function(o){for(s in r)a[s]=r[s](o);return a}}var _0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cy=new RegExp(_0.source,"g");function X3(e){return function(){return e}}function Z3(e){return function(t){return e(t)+""}}function VC(e,t){var r=_0.lastIndex=Cy.lastIndex=0,a,s,o,l=-1,u=[],d=[];for(e=e+"",t=t+"";(a=_0.exec(e))&&(s=Cy.exec(t));)(o=s.index)>r&&(o=t.slice(r,o),u[l]?u[l]+=o:u[++l]=o),(a=a[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:Di(a,s)})),r=Cy.lastIndex;return r<t.length&&(o=t.slice(r),u[l]?u[l]+=o:u[++l]=o),u.length<2?d[0]?Z3(d[0].x):X3(t):(t=d.length,function(f){for(var m=0,p;m<t;++m)u[(p=d[m]).i]=p.x(f);return u.join("")})}function Kc(e,t){var r=typeof t,a;return t==null||r==="boolean"?fv(t):(r==="number"?Di:r==="string"?(a=ro(t))?(t=a,Bh):VC:t instanceof ro?Bh:t instanceof Date?G3:V3(t)?q3:Array.isArray(t)?Y3:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?K3:Di)(e,t)}var Lx=180/Math.PI,S0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function YC(e,t,r,a,s,o){var l,u,d;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(d=e*r+t*a)&&(r-=e*d,a-=t*d),(u=Math.sqrt(r*r+a*a))&&(r/=u,a/=u,d/=u),e*a<t*r&&(e=-e,t=-t,d=-d,l=-l),{translateX:s,translateY:o,rotate:Math.atan2(t,e)*Lx,skewX:Math.atan(d)*Lx,scaleX:l,scaleY:u}}var pf;function W3(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?S0:YC(t.a,t.b,t.c,t.d,t.e,t.f)}function Q3(e){return e==null||(pf||(pf=document.createElementNS("http://www.w3.org/2000/svg","g")),pf.setAttribute("transform",e),!(e=pf.transform.baseVal.consolidate()))?S0:(e=e.matrix,YC(e.a,e.b,e.c,e.d,e.e,e.f))}function GC(e,t,r,a){function s(f){return f.length?f.pop()+" ":""}function o(f,m,p,g,y,_){if(f!==p||m!==g){var b=y.push("translate(",null,t,null,r);_.push({i:b-4,x:Di(f,p)},{i:b-2,x:Di(m,g)})}else(p||g)&&y.push("translate("+p+t+g+r)}function l(f,m,p,g){f!==m?(f-m>180?m+=360:m-f>180&&(f+=360),g.push({i:p.push(s(p)+"rotate(",null,a)-2,x:Di(f,m)})):m&&p.push(s(p)+"rotate("+m+a)}function u(f,m,p,g){f!==m?g.push({i:p.push(s(p)+"skewX(",null,a)-2,x:Di(f,m)}):m&&p.push(s(p)+"skewX("+m+a)}function d(f,m,p,g,y,_){if(f!==p||m!==g){var b=y.push(s(y)+"scale(",null,",",null,")");_.push({i:b-4,x:Di(f,p)},{i:b-2,x:Di(m,g)})}else(p!==1||g!==1)&&y.push(s(y)+"scale("+p+","+g+")")}return function(f,m){var p=[],g=[];return f=e(f),m=e(m),o(f.translateX,f.translateY,m.translateX,m.translateY,p,g),l(f.rotate,m.rotate,p,g),u(f.skewX,m.skewX,p,g),d(f.scaleX,f.scaleY,m.scaleX,m.scaleY,p,g),f=m=null,function(y){for(var _=-1,b=g.length,w;++_<b;)p[(w=g[_]).i]=w.x(y);return p.join("")}}}var J3=GC(W3,"px, ","px)","deg)"),e$=GC(Q3,", ",")",")"),t$=1e-12;function Ix(e){return((e=Math.exp(e))+1/e)/2}function n$(e){return((e=Math.exp(e))-1/e)/2}function r$(e){return((e=Math.exp(2*e))-1)/(e+1)}const wh=(function e(t,r,a){function s(o,l){var u=o[0],d=o[1],f=o[2],m=l[0],p=l[1],g=l[2],y=m-u,_=p-d,b=y*y+_*_,w,x;if(b<t$)x=Math.log(g/f)/t,w=function(T){return[u+T*y,d+T*_,f*Math.exp(t*T*x)]};else{var S=Math.sqrt(b),C=(g*g-f*f+a*b)/(2*f*r*S),A=(g*g-f*f-a*b)/(2*g*r*S),E=Math.log(Math.sqrt(C*C+1)-C),j=Math.log(Math.sqrt(A*A+1)-A);x=(j-E)/t,w=function(T){var z=T*x,L=Ix(E),V=f/(r*S)*(L*r$(t*z+E)-n$(E));return[u+V*y,d+V*_,f*L/Ix(t*z+E)]}}return w.duration=x*1e3*t/Math.SQRT2,w}return s.rho=function(o){var l=Math.max(.001,+o),u=l*l,d=u*u;return e(l,u,d)},s})(Math.SQRT2,2,4);var hl=0,qc=0,Ic=0,KC=1e3,Hh,Vc,Uh=0,io=0,km=0,su=typeof performance=="object"&&performance.now?performance:Date,XC=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function hv(){return io||(XC(i$),io=su.now()+km)}function i$(){io=0}function Fh(){this._call=this._time=this._next=null}Fh.prototype=ZC.prototype={constructor:Fh,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?hv():+r)+(t==null?0:+t),!this._next&&Vc!==this&&(Vc?Vc._next=this:Hh=this,Vc=this),this._call=e,this._time=r,C0()},stop:function(){this._call&&(this._call=null,this._time=1/0,C0())}};function ZC(e,t,r){var a=new Fh;return a.restart(e,t,r),a}function a$(){hv(),++hl;for(var e=Hh,t;e;)(t=io-e._time)>=0&&e._call.call(void 0,t),e=e._next;--hl}function Px(){io=(Uh=su.now())+km,hl=qc=0;try{a$()}finally{hl=0,o$(),io=0}}function s$(){var e=su.now(),t=e-Uh;t>KC&&(km-=t,Uh=e)}function o$(){for(var e,t=Hh,r,a=1/0;t;)t._call?(a>t._time&&(a=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Hh=r);Vc=e,C0(a)}function C0(e){if(!hl){qc&&(qc=clearTimeout(qc));var t=e-io;t>24?(e<1/0&&(qc=setTimeout(Px,e-su.now()-km)),Ic&&(Ic=clearInterval(Ic))):(Ic||(Uh=su.now(),Ic=setInterval(s$,KC)),hl=1,XC(Px))}}function Bx(e,t,r){var a=new Fh;return t=t==null?0:+t,a.restart(s=>{a.stop(),e(s+t)},t,r),a}var l$=Cm("start","end","cancel","interrupt"),c$=[],WC=0,Hx=1,E0=2,xh=3,Ux=4,k0=5,_h=6;function Nm(e,t,r,a,s,o){var l=e.__transition;if(!l)e.__transition={};else if(r in l)return;u$(e,r,{name:t,index:a,group:s,on:l$,tween:c$,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:WC})}function mv(e,t){var r=pi(e,t);if(r.state>WC)throw new Error("too late; already scheduled");return r}function zi(e,t){var r=pi(e,t);if(r.state>xh)throw new Error("too late; already running");return r}function pi(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function u$(e,t,r){var a=e.__transition,s;a[t]=r,r.timer=ZC(o,0,r.time);function o(f){r.state=Hx,r.timer.restart(l,r.delay,r.time),r.delay<=f&&l(f-r.delay)}function l(f){var m,p,g,y;if(r.state!==Hx)return d();for(m in a)if(y=a[m],y.name===r.name){if(y.state===xh)return Bx(l);y.state===Ux?(y.state=_h,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete a[m]):+m<t&&(y.state=_h,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete a[m])}if(Bx(function(){r.state===xh&&(r.state=Ux,r.timer.restart(u,r.delay,r.time),u(f))}),r.state=E0,r.on.call("start",e,e.__data__,r.index,r.group),r.state===E0){for(r.state=xh,s=new Array(g=r.tween.length),m=0,p=-1;m<g;++m)(y=r.tween[m].value.call(e,e.__data__,r.index,r.group))&&(s[++p]=y);s.length=p+1}}function u(f){for(var m=f<r.duration?r.ease.call(null,f/r.duration):(r.timer.restart(d),r.state=k0,1),p=-1,g=s.length;++p<g;)s[p].call(e,m);r.state===k0&&(r.on.call("end",e,e.__data__,r.index,r.group),d())}function d(){r.state=_h,r.timer.stop(),delete a[t];for(var f in a)return;delete e.__transition}}function Sh(e,t){var r=e.__transition,a,s,o=!0,l;if(r){t=t==null?null:t+"";for(l in r){if((a=r[l]).name!==t){o=!1;continue}s=a.state>E0&&a.state<k0,a.state=_h,a.timer.stop(),a.on.call(s?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete r[l]}o&&delete e.__transition}}function d$(e){return this.each(function(){Sh(this,e)})}function f$(e,t){var r,a;return function(){var s=zi(this,e),o=s.tween;if(o!==r){a=r=o;for(var l=0,u=a.length;l<u;++l)if(a[l].name===t){a=a.slice(),a.splice(l,1);break}}s.tween=a}}function h$(e,t,r){var a,s;if(typeof r!="function")throw new Error;return function(){var o=zi(this,e),l=o.tween;if(l!==a){s=(a=l).slice();for(var u={name:t,value:r},d=0,f=s.length;d<f;++d)if(s[d].name===t){s[d]=u;break}d===f&&s.push(u)}o.tween=s}}function m$(e,t){var r=this._id;if(e+="",arguments.length<2){for(var a=pi(this.node(),r).tween,s=0,o=a.length,l;s<o;++s)if((l=a[s]).name===e)return l.value;return null}return this.each((t==null?f$:h$)(r,e,t))}function pv(e,t,r){var a=e._id;return e.each(function(){var s=zi(this,a);(s.value||(s.value={}))[t]=r.apply(this,arguments)}),function(s){return pi(s,a).value[t]}}function QC(e,t){var r;return(typeof t=="number"?Di:t instanceof ro?Bh:(r=ro(t))?(t=r,Bh):VC)(e,t)}function p$(e){return function(){this.removeAttribute(e)}}function g$(e){return function(){this.removeAttributeNS(e.space,e.local)}}function y$(e,t,r){var a,s=r+"",o;return function(){var l=this.getAttribute(e);return l===s?null:l===a?o:o=t(a=l,r)}}function v$(e,t,r){var a,s=r+"",o;return function(){var l=this.getAttributeNS(e.space,e.local);return l===s?null:l===a?o:o=t(a=l,r)}}function b$(e,t,r){var a,s,o;return function(){var l,u=r(this),d;return u==null?void this.removeAttribute(e):(l=this.getAttribute(e),d=u+"",l===d?null:l===a&&d===s?o:(s=d,o=t(a=l,u)))}}function w$(e,t,r){var a,s,o;return function(){var l,u=r(this),d;return u==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),d=u+"",l===d?null:l===a&&d===s?o:(s=d,o=t(a=l,u)))}}function x$(e,t){var r=Em(e),a=r==="transform"?e$:QC;return this.attrTween(e,typeof t=="function"?(r.local?w$:b$)(r,a,pv(this,"attr."+e,t)):t==null?(r.local?g$:p$)(r):(r.local?v$:y$)(r,a,t))}function _$(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function S$(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function C$(e,t){var r,a;function s(){var o=t.apply(this,arguments);return o!==a&&(r=(a=o)&&S$(e,o)),r}return s._value=t,s}function E$(e,t){var r,a;function s(){var o=t.apply(this,arguments);return o!==a&&(r=(a=o)&&_$(e,o)),r}return s._value=t,s}function k$(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var a=Em(e);return this.tween(r,(a.local?C$:E$)(a,t))}function N$(e,t){return function(){mv(this,e).delay=+t.apply(this,arguments)}}function A$(e,t){return t=+t,function(){mv(this,e).delay=t}}function j$(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?N$:A$)(t,e)):pi(this.node(),t).delay}function T$(e,t){return function(){zi(this,e).duration=+t.apply(this,arguments)}}function D$(e,t){return t=+t,function(){zi(this,e).duration=t}}function R$(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?T$:D$)(t,e)):pi(this.node(),t).duration}function $$(e,t){if(typeof t!="function")throw new Error;return function(){zi(this,e).ease=t}}function M$(e){var t=this._id;return arguments.length?this.each($$(t,e)):pi(this.node(),t).ease}function O$(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;zi(this,e).ease=r}}function z$(e){if(typeof e!="function")throw new Error;return this.each(O$(this._id,e))}function L$(e){typeof e!="function"&&(e=jC(e));for(var t=this._groups,r=t.length,a=new Array(r),s=0;s<r;++s)for(var o=t[s],l=o.length,u=a[s]=[],d,f=0;f<l;++f)(d=o[f])&&e.call(d,d.__data__,f,o)&&u.push(d);return new ga(a,this._parents,this._name,this._id)}function I$(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,a=t.length,s=r.length,o=Math.min(a,s),l=new Array(a),u=0;u<o;++u)for(var d=t[u],f=r[u],m=d.length,p=l[u]=new Array(m),g,y=0;y<m;++y)(g=d[y]||f[y])&&(p[y]=g);for(;u<a;++u)l[u]=t[u];return new ga(l,this._parents,this._name,this._id)}function P$(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function B$(e,t,r){var a,s,o=P$(t)?mv:zi;return function(){var l=o(this,e),u=l.on;u!==a&&(s=(a=u).copy()).on(t,r),l.on=s}}function H$(e,t){var r=this._id;return arguments.length<2?pi(this.node(),r).on.on(e):this.each(B$(r,e,t))}function U$(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function F$(){return this.on("end.remove",U$(this._id))}function q$(e){var t=this._name,r=this._id;typeof e!="function"&&(e=cv(e));for(var a=this._groups,s=a.length,o=new Array(s),l=0;l<s;++l)for(var u=a[l],d=u.length,f=o[l]=new Array(d),m,p,g=0;g<d;++g)(m=u[g])&&(p=e.call(m,m.__data__,g,u))&&("__data__"in m&&(p.__data__=m.__data__),f[g]=p,Nm(f[g],t,r,g,f,pi(m,r)));return new ga(o,this._parents,t,r)}function V$(e){var t=this._name,r=this._id;typeof e!="function"&&(e=AC(e));for(var a=this._groups,s=a.length,o=[],l=[],u=0;u<s;++u)for(var d=a[u],f=d.length,m,p=0;p<f;++p)if(m=d[p]){for(var g=e.call(m,m.__data__,p,d),y,_=pi(m,r),b=0,w=g.length;b<w;++b)(y=g[b])&&Nm(y,t,r,b,g,_);o.push(g),l.push(m)}return new ga(o,l,t,r)}var Y$=Nu.prototype.constructor;function G$(){return new Y$(this._groups,this._parents)}function K$(e,t){var r,a,s;return function(){var o=fl(this,e),l=(this.style.removeProperty(e),fl(this,e));return o===l?null:o===r&&l===a?s:s=t(r=o,a=l)}}function JC(e){return function(){this.style.removeProperty(e)}}function X$(e,t,r){var a,s=r+"",o;return function(){var l=fl(this,e);return l===s?null:l===a?o:o=t(a=l,r)}}function Z$(e,t,r){var a,s,o;return function(){var l=fl(this,e),u=r(this),d=u+"";return u==null&&(d=u=(this.style.removeProperty(e),fl(this,e))),l===d?null:l===a&&d===s?o:(s=d,o=t(a=l,u))}}function W$(e,t){var r,a,s,o="style."+t,l="end."+o,u;return function(){var d=zi(this,e),f=d.on,m=d.value[o]==null?u||(u=JC(t)):void 0;(f!==r||s!==m)&&(a=(r=f).copy()).on(l,s=m),d.on=a}}function Q$(e,t,r){var a=(e+="")=="transform"?J3:QC;return t==null?this.styleTween(e,K$(e,a)).on("end.style."+e,JC(e)):typeof t=="function"?this.styleTween(e,Z$(e,a,pv(this,"style."+e,t))).each(W$(this._id,e)):this.styleTween(e,X$(e,a,t),r).on("end.style."+e,null)}function J$(e,t,r){return function(a){this.style.setProperty(e,t.call(this,a),r)}}function e5(e,t,r){var a,s;function o(){var l=t.apply(this,arguments);return l!==s&&(a=(s=l)&&J$(e,l,r)),a}return o._value=t,o}function t5(e,t,r){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,e5(e,t,r??""))}function n5(e){return function(){this.textContent=e}}function r5(e){return function(){var t=e(this);this.textContent=t??""}}function i5(e){return this.tween("text",typeof e=="function"?r5(pv(this,"text",e)):n5(e==null?"":e+""))}function a5(e){return function(t){this.textContent=e.call(this,t)}}function s5(e){var t,r;function a(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&a5(s)),t}return a._value=e,a}function o5(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,s5(e))}function l5(){for(var e=this._name,t=this._id,r=eE(),a=this._groups,s=a.length,o=0;o<s;++o)for(var l=a[o],u=l.length,d,f=0;f<u;++f)if(d=l[f]){var m=pi(d,t);Nm(d,e,r,f,l,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new ga(a,this._parents,e,r)}function c5(){var e,t,r=this,a=r._id,s=r.size();return new Promise(function(o,l){var u={value:l},d={value:function(){--s===0&&o()}};r.each(function(){var f=zi(this,a),m=f.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(d)),f.on=t}),s===0&&o()})}var u5=0;function ga(e,t,r,a){this._groups=e,this._parents=t,this._name=r,this._id=a}function eE(){return++u5}var ra=Nu.prototype;ga.prototype={constructor:ga,select:q$,selectAll:V$,selectChild:ra.selectChild,selectChildren:ra.selectChildren,filter:L$,merge:I$,selection:G$,transition:l5,call:ra.call,nodes:ra.nodes,node:ra.node,size:ra.size,empty:ra.empty,each:ra.each,on:H$,attr:x$,attrTween:k$,style:Q$,styleTween:t5,text:i5,textTween:o5,remove:F$,tween:m$,delay:j$,duration:R$,ease:M$,easeVarying:z$,end:c5,[Symbol.iterator]:ra[Symbol.iterator]};function d5(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var f5={time:null,delay:0,duration:250,ease:d5};function h5(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function m5(e){var t,r;e instanceof ga?(t=e._id,e=e._name):(t=eE(),(r=f5).time=hv(),e=e==null?null:e+"");for(var a=this._groups,s=a.length,o=0;o<s;++o)for(var l=a[o],u=l.length,d,f=0;f<u;++f)(d=l[f])&&Nm(d,e,t,f,l,r||h5(d,t));return new ga(a,this._parents,e,t)}Nu.prototype.interrupt=d$;Nu.prototype.transition=m5;const gf=e=>()=>e;function p5(e,{sourceEvent:t,target:r,transform:a,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:s}})}function fa(e,t,r){this.k=e,this.x=t,this.y=r}fa.prototype={constructor:fa,scale:function(e){return e===1?this:new fa(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new fa(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Am=new fa(1,0,0);tE.prototype=fa.prototype;function tE(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Am;return e.__zoom}function Ey(e){e.stopImmediatePropagation()}function Pc(e){e.preventDefault(),e.stopImmediatePropagation()}function g5(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function y5(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Fx(){return this.__zoom||Am}function v5(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function b5(){return navigator.maxTouchPoints||"ontouchstart"in this}function w5(e,t,r){var a=e.invertX(t[0][0])-r[0][0],s=e.invertX(t[1][0])-r[1][0],o=e.invertY(t[0][1])-r[0][1],l=e.invertY(t[1][1])-r[1][1];return e.translate(s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s),l>o?(o+l)/2:Math.min(0,o)||Math.max(0,l))}function nE(){var e=g5,t=y5,r=w5,a=v5,s=b5,o=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,d=wh,f=Cm("start","zoom","end"),m,p,g,y=500,_=150,b=0,w=10;function x(R){R.property("__zoom",Fx).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",V).filter(s).on("touchstart.zoom",F).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(R,G,H,U){var Z=R.selection?R.selection():R;Z.property("__zoom",Fx),R!==Z?E(R,G,H,U):Z.interrupt().each(function(){j(this,arguments).event(U).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},x.scaleBy=function(R,G,H,U){x.scaleTo(R,function(){var Z=this.__zoom.k,X=typeof G=="function"?G.apply(this,arguments):G;return Z*X},H,U)},x.scaleTo=function(R,G,H,U){x.transform(R,function(){var Z=t.apply(this,arguments),X=this.__zoom,Q=H==null?A(Z):typeof H=="function"?H.apply(this,arguments):H,$=X.invert(Q),B=typeof G=="function"?G.apply(this,arguments):G;return r(C(S(X,B),Q,$),Z,l)},H,U)},x.translateBy=function(R,G,H,U){x.transform(R,function(){return r(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof H=="function"?H.apply(this,arguments):H),t.apply(this,arguments),l)},null,U)},x.translateTo=function(R,G,H,U,Z){x.transform(R,function(){var X=t.apply(this,arguments),Q=this.__zoom,$=U==null?A(X):typeof U=="function"?U.apply(this,arguments):U;return r(Am.translate($[0],$[1]).scale(Q.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof H=="function"?-H.apply(this,arguments):-H),X,l)},U,Z)};function S(R,G){return G=Math.max(o[0],Math.min(o[1],G)),G===R.k?R:new fa(G,R.x,R.y)}function C(R,G,H){var U=G[0]-H[0]*R.k,Z=G[1]-H[1]*R.k;return U===R.x&&Z===R.y?R:new fa(R.k,U,Z)}function A(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function E(R,G,H,U){R.on("start.zoom",function(){j(this,arguments).event(U).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(U).end()}).tween("zoom",function(){var Z=this,X=arguments,Q=j(Z,X).event(U),$=t.apply(Z,X),B=H==null?A($):typeof H=="function"?H.apply(Z,X):H,K=Math.max($[1][0]-$[0][0],$[1][1]-$[0][1]),P=Z.__zoom,q=typeof G=="function"?G.apply(Z,X):G,J=d(P.invert(B).concat(K/P.k),q.invert(B).concat(K/q.k));return function(le){if(le===1)le=q;else{var oe=J(le),he=K/oe[2];le=new fa(he,B[0]-oe[0]*he,B[1]-oe[1]*he)}Q.zoom(null,le)}})}function j(R,G,H){return!H&&R.__zooming||new T(R,G)}function T(R,G){this.that=R,this.args=G,this.active=0,this.sourceEvent=null,this.extent=t.apply(R,G),this.taps=0}T.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,G){return this.mouse&&R!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var G=Rr(this.that).datum();f.call(R,this.that,new p5(R,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:f}),G)}};function z(R,...G){if(!e.apply(this,arguments))return;var H=j(this,G).event(R),U=this.__zoom,Z=Math.max(o[0],Math.min(o[1],U.k*Math.pow(2,a.apply(this,arguments)))),X=si(R);if(H.wheel)(H.mouse[0][0]!==X[0]||H.mouse[0][1]!==X[1])&&(H.mouse[1]=U.invert(H.mouse[0]=X)),clearTimeout(H.wheel);else{if(U.k===Z)return;H.mouse=[X,U.invert(X)],Sh(this),H.start()}Pc(R),H.wheel=setTimeout(Q,_),H.zoom("mouse",r(C(S(U,Z),H.mouse[0],H.mouse[1]),H.extent,l));function Q(){H.wheel=null,H.end()}}function L(R,...G){if(g||!e.apply(this,arguments))return;var H=R.currentTarget,U=j(this,G,!0).event(R),Z=Rr(R.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",K,!0),X=si(R,H),Q=R.clientX,$=R.clientY;PC(R.view),Ey(R),U.mouse=[X,this.__zoom.invert(X)],Sh(this),U.start();function B(P){if(Pc(P),!U.moved){var q=P.clientX-Q,J=P.clientY-$;U.moved=q*q+J*J>b}U.event(P).zoom("mouse",r(C(U.that.__zoom,U.mouse[0]=si(P,H),U.mouse[1]),U.extent,l))}function K(P){Z.on("mousemove.zoom mouseup.zoom",null),BC(P.view,U.moved),Pc(P),U.event(P).end()}}function V(R,...G){if(e.apply(this,arguments)){var H=this.__zoom,U=si(R.changedTouches?R.changedTouches[0]:R,this),Z=H.invert(U),X=H.k*(R.shiftKey?.5:2),Q=r(C(S(H,X),U,Z),t.apply(this,G),l);Pc(R),u>0?Rr(this).transition().duration(u).call(E,Q,U,R):Rr(this).call(x.transform,Q,U,R)}}function F(R,...G){if(e.apply(this,arguments)){var H=R.touches,U=H.length,Z=j(this,G,R.changedTouches.length===U).event(R),X,Q,$,B;for(Ey(R),Q=0;Q<U;++Q)$=H[Q],B=si($,this),B=[B,this.__zoom.invert(B),$.identifier],Z.touch0?!Z.touch1&&Z.touch0[2]!==B[2]&&(Z.touch1=B,Z.taps=0):(Z.touch0=B,X=!0,Z.taps=1+!!m);m&&(m=clearTimeout(m)),X&&(Z.taps<2&&(p=B[0],m=setTimeout(function(){m=null},y)),Sh(this),Z.start())}}function M(R,...G){if(this.__zooming){var H=j(this,G).event(R),U=R.changedTouches,Z=U.length,X,Q,$,B;for(Pc(R),X=0;X<Z;++X)Q=U[X],$=si(Q,this),H.touch0&&H.touch0[2]===Q.identifier?H.touch0[0]=$:H.touch1&&H.touch1[2]===Q.identifier&&(H.touch1[0]=$);if(Q=H.that.__zoom,H.touch1){var K=H.touch0[0],P=H.touch0[1],q=H.touch1[0],J=H.touch1[1],le=(le=q[0]-K[0])*le+(le=q[1]-K[1])*le,oe=(oe=J[0]-P[0])*oe+(oe=J[1]-P[1])*oe;Q=S(Q,Math.sqrt(le/oe)),$=[(K[0]+q[0])/2,(K[1]+q[1])/2],B=[(P[0]+J[0])/2,(P[1]+J[1])/2]}else if(H.touch0)$=H.touch0[0],B=H.touch0[1];else return;H.zoom("touch",r(C(Q,$,B),H.extent,l))}}function O(R,...G){if(this.__zooming){var H=j(this,G).event(R),U=R.changedTouches,Z=U.length,X,Q;for(Ey(R),g&&clearTimeout(g),g=setTimeout(function(){g=null},y),X=0;X<Z;++X)Q=U[X],H.touch0&&H.touch0[2]===Q.identifier?delete H.touch0:H.touch1&&H.touch1[2]===Q.identifier&&delete H.touch1;if(H.touch1&&!H.touch0&&(H.touch0=H.touch1,delete H.touch1),H.touch0)H.touch0[1]=this.__zoom.invert(H.touch0[0]);else if(H.end(),H.taps===2&&(Q=si(Q,this),Math.hypot(p[0]-Q[0],p[1]-Q[1])<w)){var $=Rr(this).on("dblclick.zoom");$&&$.apply(this,arguments)}}}return x.wheelDelta=function(R){return arguments.length?(a=typeof R=="function"?R:gf(+R),x):a},x.filter=function(R){return arguments.length?(e=typeof R=="function"?R:gf(!!R),x):e},x.touchable=function(R){return arguments.length?(s=typeof R=="function"?R:gf(!!R),x):s},x.extent=function(R){return arguments.length?(t=typeof R=="function"?R:gf([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),x):t},x.scaleExtent=function(R){return arguments.length?(o[0]=+R[0],o[1]=+R[1],x):[o[0],o[1]]},x.translateExtent=function(R){return arguments.length?(l[0][0]=+R[0][0],l[1][0]=+R[1][0],l[0][1]=+R[0][1],l[1][1]=+R[1][1],x):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},x.constrain=function(R){return arguments.length?(r=R,x):r},x.duration=function(R){return arguments.length?(u=+R,x):u},x.interpolate=function(R){return arguments.length?(d=R,x):d},x.on=function(){var R=f.on.apply(f,arguments);return R===f?x:R},x.clickDistance=function(R){return arguments.length?(b=(R=+R)*R,x):Math.sqrt(b)},x.tapDistance=function(R){return arguments.length?(w=+R,x):w},x}const Mi={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:r,targetHandle:a})=>`Couldn't create edge for ${e} handle id: "${e==="source"?r:a}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ou=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],rE=["Enter"," ","Escape"],iE={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:r})=>`Moved selected node ${e}. New position, x: ${t}, y: ${r}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var ml;(function(e){e.Strict="strict",e.Loose="loose"})(ml||(ml={}));var Ws;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ws||(Ws={}));var pl;(function(e){e.Partial="partial",e.Full="full"})(pl||(pl={}));const aE={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var ts;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ts||(ts={}));var qh;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(qh||(qh={}));var ze;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ze||(ze={}));const qx={[ze.Left]:ze.Right,[ze.Right]:ze.Left,[ze.Top]:ze.Bottom,[ze.Bottom]:ze.Top};function sE(e){return e===null?null:e?"valid":"invalid"}const oE=e=>"id"in e&&"source"in e&&"target"in e,x5=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),gv=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),ju=(e,t=[0,0])=>{const{width:r,height:a}=va(e),s=e.origin??t,o=r*s[0],l=a*s[1];return{x:e.position.x-o,y:e.position.y-l}},_5=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((a,s)=>{const o=typeof s=="string";let l=!t.nodeLookup&&!o?s:void 0;t.nodeLookup&&(l=o?t.nodeLookup.get(s):gv(s)?s:t.nodeLookup.get(s.id));const u=l?Vh(l,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return jm(a,u)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Tm(r)},Nl=(e,t={})=>{let r={x:1/0,y:1/0,x2:-1/0,y2:-1/0},a=!1;return e.forEach(s=>{(t.filter===void 0||t.filter(s))&&(r=jm(r,Vh(s)),a=!0)}),a?Tm(r):{x:0,y:0,width:0,height:0}},yv=(e,t,[r,a,s]=[0,0,1],o=!1,l=!1)=>{const u={...Du(t,[r,a,s]),width:t.width/s,height:t.height/s},d=[];for(const f of e.values()){const{measured:m,selectable:p=!0,hidden:g=!1}=f;if(l&&!p||g)continue;const y=m.width??f.width??f.initialWidth??null,_=m.height??f.height??f.initialHeight??null,b=lu(u,yl(f)),w=(y??0)*(_??0),x=o&&b>0;(!f.internals.handleBounds||x||b>=w||f.dragging)&&d.push(f)}return d},S5=(e,t)=>{const r=new Set;return e.forEach(a=>{r.add(a.id)}),t.filter(a=>r.has(a.source)||r.has(a.target))};function C5(e,t){const r=new Map,a=t?.nodes?new Set(t.nodes.map(s=>s.id)):null;return e.forEach(s=>{s.measured.width&&s.measured.height&&(t?.includeHiddenNodes||!s.hidden)&&(!a||a.has(s.id))&&r.set(s.id,s)}),r}async function E5({nodes:e,width:t,height:r,panZoom:a,minZoom:s,maxZoom:o},l){if(e.size===0)return Promise.resolve(!0);const u=C5(e,l),d=Nl(u),f=vv(d,t,r,l?.minZoom??s,l?.maxZoom??o,l?.padding??.1);return await a.setViewport(f,{duration:l?.duration,ease:l?.ease,interpolate:l?.interpolate}),Promise.resolve(!0)}function lE({nodeId:e,nextPosition:t,nodeLookup:r,nodeOrigin:a=[0,0],nodeExtent:s,onError:o}){const l=r.get(e),u=l.parentId?r.get(l.parentId):void 0,{x:d,y:f}=u?u.internals.positionAbsolute:{x:0,y:0},m=l.origin??a;let p=l.extent||s;if(l.extent==="parent"&&!l.expandParent)if(!u)o?.("005",Mi.error005());else{const y=u.measured.width,_=u.measured.height;y&&_&&(p=[[d,f],[d+y,f+_]])}else u&&vl(l.extent)&&(p=[[l.extent[0][0]+d,l.extent[0][1]+f],[l.extent[1][0]+d,l.extent[1][1]+f]]);const g=vl(p)?ao(t,p,l.measured):t;return(l.measured.width===void 0||l.measured.height===void 0)&&o?.("015",Mi.error015()),{position:{x:g.x-d+(l.measured.width??0)*m[0],y:g.y-f+(l.measured.height??0)*m[1]},positionAbsolute:g}}async function k5({nodesToRemove:e=[],edgesToRemove:t=[],nodes:r,edges:a,onBeforeDelete:s}){const o=new Set(e.map(g=>g.id)),l=[];for(const g of r){if(g.deletable===!1)continue;const y=o.has(g.id),_=!y&&g.parentId&&l.find(b=>b.id===g.parentId);(y||_)&&l.push(g)}const u=new Set(t.map(g=>g.id)),d=a.filter(g=>g.deletable!==!1),m=S5(l,d);for(const g of d)u.has(g.id)&&!m.find(_=>_.id===g.id)&&m.push(g);if(!s)return{edges:m,nodes:l};const p=await s({nodes:l,edges:m});return typeof p=="boolean"?p?{edges:m,nodes:l}:{edges:[],nodes:[]}:p}const gl=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),ao=(e={x:0,y:0},t,r)=>({x:gl(e.x,t[0][0],t[1][0]-(r?.width??0)),y:gl(e.y,t[0][1],t[1][1]-(r?.height??0))});function cE(e,t,r){const{width:a,height:s}=va(r),{x:o,y:l}=r.internals.positionAbsolute;return ao(e,[[o,l],[o+a,l+s]],t)}const Vx=(e,t,r)=>e<t?gl(Math.abs(e-t),1,t)/t:e>r?-gl(Math.abs(e-r),1,t)/t:0,uE=(e,t,r=15,a=40)=>{const s=Vx(e.x,a,t.width-a)*r,o=Vx(e.y,a,t.height-a)*r;return[s,o]},jm=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),N0=({x:e,y:t,width:r,height:a})=>({x:e,y:t,x2:e+r,y2:t+a}),Tm=({x:e,y:t,x2:r,y2:a})=>({x:e,y:t,width:r-e,height:a-t}),yl=(e,t=[0,0])=>{const{x:r,y:a}=gv(e)?e.internals.positionAbsolute:ju(e,t);return{x:r,y:a,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Vh=(e,t=[0,0])=>{const{x:r,y:a}=gv(e)?e.internals.positionAbsolute:ju(e,t);return{x:r,y:a,x2:r+(e.measured?.width??e.width??e.initialWidth??0),y2:a+(e.measured?.height??e.height??e.initialHeight??0)}},dE=(e,t)=>Tm(jm(N0(e),N0(t))),lu=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),a=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*a)},Yx=e=>ui(e.width)&&ui(e.height)&&ui(e.x)&&ui(e.y),ui=e=>!isNaN(e)&&isFinite(e),N5=(e,t)=>{},Tu=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Du=({x:e,y:t},[r,a,s],o=!1,l=[1,1])=>{const u={x:(e-r)/s,y:(t-a)/s};return o?Tu(u,l):u},Yh=({x:e,y:t},[r,a,s])=>({x:e*s+r,y:t*s+a});function Xo(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(r)}if(typeof e=="string"&&e.endsWith("%")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(t*r*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function A5(e,t,r){if(typeof e=="string"||typeof e=="number"){const a=Xo(e,r),s=Xo(e,t);return{top:a,right:s,bottom:a,left:s,x:s*2,y:a*2}}if(typeof e=="object"){const a=Xo(e.top??e.y??0,r),s=Xo(e.bottom??e.y??0,r),o=Xo(e.left??e.x??0,t),l=Xo(e.right??e.x??0,t);return{top:a,right:l,bottom:s,left:o,x:o+l,y:a+s}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function j5(e,t,r,a,s,o){const{x:l,y:u}=Yh(e,[t,r,a]),{x:d,y:f}=Yh({x:e.x+e.width,y:e.y+e.height},[t,r,a]),m=s-d,p=o-f;return{left:Math.floor(l),top:Math.floor(u),right:Math.floor(m),bottom:Math.floor(p)}}const vv=(e,t,r,a,s,o)=>{const l=A5(o,t,r),u=(t-l.x)/e.width,d=(r-l.y)/e.height,f=Math.min(u,d),m=gl(f,a,s),p=e.x+e.width/2,g=e.y+e.height/2,y=t/2-p*m,_=r/2-g*m,b=j5(e,y,_,m,t,r),w={left:Math.min(b.left-l.left,0),top:Math.min(b.top-l.top,0),right:Math.min(b.right-l.right,0),bottom:Math.min(b.bottom-l.bottom,0)};return{x:y-w.left+w.right,y:_-w.top+w.bottom,zoom:m}},cu=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function vl(e){return e!=null&&e!=="parent"}function va(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function fE(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function hE(e,t={width:0,height:0},r,a,s){const o={...e},l=a.get(r);if(l){const u=l.origin||s;o.x+=l.internals.positionAbsolute.x-(t.width??0)*u[0],o.y+=l.internals.positionAbsolute.y-(t.height??0)*u[1]}return o}function Gx(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function T5(){let e,t;return{promise:new Promise((a,s)=>{e=a,t=s}),resolve:e,reject:t}}function D5(e){return{...iE,...e||{}}}function Xc(e,{snapGrid:t=[0,0],snapToGrid:r=!1,transform:a,containerBounds:s}){const{x:o,y:l}=di(e),u=Du({x:o-(s?.left??0),y:l-(s?.top??0)},a),{x:d,y:f}=r?Tu(u,t):u;return{xSnapped:d,ySnapped:f,...u}}const bv=e=>({width:e.offsetWidth,height:e.offsetHeight}),mE=e=>e?.getRootNode?.()||window?.document,R5=["INPUT","SELECT","TEXTAREA"];function pE(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:R5.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const gE=e=>"clientX"in e,di=(e,t)=>{const r=gE(e),a=r?e.clientX:e.touches?.[0].clientX,s=r?e.clientY:e.touches?.[0].clientY;return{x:a-(t?.left??0),y:s-(t?.top??0)}},Kx=(e,t,r,a,s)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),type:e,nodeId:s,position:l.getAttribute("data-handlepos"),x:(u.left-r.left)/a,y:(u.top-r.top)/a,...bv(l)}})};function yE({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:s,sourceControlY:o,targetControlX:l,targetControlY:u}){const d=e*.125+s*.375+l*.375+r*.125,f=t*.125+o*.375+u*.375+a*.125,m=Math.abs(d-e),p=Math.abs(f-t);return[d,f,m,p]}function yf(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Xx({pos:e,x1:t,y1:r,x2:a,y2:s,c:o}){switch(e){case ze.Left:return[t-yf(t-a,o),r];case ze.Right:return[t+yf(a-t,o),r];case ze.Top:return[t,r-yf(r-s,o)];case ze.Bottom:return[t,r+yf(s-r,o)]}}function vE({sourceX:e,sourceY:t,sourcePosition:r=ze.Bottom,targetX:a,targetY:s,targetPosition:o=ze.Top,curvature:l=.25}){const[u,d]=Xx({pos:r,x1:e,y1:t,x2:a,y2:s,c:l}),[f,m]=Xx({pos:o,x1:a,y1:s,x2:e,y2:t,c:l}),[p,g,y,_]=yE({sourceX:e,sourceY:t,targetX:a,targetY:s,sourceControlX:u,sourceControlY:d,targetControlX:f,targetControlY:m});return[`M${e},${t} C${u},${d} ${f},${m} ${a},${s}`,p,g,y,_]}function bE({sourceX:e,sourceY:t,targetX:r,targetY:a}){const s=Math.abs(r-e)/2,o=r<e?r+s:r-s,l=Math.abs(a-t)/2,u=a<t?a+l:a-l;return[o,u,s,l]}function $5({sourceNode:e,targetNode:t,selected:r=!1,zIndex:a=0,elevateOnSelect:s=!1,zIndexMode:o="basic"}){if(o==="manual")return a;const l=s&&r?a+1e3:a,u=Math.max(e.parentId||s&&e.selected?e.internals.z:0,t.parentId||s&&t.selected?t.internals.z:0);return l+u}function M5({sourceNode:e,targetNode:t,width:r,height:a,transform:s}){const o=jm(Vh(e),Vh(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const l={x:-s[0]/s[2],y:-s[1]/s[2],width:r/s[2],height:a/s[2]};return lu(l,Tm(o))>0}const O5=({source:e,sourceHandle:t,target:r,targetHandle:a})=>`xy-edge__${e}${t||""}-${r}${a||""}`,z5=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),L5=(e,t,r={})=>{if(!e.source||!e.target)return t;const a=r.getEdgeId||O5;let s;return oE(e)?s={...e}:s={...e,id:a(e)},z5(s,t)?t:(s.sourceHandle===null&&delete s.sourceHandle,s.targetHandle===null&&delete s.targetHandle,t.concat(s))};function wE({sourceX:e,sourceY:t,targetX:r,targetY:a}){const[s,o,l,u]=bE({sourceX:e,sourceY:t,targetX:r,targetY:a});return[`M ${e},${t}L ${r},${a}`,s,o,l,u]}const Zx={[ze.Left]:{x:-1,y:0},[ze.Right]:{x:1,y:0},[ze.Top]:{x:0,y:-1},[ze.Bottom]:{x:0,y:1}},I5=({source:e,sourcePosition:t=ze.Bottom,target:r})=>t===ze.Left||t===ze.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},Wx=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function P5({source:e,sourcePosition:t=ze.Bottom,target:r,targetPosition:a=ze.Top,center:s,offset:o,stepPosition:l}){const u=Zx[t],d=Zx[a],f={x:e.x+u.x*o,y:e.y+u.y*o},m={x:r.x+d.x*o,y:r.y+d.y*o},p=I5({source:f,sourcePosition:t,target:m}),g=p.x!==0?"x":"y",y=p[g];let _=[],b,w;const x={x:0,y:0},S={x:0,y:0},[,,C,A]=bE({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(u[g]*d[g]===-1){g==="x"?(b=s.x??f.x+(m.x-f.x)*l,w=s.y??(f.y+m.y)/2):(b=s.x??(f.x+m.x)/2,w=s.y??f.y+(m.y-f.y)*l);const j=[{x:b,y:f.y},{x:b,y:m.y}],T=[{x:f.x,y:w},{x:m.x,y:w}];u[g]===y?_=g==="x"?j:T:_=g==="x"?T:j}else{const j=[{x:f.x,y:m.y}],T=[{x:m.x,y:f.y}];if(g==="x"?_=u.x===y?T:j:_=u.y===y?j:T,t===a){const M=Math.abs(e[g]-r[g]);if(M<=o){const O=Math.min(o-1,o-M);u[g]===y?x[g]=(f[g]>e[g]?-1:1)*O:S[g]=(m[g]>r[g]?-1:1)*O}}if(t!==a){const M=g==="x"?"y":"x",O=u[g]===d[M],R=f[M]>m[M],G=f[M]<m[M];(u[g]===1&&(!O&&R||O&&G)||u[g]!==1&&(!O&&G||O&&R))&&(_=g==="x"?j:T)}const z={x:f.x+x.x,y:f.y+x.y},L={x:m.x+S.x,y:m.y+S.y},V=Math.max(Math.abs(z.x-_[0].x),Math.abs(L.x-_[0].x)),F=Math.max(Math.abs(z.y-_[0].y),Math.abs(L.y-_[0].y));V>=F?(b=(z.x+L.x)/2,w=_[0].y):(b=_[0].x,w=(z.y+L.y)/2)}return[[e,{x:f.x+x.x,y:f.y+x.y},..._,{x:m.x+S.x,y:m.y+S.y},r],b,w,C,A]}function B5(e,t,r,a){const s=Math.min(Wx(e,t)/2,Wx(t,r)/2,a),{x:o,y:l}=t;if(e.x===o&&o===r.x||e.y===l&&l===r.y)return`L${o} ${l}`;if(e.y===l){const f=e.x<r.x?-1:1,m=e.y<r.y?1:-1;return`L ${o+s*f},${l}Q ${o},${l} ${o},${l+s*m}`}const u=e.x<r.x?1:-1,d=e.y<r.y?-1:1;return`L ${o},${l+s*d}Q ${o},${l} ${o+s*u},${l}`}function A0({sourceX:e,sourceY:t,sourcePosition:r=ze.Bottom,targetX:a,targetY:s,targetPosition:o=ze.Top,borderRadius:l=5,centerX:u,centerY:d,offset:f=20,stepPosition:m=.5}){const[p,g,y,_,b]=P5({source:{x:e,y:t},sourcePosition:r,target:{x:a,y:s},targetPosition:o,center:{x:u,y:d},offset:f,stepPosition:m});return[p.reduce((x,S,C)=>{let A="";return C>0&&C<p.length-1?A=B5(p[C-1],S,p[C+1],l):A=`${C===0?"M":"L"}${S.x} ${S.y}`,x+=A,x},""),g,y,_,b]}function Qx(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function H5(e){const{sourceNode:t,targetNode:r}=e;if(!Qx(t)||!Qx(r))return null;const a=t.internals.handleBounds||Jx(t.handles),s=r.internals.handleBounds||Jx(r.handles),o=e_(a?.source??[],e.sourceHandle),l=e_(e.connectionMode===ml.Strict?s?.target??[]:(s?.target??[]).concat(s?.source??[]),e.targetHandle);if(!o||!l)return e.onError?.("008",Mi.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const u=o?.position||ze.Bottom,d=l?.position||ze.Top,f=so(t,o,u),m=so(r,l,d);return{sourceX:f.x,sourceY:f.y,targetX:m.x,targetY:m.y,sourcePosition:u,targetPosition:d}}function Jx(e){if(!e)return null;const t=[],r=[];for(const a of e)a.width=a.width??1,a.height=a.height??1,a.type==="source"?t.push(a):a.type==="target"&&r.push(a);return{source:t,target:r}}function so(e,t,r=ze.Left,a=!1){const s=(t?.x??0)+e.internals.positionAbsolute.x,o=(t?.y??0)+e.internals.positionAbsolute.y,{width:l,height:u}=t??va(e);if(a)return{x:s+l/2,y:o+u/2};switch(t?.position??r){case ze.Top:return{x:s+l/2,y:o};case ze.Right:return{x:s+l,y:o+u/2};case ze.Bottom:return{x:s+l/2,y:o+u};case ze.Left:return{x:s,y:o+u/2}}}function e_(e,t){return e&&(t?e.find(r=>r.id===t):e[0])||null}function j0(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(a=>`${a}=${e[a]}`).join("&")}`:""}function U5(e,{id:t,defaultColor:r,defaultMarkerStart:a,defaultMarkerEnd:s}){const o=new Set;return e.reduce((l,u)=>([u.markerStart||a,u.markerEnd||s].forEach(d=>{if(d&&typeof d=="object"){const f=j0(d,t);o.has(f)||(l.push({id:f,color:d.color||r,...d}),o.add(f))}}),l),[]).sort((l,u)=>l.id.localeCompare(u.id))}function F5(e,t,r,a,s){let o=.5;s==="start"?o=0:s==="end"&&(o=1);let l=[(e.x+e.width*o)*t.zoom+t.x,e.y*t.zoom+t.y-a],u=[-100*o,-100];switch(r){case ze.Right:l=[(e.x+e.width)*t.zoom+t.x+a,(e.y+e.height*o)*t.zoom+t.y],u=[0,-100*o];break;case ze.Bottom:l[1]=(e.y+e.height)*t.zoom+t.y+a,u[1]=0;break;case ze.Left:l=[e.x*t.zoom+t.x-a,(e.y+e.height*o)*t.zoom+t.y],u=[-100,-100*o];break}return`translate(${l[0]}px, ${l[1]}px) translate(${u[0]}%, ${u[1]}%)`}const xE=1e3,q5=10,wv={nodeOrigin:[0,0],nodeExtent:ou,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},V5={...wv,checkEquality:!0};function xv(e,t){const r={...e};for(const a in t)t[a]!==void 0&&(r[a]=t[a]);return r}function Y5(e,t,r){const a=xv(wv,r);for(const s of e.values())if(s.parentId)Sv(s,e,t,a);else{const o=ju(s,a.nodeOrigin),l=vl(s.extent)?s.extent:a.nodeExtent,u=ao(o,l,va(s));s.internals.positionAbsolute=u}}function G5(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const r=[],a=[];for(const s of e.handles){const o={id:s.id,width:s.width??1,height:s.height??1,nodeId:e.id,x:s.x,y:s.y,position:s.position,type:s.type};s.type==="source"?r.push(o):s.type==="target"&&a.push(o)}return{source:r,target:a}}function _v(e){return e==="manual"}function T0(e,t,r,a={}){const s=xv(V5,a),o={i:0},l=new Map(t),u=s?.elevateNodesOnSelect&&!_v(s.zIndexMode)?xE:0;let d=e.length>0;t.clear(),r.clear();for(const f of e){let m=l.get(f.id);if(s.checkEquality&&f===m?.internals.userNode)t.set(f.id,m);else{const p=ju(f,s.nodeOrigin),g=vl(f.extent)?f.extent:s.nodeExtent,y=ao(p,g,va(f));m={...s.defaults,...f,measured:{width:f.measured?.width,height:f.measured?.height},internals:{positionAbsolute:y,handleBounds:G5(f,m),z:_E(f,u,s.zIndexMode),userNode:f}},t.set(f.id,m)}(m.measured===void 0||m.measured.width===void 0||m.measured.height===void 0)&&!m.hidden&&(d=!1),f.parentId&&Sv(m,t,r,a,o)}return d}function K5(e,t){if(!e.parentId)return;const r=t.get(e.parentId);r?r.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Sv(e,t,r,a,s){const{elevateNodesOnSelect:o,nodeOrigin:l,nodeExtent:u,zIndexMode:d}=xv(wv,a),f=e.parentId,m=t.get(f);if(!m){console.warn(`Parent node ${f} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}K5(e,r),s&&!m.parentId&&m.internals.rootParentIndex===void 0&&d==="auto"&&(m.internals.rootParentIndex=++s.i,m.internals.z=m.internals.z+s.i*q5),s&&m.internals.rootParentIndex!==void 0&&(s.i=m.internals.rootParentIndex);const p=o&&!_v(d)?xE:0,{x:g,y,z:_}=X5(e,m,l,u,p,d),{positionAbsolute:b}=e.internals,w=g!==b.x||y!==b.y;(w||_!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:w?{x:g,y}:b,z:_}})}function _E(e,t,r){const a=ui(e.zIndex)?e.zIndex:0;return _v(r)?a:a+(e.selected?t:0)}function X5(e,t,r,a,s,o){const{x:l,y:u}=t.internals.positionAbsolute,d=va(e),f=ju(e,r),m=vl(e.extent)?ao(f,e.extent,d):f;let p=ao({x:l+m.x,y:u+m.y},a,d);e.extent==="parent"&&(p=cE(p,d,t));const g=_E(e,s,o),y=t.internals.z??0;return{x:p.x,y:p.y,z:y>=g?y+1:g}}function Cv(e,t,r,a=[0,0]){const s=[],o=new Map;for(const l of e){const u=t.get(l.parentId);if(!u)continue;const d=o.get(l.parentId)?.expandedRect??yl(u),f=dE(d,l.rect);o.set(l.parentId,{expandedRect:f,parent:u})}return o.size>0&&o.forEach(({expandedRect:l,parent:u},d)=>{const f=u.internals.positionAbsolute,m=va(u),p=u.origin??a,g=l.x<f.x?Math.round(Math.abs(f.x-l.x)):0,y=l.y<f.y?Math.round(Math.abs(f.y-l.y)):0,_=Math.max(m.width,Math.round(l.width)),b=Math.max(m.height,Math.round(l.height)),w=(_-m.width)*p[0],x=(b-m.height)*p[1];(g>0||y>0||w||x)&&(s.push({id:d,type:"position",position:{x:u.position.x-g+w,y:u.position.y-y+x}}),r.get(d)?.forEach(S=>{e.some(C=>C.id===S.id)||s.push({id:S.id,type:"position",position:{x:S.position.x+g,y:S.position.y+y}})})),(m.width<l.width||m.height<l.height||g||y)&&s.push({id:d,type:"dimensions",setAttributes:!0,dimensions:{width:_+(g?p[0]*g-w:0),height:b+(y?p[1]*y-x:0)}})}),s}function Z5(e,t,r,a,s,o,l){const u=a?.querySelector(".xyflow__viewport");let d=!1;if(!u)return{changes:[],updatedInternals:d};const f=[],m=window.getComputedStyle(u),{m22:p}=new window.DOMMatrixReadOnly(m.transform),g=[];for(const y of e.values()){const _=t.get(y.id);if(!_)continue;if(_.hidden){t.set(_.id,{..._,internals:{..._.internals,handleBounds:void 0}}),d=!0;continue}const b=bv(y.nodeElement),w=_.measured.width!==b.width||_.measured.height!==b.height;if(!!(b.width&&b.height&&(w||!_.internals.handleBounds||y.force))){const S=y.nodeElement.getBoundingClientRect(),C=vl(_.extent)?_.extent:o;let{positionAbsolute:A}=_.internals;_.parentId&&_.extent==="parent"?A=cE(A,b,t.get(_.parentId)):C&&(A=ao(A,C,b));const E={..._,measured:b,internals:{..._.internals,positionAbsolute:A,handleBounds:{source:Kx("source",y.nodeElement,S,p,_.id),target:Kx("target",y.nodeElement,S,p,_.id)}}};t.set(_.id,E),_.parentId&&Sv(E,t,r,{nodeOrigin:s,zIndexMode:l}),d=!0,w&&(f.push({id:_.id,type:"dimensions",dimensions:b}),_.expandParent&&_.parentId&&g.push({id:_.id,parentId:_.parentId,rect:yl(E,s)}))}}if(g.length>0){const y=Cv(g,t,r,s);f.push(...y)}return{changes:f,updatedInternals:d}}async function W5({delta:e,panZoom:t,transform:r,translateExtent:a,width:s,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const l=await t.setViewportConstrained({x:r[0]+e.x,y:r[1]+e.y,zoom:r[2]},[[0,0],[s,o]],a),u=!!l&&(l.x!==r[0]||l.y!==r[1]||l.k!==r[2]);return Promise.resolve(u)}function t_(e,t,r,a,s,o){let l=s;const u=a.get(l)||new Map;a.set(l,u.set(r,t)),l=`${s}-${e}`;const d=a.get(l)||new Map;if(a.set(l,d.set(r,t)),o){l=`${s}-${e}-${o}`;const f=a.get(l)||new Map;a.set(l,f.set(r,t))}}function SE(e,t,r){e.clear(),t.clear();for(const a of r){const{source:s,target:o,sourceHandle:l=null,targetHandle:u=null}=a,d={edgeId:a.id,source:s,target:o,sourceHandle:l,targetHandle:u},f=`${s}-${l}--${o}-${u}`,m=`${o}-${u}--${s}-${l}`;t_("source",d,m,e,s,l),t_("target",d,f,e,o,u),t.set(a.id,a)}}function CE(e,t){if(!e.parentId)return!1;const r=t.get(e.parentId);return r?r.selected?!0:CE(r,t):!1}function n_(e,t,r){let a=e;do{if(a?.matches?.(t))return!0;if(a===r)return!1;a=a?.parentElement}while(a);return!1}function Q5(e,t,r,a){const s=new Map;for(const[o,l]of e)if((l.selected||l.id===a)&&(!l.parentId||!CE(l,e))&&(l.draggable||t&&typeof l.draggable>"u")){const u=e.get(o);u&&s.set(o,{id:o,position:u.position||{x:0,y:0},distance:{x:r.x-u.internals.positionAbsolute.x,y:r.y-u.internals.positionAbsolute.y},extent:u.extent,parentId:u.parentId,origin:u.origin,expandParent:u.expandParent,internals:{positionAbsolute:u.internals.positionAbsolute||{x:0,y:0}},measured:{width:u.measured.width??0,height:u.measured.height??0}})}return s}function ky({nodeId:e,dragItems:t,nodeLookup:r,dragging:a=!0}){const s=[];for(const[l,u]of t){const d=r.get(l)?.internals.userNode;d&&s.push({...d,position:u.position,dragging:a})}if(!e)return[s[0],s];const o=r.get(e)?.internals.userNode;return[o?{...o,position:t.get(e)?.position||o.position,dragging:a}:s[0],s]}function J5({dragItems:e,snapGrid:t,x:r,y:a}){const s=e.values().next().value;if(!s)return null;const o={x:r-s.distance.x,y:a-s.distance.y},l=Tu(o,t);return{x:l.x-o.x,y:l.y-o.y}}function eM({onNodeMouseDown:e,getStoreItems:t,onDragStart:r,onDrag:a,onDragStop:s}){let o={x:null,y:null},l=0,u=new Map,d=!1,f={x:0,y:0},m=null,p=!1,g=null,y=!1,_=!1,b=null;function w({noDragClassName:S,handleSelector:C,domNode:A,isSelectable:E,nodeId:j,nodeClickDistance:T=0}){g=Rr(A);function z({x:M,y:O}){const{nodeLookup:R,nodeExtent:G,snapGrid:H,snapToGrid:U,nodeOrigin:Z,onNodeDrag:X,onSelectionDrag:Q,onError:$,updateNodePositions:B}=t();o={x:M,y:O};let K=!1;const P=u.size>1,q=P&&G?N0(Nl(u)):null,J=P&&U?J5({dragItems:u,snapGrid:H,x:M,y:O}):null;for(const[le,oe]of u){if(!R.has(le))continue;let he={x:M-oe.distance.x,y:O-oe.distance.y};U&&(he=J?{x:Math.round(he.x+J.x),y:Math.round(he.y+J.y)}:Tu(he,H));let ve=null;if(P&&G&&!oe.extent&&q){const{positionAbsolute:ae}=oe.internals,I=ae.x-q.x+G[0][0],ue=ae.x+oe.measured.width-q.x2+G[1][0],ce=ae.y-q.y+G[0][1],re=ae.y+oe.measured.height-q.y2+G[1][1];ve=[[I,ce],[ue,re]]}const{position:W,positionAbsolute:ie}=lE({nodeId:le,nextPosition:he,nodeLookup:R,nodeExtent:ve||G,nodeOrigin:Z,onError:$});K=K||oe.position.x!==W.x||oe.position.y!==W.y,oe.position=W,oe.internals.positionAbsolute=ie}if(_=_||K,!!K&&(B(u,!0),b&&(a||X||!j&&Q))){const[le,oe]=ky({nodeId:j,dragItems:u,nodeLookup:R});a?.(b,u,le,oe),X?.(b,le,oe),j||Q?.(b,oe)}}async function L(){if(!m)return;const{transform:M,panBy:O,autoPanSpeed:R,autoPanOnNodeDrag:G}=t();if(!G){d=!1,cancelAnimationFrame(l);return}const[H,U]=uE(f,m,R);(H!==0||U!==0)&&(o.x=(o.x??0)-H/M[2],o.y=(o.y??0)-U/M[2],await O({x:H,y:U})&&z(o)),l=requestAnimationFrame(L)}function V(M){const{nodeLookup:O,multiSelectionActive:R,nodesDraggable:G,transform:H,snapGrid:U,snapToGrid:Z,selectNodesOnDrag:X,onNodeDragStart:Q,onSelectionDragStart:$,unselectNodesAndEdges:B}=t();p=!0,(!X||!E)&&!R&&j&&(O.get(j)?.selected||B()),E&&X&&j&&e?.(j);const K=Xc(M.sourceEvent,{transform:H,snapGrid:U,snapToGrid:Z,containerBounds:m});if(o=K,u=Q5(O,G,K,j),u.size>0&&(r||Q||!j&&$)){const[P,q]=ky({nodeId:j,dragItems:u,nodeLookup:O});r?.(M.sourceEvent,u,P,q),Q?.(M.sourceEvent,P,q),j||$?.(M.sourceEvent,q)}}const F=HC().clickDistance(T).on("start",M=>{const{domNode:O,nodeDragThreshold:R,transform:G,snapGrid:H,snapToGrid:U}=t();m=O?.getBoundingClientRect()||null,y=!1,_=!1,b=M.sourceEvent,R===0&&V(M),o=Xc(M.sourceEvent,{transform:G,snapGrid:H,snapToGrid:U,containerBounds:m}),f=di(M.sourceEvent,m)}).on("drag",M=>{const{autoPanOnNodeDrag:O,transform:R,snapGrid:G,snapToGrid:H,nodeDragThreshold:U,nodeLookup:Z}=t(),X=Xc(M.sourceEvent,{transform:R,snapGrid:G,snapToGrid:H,containerBounds:m});if(b=M.sourceEvent,(M.sourceEvent.type==="touchmove"&&M.sourceEvent.touches.length>1||j&&!Z.has(j))&&(y=!0),!y){if(!d&&O&&p&&(d=!0,L()),!p){const Q=di(M.sourceEvent,m),$=Q.x-f.x,B=Q.y-f.y;Math.sqrt($*$+B*B)>U&&V(M)}(o.x!==X.xSnapped||o.y!==X.ySnapped)&&u&&p&&(f=di(M.sourceEvent,m),z(X))}}).on("end",M=>{if(!(!p||y)&&(d=!1,p=!1,cancelAnimationFrame(l),u.size>0)){const{nodeLookup:O,updateNodePositions:R,onNodeDragStop:G,onSelectionDragStop:H}=t();if(_&&(R(u,!1),_=!1),s||G||!j&&H){const[U,Z]=ky({nodeId:j,dragItems:u,nodeLookup:O,dragging:!1});s?.(M.sourceEvent,u,U,Z),G?.(M.sourceEvent,U,Z),j||H?.(M.sourceEvent,Z)}}}).filter(M=>{const O=M.target;return!M.button&&(!S||!n_(O,`.${S}`,A))&&(!C||n_(O,C,A))});g.call(F)}function x(){g?.on(".drag",null)}return{update:w,destroy:x}}function tM(e,t,r){const a=[],s={x:e.x-r,y:e.y-r,width:r*2,height:r*2};for(const o of t.values())lu(s,yl(o))>0&&a.push(o);return a}const nM=250;function rM(e,t,r,a){let s=[],o=1/0;const l=tM(e,r,t+nM);for(const u of l){const d=[...u.internals.handleBounds?.source??[],...u.internals.handleBounds?.target??[]];for(const f of d){if(a.nodeId===f.nodeId&&a.type===f.type&&a.id===f.id)continue;const{x:m,y:p}=so(u,f,f.position,!0),g=Math.sqrt(Math.pow(m-e.x,2)+Math.pow(p-e.y,2));g>t||(g<o?(s=[{...f,x:m,y:p}],o=g):g===o&&s.push({...f,x:m,y:p}))}}if(!s.length)return null;if(s.length>1){const u=a.type==="source"?"target":"source";return s.find(d=>d.type===u)??s[0]}return s[0]}function EE(e,t,r,a,s,o=!1){const l=a.get(e);if(!l)return null;const u=s==="strict"?l.internals.handleBounds?.[t]:[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]],d=(r?u?.find(f=>f.id===r):u?.[0])??null;return d&&o?{...d,...so(l,d,d.position,!0)}:d}function kE(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function iM(e,t){let r=null;return t?r=!0:e&&!t&&(r=!1),r}const NE=()=>!0;function aM(e,{connectionMode:t,connectionRadius:r,handleId:a,nodeId:s,edgeUpdaterType:o,isTarget:l,domNode:u,nodeLookup:d,lib:f,autoPanOnConnect:m,flowId:p,panBy:g,cancelConnection:y,onConnectStart:_,onConnect:b,onConnectEnd:w,isValidConnection:x=NE,onReconnectEnd:S,updateConnection:C,getTransform:A,getFromHandle:E,autoPanSpeed:j,dragThreshold:T=1,handleDomNode:z}){const L=mE(e.target);let V=0,F;const{x:M,y:O}=di(e),R=kE(o,z),G=u?.getBoundingClientRect();let H=!1;if(!G||!R)return;const U=EE(s,R,a,d,t);if(!U)return;let Z=di(e,G),X=!1,Q=null,$=!1,B=null;function K(){if(!m||!G)return;const[W,ie]=uE(Z,G,j);g({x:W,y:ie}),V=requestAnimationFrame(K)}const P={...U,nodeId:s,type:R,position:U.position},q=d.get(s);let le={inProgress:!0,isValid:null,from:so(q,P,ze.Left,!0),fromHandle:P,fromPosition:P.position,fromNode:q,to:Z,toHandle:null,toPosition:qx[P.position],toNode:null,pointer:Z};function oe(){H=!0,C(le),_?.(e,{nodeId:s,handleId:a,handleType:R})}T===0&&oe();function he(W){if(!H){const{x:re,y:ne}=di(W),fe=re-M,Ce=ne-O;if(!(fe*fe+Ce*Ce>T*T))return;oe()}if(!E()||!P){ve(W);return}const ie=A();Z=di(W,G),F=rM(Du(Z,ie,!1,[1,1]),r,d,P),X||(K(),X=!0);const ae=AE(W,{handle:F,connectionMode:t,fromNodeId:s,fromHandleId:a,fromType:l?"target":"source",isValidConnection:x,doc:L,lib:f,flowId:p,nodeLookup:d});B=ae.handleDomNode,Q=ae.connection,$=iM(!!F,ae.isValid);const I=d.get(s),ue=I?so(I,P,ze.Left,!0):le.from,ce={...le,from:ue,isValid:$,to:ae.toHandle&&$?Yh({x:ae.toHandle.x,y:ae.toHandle.y},ie):Z,toHandle:ae.toHandle,toPosition:$&&ae.toHandle?ae.toHandle.position:qx[P.position],toNode:ae.toHandle?d.get(ae.toHandle.nodeId):null,pointer:Z};C(ce),le=ce}function ve(W){if(!("touches"in W&&W.touches.length>0)){if(H){(F||B)&&Q&&$&&b?.(Q);const{inProgress:ie,...ae}=le,I={...ae,toPosition:le.toHandle?le.toPosition:null};w?.(W,I),o&&S?.(W,I)}y(),cancelAnimationFrame(V),X=!1,$=!1,Q=null,B=null,L.removeEventListener("mousemove",he),L.removeEventListener("mouseup",ve),L.removeEventListener("touchmove",he),L.removeEventListener("touchend",ve)}}L.addEventListener("mousemove",he),L.addEventListener("mouseup",ve),L.addEventListener("touchmove",he),L.addEventListener("touchend",ve)}function AE(e,{handle:t,connectionMode:r,fromNodeId:a,fromHandleId:s,fromType:o,doc:l,lib:u,flowId:d,isValidConnection:f=NE,nodeLookup:m}){const p=o==="target",g=t?l.querySelector(`.${u}-flow__handle[data-id="${d}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:y,y:_}=di(e),b=l.elementFromPoint(y,_),w=b?.classList.contains(`${u}-flow__handle`)?b:g,x={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const S=kE(void 0,w),C=w.getAttribute("data-nodeid"),A=w.getAttribute("data-handleid"),E=w.classList.contains("connectable"),j=w.classList.contains("connectableend");if(!C||!S)return x;const T={source:p?C:a,sourceHandle:p?A:s,target:p?a:C,targetHandle:p?s:A};x.connection=T;const L=E&&j&&(r===ml.Strict?p&&S==="source"||!p&&S==="target":C!==a||A!==s);x.isValid=L&&f(T),x.toHandle=EE(C,S,A,m,r,!0)}return x}const D0={onPointerDown:aM,isValid:AE};function sM({domNode:e,panZoom:t,getTransform:r,getViewScale:a}){const s=Rr(e);function o({translateExtent:u,width:d,height:f,zoomStep:m=1,pannable:p=!0,zoomable:g=!0,inversePan:y=!1}){const _=C=>{if(C.sourceEvent.type!=="wheel"||!t)return;const A=r(),E=C.sourceEvent.ctrlKey&&cu()?10:1,j=-C.sourceEvent.deltaY*(C.sourceEvent.deltaMode===1?.05:C.sourceEvent.deltaMode?1:.002)*m,T=A[2]*Math.pow(2,j*E);t.scaleTo(T)};let b=[0,0];const w=C=>{(C.sourceEvent.type==="mousedown"||C.sourceEvent.type==="touchstart")&&(b=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY])},x=C=>{const A=r();if(C.sourceEvent.type!=="mousemove"&&C.sourceEvent.type!=="touchmove"||!t)return;const E=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY],j=[E[0]-b[0],E[1]-b[1]];b=E;const T=a()*Math.max(A[2],Math.log(A[2]))*(y?-1:1),z={x:A[0]-j[0]*T,y:A[1]-j[1]*T},L=[[0,0],[d,f]];t.setViewportConstrained({x:z.x,y:z.y,zoom:A[2]},L,u)},S=nE().on("start",w).on("zoom",p?x:null).on("zoom.wheel",g?_:null);s.call(S,{})}function l(){s.on("zoom",null)}return{update:o,destroy:l,pointer:si}}const Dm=e=>({x:e.x,y:e.y,zoom:e.k}),Ny=({x:e,y:t,zoom:r})=>Am.translate(e,t).scale(r),rl=(e,t)=>e.target.closest(`.${t}`),jE=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),oM=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Ay=(e,t=0,r=oM,a=()=>{})=>{const s=typeof t=="number"&&t>0;return s||a(),s?e.transition().duration(t).ease(r).on("end",a):e},TE=e=>{const t=e.ctrlKey&&cu()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function lM({zoomPanValues:e,noWheelClassName:t,d3Selection:r,d3Zoom:a,panOnScrollMode:s,panOnScrollSpeed:o,zoomOnPinch:l,onPanZoomStart:u,onPanZoom:d,onPanZoomEnd:f}){return m=>{if(rl(m,t))return m.ctrlKey&&m.preventDefault(),!1;m.preventDefault(),m.stopImmediatePropagation();const p=r.property("__zoom").k||1;if(m.ctrlKey&&l){const w=si(m),x=TE(m),S=p*Math.pow(2,x);a.scaleTo(r,S,w,m);return}const g=m.deltaMode===1?20:1;let y=s===Ws.Vertical?0:m.deltaX*g,_=s===Ws.Horizontal?0:m.deltaY*g;!cu()&&m.shiftKey&&s!==Ws.Vertical&&(y=m.deltaY*g,_=0),a.translateBy(r,-(y/p)*o,-(_/p)*o,{internal:!0});const b=Dm(r.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(d?.(m,b),e.panScrollTimeout=setTimeout(()=>{f?.(m,b),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,u?.(m,b))}}function cM({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:r}){return function(a,s){const o=a.type==="wheel",l=!t&&o&&!a.ctrlKey,u=rl(a,e);if(a.ctrlKey&&o&&u&&a.preventDefault(),l||u)return null;a.preventDefault(),r.call(this,a,s)}}function uM({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:r}){return a=>{if(a.sourceEvent?.internal)return;const s=Dm(a.transform);e.mouseButton=a.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=s,a.sourceEvent?.type==="mousedown"&&t(!0),r&&r?.(a.sourceEvent,s)}}function dM({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:r,onTransformChange:a,onPanZoom:s}){return o=>{e.usedRightMouseButton=!!(r&&jE(t,e.mouseButton??0)),o.sourceEvent?.sync||a([o.transform.x,o.transform.y,o.transform.k]),s&&!o.sourceEvent?.internal&&s?.(o.sourceEvent,Dm(o.transform))}}function fM({zoomPanValues:e,panOnDrag:t,panOnScroll:r,onDraggingChange:a,onPanZoomEnd:s,onPaneContextMenu:o}){return l=>{if(!l.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,o&&jE(t,e.mouseButton??0)&&!e.usedRightMouseButton&&l.sourceEvent&&o(l.sourceEvent),e.usedRightMouseButton=!1,a(!1),s)){const u=Dm(l.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{s?.(l.sourceEvent,u)},r?150:0)}}}function hM({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:r,panOnDrag:a,panOnScroll:s,zoomOnDoubleClick:o,userSelectionActive:l,noWheelClassName:u,noPanClassName:d,lib:f,connectionInProgress:m}){return p=>{const g=e||t,y=r&&p.ctrlKey,_=p.type==="wheel";if(p.button===1&&p.type==="mousedown"&&(rl(p,`${f}-flow__node`)||rl(p,`${f}-flow__edge`)))return!0;if(!a&&!g&&!s&&!o&&!r||l||m&&!_||rl(p,u)&&_||rl(p,d)&&(!_||s&&_&&!e)||!r&&p.ctrlKey&&_)return!1;if(!r&&p.type==="touchstart"&&p.touches?.length>1)return p.preventDefault(),!1;if(!g&&!s&&!y&&_||!a&&(p.type==="mousedown"||p.type==="touchstart")||Array.isArray(a)&&!a.includes(p.button)&&p.type==="mousedown")return!1;const b=Array.isArray(a)&&a.includes(p.button)||!p.button||p.button<=1;return(!p.ctrlKey||_)&&b}}function mM({domNode:e,minZoom:t,maxZoom:r,translateExtent:a,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:d}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=e.getBoundingClientRect(),p=nE().scaleExtent([t,r]).translateExtent(a),g=Rr(e).call(p);S({x:s.x,y:s.y,zoom:gl(s.zoom,t,r)},[[0,0],[m.width,m.height]],a);const y=g.on("wheel.zoom"),_=g.on("dblclick.zoom");p.wheelDelta(TE);function b(F,M){return g?new Promise(O=>{p?.interpolate(M?.interpolate==="linear"?Kc:wh).transform(Ay(g,M?.duration,M?.ease,()=>O(!0)),F)}):Promise.resolve(!1)}function w({noWheelClassName:F,noPanClassName:M,onPaneContextMenu:O,userSelectionActive:R,panOnScroll:G,panOnDrag:H,panOnScrollMode:U,panOnScrollSpeed:Z,preventScrolling:X,zoomOnPinch:Q,zoomOnScroll:$,zoomOnDoubleClick:B,zoomActivationKeyPressed:K,lib:P,onTransformChange:q,connectionInProgress:J,paneClickDistance:le,selectionOnDrag:oe}){R&&!f.isZoomingOrPanning&&x();const he=G&&!K&&!R;p.clickDistance(oe?1/0:!ui(le)||le<0?0:le);const ve=he?lM({zoomPanValues:f,noWheelClassName:F,d3Selection:g,d3Zoom:p,panOnScrollMode:U,panOnScrollSpeed:Z,zoomOnPinch:Q,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):cM({noWheelClassName:F,preventScrolling:X,d3ZoomHandler:y});if(g.on("wheel.zoom",ve,{passive:!1}),!R){const ie=uM({zoomPanValues:f,onDraggingChange:d,onPanZoomStart:l});p.on("start",ie);const ae=dM({zoomPanValues:f,panOnDrag:H,onPaneContextMenu:!!O,onPanZoom:o,onTransformChange:q});p.on("zoom",ae);const I=fM({zoomPanValues:f,panOnDrag:H,panOnScroll:G,onPaneContextMenu:O,onPanZoomEnd:u,onDraggingChange:d});p.on("end",I)}const W=hM({zoomActivationKeyPressed:K,panOnDrag:H,zoomOnScroll:$,panOnScroll:G,zoomOnDoubleClick:B,zoomOnPinch:Q,userSelectionActive:R,noPanClassName:M,noWheelClassName:F,lib:P,connectionInProgress:J});p.filter(W),B?g.on("dblclick.zoom",_):g.on("dblclick.zoom",null)}function x(){p.on("zoom",null)}async function S(F,M,O){const R=Ny(F),G=p?.constrain()(R,M,O);return G&&await b(G),new Promise(H=>H(G))}async function C(F,M){const O=Ny(F);return await b(O,M),new Promise(R=>R(O))}function A(F){if(g){const M=Ny(F),O=g.property("__zoom");(O.k!==F.zoom||O.x!==F.x||O.y!==F.y)&&p?.transform(g,M,null,{sync:!0})}}function E(){const F=g?tE(g.node()):{x:0,y:0,k:1};return{x:F.x,y:F.y,zoom:F.k}}function j(F,M){return g?new Promise(O=>{p?.interpolate(M?.interpolate==="linear"?Kc:wh).scaleTo(Ay(g,M?.duration,M?.ease,()=>O(!0)),F)}):Promise.resolve(!1)}function T(F,M){return g?new Promise(O=>{p?.interpolate(M?.interpolate==="linear"?Kc:wh).scaleBy(Ay(g,M?.duration,M?.ease,()=>O(!0)),F)}):Promise.resolve(!1)}function z(F){p?.scaleExtent(F)}function L(F){p?.translateExtent(F)}function V(F){const M=!ui(F)||F<0?0:F;p?.clickDistance(M)}return{update:w,destroy:x,setViewport:C,setViewportConstrained:S,getViewport:E,scaleTo:j,scaleBy:T,setScaleExtent:z,setTranslateExtent:L,syncViewport:A,setClickDistance:V}}var oo;(function(e){e.Line="line",e.Handle="handle"})(oo||(oo={}));const pM=["top-left","top-right","bottom-left","bottom-right"],gM=["top","right","bottom","left"];function yM({width:e,prevWidth:t,height:r,prevHeight:a,affectsX:s,affectsY:o}){const l=e-t,u=r-a,d=[l>0?1:l<0?-1:0,u>0?1:u<0?-1:0];return l&&s&&(d[0]=d[0]*-1),u&&o&&(d[1]=d[1]*-1),d}function r_(e){const t=e.includes("right")||e.includes("left"),r=e.includes("bottom")||e.includes("top"),a=e.includes("left"),s=e.includes("top");return{isHorizontal:t,isVertical:r,affectsX:a,affectsY:s}}function Wa(e,t){return Math.max(0,t-e)}function Qa(e,t){return Math.max(0,e-t)}function vf(e,t,r){return Math.max(0,t-e,e-r)}function i_(e,t){return e?!t:t}function vM(e,t,r,a,s,o,l,u){let{affectsX:d,affectsY:f}=t;const{isHorizontal:m,isVertical:p}=t,g=m&&p,{xSnapped:y,ySnapped:_}=r,{minWidth:b,maxWidth:w,minHeight:x,maxHeight:S}=a,{x:C,y:A,width:E,height:j,aspectRatio:T}=e;let z=Math.floor(m?y-e.pointerX:0),L=Math.floor(p?_-e.pointerY:0);const V=E+(d?-z:z),F=j+(f?-L:L),M=-o[0]*E,O=-o[1]*j;let R=vf(V,b,w),G=vf(F,x,S);if(l){let Z=0,X=0;d&&z<0?Z=Wa(C+z+M,l[0][0]):!d&&z>0&&(Z=Qa(C+V+M,l[1][0])),f&&L<0?X=Wa(A+L+O,l[0][1]):!f&&L>0&&(X=Qa(A+F+O,l[1][1])),R=Math.max(R,Z),G=Math.max(G,X)}if(u){let Z=0,X=0;d&&z>0?Z=Qa(C+z,u[0][0]):!d&&z<0&&(Z=Wa(C+V,u[1][0])),f&&L>0?X=Qa(A+L,u[0][1]):!f&&L<0&&(X=Wa(A+F,u[1][1])),R=Math.max(R,Z),G=Math.max(G,X)}if(s){if(m){const Z=vf(V/T,x,S)*T;if(R=Math.max(R,Z),l){let X=0;!d&&!f||d&&!f&&g?X=Qa(A+O+V/T,l[1][1])*T:X=Wa(A+O+(d?z:-z)/T,l[0][1])*T,R=Math.max(R,X)}if(u){let X=0;!d&&!f||d&&!f&&g?X=Wa(A+V/T,u[1][1])*T:X=Qa(A+(d?z:-z)/T,u[0][1])*T,R=Math.max(R,X)}}if(p){const Z=vf(F*T,b,w)/T;if(G=Math.max(G,Z),l){let X=0;!d&&!f||f&&!d&&g?X=Qa(C+F*T+M,l[1][0])/T:X=Wa(C+(f?L:-L)*T+M,l[0][0])/T,G=Math.max(G,X)}if(u){let X=0;!d&&!f||f&&!d&&g?X=Wa(C+F*T,u[1][0])/T:X=Qa(C+(f?L:-L)*T,u[0][0])/T,G=Math.max(G,X)}}}L=L+(L<0?G:-G),z=z+(z<0?R:-R),s&&(g?V>F*T?L=(i_(d,f)?-z:z)/T:z=(i_(d,f)?-L:L)*T:m?(L=z/T,f=d):(z=L*T,d=f));const H=d?C+z:C,U=f?A+L:A;return{width:E+(d?-z:z),height:j+(f?-L:L),x:o[0]*z*(d?-1:1)+H,y:o[1]*L*(f?-1:1)+U}}const DE={width:0,height:0,x:0,y:0},bM={...DE,pointerX:0,pointerY:0,aspectRatio:1};function wM(e){return[[0,0],[e.measured.width,e.measured.height]]}function xM(e,t,r){const a=t.position.x+e.position.x,s=t.position.y+e.position.y,o=e.measured.width??0,l=e.measured.height??0,u=r[0]*o,d=r[1]*l;return[[a-u,s-d],[a+o-u,s+l-d]]}function _M({domNode:e,nodeId:t,getStoreItems:r,onChange:a,onEnd:s}){const o=Rr(e);let l={controlDirection:r_("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function u({controlPosition:f,boundaries:m,keepAspectRatio:p,resizeDirection:g,onResizeStart:y,onResize:_,onResizeEnd:b,shouldResize:w}){let x={...DE},S={...bM};l={boundaries:m,resizeDirection:g,keepAspectRatio:p,controlDirection:r_(f)};let C,A=null,E=[],j,T,z,L=!1;const V=HC().on("start",F=>{const{nodeLookup:M,transform:O,snapGrid:R,snapToGrid:G,nodeOrigin:H,paneDomNode:U}=r();if(C=M.get(t),!C)return;A=U?.getBoundingClientRect()??null;const{xSnapped:Z,ySnapped:X}=Xc(F.sourceEvent,{transform:O,snapGrid:R,snapToGrid:G,containerBounds:A});x={width:C.measured.width??0,height:C.measured.height??0,x:C.position.x??0,y:C.position.y??0},S={...x,pointerX:Z,pointerY:X,aspectRatio:x.width/x.height},j=void 0,C.parentId&&(C.extent==="parent"||C.expandParent)&&(j=M.get(C.parentId),T=j&&C.extent==="parent"?wM(j):void 0),E=[],z=void 0;for(const[Q,$]of M)if($.parentId===t&&(E.push({id:Q,position:{...$.position},extent:$.extent}),$.extent==="parent"||$.expandParent)){const B=xM($,C,$.origin??H);z?z=[[Math.min(B[0][0],z[0][0]),Math.min(B[0][1],z[0][1])],[Math.max(B[1][0],z[1][0]),Math.max(B[1][1],z[1][1])]]:z=B}y?.(F,{...x})}).on("drag",F=>{const{transform:M,snapGrid:O,snapToGrid:R,nodeOrigin:G}=r(),H=Xc(F.sourceEvent,{transform:M,snapGrid:O,snapToGrid:R,containerBounds:A}),U=[];if(!C)return;const{x:Z,y:X,width:Q,height:$}=x,B={},K=C.origin??G,{width:P,height:q,x:J,y:le}=vM(S,l.controlDirection,H,l.boundaries,l.keepAspectRatio,K,T,z),oe=P!==Q,he=q!==$,ve=J!==Z&&oe,W=le!==X&&he;if(!ve&&!W&&!oe&&!he)return;if((ve||W||K[0]===1||K[1]===1)&&(B.x=ve?J:x.x,B.y=W?le:x.y,x.x=B.x,x.y=B.y,E.length>0)){const ue=J-Z,ce=le-X;for(const re of E)re.position={x:re.position.x-ue+K[0]*(P-Q),y:re.position.y-ce+K[1]*(q-$)},U.push(re)}if((oe||he)&&(B.width=oe&&(!l.resizeDirection||l.resizeDirection==="horizontal")?P:x.width,B.height=he&&(!l.resizeDirection||l.resizeDirection==="vertical")?q:x.height,x.width=B.width,x.height=B.height),j&&C.expandParent){const ue=K[0]*(B.width??0);B.x&&B.x<ue&&(x.x=ue,S.x=S.x-(B.x-ue));const ce=K[1]*(B.height??0);B.y&&B.y<ce&&(x.y=ce,S.y=S.y-(B.y-ce))}const ie=yM({width:x.width,prevWidth:Q,height:x.height,prevHeight:$,affectsX:l.controlDirection.affectsX,affectsY:l.controlDirection.affectsY}),ae={...x,direction:ie};w?.(F,ae)!==!1&&(L=!0,_?.(F,ae),a(B,U))}).on("end",F=>{L&&(b?.(F,{...x}),s?.({...x}),L=!1)});o.call(V)}function d(){o.on(".drag",null)}return{update:u,destroy:d}}var jy={exports:{}},Ty={},Dy={exports:{}},Ry={};var a_;function SM(){if(a_)return Ry;a_=1;var e=_u();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var r=typeof Object.is=="function"?Object.is:t,a=e.useState,s=e.useEffect,o=e.useLayoutEffect,l=e.useDebugValue;function u(p,g){var y=g(),_=a({inst:{value:y,getSnapshot:g}}),b=_[0].inst,w=_[1];return o(function(){b.value=y,b.getSnapshot=g,d(b)&&w({inst:b})},[p,y,g]),s(function(){return d(b)&&w({inst:b}),p(function(){d(b)&&w({inst:b})})},[p]),l(y),y}function d(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!r(p,y)}catch{return!0}}function f(p,g){return g()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Ry.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,Ry}var s_;function CM(){return s_||(s_=1,Dy.exports=SM()),Dy.exports}var o_;function EM(){if(o_)return Ty;o_=1;var e=_u(),t=CM();function r(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var a=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,o=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return Ty.useSyncExternalStoreWithSelector=function(f,m,p,g,y){var _=o(null);if(_.current===null){var b={hasValue:!1,value:null};_.current=b}else b=_.current;_=u(function(){function x(j){if(!S){if(S=!0,C=j,j=g(j),y!==void 0&&b.hasValue){var T=b.value;if(y(T,j))return A=T}return A=j}if(T=A,a(C,j))return T;var z=g(j);return y!==void 0&&y(T,z)?(C=j,T):(C=j,A=z)}var S=!1,C,A,E=p===void 0?null:p;return[function(){return x(m())},E===null?void 0:function(){return x(E())}]},[m,p,g,y]);var w=s(f,_[0],_[1]);return l(function(){b.hasValue=!0,b.value=w},[w]),d(w),w},Ty}var l_;function kM(){return l_||(l_=1,jy.exports=EM()),jy.exports}var NM=kM();const AM=xu(NM),jM={},c_=e=>{let t;const r=new Set,a=(m,p)=>{const g=typeof m=="function"?m(t):m;if(!Object.is(g,t)){const y=t;t=p??(typeof g!="object"||g===null)?g:Object.assign({},t,g),r.forEach(_=>_(t,y))}},s=()=>t,d={setState:a,getState:s,getInitialState:()=>f,subscribe:m=>(r.add(m),()=>r.delete(m)),destroy:()=>{(jM?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},f=t=e(a,s,d);return d},TM=e=>e?c_(e):c_,{useDebugValue:DM}=ht,{useSyncExternalStoreWithSelector:RM}=AM,$M=e=>e;function RE(e,t=$M,r){const a=RM(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return DM(a),a}const u_=(e,t)=>{const r=TM(e),a=(s,o=t)=>RE(r,s,o);return Object.assign(a,r),a},MM=(e,t)=>e?u_(e,t):u_;function Gt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[a,s]of e)if(!Object.is(s,t.get(a)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const a of r)if(!Object.prototype.hasOwnProperty.call(t,a)||!Object.is(e[a],t[a]))return!1;return!0}const Rm=N.createContext(null),OM=Rm.Provider,$E=Mi.error001();function gt(e,t){const r=N.useContext(Rm);if(r===null)throw new Error($E);return RE(r,e,t)}function Qt(){const e=N.useContext(Rm);if(e===null)throw new Error($E);return N.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const d_={display:"none"},zM={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ME="react-flow__node-desc",OE="react-flow__edge-desc",LM="react-flow__aria-live",IM=e=>e.ariaLiveMessage,PM=e=>e.ariaLabelConfig;function BM({rfId:e}){const t=gt(IM);return v.jsx("div",{id:`${LM}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:zM,children:t})}function HM({rfId:e,disableKeyboardA11y:t}){const r=gt(PM);return v.jsxs(v.Fragment,{children:[v.jsx("div",{id:`${ME}-${e}`,style:d_,children:t?r["node.a11yDescription.default"]:r["node.a11yDescription.keyboardDisabled"]}),v.jsx("div",{id:`${OE}-${e}`,style:d_,children:r["edge.a11yDescription.default"]}),!t&&v.jsx(BM,{rfId:e})]})}const $m=N.forwardRef(({position:e="top-left",children:t,className:r,style:a,...s},o)=>{const l=`${e}`.split("-");return v.jsx("div",{className:dn(["react-flow__panel",r,...l]),style:a,ref:o,...s,children:t})});$m.displayName="Panel";function UM({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:v.jsx($m,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:v.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const FM=e=>{const t=[],r=[];for(const[,a]of e.nodeLookup)a.selected&&t.push(a.internals.userNode);for(const[,a]of e.edgeLookup)a.selected&&r.push(a);return{selectedNodes:t,selectedEdges:r}},bf=e=>e.id;function qM(e,t){return Gt(e.selectedNodes.map(bf),t.selectedNodes.map(bf))&&Gt(e.selectedEdges.map(bf),t.selectedEdges.map(bf))}function VM({onSelectionChange:e}){const t=Qt(),{selectedNodes:r,selectedEdges:a}=gt(FM,qM);return N.useEffect(()=>{const s={nodes:r,edges:a};e?.(s),t.getState().onSelectionChangeHandlers.forEach(o=>o(s))},[r,a,e]),null}const YM=e=>!!e.onSelectionChangeHandlers;function GM({onSelectionChange:e}){const t=gt(YM);return e||t?v.jsx(VM,{onSelectionChange:e}):null}const zE=[0,0],KM={x:0,y:0,zoom:1},XM=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],f_=[...XM,"rfId"],ZM=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),h_={translateExtent:ou,nodeOrigin:zE,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function WM(e){const{setNodes:t,setEdges:r,setMinZoom:a,setMaxZoom:s,setTranslateExtent:o,setNodeExtent:l,reset:u,setDefaultNodesAndEdges:d}=gt(ZM,Gt),f=Qt();N.useEffect(()=>(d(e.defaultNodes,e.defaultEdges),()=>{m.current=h_,u()}),[]);const m=N.useRef(h_);return N.useEffect(()=>{for(const p of f_){const g=e[p],y=m.current[p];g!==y&&(typeof e[p]>"u"||(p==="nodes"?t(g):p==="edges"?r(g):p==="minZoom"?a(g):p==="maxZoom"?s(g):p==="translateExtent"?o(g):p==="nodeExtent"?l(g):p==="ariaLabelConfig"?f.setState({ariaLabelConfig:D5(g)}):p==="fitView"?f.setState({fitViewQueued:g}):p==="fitViewOptions"?f.setState({fitViewOptions:g}):f.setState({[p]:g})))}m.current=e},f_.map(p=>e[p])),null}function m_(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function QM(e){const[t,r]=N.useState(e==="system"?null:e);return N.useEffect(()=>{if(e!=="system"){r(e);return}const a=m_(),s=()=>r(a?.matches?"dark":"light");return s(),a?.addEventListener("change",s),()=>{a?.removeEventListener("change",s)}},[e]),t!==null?t:m_()?.matches?"dark":"light"}const p_=typeof document<"u"?document:null;function uu(e=null,t={target:p_,actInsideInputWithModifier:!0}){const[r,a]=N.useState(!1),s=N.useRef(!1),o=N.useRef(new Set([])),[l,u]=N.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.replace("+",`
`).replace(`

`,`
+`).split(`
`)),m=f.reduce((p,g)=>p.concat(...g),[]);return[f,m]}return[[],[]]},[e]);return N.useEffect(()=>{const d=t?.target??p_,f=t?.actInsideInputWithModifier??!0;if(e!==null){const m=y=>{if(s.current=y.ctrlKey||y.metaKey||y.shiftKey||y.altKey,(!s.current||s.current&&!f)&&pE(y))return!1;const b=y_(y.code,u);if(o.current.add(y[b]),g_(l,o.current,!1)){const w=y.composedPath?.()?.[0]||y.target,x=w?.nodeName==="BUTTON"||w?.nodeName==="A";t.preventDefault!==!1&&(s.current||!x)&&y.preventDefault(),a(!0)}},p=y=>{const _=y_(y.code,u);g_(l,o.current,!0)?(a(!1),o.current.clear()):o.current.delete(y[_]),y.key==="Meta"&&o.current.clear(),s.current=!1},g=()=>{o.current.clear(),a(!1)};return d?.addEventListener("keydown",m),d?.addEventListener("keyup",p),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{d?.removeEventListener("keydown",m),d?.removeEventListener("keyup",p),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[e,a]),r}function g_(e,t,r){return e.filter(a=>r||a.length===t.size).some(a=>a.every(s=>t.has(s)))}function y_(e,t){return t.includes(e)?"code":"key"}const JM=()=>{const e=Qt();return N.useMemo(()=>({zoomIn:t=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,r)=>{const{panZoom:a}=e.getState();return a?a.scaleTo(t,{duration:r?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,r)=>{const{transform:[a,s,o],panZoom:l}=e.getState();return l?(await l.setViewport({x:t.x??a,y:t.y??s,zoom:t.zoom??o},r),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,r,a]=e.getState().transform;return{x:t,y:r,zoom:a}},setCenter:async(t,r,a)=>e.getState().setCenter(t,r,a),fitBounds:async(t,r)=>{const{width:a,height:s,minZoom:o,maxZoom:l,panZoom:u}=e.getState(),d=vv(t,a,s,o,l,r?.padding??.1);return u?(await u.setViewport(d,{duration:r?.duration,ease:r?.ease,interpolate:r?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,r={})=>{const{transform:a,snapGrid:s,snapToGrid:o,domNode:l}=e.getState();if(!l)return t;const{x:u,y:d}=l.getBoundingClientRect(),f={x:t.x-u,y:t.y-d},m=r.snapGrid??s,p=r.snapToGrid??o;return Du(f,a,p,m)},flowToScreenPosition:t=>{const{transform:r,domNode:a}=e.getState();if(!a)return t;const{x:s,y:o}=a.getBoundingClientRect(),l=Yh(t,r);return{x:l.x+s,y:l.y+o}}}),[])};function LE(e,t){const r=[],a=new Map,s=[];for(const o of e)if(o.type==="add"){s.push(o);continue}else if(o.type==="remove"||o.type==="replace")a.set(o.id,[o]);else{const l=a.get(o.id);l?l.push(o):a.set(o.id,[o])}for(const o of t){const l=a.get(o.id);if(!l){r.push(o);continue}if(l[0].type==="remove")continue;if(l[0].type==="replace"){r.push({...l[0].item});continue}const u={...o};for(const d of l)eO(d,u);r.push(u)}return s.length&&s.forEach(o=>{o.index!==void 0?r.splice(o.index,0,{...o.item}):r.push({...o.item})}),r}function eO(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function IE(e,t){return LE(e,t)}function PE(e,t){return LE(e,t)}function Vs(e,t){return{id:e,type:"select",selected:t}}function il(e,t=new Set,r=!1){const a=[];for(const[s,o]of e){const l=t.has(s);!(o.selected===void 0&&!l)&&o.selected!==l&&(r&&(o.selected=l),a.push(Vs(o.id,l)))}return a}function v_({items:e=[],lookup:t}){const r=[],a=new Map(e.map(s=>[s.id,s]));for(const[s,o]of e.entries()){const l=t.get(o.id),u=l?.internals?.userNode??l;u!==void 0&&u!==o&&r.push({id:o.id,item:o,type:"replace"}),u===void 0&&r.push({item:o,type:"add",index:s})}for(const[s]of t)a.get(s)===void 0&&r.push({id:s,type:"remove"});return r}function b_(e){return{id:e.id,type:"remove"}}const w_=e=>x5(e),tO=e=>oE(e);function BE(e){return N.forwardRef(e)}const nO=typeof window<"u"?N.useLayoutEffect:N.useEffect;function x_(e){const[t,r]=N.useState(BigInt(0)),[a]=N.useState(()=>rO(()=>r(s=>s+BigInt(1))));return nO(()=>{const s=a.get();s.length&&(e(s),a.reset())},[t]),a}function rO(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:r=>{t.push(r),e()}}}const HE=N.createContext(null);function iO({children:e}){const t=Qt(),r=N.useCallback(u=>{const{nodes:d=[],setNodes:f,hasDefaultNodes:m,onNodesChange:p,nodeLookup:g,fitViewQueued:y,onNodesChangeMiddlewareMap:_}=t.getState();let b=d;for(const x of u)b=typeof x=="function"?x(b):x;let w=v_({items:b,lookup:g});for(const x of _.values())w=x(w);m&&f(b),w.length>0?p?.(w):y&&window.requestAnimationFrame(()=>{const{fitViewQueued:x,nodes:S,setNodes:C}=t.getState();x&&C(S)})},[]),a=x_(r),s=N.useCallback(u=>{const{edges:d=[],setEdges:f,hasDefaultEdges:m,onEdgesChange:p,edgeLookup:g}=t.getState();let y=d;for(const _ of u)y=typeof _=="function"?_(y):_;m?f(y):p&&p(v_({items:y,lookup:g}))},[]),o=x_(s),l=N.useMemo(()=>({nodeQueue:a,edgeQueue:o}),[]);return v.jsx(HE.Provider,{value:l,children:e})}function aO(){const e=N.useContext(HE);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const sO=e=>!!e.panZoom;function Ev(){const e=JM(),t=Qt(),r=aO(),a=gt(sO),s=N.useMemo(()=>{const o=p=>t.getState().nodeLookup.get(p),l=p=>{r.nodeQueue.push(p)},u=p=>{r.edgeQueue.push(p)},d=p=>{const{nodeLookup:g,nodeOrigin:y}=t.getState(),_=w_(p)?p:g.get(p.id),b=_.parentId?hE(_.position,_.measured,_.parentId,g,y):_.position,w={..._,position:b,width:_.measured?.width??_.width,height:_.measured?.height??_.height};return yl(w)},f=(p,g,y={replace:!1})=>{l(_=>_.map(b=>{if(b.id===p){const w=typeof g=="function"?g(b):g;return y.replace&&w_(w)?w:{...b,...w}}return b}))},m=(p,g,y={replace:!1})=>{u(_=>_.map(b=>{if(b.id===p){const w=typeof g=="function"?g(b):g;return y.replace&&tO(w)?w:{...b,...w}}return b}))};return{getNodes:()=>t.getState().nodes.map(p=>({...p})),getNode:p=>o(p)?.internals.userNode,getInternalNode:o,getEdges:()=>{const{edges:p=[]}=t.getState();return p.map(g=>({...g}))},getEdge:p=>t.getState().edgeLookup.get(p),setNodes:l,setEdges:u,addNodes:p=>{const g=Array.isArray(p)?p:[p];r.nodeQueue.push(y=>[...y,...g])},addEdges:p=>{const g=Array.isArray(p)?p:[p];r.edgeQueue.push(y=>[...y,...g])},toObject:()=>{const{nodes:p=[],edges:g=[],transform:y}=t.getState(),[_,b,w]=y;return{nodes:p.map(x=>({...x})),edges:g.map(x=>({...x})),viewport:{x:_,y:b,zoom:w}}},deleteElements:async({nodes:p=[],edges:g=[]})=>{const{nodes:y,edges:_,onNodesDelete:b,onEdgesDelete:w,triggerNodeChanges:x,triggerEdgeChanges:S,onDelete:C,onBeforeDelete:A}=t.getState(),{nodes:E,edges:j}=await k5({nodesToRemove:p,edgesToRemove:g,nodes:y,edges:_,onBeforeDelete:A}),T=j.length>0,z=E.length>0;if(T){const L=j.map(b_);w?.(j),S(L)}if(z){const L=E.map(b_);b?.(E),x(L)}return(z||T)&&C?.({nodes:E,edges:j}),{deletedNodes:E,deletedEdges:j}},getIntersectingNodes:(p,g=!0,y)=>{const _=Yx(p),b=_?p:d(p),w=y!==void 0;return b?(y||t.getState().nodes).filter(x=>{const S=t.getState().nodeLookup.get(x.id);if(S&&!_&&(x.id===p.id||!S.internals.positionAbsolute))return!1;const C=yl(w?x:S),A=lu(C,b);return g&&A>0||A>=C.width*C.height||A>=b.width*b.height}):[]},isNodeIntersecting:(p,g,y=!0)=>{const b=Yx(p)?p:d(p);if(!b)return!1;const w=lu(b,g);return y&&w>0||w>=g.width*g.height||w>=b.width*b.height},updateNode:f,updateNodeData:(p,g,y={replace:!1})=>{f(p,_=>{const b=typeof g=="function"?g(_):g;return y.replace?{..._,data:b}:{..._,data:{..._.data,...b}}},y)},updateEdge:m,updateEdgeData:(p,g,y={replace:!1})=>{m(p,_=>{const b=typeof g=="function"?g(_):g;return y.replace?{..._,data:b}:{..._,data:{..._.data,...b}}},y)},getNodesBounds:p=>{const{nodeLookup:g,nodeOrigin:y}=t.getState();return _5(p,{nodeLookup:g,nodeOrigin:y})},getHandleConnections:({type:p,id:g,nodeId:y})=>Array.from(t.getState().connectionLookup.get(`${y}-${p}${g?`-${g}`:""}`)?.values()??[]),getNodeConnections:({type:p,handleId:g,nodeId:y})=>Array.from(t.getState().connectionLookup.get(`${y}${p?g?`-${p}-${g}`:`-${p}`:""}`)?.values()??[]),fitView:async p=>{const g=t.getState().fitViewResolver??T5();return t.setState({fitViewQueued:!0,fitViewOptions:p,fitViewResolver:g}),r.nodeQueue.push(y=>[...y]),g.promise}}},[]);return N.useMemo(()=>({...s,...e,viewportInitialized:a}),[a])}const __=e=>e.selected,oO=typeof window<"u"?window:void 0;function lO({deleteKeyCode:e,multiSelectionKeyCode:t}){const r=Qt(),{deleteElements:a}=Ev(),s=uu(e,{actInsideInputWithModifier:!1}),o=uu(t,{target:oO});N.useEffect(()=>{if(s){const{edges:l,nodes:u}=r.getState();a({nodes:u.filter(__),edges:l.filter(__)}),r.setState({nodesSelectionActive:!1})}},[s]),N.useEffect(()=>{r.setState({multiSelectionActive:o})},[o])}function cO(e){const t=Qt();N.useEffect(()=>{const r=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const a=bv(e.current);(a.height===0||a.width===0)&&t.getState().onError?.("004",Mi.error004()),t.setState({width:a.width||500,height:a.height||500})};if(e.current){r(),window.addEventListener("resize",r);const a=new ResizeObserver(()=>r());return a.observe(e.current),()=>{window.removeEventListener("resize",r),a&&e.current&&a.unobserve(e.current)}}},[])}const Mm={position:"absolute",width:"100%",height:"100%",top:0,left:0},uO=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function dO({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:r=!0,panOnScroll:a=!1,panOnScrollSpeed:s=.5,panOnScrollMode:o=Ws.Free,zoomOnDoubleClick:l=!0,panOnDrag:u=!0,defaultViewport:d,translateExtent:f,minZoom:m,maxZoom:p,zoomActivationKeyCode:g,preventScrolling:y=!0,children:_,noWheelClassName:b,noPanClassName:w,onViewportChange:x,isControlledViewport:S,paneClickDistance:C,selectionOnDrag:A}){const E=Qt(),j=N.useRef(null),{userSelectionActive:T,lib:z,connectionInProgress:L}=gt(uO,Gt),V=uu(g),F=N.useRef();cO(j);const M=N.useCallback(O=>{x?.({x:O[0],y:O[1],zoom:O[2]}),S||E.setState({transform:O})},[x,S]);return N.useEffect(()=>{if(j.current){F.current=mM({domNode:j.current,minZoom:m,maxZoom:p,translateExtent:f,viewport:d,onDraggingChange:H=>E.setState({paneDragging:H}),onPanZoomStart:(H,U)=>{const{onViewportChangeStart:Z,onMoveStart:X}=E.getState();X?.(H,U),Z?.(U)},onPanZoom:(H,U)=>{const{onViewportChange:Z,onMove:X}=E.getState();X?.(H,U),Z?.(U)},onPanZoomEnd:(H,U)=>{const{onViewportChangeEnd:Z,onMoveEnd:X}=E.getState();X?.(H,U),Z?.(U)}});const{x:O,y:R,zoom:G}=F.current.getViewport();return E.setState({panZoom:F.current,transform:[O,R,G],domNode:j.current.closest(".react-flow")}),()=>{F.current?.destroy()}}},[]),N.useEffect(()=>{F.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:r,panOnScroll:a,panOnScrollSpeed:s,panOnScrollMode:o,zoomOnDoubleClick:l,panOnDrag:u,zoomActivationKeyPressed:V,preventScrolling:y,noPanClassName:w,userSelectionActive:T,noWheelClassName:b,lib:z,onTransformChange:M,connectionInProgress:L,selectionOnDrag:A,paneClickDistance:C})},[e,t,r,a,s,o,l,u,V,y,w,T,b,z,M,L,A,C]),v.jsx("div",{className:"react-flow__renderer",ref:j,style:Mm,children:_})}const fO=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function hO(){const{userSelectionActive:e,userSelectionRect:t}=gt(fO,Gt);return e&&t?v.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const $y=(e,t)=>r=>{r.target===t.current&&e?.(r)},mO=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function pO({isSelecting:e,selectionKeyPressed:t,selectionMode:r=pl.Full,panOnDrag:a,paneClickDistance:s,selectionOnDrag:o,onSelectionStart:l,onSelectionEnd:u,onPaneClick:d,onPaneContextMenu:f,onPaneScroll:m,onPaneMouseEnter:p,onPaneMouseMove:g,onPaneMouseLeave:y,children:_}){const b=Qt(),{userSelectionActive:w,elementsSelectable:x,dragging:S,connectionInProgress:C}=gt(mO,Gt),A=x&&(e||w),E=N.useRef(null),j=N.useRef(),T=N.useRef(new Set),z=N.useRef(new Set),L=N.useRef(!1),V=Z=>{if(L.current||C){L.current=!1;return}d?.(Z),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},F=Z=>{if(Array.isArray(a)&&a?.includes(2)){Z.preventDefault();return}f?.(Z)},M=m?Z=>m(Z):void 0,O=Z=>{L.current&&(Z.stopPropagation(),L.current=!1)},R=Z=>{const{domNode:X}=b.getState();if(j.current=X?.getBoundingClientRect(),!j.current)return;const Q=Z.target===E.current;if(!Q&&!!Z.target.closest(".nokey")||!e||!(o&&Q||t)||Z.button!==0||!Z.isPrimary)return;Z.target?.setPointerCapture?.(Z.pointerId),L.current=!1;const{x:K,y:P}=di(Z.nativeEvent,j.current);b.setState({userSelectionRect:{width:0,height:0,startX:K,startY:P,x:K,y:P}}),Q||(Z.stopPropagation(),Z.preventDefault())},G=Z=>{const{userSelectionRect:X,transform:Q,nodeLookup:$,edgeLookup:B,connectionLookup:K,triggerNodeChanges:P,triggerEdgeChanges:q,defaultEdgeOptions:J,resetSelectedElements:le}=b.getState();if(!j.current||!X)return;const{x:oe,y:he}=di(Z.nativeEvent,j.current),{startX:ve,startY:W}=X;if(!L.current){const ce=t?0:s;if(Math.hypot(oe-ve,he-W)<=ce)return;le(),l?.(Z)}L.current=!0;const ie={startX:ve,startY:W,x:oe<ve?oe:ve,y:he<W?he:W,width:Math.abs(oe-ve),height:Math.abs(he-W)},ae=T.current,I=z.current;T.current=new Set(yv($,ie,Q,r===pl.Partial,!0).map(ce=>ce.id)),z.current=new Set;const ue=J?.selectable??!0;for(const ce of T.current){const re=K.get(ce);if(re)for(const{edgeId:ne}of re.values()){const fe=B.get(ne);fe&&(fe.selectable??ue)&&z.current.add(ne)}}if(!Gx(ae,T.current)){const ce=il($,T.current,!0);P(ce)}if(!Gx(I,z.current)){const ce=il(B,z.current);q(ce)}b.setState({userSelectionRect:ie,userSelectionActive:!0,nodesSelectionActive:!1})},H=Z=>{Z.button===0&&(Z.target?.releasePointerCapture?.(Z.pointerId),!w&&Z.target===E.current&&b.getState().userSelectionRect&&V?.(Z),b.setState({userSelectionActive:!1,userSelectionRect:null}),L.current&&(u?.(Z),b.setState({nodesSelectionActive:T.current.size>0})))},U=a===!0||Array.isArray(a)&&a.includes(0);return v.jsxs("div",{className:dn(["react-flow__pane",{draggable:U,dragging:S,selection:e}]),onClick:A?void 0:$y(V,E),onContextMenu:$y(F,E),onWheel:$y(M,E),onPointerEnter:A?void 0:p,onPointerMove:A?G:g,onPointerUp:A?H:void 0,onPointerDownCapture:A?R:void 0,onClickCapture:A?O:void 0,onPointerLeave:y,ref:E,style:Mm,children:[_,v.jsx(hO,{})]})}function R0({id:e,store:t,unselect:r=!1,nodeRef:a}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:l,nodeLookup:u,onError:d}=t.getState(),f=u.get(e);if(!f){d?.("012",Mi.error012(e));return}t.setState({nodesSelectionActive:!1}),f.selected?(r||f.selected&&l)&&(o({nodes:[f],edges:[]}),requestAnimationFrame(()=>a?.current?.blur())):s([e])}function UE({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:a,nodeId:s,isSelectable:o,nodeClickDistance:l}){const u=Qt(),[d,f]=N.useState(!1),m=N.useRef();return N.useEffect(()=>{m.current=eM({getStoreItems:()=>u.getState(),onNodeMouseDown:p=>{R0({id:p,store:u,nodeRef:e})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),N.useEffect(()=>{if(t)m.current?.destroy();else if(e.current)return m.current?.update({noDragClassName:r,handleSelector:a,domNode:e.current,isSelectable:o,nodeId:s,nodeClickDistance:l}),()=>{m.current?.destroy()}},[r,a,t,o,e,s]),d}const gO=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function FE(){const e=Qt();return N.useCallback(r=>{const{nodeExtent:a,snapToGrid:s,snapGrid:o,nodesDraggable:l,onError:u,updateNodePositions:d,nodeLookup:f,nodeOrigin:m}=e.getState(),p=new Map,g=gO(l),y=s?o[0]:5,_=s?o[1]:5,b=r.direction.x*y*r.factor,w=r.direction.y*_*r.factor;for(const[,x]of f){if(!g(x))continue;let S={x:x.internals.positionAbsolute.x+b,y:x.internals.positionAbsolute.y+w};s&&(S=Tu(S,o));const{position:C,positionAbsolute:A}=lE({nodeId:x.id,nextPosition:S,nodeLookup:f,nodeExtent:a,nodeOrigin:m,onError:u});x.position=C,x.internals.positionAbsolute=A,p.set(x.id,x)}d(p)},[])}const kv=N.createContext(null),yO=kv.Provider;kv.Consumer;const Nv=()=>N.useContext(kv),vO=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),bO=(e,t,r)=>a=>{const{connectionClickStartHandle:s,connectionMode:o,connection:l}=a,{fromHandle:u,toHandle:d,isValid:f}=l,m=d?.nodeId===e&&d?.id===t&&d?.type===r;return{connectingFrom:u?.nodeId===e&&u?.id===t&&u?.type===r,connectingTo:m,clickConnecting:s?.nodeId===e&&s?.id===t&&s?.type===r,isPossibleEndHandle:o===ml.Strict?u?.type!==r:e!==u?.nodeId||t!==u?.id,connectionInProcess:!!u,clickConnectionInProcess:!!s,valid:m&&f}};function wO({type:e="source",position:t=ze.Top,isValidConnection:r,isConnectable:a=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:l,onConnect:u,children:d,className:f,onMouseDown:m,onTouchStart:p,...g},y){const _=l||null,b=e==="target",w=Qt(),x=Nv(),{connectOnClick:S,noPanClassName:C,rfId:A}=gt(vO,Gt),{connectingFrom:E,connectingTo:j,clickConnecting:T,isPossibleEndHandle:z,connectionInProcess:L,clickConnectionInProcess:V,valid:F}=gt(bO(x,_,e),Gt);x||w.getState().onError?.("010",Mi.error010());const M=G=>{const{defaultEdgeOptions:H,onConnect:U,hasDefaultEdges:Z}=w.getState(),X={...H,...G};if(Z){const{edges:Q,setEdges:$}=w.getState();$(L5(X,Q))}U?.(X),u?.(X)},O=G=>{if(!x)return;const H=gE(G.nativeEvent);if(s&&(H&&G.button===0||!H)){const U=w.getState();D0.onPointerDown(G.nativeEvent,{handleDomNode:G.currentTarget,autoPanOnConnect:U.autoPanOnConnect,connectionMode:U.connectionMode,connectionRadius:U.connectionRadius,domNode:U.domNode,nodeLookup:U.nodeLookup,lib:U.lib,isTarget:b,handleId:_,nodeId:x,flowId:U.rfId,panBy:U.panBy,cancelConnection:U.cancelConnection,onConnectStart:U.onConnectStart,onConnectEnd:U.onConnectEnd,updateConnection:U.updateConnection,onConnect:M,isValidConnection:r||U.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:U.autoPanSpeed,dragThreshold:U.connectionDragThreshold})}H?m?.(G):p?.(G)},R=G=>{const{onClickConnectStart:H,onClickConnectEnd:U,connectionClickStartHandle:Z,connectionMode:X,isValidConnection:Q,lib:$,rfId:B,nodeLookup:K,connection:P}=w.getState();if(!x||!Z&&!s)return;if(!Z){H?.(G.nativeEvent,{nodeId:x,handleId:_,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:x,type:e,id:_}});return}const q=mE(G.target),J=r||Q,{connection:le,isValid:oe}=D0.isValid(G.nativeEvent,{handle:{nodeId:x,id:_,type:e},connectionMode:X,fromNodeId:Z.nodeId,fromHandleId:Z.id||null,fromType:Z.type,isValidConnection:J,flowId:B,doc:q,lib:$,nodeLookup:K});oe&&le&&M(le);const he=structuredClone(P);delete he.inProgress,he.toPosition=he.toHandle?he.toHandle.position:null,U?.(G,he),w.setState({connectionClickStartHandle:null})};return v.jsx("div",{"data-handleid":_,"data-nodeid":x,"data-handlepos":t,"data-id":`${A}-${x}-${_}-${e}`,className:dn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",C,f,{source:!b,target:b,connectable:a,connectablestart:s,connectableend:o,clickconnecting:T,connectingfrom:E,connectingto:j,valid:F,connectionindicator:a&&(!L||z)&&(L||V?o:s)}]),onMouseDown:O,onTouchStart:O,onClick:S?R:void 0,ref:y,...g,children:d})}const bl=N.memo(BE(wO));function xO({data:e,isConnectable:t,sourcePosition:r=ze.Bottom}){return v.jsxs(v.Fragment,{children:[e?.label,v.jsx(bl,{type:"source",position:r,isConnectable:t})]})}function _O({data:e,isConnectable:t,targetPosition:r=ze.Top,sourcePosition:a=ze.Bottom}){return v.jsxs(v.Fragment,{children:[v.jsx(bl,{type:"target",position:r,isConnectable:t}),e?.label,v.jsx(bl,{type:"source",position:a,isConnectable:t})]})}function SO(){return null}function CO({data:e,isConnectable:t,targetPosition:r=ze.Top}){return v.jsxs(v.Fragment,{children:[v.jsx(bl,{type:"target",position:r,isConnectable:t}),e?.label]})}const Gh={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},S_={input:xO,default:_O,output:CO,group:SO};function EO(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const kO=e=>{const{width:t,height:r,x:a,y:s}=Nl(e.nodeLookup,{filter:o=>!!o.selected});return{width:ui(t)?t:null,height:ui(r)?r:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${a}px,${s}px)`}};function NO({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const a=Qt(),{width:s,height:o,transformString:l,userSelectionActive:u}=gt(kO,Gt),d=FE(),f=N.useRef(null);if(N.useEffect(()=>{r||f.current?.focus({preventScroll:!0})},[r]),UE({nodeRef:f}),u||!s||!o)return null;const m=e?g=>{const y=a.getState().nodes.filter(_=>_.selected);e(g,y)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(Gh,g.key)&&(g.preventDefault(),d({direction:Gh[g.key],factor:g.shiftKey?4:1}))};return v.jsx("div",{className:dn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l},children:v.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:r?void 0:-1,onKeyDown:r?void 0:p,style:{width:s,height:o}})})}const C_=typeof window<"u"?window:void 0,AO=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function qE({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:a,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:l,paneClickDistance:u,deleteKeyCode:d,selectionKeyCode:f,selectionOnDrag:m,selectionMode:p,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:_,panActivationKeyCode:b,zoomActivationKeyCode:w,elementsSelectable:x,zoomOnScroll:S,zoomOnPinch:C,panOnScroll:A,panOnScrollSpeed:E,panOnScrollMode:j,zoomOnDoubleClick:T,panOnDrag:z,defaultViewport:L,translateExtent:V,minZoom:F,maxZoom:M,preventScrolling:O,onSelectionContextMenu:R,noWheelClassName:G,noPanClassName:H,disableKeyboardA11y:U,onViewportChange:Z,isControlledViewport:X}){const{nodesSelectionActive:Q,userSelectionActive:$}=gt(AO,Gt),B=uu(f,{target:C_}),K=uu(b,{target:C_}),P=K||z,q=K||A,J=m&&P!==!0,le=B||$||J;return lO({deleteKeyCode:d,multiSelectionKeyCode:_}),v.jsx(dO,{onPaneContextMenu:o,elementsSelectable:x,zoomOnScroll:S,zoomOnPinch:C,panOnScroll:q,panOnScrollSpeed:E,panOnScrollMode:j,zoomOnDoubleClick:T,panOnDrag:!B&&P,defaultViewport:L,translateExtent:V,minZoom:F,maxZoom:M,zoomActivationKeyCode:w,preventScrolling:O,noWheelClassName:G,noPanClassName:H,onViewportChange:Z,isControlledViewport:X,paneClickDistance:u,selectionOnDrag:J,children:v.jsxs(pO,{onSelectionStart:g,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:a,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:l,panOnDrag:P,isSelecting:!!le,selectionMode:p,selectionKeyPressed:B,paneClickDistance:u,selectionOnDrag:J,children:[e,Q&&v.jsx(NO,{onSelectionContextMenu:R,noPanClassName:H,disableKeyboardA11y:U})]})})}qE.displayName="FlowRenderer";const jO=N.memo(qE),TO=e=>t=>e?yv(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(r=>r.id):Array.from(t.nodeLookup.keys());function DO(e){return gt(N.useCallback(TO(e),[e]),Gt)}const RO=e=>e.updateNodeInternals;function $O(){const e=gt(RO),[t]=N.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(r=>{const a=new Map;r.forEach(s=>{const o=s.target.getAttribute("data-id");a.set(o,{id:o,nodeElement:s.target,force:!0})}),e(a)}));return N.useEffect(()=>()=>{t?.disconnect()},[t]),t}function MO({node:e,nodeType:t,hasDimensions:r,resizeObserver:a}){const s=Qt(),o=N.useRef(null),l=N.useRef(null),u=N.useRef(e.sourcePosition),d=N.useRef(e.targetPosition),f=N.useRef(t),m=r&&!!e.internals.handleBounds;return N.useEffect(()=>{o.current&&!e.hidden&&(!m||l.current!==o.current)&&(l.current&&a?.unobserve(l.current),a?.observe(o.current),l.current=o.current)},[m,e.hidden]),N.useEffect(()=>()=>{l.current&&(a?.unobserve(l.current),l.current=null)},[]),N.useEffect(()=>{if(o.current){const p=f.current!==t,g=u.current!==e.sourcePosition,y=d.current!==e.targetPosition;(p||g||y)&&(f.current=t,u.current=e.sourcePosition,d.current=e.targetPosition,s.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:o.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),o}function OO({id:e,onClick:t,onMouseEnter:r,onMouseMove:a,onMouseLeave:s,onContextMenu:o,onDoubleClick:l,nodesDraggable:u,elementsSelectable:d,nodesConnectable:f,nodesFocusable:m,resizeObserver:p,noDragClassName:g,noPanClassName:y,disableKeyboardA11y:_,rfId:b,nodeTypes:w,nodeClickDistance:x,onError:S}){const{node:C,internals:A,isParent:E}=gt(oe=>{const he=oe.nodeLookup.get(e),ve=oe.parentLookup.has(e);return{node:he,internals:he.internals,isParent:ve}},Gt);let j=C.type||"default",T=w?.[j]||S_[j];T===void 0&&(S?.("003",Mi.error003(j)),j="default",T=w?.default||S_.default);const z=!!(C.draggable||u&&typeof C.draggable>"u"),L=!!(C.selectable||d&&typeof C.selectable>"u"),V=!!(C.connectable||f&&typeof C.connectable>"u"),F=!!(C.focusable||m&&typeof C.focusable>"u"),M=Qt(),O=fE(C),R=MO({node:C,nodeType:j,hasDimensions:O,resizeObserver:p}),G=UE({nodeRef:R,disabled:C.hidden||!z,noDragClassName:g,handleSelector:C.dragHandle,nodeId:e,isSelectable:L,nodeClickDistance:x}),H=FE();if(C.hidden)return null;const U=va(C),Z=EO(C),X=L||z||t||r||a||s,Q=r?oe=>r(oe,{...A.userNode}):void 0,$=a?oe=>a(oe,{...A.userNode}):void 0,B=s?oe=>s(oe,{...A.userNode}):void 0,K=o?oe=>o(oe,{...A.userNode}):void 0,P=l?oe=>l(oe,{...A.userNode}):void 0,q=oe=>{const{selectNodesOnDrag:he,nodeDragThreshold:ve}=M.getState();L&&(!he||!z||ve>0)&&R0({id:e,store:M,nodeRef:R}),t&&t(oe,{...A.userNode})},J=oe=>{if(!(pE(oe.nativeEvent)||_)){if(rE.includes(oe.key)&&L){const he=oe.key==="Escape";R0({id:e,store:M,unselect:he,nodeRef:R})}else if(z&&C.selected&&Object.prototype.hasOwnProperty.call(Gh,oe.key)){oe.preventDefault();const{ariaLabelConfig:he}=M.getState();M.setState({ariaLiveMessage:he["node.a11yDescription.ariaLiveMessage"]({direction:oe.key.replace("Arrow","").toLowerCase(),x:~~A.positionAbsolute.x,y:~~A.positionAbsolute.y})}),H({direction:Gh[oe.key],factor:oe.shiftKey?4:1})}}},le=()=>{if(_||!R.current?.matches(":focus-visible"))return;const{transform:oe,width:he,height:ve,autoPanOnNodeFocus:W,setCenter:ie}=M.getState();if(!W)return;yv(new Map([[e,C]]),{x:0,y:0,width:he,height:ve},oe,!0).length>0||ie(C.position.x+U.width/2,C.position.y+U.height/2,{zoom:oe[2]})};return v.jsx("div",{className:dn(["react-flow__node",`react-flow__node-${j}`,{[y]:z},C.className,{selected:C.selected,selectable:L,parent:E,draggable:z,dragging:G}]),ref:R,style:{zIndex:A.z,transform:`translate(${A.positionAbsolute.x}px,${A.positionAbsolute.y}px)`,pointerEvents:X?"all":"none",visibility:O?"visible":"hidden",...C.style,...Z},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:Q,onMouseMove:$,onMouseLeave:B,onContextMenu:K,onClick:q,onDoubleClick:P,onKeyDown:F?J:void 0,tabIndex:F?0:void 0,onFocus:F?le:void 0,role:C.ariaRole??(F?"group":void 0),"aria-roledescription":"node","aria-describedby":_?void 0:`${ME}-${b}`,"aria-label":C.ariaLabel,...C.domAttributes,children:v.jsx(yO,{value:e,children:v.jsx(T,{id:e,data:C.data,type:j,positionAbsoluteX:A.positionAbsolute.x,positionAbsoluteY:A.positionAbsolute.y,selected:C.selected??!1,selectable:L,draggable:z,deletable:C.deletable??!0,isConnectable:V,sourcePosition:C.sourcePosition,targetPosition:C.targetPosition,dragging:G,dragHandle:C.dragHandle,zIndex:A.z,parentId:C.parentId,...U})})})}var zO=N.memo(OO);const LO=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function VE(e){const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:a,elementsSelectable:s,onError:o}=gt(LO,Gt),l=DO(e.onlyRenderVisibleElements),u=$O();return v.jsx("div",{className:"react-flow__nodes",style:Mm,children:l.map(d=>v.jsx(zO,{id:d,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:u,nodesDraggable:t,nodesConnectable:r,nodesFocusable:a,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:o},d))})}VE.displayName="NodeRenderer";const IO=N.memo(VE);function PO(e){return gt(N.useCallback(r=>{if(!e)return r.edges.map(s=>s.id);const a=[];if(r.width&&r.height)for(const s of r.edges){const o=r.nodeLookup.get(s.source),l=r.nodeLookup.get(s.target);o&&l&&M5({sourceNode:o,targetNode:l,width:r.width,height:r.height,transform:r.transform})&&a.push(s.id)}return a},[e]),Gt)}const BO=({color:e="none",strokeWidth:t=1})=>{const r={strokeWidth:t,...e&&{stroke:e}};return v.jsx("polyline",{className:"arrow",style:r,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},HO=({color:e="none",strokeWidth:t=1})=>{const r={strokeWidth:t,...e&&{stroke:e,fill:e}};return v.jsx("polyline",{className:"arrowclosed",style:r,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},E_={[qh.Arrow]:BO,[qh.ArrowClosed]:HO};function UO(e){const t=Qt();return N.useMemo(()=>Object.prototype.hasOwnProperty.call(E_,e)?E_[e]:(t.getState().onError?.("009",Mi.error009(e)),null),[e])}const FO=({id:e,type:t,color:r,width:a=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:l,orient:u="auto-start-reverse"})=>{const d=UO(t);return d?v.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${a}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:u,refX:"0",refY:"0",children:v.jsx(d,{color:r,strokeWidth:l})}):null},YE=({defaultColor:e,rfId:t})=>{const r=gt(o=>o.edges),a=gt(o=>o.defaultEdgeOptions),s=N.useMemo(()=>U5(r,{id:t,defaultColor:e,defaultMarkerStart:a?.markerStart,defaultMarkerEnd:a?.markerEnd}),[r,a,t,e]);return s.length?v.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:v.jsx("defs",{children:s.map(o=>v.jsx(FO,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};YE.displayName="MarkerDefinitions";var qO=N.memo(YE);function GE({x:e,y:t,label:r,labelStyle:a,labelShowBg:s=!0,labelBgStyle:o,labelBgPadding:l=[2,4],labelBgBorderRadius:u=2,children:d,className:f,...m}){const[p,g]=N.useState({x:1,y:0,width:0,height:0}),y=dn(["react-flow__edge-textwrapper",f]),_=N.useRef(null);return N.useEffect(()=>{if(_.current){const b=_.current.getBBox();g({x:b.x,y:b.y,width:b.width,height:b.height})}},[r]),r?v.jsxs("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:y,visibility:p.width?"visible":"hidden",...m,children:[s&&v.jsx("rect",{width:p.width+2*l[0],x:-l[0],y:-l[1],height:p.height+2*l[1],className:"react-flow__edge-textbg",style:o,rx:u,ry:u}),v.jsx("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:_,style:a,children:r}),d]}):null}GE.displayName="EdgeText";const VO=N.memo(GE);function Ru({path:e,labelX:t,labelY:r,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,interactionWidth:f=20,...m}){return v.jsxs(v.Fragment,{children:[v.jsx("path",{...m,d:e,fill:"none",className:dn(["react-flow__edge-path",m.className])}),f?v.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}):null,a&&ui(t)&&ui(r)?v.jsx(VO,{x:t,y:r,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d}):null]})}function k_({pos:e,x1:t,y1:r,x2:a,y2:s}){return e===ze.Left||e===ze.Right?[.5*(t+a),r]:[t,.5*(r+s)]}function KE({sourceX:e,sourceY:t,sourcePosition:r=ze.Bottom,targetX:a,targetY:s,targetPosition:o=ze.Top}){const[l,u]=k_({pos:r,x1:e,y1:t,x2:a,y2:s}),[d,f]=k_({pos:o,x1:a,y1:s,x2:e,y2:t}),[m,p,g,y]=yE({sourceX:e,sourceY:t,targetX:a,targetY:s,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:f});return[`M${e},${t} C${l},${u} ${d},${f} ${a},${s}`,m,p,g,y]}function XE(e){return N.memo(({id:t,sourceX:r,sourceY:a,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:_,markerEnd:b,markerStart:w,interactionWidth:x})=>{const[S,C,A]=KE({sourceX:r,sourceY:a,sourcePosition:l,targetX:s,targetY:o,targetPosition:u}),E=e.isInternal?void 0:t;return v.jsx(Ru,{id:E,path:S,labelX:C,labelY:A,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:_,markerEnd:b,markerStart:w,interactionWidth:x})})}const YO=XE({isInternal:!1}),ZE=XE({isInternal:!0});YO.displayName="SimpleBezierEdge";ZE.displayName="SimpleBezierEdgeInternal";function WE(e){return N.memo(({id:t,sourceX:r,sourceY:a,targetX:s,targetY:o,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p,style:g,sourcePosition:y=ze.Bottom,targetPosition:_=ze.Top,markerEnd:b,markerStart:w,pathOptions:x,interactionWidth:S})=>{const[C,A,E]=A0({sourceX:r,sourceY:a,sourcePosition:y,targetX:s,targetY:o,targetPosition:_,borderRadius:x?.borderRadius,offset:x?.offset,stepPosition:x?.stepPosition}),j=e.isInternal?void 0:t;return v.jsx(Ru,{id:j,path:C,labelX:A,labelY:E,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p,style:g,markerEnd:b,markerStart:w,interactionWidth:S})})}const QE=WE({isInternal:!1}),JE=WE({isInternal:!0});QE.displayName="SmoothStepEdge";JE.displayName="SmoothStepEdgeInternal";function ek(e){return N.memo(({id:t,...r})=>{const a=e.isInternal?void 0:t;return v.jsx(QE,{...r,id:a,pathOptions:N.useMemo(()=>({borderRadius:0,offset:r.pathOptions?.offset}),[r.pathOptions?.offset])})})}const GO=ek({isInternal:!1}),tk=ek({isInternal:!0});GO.displayName="StepEdge";tk.displayName="StepEdgeInternal";function nk(e){return N.memo(({id:t,sourceX:r,sourceY:a,targetX:s,targetY:o,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p,style:g,markerEnd:y,markerStart:_,interactionWidth:b})=>{const[w,x,S]=wE({sourceX:r,sourceY:a,targetX:s,targetY:o}),C=e.isInternal?void 0:t;return v.jsx(Ru,{id:C,path:w,labelX:x,labelY:S,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p,style:g,markerEnd:y,markerStart:_,interactionWidth:b})})}const KO=nk({isInternal:!1}),rk=nk({isInternal:!0});KO.displayName="StraightEdge";rk.displayName="StraightEdgeInternal";function ik(e){return N.memo(({id:t,sourceX:r,sourceY:a,targetX:s,targetY:o,sourcePosition:l=ze.Bottom,targetPosition:u=ze.Top,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:_,markerEnd:b,markerStart:w,pathOptions:x,interactionWidth:S})=>{const[C,A,E]=vE({sourceX:r,sourceY:a,sourcePosition:l,targetX:s,targetY:o,targetPosition:u,curvature:x?.curvature}),j=e.isInternal?void 0:t;return v.jsx(Ru,{id:j,path:C,labelX:A,labelY:E,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:_,markerEnd:b,markerStart:w,interactionWidth:S})})}const XO=ik({isInternal:!1}),ak=ik({isInternal:!0});XO.displayName="BezierEdge";ak.displayName="BezierEdgeInternal";const N_={default:ak,straight:rk,step:tk,smoothstep:JE,simplebezier:ZE},A_={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},ZO=(e,t,r)=>r===ze.Left?e-t:r===ze.Right?e+t:e,WO=(e,t,r)=>r===ze.Top?e-t:r===ze.Bottom?e+t:e,j_="react-flow__edgeupdater";function T_({position:e,centerX:t,centerY:r,radius:a=10,onMouseDown:s,onMouseEnter:o,onMouseOut:l,type:u}){return v.jsx("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:l,className:dn([j_,`${j_}-${u}`]),cx:ZO(t,a,e),cy:WO(r,a,e),r:a,stroke:"transparent",fill:"transparent"})}function QO({isReconnectable:e,reconnectRadius:t,edge:r,sourceX:a,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,onReconnect:f,onReconnectStart:m,onReconnectEnd:p,setReconnecting:g,setUpdateHover:y}){const _=Qt(),b=(A,E)=>{if(A.button!==0)return;const{autoPanOnConnect:j,domNode:T,isValidConnection:z,connectionMode:L,connectionRadius:V,lib:F,onConnectStart:M,onConnectEnd:O,cancelConnection:R,nodeLookup:G,rfId:H,panBy:U,updateConnection:Z}=_.getState(),X=E.type==="target",Q=(K,P)=>{g(!1),p?.(K,r,E.type,P)},$=K=>f?.(r,K),B=(K,P)=>{g(!0),m?.(A,r,E.type),M?.(K,P)};D0.onPointerDown(A.nativeEvent,{autoPanOnConnect:j,connectionMode:L,connectionRadius:V,domNode:T,handleId:E.id,nodeId:E.nodeId,nodeLookup:G,isTarget:X,edgeUpdaterType:E.type,lib:F,flowId:H,cancelConnection:R,panBy:U,isValidConnection:z,onConnect:$,onConnectStart:B,onConnectEnd:O,onReconnectEnd:Q,updateConnection:Z,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle,dragThreshold:_.getState().connectionDragThreshold,handleDomNode:A.currentTarget})},w=A=>b(A,{nodeId:r.target,id:r.targetHandle??null,type:"target"}),x=A=>b(A,{nodeId:r.source,id:r.sourceHandle??null,type:"source"}),S=()=>y(!0),C=()=>y(!1);return v.jsxs(v.Fragment,{children:[(e===!0||e==="source")&&v.jsx(T_,{position:u,centerX:a,centerY:s,radius:t,onMouseDown:w,onMouseEnter:S,onMouseOut:C,type:"source"}),(e===!0||e==="target")&&v.jsx(T_,{position:d,centerX:o,centerY:l,radius:t,onMouseDown:x,onMouseEnter:S,onMouseOut:C,type:"target"})]})}function JO({id:e,edgesFocusable:t,edgesReconnectable:r,elementsSelectable:a,onClick:s,onDoubleClick:o,onContextMenu:l,onMouseEnter:u,onMouseMove:d,onMouseLeave:f,reconnectRadius:m,onReconnect:p,onReconnectStart:g,onReconnectEnd:y,rfId:_,edgeTypes:b,noPanClassName:w,onError:x,disableKeyboardA11y:S}){let C=gt(ie=>ie.edgeLookup.get(e));const A=gt(ie=>ie.defaultEdgeOptions);C=A?{...A,...C}:C;let E=C.type||"default",j=b?.[E]||N_[E];j===void 0&&(x?.("011",Mi.error011(E)),E="default",j=b?.default||N_.default);const T=!!(C.focusable||t&&typeof C.focusable>"u"),z=typeof p<"u"&&(C.reconnectable||r&&typeof C.reconnectable>"u"),L=!!(C.selectable||a&&typeof C.selectable>"u"),V=N.useRef(null),[F,M]=N.useState(!1),[O,R]=N.useState(!1),G=Qt(),{zIndex:H,sourceX:U,sourceY:Z,targetX:X,targetY:Q,sourcePosition:$,targetPosition:B}=gt(N.useCallback(ie=>{const ae=ie.nodeLookup.get(C.source),I=ie.nodeLookup.get(C.target);if(!ae||!I)return{zIndex:C.zIndex,...A_};const ue=H5({id:e,sourceNode:ae,targetNode:I,sourceHandle:C.sourceHandle||null,targetHandle:C.targetHandle||null,connectionMode:ie.connectionMode,onError:x});return{zIndex:$5({selected:C.selected,zIndex:C.zIndex,sourceNode:ae,targetNode:I,elevateOnSelect:ie.elevateEdgesOnSelect,zIndexMode:ie.zIndexMode}),...ue||A_}},[C.source,C.target,C.sourceHandle,C.targetHandle,C.selected,C.zIndex]),Gt),K=N.useMemo(()=>C.markerStart?`url('#${j0(C.markerStart,_)}')`:void 0,[C.markerStart,_]),P=N.useMemo(()=>C.markerEnd?`url('#${j0(C.markerEnd,_)}')`:void 0,[C.markerEnd,_]);if(C.hidden||U===null||Z===null||X===null||Q===null)return null;const q=ie=>{const{addSelectedEdges:ae,unselectNodesAndEdges:I,multiSelectionActive:ue}=G.getState();L&&(G.setState({nodesSelectionActive:!1}),C.selected&&ue?(I({nodes:[],edges:[C]}),V.current?.blur()):ae([e])),s&&s(ie,C)},J=o?ie=>{o(ie,{...C})}:void 0,le=l?ie=>{l(ie,{...C})}:void 0,oe=u?ie=>{u(ie,{...C})}:void 0,he=d?ie=>{d(ie,{...C})}:void 0,ve=f?ie=>{f(ie,{...C})}:void 0,W=ie=>{if(!S&&rE.includes(ie.key)&&L){const{unselectNodesAndEdges:ae,addSelectedEdges:I}=G.getState();ie.key==="Escape"?(V.current?.blur(),ae({edges:[C]})):I([e])}};return v.jsx("svg",{style:{zIndex:H},children:v.jsxs("g",{className:dn(["react-flow__edge",`react-flow__edge-${E}`,C.className,w,{selected:C.selected,animated:C.animated,inactive:!L&&!s,updating:F,selectable:L}]),onClick:q,onDoubleClick:J,onContextMenu:le,onMouseEnter:oe,onMouseMove:he,onMouseLeave:ve,onKeyDown:T?W:void 0,tabIndex:T?0:void 0,role:C.ariaRole??(T?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":C.ariaLabel===null?void 0:C.ariaLabel||`Edge from ${C.source} to ${C.target}`,"aria-describedby":T?`${OE}-${_}`:void 0,ref:V,...C.domAttributes,children:[!O&&v.jsx(j,{id:e,source:C.source,target:C.target,type:C.type,selected:C.selected,animated:C.animated,selectable:L,deletable:C.deletable??!0,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,sourceX:U,sourceY:Z,targetX:X,targetY:Q,sourcePosition:$,targetPosition:B,data:C.data,style:C.style,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerStart:K,markerEnd:P,pathOptions:"pathOptions"in C?C.pathOptions:void 0,interactionWidth:C.interactionWidth}),z&&v.jsx(QO,{edge:C,isReconnectable:z,reconnectRadius:m,onReconnect:p,onReconnectStart:g,onReconnectEnd:y,sourceX:U,sourceY:Z,targetX:X,targetY:Q,sourcePosition:$,targetPosition:B,setUpdateHover:M,setReconnecting:R})]})})}var e4=N.memo(JO);const t4=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function sk({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:r,edgeTypes:a,noPanClassName:s,onReconnect:o,onEdgeContextMenu:l,onEdgeMouseEnter:u,onEdgeMouseMove:d,onEdgeMouseLeave:f,onEdgeClick:m,reconnectRadius:p,onEdgeDoubleClick:g,onReconnectStart:y,onReconnectEnd:_,disableKeyboardA11y:b}){const{edgesFocusable:w,edgesReconnectable:x,elementsSelectable:S,onError:C}=gt(t4,Gt),A=PO(t);return v.jsxs("div",{className:"react-flow__edges",children:[v.jsx(qO,{defaultColor:e,rfId:r}),A.map(E=>v.jsx(e4,{id:E,edgesFocusable:w,edgesReconnectable:x,elementsSelectable:S,noPanClassName:s,onReconnect:o,onContextMenu:l,onMouseEnter:u,onMouseMove:d,onMouseLeave:f,onClick:m,reconnectRadius:p,onDoubleClick:g,onReconnectStart:y,onReconnectEnd:_,rfId:r,onError:C,edgeTypes:a,disableKeyboardA11y:b},E))]})}sk.displayName="EdgeRenderer";const n4=N.memo(sk),r4=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function i4({children:e}){const t=gt(r4);return v.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function a4(e){const t=Ev(),r=N.useRef(!1);N.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const s4=e=>e.panZoom?.syncViewport;function o4(e){const t=gt(s4),r=Qt();return N.useEffect(()=>{e&&(t?.(e),r.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function l4(e){return e.connection.inProgress?{...e.connection,to:Du(e.connection.to,e.transform)}:{...e.connection}}function c4(e){return l4}function u4(e){const t=c4();return gt(t,Gt)}const d4=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function f4({containerStyle:e,style:t,type:r,component:a}){const{nodesConnectable:s,width:o,height:l,isValid:u,inProgress:d}=gt(d4,Gt);return!(o&&s&&d)?null:v.jsx("svg",{style:e,width:o,height:l,className:"react-flow__connectionline react-flow__container",children:v.jsx("g",{className:dn(["react-flow__connection",sE(u)]),children:v.jsx(ok,{style:t,type:r,CustomComponent:a,isValid:u})})})}const ok=({style:e,type:t=ts.Bezier,CustomComponent:r,isValid:a})=>{const{inProgress:s,from:o,fromNode:l,fromHandle:u,fromPosition:d,to:f,toNode:m,toHandle:p,toPosition:g,pointer:y}=u4();if(!s)return;if(r)return v.jsx(r,{connectionLineType:t,connectionLineStyle:e,fromNode:l,fromHandle:u,fromX:o.x,fromY:o.y,toX:f.x,toY:f.y,fromPosition:d,toPosition:g,connectionStatus:sE(a),toNode:m,toHandle:p,pointer:y});let _="";const b={sourceX:o.x,sourceY:o.y,sourcePosition:d,targetX:f.x,targetY:f.y,targetPosition:g};switch(t){case ts.Bezier:[_]=vE(b);break;case ts.SimpleBezier:[_]=KE(b);break;case ts.Step:[_]=A0({...b,borderRadius:0});break;case ts.SmoothStep:[_]=A0(b);break;default:[_]=wE(b)}return v.jsx("path",{d:_,fill:"none",className:"react-flow__connection-path",style:e})};ok.displayName="ConnectionLine";const h4={};function D_(e=h4){N.useRef(e),Qt(),N.useEffect(()=>{},[e])}function m4(){Qt(),N.useRef(!1),N.useEffect(()=>{},[])}function lk({nodeTypes:e,edgeTypes:t,onInit:r,onNodeClick:a,onEdgeClick:s,onNodeDoubleClick:o,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:m,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:y,connectionLineType:_,connectionLineStyle:b,connectionLineComponent:w,connectionLineContainerStyle:x,selectionKeyCode:S,selectionOnDrag:C,selectionMode:A,multiSelectionKeyCode:E,panActivationKeyCode:j,zoomActivationKeyCode:T,deleteKeyCode:z,onlyRenderVisibleElements:L,elementsSelectable:V,defaultViewport:F,translateExtent:M,minZoom:O,maxZoom:R,preventScrolling:G,defaultMarkerColor:H,zoomOnScroll:U,zoomOnPinch:Z,panOnScroll:X,panOnScrollSpeed:Q,panOnScrollMode:$,zoomOnDoubleClick:B,panOnDrag:K,onPaneClick:P,onPaneMouseEnter:q,onPaneMouseMove:J,onPaneMouseLeave:le,onPaneScroll:oe,onPaneContextMenu:he,paneClickDistance:ve,nodeClickDistance:W,onEdgeContextMenu:ie,onEdgeMouseEnter:ae,onEdgeMouseMove:I,onEdgeMouseLeave:ue,reconnectRadius:ce,onReconnect:re,onReconnectStart:ne,onReconnectEnd:fe,noDragClassName:Ce,noWheelClassName:ke,noPanClassName:ye,disableKeyboardA11y:Re,nodeExtent:Pe,rfId:Le,viewport:Fe,onViewportChange:Ue}){return D_(e),D_(t),m4(),a4(r),o4(Fe),v.jsx(jO,{onPaneClick:P,onPaneMouseEnter:q,onPaneMouseMove:J,onPaneMouseLeave:le,onPaneContextMenu:he,onPaneScroll:oe,paneClickDistance:ve,deleteKeyCode:z,selectionKeyCode:S,selectionOnDrag:C,selectionMode:A,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:E,panActivationKeyCode:j,zoomActivationKeyCode:T,elementsSelectable:V,zoomOnScroll:U,zoomOnPinch:Z,zoomOnDoubleClick:B,panOnScroll:X,panOnScrollSpeed:Q,panOnScrollMode:$,panOnDrag:K,defaultViewport:F,translateExtent:M,minZoom:O,maxZoom:R,onSelectionContextMenu:p,preventScrolling:G,noDragClassName:Ce,noWheelClassName:ke,noPanClassName:ye,disableKeyboardA11y:Re,onViewportChange:Ue,isControlledViewport:!!Fe,children:v.jsxs(i4,{children:[v.jsx(n4,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:l,onReconnect:re,onReconnectStart:ne,onReconnectEnd:fe,onlyRenderVisibleElements:L,onEdgeContextMenu:ie,onEdgeMouseEnter:ae,onEdgeMouseMove:I,onEdgeMouseLeave:ue,reconnectRadius:ce,defaultMarkerColor:H,noPanClassName:ye,disableKeyboardA11y:Re,rfId:Le}),v.jsx(f4,{style:b,type:_,component:w,containerStyle:x}),v.jsx("div",{className:"react-flow__edgelabel-renderer"}),v.jsx(IO,{nodeTypes:e,onNodeClick:a,onNodeDoubleClick:o,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:m,nodeClickDistance:W,onlyRenderVisibleElements:L,noPanClassName:ye,noDragClassName:Ce,disableKeyboardA11y:Re,nodeExtent:Pe,rfId:Le}),v.jsx("div",{className:"react-flow__viewport-portal"})]})})}lk.displayName="GraphView";const p4=N.memo(lk),R_=({nodes:e,edges:t,defaultNodes:r,defaultEdges:a,width:s,height:o,fitView:l,fitViewOptions:u,minZoom:d=.5,maxZoom:f=2,nodeOrigin:m,nodeExtent:p,zIndexMode:g="basic"}={})=>{const y=new Map,_=new Map,b=new Map,w=new Map,x=a??t??[],S=r??e??[],C=m??[0,0],A=p??ou;SE(b,w,x);const E=T0(S,y,_,{nodeOrigin:C,nodeExtent:A,zIndexMode:g});let j=[0,0,1];if(l&&s&&o){const T=Nl(y,{filter:F=>!!((F.width||F.initialWidth)&&(F.height||F.initialHeight))}),{x:z,y:L,zoom:V}=vv(T,s,o,d,f,u?.padding??.1);j=[z,L,V]}return{rfId:"1",width:s??0,height:o??0,transform:j,nodes:S,nodesInitialized:E,nodeLookup:y,parentLookup:_,edges:x,edgeLookup:w,connectionLookup:b,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:r!==void 0,hasDefaultEdges:a!==void 0,panZoom:null,minZoom:d,maxZoom:f,translateExtent:ou,nodeExtent:A,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:ml.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:C,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:l??!1,fitViewOptions:u,fitViewResolver:null,connection:{...aE},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:N5,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:iE,zIndexMode:g,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},g4=({nodes:e,edges:t,defaultNodes:r,defaultEdges:a,width:s,height:o,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:f,nodeOrigin:m,nodeExtent:p,zIndexMode:g})=>MM((y,_)=>{async function b(){const{nodeLookup:w,panZoom:x,fitViewOptions:S,fitViewResolver:C,width:A,height:E,minZoom:j,maxZoom:T}=_();x&&(await E5({nodes:w,width:A,height:E,panZoom:x,minZoom:j,maxZoom:T},S),C?.resolve(!0),y({fitViewResolver:null}))}return{...R_({nodes:e,edges:t,width:s,height:o,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:f,nodeOrigin:m,nodeExtent:p,defaultNodes:r,defaultEdges:a,zIndexMode:g}),setNodes:w=>{const{nodeLookup:x,parentLookup:S,nodeOrigin:C,elevateNodesOnSelect:A,fitViewQueued:E,zIndexMode:j}=_(),T=T0(w,x,S,{nodeOrigin:C,nodeExtent:p,elevateNodesOnSelect:A,checkEquality:!0,zIndexMode:j});E&&T?(b(),y({nodes:w,nodesInitialized:T,fitViewQueued:!1,fitViewOptions:void 0})):y({nodes:w,nodesInitialized:T})},setEdges:w=>{const{connectionLookup:x,edgeLookup:S}=_();SE(x,S,w),y({edges:w})},setDefaultNodesAndEdges:(w,x)=>{if(w){const{setNodes:S}=_();S(w),y({hasDefaultNodes:!0})}if(x){const{setEdges:S}=_();S(x),y({hasDefaultEdges:!0})}},updateNodeInternals:w=>{const{triggerNodeChanges:x,nodeLookup:S,parentLookup:C,domNode:A,nodeOrigin:E,nodeExtent:j,debug:T,fitViewQueued:z,zIndexMode:L}=_(),{changes:V,updatedInternals:F}=Z5(w,S,C,A,E,j,L);F&&(Y5(S,C,{nodeOrigin:E,nodeExtent:j,zIndexMode:L}),z?(b(),y({fitViewQueued:!1,fitViewOptions:void 0})):y({}),V?.length>0&&(T&&console.log("React Flow: trigger node changes",V),x?.(V)))},updateNodePositions:(w,x=!1)=>{const S=[];let C=[];const{nodeLookup:A,triggerNodeChanges:E,connection:j,updateConnection:T,onNodesChangeMiddlewareMap:z}=_();for(const[L,V]of w){const F=A.get(L),M=!!(F?.expandParent&&F?.parentId&&V?.position),O={id:L,type:"position",position:M?{x:Math.max(0,V.position.x),y:Math.max(0,V.position.y)}:V.position,dragging:x};if(F&&j.inProgress&&j.fromNode.id===F.id){const R=so(F,j.fromHandle,ze.Left,!0);T({...j,from:R})}M&&F.parentId&&S.push({id:L,parentId:F.parentId,rect:{...V.internals.positionAbsolute,width:V.measured.width??0,height:V.measured.height??0}}),C.push(O)}if(S.length>0){const{parentLookup:L,nodeOrigin:V}=_(),F=Cv(S,A,L,V);C.push(...F)}for(const L of z.values())C=L(C);E(C)},triggerNodeChanges:w=>{const{onNodesChange:x,setNodes:S,nodes:C,hasDefaultNodes:A,debug:E}=_();if(w?.length){if(A){const j=IE(w,C);S(j)}E&&console.log("React Flow: trigger node changes",w),x?.(w)}},triggerEdgeChanges:w=>{const{onEdgesChange:x,setEdges:S,edges:C,hasDefaultEdges:A,debug:E}=_();if(w?.length){if(A){const j=PE(w,C);S(j)}E&&console.log("React Flow: trigger edge changes",w),x?.(w)}},addSelectedNodes:w=>{const{multiSelectionActive:x,edgeLookup:S,nodeLookup:C,triggerNodeChanges:A,triggerEdgeChanges:E}=_();if(x){const j=w.map(T=>Vs(T,!0));A(j);return}A(il(C,new Set([...w]),!0)),E(il(S))},addSelectedEdges:w=>{const{multiSelectionActive:x,edgeLookup:S,nodeLookup:C,triggerNodeChanges:A,triggerEdgeChanges:E}=_();if(x){const j=w.map(T=>Vs(T,!0));E(j);return}E(il(S,new Set([...w]))),A(il(C,new Set,!0))},unselectNodesAndEdges:({nodes:w,edges:x}={})=>{const{edges:S,nodes:C,nodeLookup:A,triggerNodeChanges:E,triggerEdgeChanges:j}=_(),T=w||C,z=x||S,L=T.map(F=>{const M=A.get(F.id);return M&&(M.selected=!1),Vs(F.id,!1)}),V=z.map(F=>Vs(F.id,!1));E(L),j(V)},setMinZoom:w=>{const{panZoom:x,maxZoom:S}=_();x?.setScaleExtent([w,S]),y({minZoom:w})},setMaxZoom:w=>{const{panZoom:x,minZoom:S}=_();x?.setScaleExtent([S,w]),y({maxZoom:w})},setTranslateExtent:w=>{_().panZoom?.setTranslateExtent(w),y({translateExtent:w})},resetSelectedElements:()=>{const{edges:w,nodes:x,triggerNodeChanges:S,triggerEdgeChanges:C,elementsSelectable:A}=_();if(!A)return;const E=x.reduce((T,z)=>z.selected?[...T,Vs(z.id,!1)]:T,[]),j=w.reduce((T,z)=>z.selected?[...T,Vs(z.id,!1)]:T,[]);S(E),C(j)},setNodeExtent:w=>{const{nodes:x,nodeLookup:S,parentLookup:C,nodeOrigin:A,elevateNodesOnSelect:E,nodeExtent:j,zIndexMode:T}=_();w[0][0]===j[0][0]&&w[0][1]===j[0][1]&&w[1][0]===j[1][0]&&w[1][1]===j[1][1]||(T0(x,S,C,{nodeOrigin:A,nodeExtent:w,elevateNodesOnSelect:E,checkEquality:!1,zIndexMode:T}),y({nodeExtent:w}))},panBy:w=>{const{transform:x,width:S,height:C,panZoom:A,translateExtent:E}=_();return W5({delta:w,panZoom:A,transform:x,translateExtent:E,width:S,height:C})},setCenter:async(w,x,S)=>{const{width:C,height:A,maxZoom:E,panZoom:j}=_();if(!j)return Promise.resolve(!1);const T=typeof S?.zoom<"u"?S.zoom:E;return await j.setViewport({x:C/2-w*T,y:A/2-x*T,zoom:T},{duration:S?.duration,ease:S?.ease,interpolate:S?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{y({connection:{...aE}})},updateConnection:w=>{y({connection:w})},reset:()=>y({...R_()})}},Object.is);function y4({initialNodes:e,initialEdges:t,defaultNodes:r,defaultEdges:a,initialWidth:s,initialHeight:o,initialMinZoom:l,initialMaxZoom:u,initialFitViewOptions:d,fitView:f,nodeOrigin:m,nodeExtent:p,zIndexMode:g,children:y}){const[_]=N.useState(()=>g4({nodes:e,edges:t,defaultNodes:r,defaultEdges:a,width:s,height:o,fitView:f,minZoom:l,maxZoom:u,fitViewOptions:d,nodeOrigin:m,nodeExtent:p,zIndexMode:g}));return v.jsx(OM,{value:_,children:v.jsx(iO,{children:y})})}function v4({children:e,nodes:t,edges:r,defaultNodes:a,defaultEdges:s,width:o,height:l,fitView:u,fitViewOptions:d,minZoom:f,maxZoom:m,nodeOrigin:p,nodeExtent:g,zIndexMode:y}){return N.useContext(Rm)?v.jsx(v.Fragment,{children:e}):v.jsx(y4,{initialNodes:t,initialEdges:r,defaultNodes:a,defaultEdges:s,initialWidth:o,initialHeight:l,fitView:u,initialFitViewOptions:d,initialMinZoom:f,initialMaxZoom:m,nodeOrigin:p,nodeExtent:g,zIndexMode:y,children:e})}const b4={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function w4({nodes:e,edges:t,defaultNodes:r,defaultEdges:a,className:s,nodeTypes:o,edgeTypes:l,onNodeClick:u,onEdgeClick:d,onInit:f,onMove:m,onMoveStart:p,onMoveEnd:g,onConnect:y,onConnectStart:_,onConnectEnd:b,onClickConnectStart:w,onClickConnectEnd:x,onNodeMouseEnter:S,onNodeMouseMove:C,onNodeMouseLeave:A,onNodeContextMenu:E,onNodeDoubleClick:j,onNodeDragStart:T,onNodeDrag:z,onNodeDragStop:L,onNodesDelete:V,onEdgesDelete:F,onDelete:M,onSelectionChange:O,onSelectionDragStart:R,onSelectionDrag:G,onSelectionDragStop:H,onSelectionContextMenu:U,onSelectionStart:Z,onSelectionEnd:X,onBeforeDelete:Q,connectionMode:$,connectionLineType:B=ts.Bezier,connectionLineStyle:K,connectionLineComponent:P,connectionLineContainerStyle:q,deleteKeyCode:J="Backspace",selectionKeyCode:le="Shift",selectionOnDrag:oe=!1,selectionMode:he=pl.Full,panActivationKeyCode:ve="Space",multiSelectionKeyCode:W=cu()?"Meta":"Control",zoomActivationKeyCode:ie=cu()?"Meta":"Control",snapToGrid:ae,snapGrid:I,onlyRenderVisibleElements:ue=!1,selectNodesOnDrag:ce,nodesDraggable:re,autoPanOnNodeFocus:ne,nodesConnectable:fe,nodesFocusable:Ce,nodeOrigin:ke=zE,edgesFocusable:ye,edgesReconnectable:Re,elementsSelectable:Pe=!0,defaultViewport:Le=KM,minZoom:Fe=.5,maxZoom:Ue=2,translateExtent:Ne=ou,preventScrolling:$e=!0,nodeExtent:Ae,defaultMarkerColor:Ve="#b1b1b7",zoomOnScroll:He=!0,zoomOnPinch:Be=!0,panOnScroll:Ye=!1,panOnScrollSpeed:mt=.5,panOnScrollMode:nt=Ws.Free,zoomOnDoubleClick:Ot=!0,panOnDrag:Kt=!0,onPaneClick:Jt,onPaneMouseEnter:Et,onPaneMouseMove:it,onPaneMouseLeave:ut,onPaneScroll:kt,onPaneContextMenu:Ft,paneClickDistance:wn=1,nodeClickDistance:fn=0,children:qt,onReconnect:xn,onReconnectStart:an,onReconnectEnd:Xt,onEdgeContextMenu:_n,onEdgeDoubleClick:An,onEdgeMouseEnter:$n,onEdgeMouseMove:br,onEdgeMouseLeave:Sn,reconnectRadius:qn=10,onNodesChange:sr,onEdgesChange:Vn,noDragClassName:sn="nodrag",noWheelClassName:hn="nowheel",noPanClassName:Qr="nopan",fitView:yi,fitViewOptions:ba,connectOnClick:ps,attributionPosition:Or,proOptions:zr,defaultEdgeOptions:wa,elevateNodesOnSelect:or=!0,elevateEdgesOnSelect:vi=!1,disableKeyboardA11y:wr=!1,autoPanOnConnect:bi,autoPanOnNodeDrag:Zt,autoPanSpeed:Lr,connectionRadius:fo,isValidConnection:Ir,onError:Jr,style:Yn,id:Wn,nodeDragThreshold:gs,connectionDragThreshold:xr,viewport:ei,onViewportChange:Qn,width:jn,height:Mn,colorMode:ti="light",debug:ys,onScroll:_r,ariaLabelConfig:xa,zIndexMode:lr="basic",...ho},On){const Cn=Wn||"1",_a=QM(ti),Pr=N.useCallback(cr=>{cr.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),_r?.(cr)},[_r]);return v.jsx("div",{"data-testid":"rf__wrapper",...ho,onScroll:Pr,style:{...Yn,...b4},ref:On,className:dn(["react-flow",s,_a]),id:Wn,role:"application",children:v.jsxs(v4,{nodes:e,edges:t,width:jn,height:Mn,fitView:yi,fitViewOptions:ba,minZoom:Fe,maxZoom:Ue,nodeOrigin:ke,nodeExtent:Ae,zIndexMode:lr,children:[v.jsx(p4,{onInit:f,onNodeClick:u,onEdgeClick:d,onNodeMouseEnter:S,onNodeMouseMove:C,onNodeMouseLeave:A,onNodeContextMenu:E,onNodeDoubleClick:j,nodeTypes:o,edgeTypes:l,connectionLineType:B,connectionLineStyle:K,connectionLineComponent:P,connectionLineContainerStyle:q,selectionKeyCode:le,selectionOnDrag:oe,selectionMode:he,deleteKeyCode:J,multiSelectionKeyCode:W,panActivationKeyCode:ve,zoomActivationKeyCode:ie,onlyRenderVisibleElements:ue,defaultViewport:Le,translateExtent:Ne,minZoom:Fe,maxZoom:Ue,preventScrolling:$e,zoomOnScroll:He,zoomOnPinch:Be,zoomOnDoubleClick:Ot,panOnScroll:Ye,panOnScrollSpeed:mt,panOnScrollMode:nt,panOnDrag:Kt,onPaneClick:Jt,onPaneMouseEnter:Et,onPaneMouseMove:it,onPaneMouseLeave:ut,onPaneScroll:kt,onPaneContextMenu:Ft,paneClickDistance:wn,nodeClickDistance:fn,onSelectionContextMenu:U,onSelectionStart:Z,onSelectionEnd:X,onReconnect:xn,onReconnectStart:an,onReconnectEnd:Xt,onEdgeContextMenu:_n,onEdgeDoubleClick:An,onEdgeMouseEnter:$n,onEdgeMouseMove:br,onEdgeMouseLeave:Sn,reconnectRadius:qn,defaultMarkerColor:Ve,noDragClassName:sn,noWheelClassName:hn,noPanClassName:Qr,rfId:Cn,disableKeyboardA11y:wr,nodeExtent:Ae,viewport:ei,onViewportChange:Qn}),v.jsx(WM,{nodes:e,edges:t,defaultNodes:r,defaultEdges:a,onConnect:y,onConnectStart:_,onConnectEnd:b,onClickConnectStart:w,onClickConnectEnd:x,nodesDraggable:re,autoPanOnNodeFocus:ne,nodesConnectable:fe,nodesFocusable:Ce,edgesFocusable:ye,edgesReconnectable:Re,elementsSelectable:Pe,elevateNodesOnSelect:or,elevateEdgesOnSelect:vi,minZoom:Fe,maxZoom:Ue,nodeExtent:Ae,onNodesChange:sr,onEdgesChange:Vn,snapToGrid:ae,snapGrid:I,connectionMode:$,translateExtent:Ne,connectOnClick:ps,defaultEdgeOptions:wa,fitView:yi,fitViewOptions:ba,onNodesDelete:V,onEdgesDelete:F,onDelete:M,onNodeDragStart:T,onNodeDrag:z,onNodeDragStop:L,onSelectionDrag:G,onSelectionDragStart:R,onSelectionDragStop:H,onMove:m,onMoveStart:p,onMoveEnd:g,noPanClassName:Qr,nodeOrigin:ke,rfId:Cn,autoPanOnConnect:bi,autoPanOnNodeDrag:Zt,autoPanSpeed:Lr,onError:Jr,connectionRadius:fo,isValidConnection:Ir,selectNodesOnDrag:ce,nodeDragThreshold:gs,connectionDragThreshold:xr,onBeforeDelete:Q,debug:ys,ariaLabelConfig:xa,zIndexMode:lr}),v.jsx(GM,{onSelectionChange:O}),qt,v.jsx(UM,{proOptions:zr,position:Or}),v.jsx(HM,{rfId:Cn,disableKeyboardA11y:wr})]})})}var x4=BE(w4);const _4=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function S4({children:e}){const t=gt(_4);return t?da.createPortal(e,t):null}function C4({dimensions:e,lineWidth:t,variant:r,className:a}){return v.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:dn(["react-flow__background-pattern",r,a])})}function E4({radius:e,className:t}){return v.jsx("circle",{cx:e,cy:e,r:e,className:dn(["react-flow__background-pattern","dots",t])})}var rs;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(rs||(rs={}));const k4={[rs.Dots]:1,[rs.Lines]:1,[rs.Cross]:6},N4=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function ck({id:e,variant:t=rs.Dots,gap:r=20,size:a,lineWidth:s=1,offset:o=0,color:l,bgColor:u,style:d,className:f,patternClassName:m}){const p=N.useRef(null),{transform:g,patternId:y}=gt(N4,Gt),_=a||k4[t],b=t===rs.Dots,w=t===rs.Cross,x=Array.isArray(r)?r:[r,r],S=[x[0]*g[2]||1,x[1]*g[2]||1],C=_*g[2],A=Array.isArray(o)?o:[o,o],E=w?[C,C]:S,j=[A[0]*g[2]||1+E[0]/2,A[1]*g[2]||1+E[1]/2],T=`${y}${e||""}`;return v.jsxs("svg",{className:dn(["react-flow__background",f]),style:{...d,...Mm,"--xy-background-color-props":u,"--xy-background-pattern-color-props":l},ref:p,"data-testid":"rf__background",children:[v.jsx("pattern",{id:T,x:g[0]%S[0],y:g[1]%S[1],width:S[0],height:S[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`,children:b?v.jsx(E4,{radius:C/2,className:m}):v.jsx(C4,{dimensions:E,lineWidth:s,variant:t,className:m})}),v.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${T})`})]})}ck.displayName="Background";const A4=N.memo(ck);function j4(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:v.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function T4(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:v.jsx("path",{d:"M0 0h32v4.2H0z"})})}function D4(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:v.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function R4(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function $4(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function wf({children:e,className:t,...r}){return v.jsx("button",{type:"button",className:dn(["react-flow__controls-button",t]),...r,children:e})}const M4=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function uk({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:a=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:l,onFitView:u,onInteractiveChange:d,className:f,children:m,position:p="bottom-left",orientation:g="vertical","aria-label":y}){const _=Qt(),{isInteractive:b,minZoomReached:w,maxZoomReached:x,ariaLabelConfig:S}=gt(M4,Gt),{zoomIn:C,zoomOut:A,fitView:E}=Ev(),j=()=>{C(),o?.()},T=()=>{A(),l?.()},z=()=>{E(s),u?.()},L=()=>{_.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),d?.(!b)},V=g==="horizontal"?"horizontal":"vertical";return v.jsxs($m,{className:dn(["react-flow__controls",V,f]),position:p,style:e,"data-testid":"rf__controls","aria-label":y??S["controls.ariaLabel"],children:[t&&v.jsxs(v.Fragment,{children:[v.jsx(wf,{onClick:j,className:"react-flow__controls-zoomin",title:S["controls.zoomIn.ariaLabel"],"aria-label":S["controls.zoomIn.ariaLabel"],disabled:x,children:v.jsx(j4,{})}),v.jsx(wf,{onClick:T,className:"react-flow__controls-zoomout",title:S["controls.zoomOut.ariaLabel"],"aria-label":S["controls.zoomOut.ariaLabel"],disabled:w,children:v.jsx(T4,{})})]}),r&&v.jsx(wf,{className:"react-flow__controls-fitview",onClick:z,title:S["controls.fitView.ariaLabel"],"aria-label":S["controls.fitView.ariaLabel"],children:v.jsx(D4,{})}),a&&v.jsx(wf,{className:"react-flow__controls-interactive",onClick:L,title:S["controls.interactive.ariaLabel"],"aria-label":S["controls.interactive.ariaLabel"],children:b?v.jsx($4,{}):v.jsx(R4,{})}),m]})}uk.displayName="Controls";const O4=N.memo(uk);function z4({id:e,x:t,y:r,width:a,height:s,style:o,color:l,strokeColor:u,strokeWidth:d,className:f,borderRadius:m,shapeRendering:p,selected:g,onClick:y}){const{background:_,backgroundColor:b}=o||{},w=l||_||b;return v.jsx("rect",{className:dn(["react-flow__minimap-node",{selected:g},f]),x:t,y:r,rx:m,ry:m,width:a,height:s,style:{fill:w,stroke:u,strokeWidth:d},shapeRendering:p,onClick:y?x=>y(x,e):void 0})}const L4=N.memo(z4),I4=e=>e.nodes.map(t=>t.id),My=e=>e instanceof Function?e:()=>e;function P4({nodeStrokeColor:e,nodeColor:t,nodeClassName:r="",nodeBorderRadius:a=5,nodeStrokeWidth:s,nodeComponent:o=L4,onClick:l}){const u=gt(I4,Gt),d=My(t),f=My(e),m=My(r),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return v.jsx(v.Fragment,{children:u.map(g=>v.jsx(H4,{id:g,nodeColorFunc:d,nodeStrokeColorFunc:f,nodeClassNameFunc:m,nodeBorderRadius:a,nodeStrokeWidth:s,NodeComponent:o,onClick:l,shapeRendering:p},g))})}function B4({id:e,nodeColorFunc:t,nodeStrokeColorFunc:r,nodeClassNameFunc:a,nodeBorderRadius:s,nodeStrokeWidth:o,shapeRendering:l,NodeComponent:u,onClick:d}){const{node:f,x:m,y:p,width:g,height:y}=gt(_=>{const{internals:b}=_.nodeLookup.get(e),w=b.userNode,{x,y:S}=b.positionAbsolute,{width:C,height:A}=va(w);return{node:w,x,y:S,width:C,height:A}},Gt);return!f||f.hidden||!fE(f)?null:v.jsx(u,{x:m,y:p,width:g,height:y,style:f.style,selected:!!f.selected,className:a(f),color:t(f),borderRadius:s,strokeColor:r(f),strokeWidth:o,shapeRendering:l,onClick:d,id:f.id})}const H4=N.memo(B4);var U4=N.memo(P4);const F4=200,q4=150,V4=e=>!e.hidden,Y4=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?dE(Nl(e.nodeLookup,{filter:V4}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},G4="react-flow__minimap-desc";function dk({style:e,className:t,nodeStrokeColor:r,nodeColor:a,nodeClassName:s="",nodeBorderRadius:o=5,nodeStrokeWidth:l,nodeComponent:u,bgColor:d,maskColor:f,maskStrokeColor:m,maskStrokeWidth:p,position:g="bottom-right",onClick:y,onNodeClick:_,pannable:b=!1,zoomable:w=!1,ariaLabel:x,inversePan:S,zoomStep:C=1,offsetScale:A=5}){const E=Qt(),j=N.useRef(null),{boundingRect:T,viewBB:z,rfId:L,panZoom:V,translateExtent:F,flowWidth:M,flowHeight:O,ariaLabelConfig:R}=gt(Y4,Gt),G=e?.width??F4,H=e?.height??q4,U=T.width/G,Z=T.height/H,X=Math.max(U,Z),Q=X*G,$=X*H,B=A*X,K=T.x-(Q-T.width)/2-B,P=T.y-($-T.height)/2-B,q=Q+B*2,J=$+B*2,le=`${G4}-${L}`,oe=N.useRef(0),he=N.useRef();oe.current=X,N.useEffect(()=>{if(j.current&&V)return he.current=sM({domNode:j.current,panZoom:V,getTransform:()=>E.getState().transform,getViewScale:()=>oe.current}),()=>{he.current?.destroy()}},[V]),N.useEffect(()=>{he.current?.update({translateExtent:F,width:M,height:O,inversePan:S,pannable:b,zoomStep:C,zoomable:w})},[b,w,S,C,F,M,O]);const ve=y?ae=>{const[I,ue]=he.current?.pointer(ae)||[0,0];y(ae,{x:I,y:ue})}:void 0,W=_?N.useCallback((ae,I)=>{const ue=E.getState().nodeLookup.get(I).internals.userNode;_(ae,ue)},[]):void 0,ie=x??R["minimap.ariaLabel"];return v.jsx($m,{position:g,style:{...e,"--xy-minimap-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-width-props":typeof p=="number"?p*X:void 0,"--xy-minimap-node-background-color-props":typeof a=="string"?a:void 0,"--xy-minimap-node-stroke-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-width-props":typeof l=="number"?l:void 0},className:dn(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:v.jsxs("svg",{width:G,height:H,viewBox:`${K} ${P} ${q} ${J}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":le,ref:j,onClick:ve,children:[ie&&v.jsx("title",{id:le,children:ie}),v.jsx(U4,{onClick:W,nodeColor:a,nodeStrokeColor:r,nodeBorderRadius:o,nodeClassName:s,nodeStrokeWidth:l,nodeComponent:u}),v.jsx("path",{className:"react-flow__minimap-mask",d:`M${K-B},${P-B}h${q+B*2}v${J+B*2}h${-q-B*2}z
        M${z.x},${z.y}h${z.width}v${z.height}h${-z.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}dk.displayName="MiniMap";N.memo(dk);const K4=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,X4={[oo.Line]:"right",[oo.Handle]:"bottom-right"};function Z4({nodeId:e,position:t,variant:r=oo.Handle,className:a,style:s=void 0,children:o,color:l,minWidth:u=10,minHeight:d=10,maxWidth:f=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:g,autoScale:y=!0,shouldResize:_,onResizeStart:b,onResize:w,onResizeEnd:x}){const S=Nv(),C=typeof e=="string"?e:S,A=Qt(),E=N.useRef(null),j=r===oo.Handle,T=gt(N.useCallback(K4(j&&y),[j,y]),Gt),z=N.useRef(null),L=t??X4[r];N.useEffect(()=>{if(!(!E.current||!C))return z.current||(z.current=_M({domNode:E.current,nodeId:C,getStoreItems:()=>{const{nodeLookup:F,transform:M,snapGrid:O,snapToGrid:R,nodeOrigin:G,domNode:H}=A.getState();return{nodeLookup:F,transform:M,snapGrid:O,snapToGrid:R,nodeOrigin:G,paneDomNode:H}},onChange:(F,M)=>{const{triggerNodeChanges:O,nodeLookup:R,parentLookup:G,nodeOrigin:H}=A.getState(),U=[],Z={x:F.x,y:F.y},X=R.get(C);if(X&&X.expandParent&&X.parentId){const Q=X.origin??H,$=F.width??X.measured.width??0,B=F.height??X.measured.height??0,K={id:X.id,parentId:X.parentId,rect:{width:$,height:B,...hE({x:F.x??X.position.x,y:F.y??X.position.y},{width:$,height:B},X.parentId,R,Q)}},P=Cv([K],R,G,H);U.push(...P),Z.x=F.x?Math.max(Q[0]*$,F.x):void 0,Z.y=F.y?Math.max(Q[1]*B,F.y):void 0}if(Z.x!==void 0&&Z.y!==void 0){const Q={id:C,type:"position",position:{...Z}};U.push(Q)}if(F.width!==void 0&&F.height!==void 0){const $={id:C,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:F.width,height:F.height}};U.push($)}for(const Q of M){const $={...Q,type:"position"};U.push($)}O(U)},onEnd:({width:F,height:M})=>{const O={id:C,type:"dimensions",resizing:!1,dimensions:{width:F,height:M}};A.getState().triggerNodeChanges([O])}})),z.current.update({controlPosition:L,boundaries:{minWidth:u,minHeight:d,maxWidth:f,maxHeight:m},keepAspectRatio:p,resizeDirection:g,onResizeStart:b,onResize:w,onResizeEnd:x,shouldResize:_}),()=>{z.current?.destroy()}},[L,u,d,f,m,p,b,w,x,_]);const V=L.split("-");return v.jsx("div",{className:dn(["react-flow__resize-control","nodrag",...V,r,a]),ref:E,style:{...s,scale:T,...l&&{[j?"backgroundColor":"borderColor"]:l}},children:o})}const $_=N.memo(Z4);function W4({nodeId:e,isVisible:t=!0,handleClassName:r,handleStyle:a,lineClassName:s,lineStyle:o,color:l,minWidth:u=10,minHeight:d=10,maxWidth:f=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:p=!1,autoScale:g=!0,shouldResize:y,onResizeStart:_,onResize:b,onResizeEnd:w}){return t?v.jsxs(v.Fragment,{children:[gM.map(x=>v.jsx($_,{className:s,style:o,nodeId:e,position:x,variant:oo.Line,color:l,minWidth:u,minHeight:d,maxWidth:f,maxHeight:m,onResizeStart:_,keepAspectRatio:p,autoScale:g,shouldResize:y,onResize:b,onResizeEnd:w},x)),pM.map(x=>v.jsx($_,{className:r,style:a,nodeId:e,position:x,color:l,minWidth:u,minHeight:d,maxWidth:f,maxHeight:m,onResizeStart:_,keepAspectRatio:p,autoScale:g,shouldResize:y,onResize:b,onResizeEnd:w},x))]}):null}const Q4=e=>e.domNode?.querySelector(".react-flow__renderer");function J4({children:e}){const t=gt(Q4);return t?da.createPortal(e,t):null}const ez=(e,t)=>e?.internals.positionAbsolute.x!==t?.internals.positionAbsolute.x||e?.internals.positionAbsolute.y!==t?.internals.positionAbsolute.y||e?.measured.width!==t?.measured.width||e?.measured.height!==t?.measured.height||e?.selected!==t?.selected||e?.internals.z!==t?.internals.z,tz=(e,t)=>{if(e.size!==t.size)return!1;for(const[r,a]of e)if(ez(a,t.get(r)))return!1;return!0},nz=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2],selectedNodesCount:e.nodes.filter(t=>t.selected).length});function M_({nodeId:e,children:t,className:r,style:a,isVisible:s,position:o=ze.Top,offset:l=10,align:u="center",...d}){const f=Nv(),m=N.useCallback(E=>(Array.isArray(e)?e:[e||f||""]).reduce((z,L)=>{const V=E.nodeLookup.get(L);return V&&z.set(V.id,V),z},new Map),[e,f]),p=gt(m,tz),{x:g,y,zoom:_,selectedNodesCount:b}=gt(nz,Gt);if(!(typeof s=="boolean"?s:p.size===1&&p.values().next().value?.selected&&b===1)||!p.size)return null;const x=Nl(p),S=Array.from(p.values()),C=Math.max(...S.map(E=>E.internals.z+1)),A={position:"absolute",transform:F5(x,{x:g,y,zoom:_},o,l,u),zIndex:C,...a};return v.jsx(J4,{children:v.jsx("div",{style:A,className:dn(["react-flow__node-toolbar",r]),...d,"data-id":S.reduce((E,j)=>`${E}${j.id} `,"").trim(),children:t})})}function Om(e,t,r,a=[],s=100){N.useEffect(()=>{if(!r)return;const o=u=>{const d=u.target,f=a.some(m=>d.closest(m));e.current&&!e.current.contains(d)&&!f&&t()},l=setTimeout(()=>{document.addEventListener("mousedown",o,!0),document.addEventListener("click",o,!0)},s);return()=>{clearTimeout(l),document.removeEventListener("mousedown",o,!0),document.removeEventListener("click",o,!0)}},[r,e,t,a,s])}function Av({value:e,availableItems:t,placeholder:r="Add item...",variant:a="default",onSave:s,onCreateItem:o,compactMode:l=!1,autoEdit:u=!1,useInWrapper:d=!1,onTabPress:f,onDeactivate:m,onNavigate:p,onRegisterSave:g}){const[y,_]=N.useState(u),[b,w]=N.useState(e||[]),[x,S]=N.useState(""),[C,A]=N.useState(!1),[E,j]=N.useState(!1),[T,z]=N.useState(-1),L=N.useRef(null),V=N.useRef(null),F=N.useRef(null),M=N.useRef(()=>{}),O=`picker-variant-${a}`;N.useEffect(()=>{C&&F.current&&V.current&&setTimeout(()=>{const q=F.current,J=V.current;if(!q||!J)return;const le=q.getBoundingClientRect(),oe=J.getBoundingClientRect();let he=q.parentElement;for(;he&&he!==document.body;){const ve=window.getComputedStyle(he);if(ve.overflow==="auto"||ve.overflow==="scroll"||ve.overflowY==="auto"||ve.overflowY==="scroll")break;he=he.parentElement}if(he&&he!==document.body){const ve=he.getBoundingClientRect();if(le.bottom>ve.bottom){const W=le.bottom-ve.bottom+20;if(oe.top-W>=ve.top)he.scrollBy({top:W,behavior:"smooth"});else{const ae=ve.height/2-oe.height/2,I=oe.top-ve.top-ae;he.scrollBy({top:I,behavior:"smooth"})}}}},100)},[C]),N.useEffect(()=>{z(-1)},[x]),N.useEffect(()=>{u&&!y&&!d?(_(!0),A(!1),S(""),z(-1),setTimeout(()=>V.current?.focus(),50)):!u&&y&&(_(!1),A(!1),S(""),z(-1))},[u,d]);const R=N.useCallback(()=>{(b.length!==e.length||!b.every(J=>e.includes(J)))&&s?.(b)},[b,e,s]);N.useEffect(()=>{M.current=R},[R]),N.useEffect(()=>{g&&g(()=>M.current())},[g]);const G=N.useCallback(()=>{R(),_(!1),A(!1),S(""),l&&j(!1)},[R,l]);Om(L,G,y,[".picker-suggestions",".picker-tag-remove",".picker-suggestion-item",".picker-tags-container"],100);const H=()=>{l&&!E?j(!0):(_(!0),w(e||[]),setTimeout(()=>V.current?.focus(),0))},U=q=>{const J=b.filter(le=>le!==q);w(J),setTimeout(()=>V.current?.focus(),0)},Z=q=>{if(!b.includes(q)){const J=[...b,q];w(J)}S(""),setTimeout(()=>{V.current?.focus(),A(!0)},0)},X=async()=>{if(!(!x.trim()||!o))try{const q=await o(x.trim());if(q&&!b.includes(q)){const J=[...b,q];w(J)}S(""),z(-1),setTimeout(()=>{V.current?.focus(),A(!0)},100)}catch(q){console.error("Failed to create item:",q)}},Q=q=>{const J=B(),le=o&&x.trim()&&!t.some(he=>he.name.toLowerCase()===x.trim().toLowerCase()),oe=J.length+(le?1:0);if(q.key==="ArrowDown")q.preventDefault(),!C&&oe>0?(A(!0),z(0)):T<oe-1&&z(T+1);else if(q.key==="ArrowUp")q.preventDefault(),T>0&&z(T-1);else if(q.key==="Enter")q.preventDefault(),le&&T===J.length?X():T>=0&&T<J.length?(Z(J[T].ref),z(-1)):!x&&C&&A(!1);else if(q.key==="Backspace"&&x===""&&b.length>0){q.preventDefault();const he=b[b.length-1];U(he)}else q.key==="Tab"?(q.preventDefault(),R(),_(!1),A(!1),S(""),z(-1),f&&f(q.shiftKey)):q.key==="Escape"&&(q.preventDefault(),q.stopPropagation(),R(),_(!1),A(!1),S(""),z(-1),setTimeout(()=>L.current?.focus(),0))},$=()=>t.filter(q=>!b.includes(q.ref)),B=()=>{const q=$();return x?q.filter(J=>J.name.toLowerCase().includes(x.toLowerCase())):q},K=q=>t.find(J=>J.ref===q)?.name||q,P=()=>{switch(a){case"components":return"component";case"dataflows":return"flow";case"assets":return"asset";case"threats":return"threat";case"controls":return"control";default:return"item"}};return v.jsx("div",{className:`editable-picker-wrapper ${O}`,ref:L,tabIndex:0,onKeyDown:q=>{y?q.key==="Escape"&&q.stopPropagation():q.key==="Enter"||q.key===" "?(q.preventDefault(),H()):q.key==="Tab"?f&&(q.preventDefault(),f(q.shiftKey)):q.key==="Escape"?(q.preventDefault(),q.stopPropagation(),m?.()):p&&(q.key==="ArrowUp"||q.key==="ArrowDown"||q.key==="ArrowLeft"||q.key==="ArrowRight")&&(q.preventDefault(),p({ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right"}[q.key]))},onClick:q=>{!y&&!q.target.closest("button")&&q.stopPropagation()},children:y?v.jsxs("div",{className:"picker-tags-container",children:[v.jsxs("div",{className:"picker-tags",children:[b.map(q=>v.jsxs("span",{className:`picker-tag ${O}`,children:[K(q),v.jsx("button",{className:"picker-tag-remove",onClick:()=>U(q),title:"Remove item",children:""})]},q)),v.jsx("input",{ref:V,type:"text",className:"picker-tag-input",placeholder:b.length===0?r:"",value:x,onChange:q=>{S(q.target.value),A(!0)},onFocus:()=>A(!0),onKeyDown:Q})]}),C&&(()=>{const q=B(),J=o&&x.trim()&&!t.some(oe=>oe.name.toLowerCase()===x.trim().toLowerCase());return q.length>0||J?v.jsxs("div",{className:"picker-suggestions",ref:F,children:[q.map((oe,he)=>v.jsx("div",{className:`picker-suggestion-item ${he===T?"highlighted":""}`,onClick:()=>Z(oe.ref),onMouseEnter:()=>z(he),children:oe.name},oe.ref)),J&&v.jsxs("div",{className:`picker-suggestion-item picker-create-new ${q.length===T?"highlighted":""}`,onClick:X,onMouseEnter:()=>z(q.length),children:[v.jsx("span",{className:"create-new-icon",children:"+"}),' Create "',x.trim(),'"']})]}):null})()]}):l&&!E?v.jsx("div",{className:"picker-compact-display",onClick:H,children:b.length===0?v.jsx("span",{className:"no-items-text",children:"-"}):v.jsxs("span",{className:`picker-count-badge ${O}`,title:b.map(q=>K(q)).join(", "),children:[b.length," ",P(),b.length!==1?"s":""]})}):v.jsx("div",{className:"picker-tags-display",onClick:H,children:b.length===0?v.jsx("span",{className:"no-items-text",children:"-"}):b.map(q=>v.jsx("span",{className:`picker-tag-readonly ${O}`,children:K(q)},q))})})}function fk(e){return typeof e>"u"||e===null}function rz(e){return typeof e=="object"&&e!==null}function iz(e){return Array.isArray(e)?e:fk(e)?[]:[e]}function az(e,t){var r,a,s,o;if(t)for(o=Object.keys(t),r=0,a=o.length;r<a;r+=1)s=o[r],e[s]=t[s];return e}function sz(e,t){var r="",a;for(a=0;a<t;a+=1)r+=e;return r}function oz(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var lz=fk,cz=rz,uz=iz,dz=sz,fz=oz,hz=az,Nn={isNothing:lz,isObject:cz,toArray:uz,repeat:dz,isNegativeZero:fz,extend:hz};function hk(e,t){var r="",a=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),a+" "+r):a}function du(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=hk(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}du.prototype=Object.create(Error.prototype);du.prototype.constructor=du;du.prototype.toString=function(t){return this.name+": "+hk(this,t)};var rr=du;function Oy(e,t,r,a,s){var o="",l="",u=Math.floor(s/2)-1;return a-t>u&&(o=" ... ",t=a-u+o.length),r-a>u&&(l=" ...",r=a+u-l.length),{str:o+e.slice(t,r).replace(/\t/g,"")+l,pos:a-t+o.length}}function zy(e,t){return Nn.repeat(" ",t-e.length)+e}function mz(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,a=[0],s=[],o,l=-1;o=r.exec(e.buffer);)s.push(o.index),a.push(o.index+o[0].length),e.position<=o.index&&l<0&&(l=a.length-2);l<0&&(l=a.length-1);var u="",d,f,m=Math.min(e.line+t.linesAfter,s.length).toString().length,p=t.maxLength-(t.indent+m+3);for(d=1;d<=t.linesBefore&&!(l-d<0);d++)f=Oy(e.buffer,a[l-d],s[l-d],e.position-(a[l]-a[l-d]),p),u=Nn.repeat(" ",t.indent)+zy((e.line-d+1).toString(),m)+" | "+f.str+`
`+u;for(f=Oy(e.buffer,a[l],s[l],e.position,p),u+=Nn.repeat(" ",t.indent)+zy((e.line+1).toString(),m)+" | "+f.str+`
`,u+=Nn.repeat("-",t.indent+m+3+f.pos)+`^
`,d=1;d<=t.linesAfter&&!(l+d>=s.length);d++)f=Oy(e.buffer,a[l+d],s[l+d],e.position-(a[l]-a[l+d]),p),u+=Nn.repeat(" ",t.indent)+zy((e.line+d+1).toString(),m)+" | "+f.str+`
`;return u.replace(/\n$/,"")}var pz=mz,gz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],yz=["scalar","sequence","mapping"];function vz(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(a){t[String(a)]=r})}),t}function bz(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(gz.indexOf(r)===-1)throw new rr('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=vz(t.styleAliases||null),yz.indexOf(this.kind)===-1)throw new rr('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Fn=bz;function O_(e,t){var r=[];return e[t].forEach(function(a){var s=r.length;r.forEach(function(o,l){o.tag===a.tag&&o.kind===a.kind&&o.multi===a.multi&&(s=l)}),r[s]=a}),r}function wz(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function a(s){s.multi?(e.multi[s.kind].push(s),e.multi.fallback.push(s)):e[s.kind][s.tag]=e.fallback[s.tag]=s}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(a);return e}function $0(e){return this.extend(e)}$0.prototype.extend=function(t){var r=[],a=[];if(t instanceof Fn)a.push(t);else if(Array.isArray(t))a=a.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(a=a.concat(t.explicit));else throw new rr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Fn))throw new rr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new rr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new rr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),a.forEach(function(o){if(!(o instanceof Fn))throw new rr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create($0.prototype);return s.implicit=(this.implicit||[]).concat(r),s.explicit=(this.explicit||[]).concat(a),s.compiledImplicit=O_(s,"implicit"),s.compiledExplicit=O_(s,"explicit"),s.compiledTypeMap=wz(s.compiledImplicit,s.compiledExplicit),s};var mk=$0,pk=new Fn("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),gk=new Fn("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),yk=new Fn("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),vk=new mk({explicit:[pk,gk,yk]});function xz(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function _z(){return null}function Sz(e){return e===null}var bk=new Fn("tag:yaml.org,2002:null",{kind:"scalar",resolve:xz,construct:_z,predicate:Sz,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Cz(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function Ez(e){return e==="true"||e==="True"||e==="TRUE"}function kz(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var wk=new Fn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Cz,construct:Ez,predicate:kz,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Nz(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Az(e){return 48<=e&&e<=55}function jz(e){return 48<=e&&e<=57}function Tz(e){if(e===null)return!1;var t=e.length,r=0,a=!1,s;if(!t)return!1;if(s=e[r],(s==="-"||s==="+")&&(s=e[++r]),s==="0"){if(r+1===t)return!0;if(s=e[++r],s==="b"){for(r++;r<t;r++)if(s=e[r],s!=="_"){if(s!=="0"&&s!=="1")return!1;a=!0}return a&&s!=="_"}if(s==="x"){for(r++;r<t;r++)if(s=e[r],s!=="_"){if(!Nz(e.charCodeAt(r)))return!1;a=!0}return a&&s!=="_"}if(s==="o"){for(r++;r<t;r++)if(s=e[r],s!=="_"){if(!Az(e.charCodeAt(r)))return!1;a=!0}return a&&s!=="_"}}if(s==="_")return!1;for(;r<t;r++)if(s=e[r],s!=="_"){if(!jz(e.charCodeAt(r)))return!1;a=!0}return!(!a||s==="_")}function Dz(e){var t=e,r=1,a;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),a=t[0],(a==="-"||a==="+")&&(a==="-"&&(r=-1),t=t.slice(1),a=t[0]),t==="0")return 0;if(a==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function Rz(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Nn.isNegativeZero(e)}var xk=new Fn("tag:yaml.org,2002:int",{kind:"scalar",resolve:Tz,construct:Dz,predicate:Rz,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),$z=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Mz(e){return!(e===null||!$z.test(e)||e[e.length-1]==="_")}function Oz(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var zz=/^[-+]?[0-9]+e/;function Lz(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Nn.isNegativeZero(e))return"-0.0";return r=e.toString(10),zz.test(r)?r.replace("e",".e"):r}function Iz(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Nn.isNegativeZero(e))}var _k=new Fn("tag:yaml.org,2002:float",{kind:"scalar",resolve:Mz,construct:Oz,predicate:Iz,represent:Lz,defaultStyle:"lowercase"}),Sk=vk.extend({implicit:[bk,wk,xk,_k]}),Ck=Sk,Ek=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),kk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Pz(e){return e===null?!1:Ek.exec(e)!==null||kk.exec(e)!==null}function Bz(e){var t,r,a,s,o,l,u,d=0,f=null,m,p,g;if(t=Ek.exec(e),t===null&&(t=kk.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],a=+t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(r,a,s));if(o=+t[4],l=+t[5],u=+t[6],t[7]){for(d=t[7].slice(0,3);d.length<3;)d+="0";d=+d}return t[9]&&(m=+t[10],p=+(t[11]||0),f=(m*60+p)*6e4,t[9]==="-"&&(f=-f)),g=new Date(Date.UTC(r,a,s,o,l,u,d)),f&&g.setTime(g.getTime()-f),g}function Hz(e){return e.toISOString()}var Nk=new Fn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Pz,construct:Bz,instanceOf:Date,represent:Hz});function Uz(e){return e==="<<"||e===null}var Ak=new Fn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Uz}),jv=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Fz(e){if(e===null)return!1;var t,r,a=0,s=e.length,o=jv;for(r=0;r<s;r++)if(t=o.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;a+=6}return a%8===0}function qz(e){var t,r,a=e.replace(/[\r\n=]/g,""),s=a.length,o=jv,l=0,u=[];for(t=0;t<s;t++)t%4===0&&t&&(u.push(l>>16&255),u.push(l>>8&255),u.push(l&255)),l=l<<6|o.indexOf(a.charAt(t));return r=s%4*6,r===0?(u.push(l>>16&255),u.push(l>>8&255),u.push(l&255)):r===18?(u.push(l>>10&255),u.push(l>>2&255)):r===12&&u.push(l>>4&255),new Uint8Array(u)}function Vz(e){var t="",r=0,a,s,o=e.length,l=jv;for(a=0;a<o;a++)a%3===0&&a&&(t+=l[r>>18&63],t+=l[r>>12&63],t+=l[r>>6&63],t+=l[r&63]),r=(r<<8)+e[a];return s=o%3,s===0?(t+=l[r>>18&63],t+=l[r>>12&63],t+=l[r>>6&63],t+=l[r&63]):s===2?(t+=l[r>>10&63],t+=l[r>>4&63],t+=l[r<<2&63],t+=l[64]):s===1&&(t+=l[r>>2&63],t+=l[r<<4&63],t+=l[64],t+=l[64]),t}function Yz(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var jk=new Fn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Fz,construct:qz,predicate:Yz,represent:Vz}),Gz=Object.prototype.hasOwnProperty,Kz=Object.prototype.toString;function Xz(e){if(e===null)return!0;var t=[],r,a,s,o,l,u=e;for(r=0,a=u.length;r<a;r+=1){if(s=u[r],l=!1,Kz.call(s)!=="[object Object]")return!1;for(o in s)if(Gz.call(s,o))if(!l)l=!0;else return!1;if(!l)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function Zz(e){return e!==null?e:[]}var Tk=new Fn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Xz,construct:Zz}),Wz=Object.prototype.toString;function Qz(e){if(e===null)return!0;var t,r,a,s,o,l=e;for(o=new Array(l.length),t=0,r=l.length;t<r;t+=1){if(a=l[t],Wz.call(a)!=="[object Object]"||(s=Object.keys(a),s.length!==1))return!1;o[t]=[s[0],a[s[0]]]}return!0}function Jz(e){if(e===null)return[];var t,r,a,s,o,l=e;for(o=new Array(l.length),t=0,r=l.length;t<r;t+=1)a=l[t],s=Object.keys(a),o[t]=[s[0],a[s[0]]];return o}var Dk=new Fn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Qz,construct:Jz}),e6=Object.prototype.hasOwnProperty;function t6(e){if(e===null)return!0;var t,r=e;for(t in r)if(e6.call(r,t)&&r[t]!==null)return!1;return!0}function n6(e){return e!==null?e:{}}var Rk=new Fn("tag:yaml.org,2002:set",{kind:"mapping",resolve:t6,construct:n6}),Tv=Ck.extend({implicit:[Nk,Ak],explicit:[jk,Tk,Dk,Rk]}),os=Object.prototype.hasOwnProperty,Kh=1,$k=2,Mk=3,Xh=4,Ly=1,r6=2,z_=3,i6=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,a6=/[\x85\u2028\u2029]/,s6=/[,\[\]\{\}]/,Ok=/^(?:!|!!|![a-z\-]+!)$/i,zk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function L_(e){return Object.prototype.toString.call(e)}function $i(e){return e===10||e===13}function Qs(e){return e===9||e===32}function yr(e){return e===9||e===32||e===10||e===13}function al(e){return e===44||e===91||e===93||e===123||e===125}function o6(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function l6(e){return e===120?2:e===117?4:e===85?8:0}function c6(e){return 48<=e&&e<=57?e-48:-1}function I_(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function u6(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function Lk(e,t,r){t==="__proto__"?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:r}):e[t]=r}var Ik=new Array(256),Pk=new Array(256);for(var Zo=0;Zo<256;Zo++)Ik[Zo]=I_(Zo)?1:0,Pk[Zo]=I_(Zo);function d6(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Tv,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Bk(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=pz(r),new rr(t,r)}function et(e,t){throw Bk(e,t)}function Zh(e,t){e.onWarning&&e.onWarning.call(null,Bk(e,t))}var P_={YAML:function(t,r,a){var s,o,l;t.version!==null&&et(t,"duplication of %YAML directive"),a.length!==1&&et(t,"YAML directive accepts exactly one argument"),s=/^([0-9]+)\.([0-9]+)$/.exec(a[0]),s===null&&et(t,"ill-formed argument of the YAML directive"),o=parseInt(s[1],10),l=parseInt(s[2],10),o!==1&&et(t,"unacceptable YAML version of the document"),t.version=a[0],t.checkLineBreaks=l<2,l!==1&&l!==2&&Zh(t,"unsupported YAML version of the document")},TAG:function(t,r,a){var s,o;a.length!==2&&et(t,"TAG directive accepts exactly two arguments"),s=a[0],o=a[1],Ok.test(s)||et(t,"ill-formed tag handle (first argument) of the TAG directive"),os.call(t.tagMap,s)&&et(t,'there is a previously declared suffix for "'+s+'" tag handle'),zk.test(o)||et(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{et(t,"tag prefix is malformed: "+o)}t.tagMap[s]=o}};function is(e,t,r,a){var s,o,l,u;if(t<r){if(u=e.input.slice(t,r),a)for(s=0,o=u.length;s<o;s+=1)l=u.charCodeAt(s),l===9||32<=l&&l<=1114111||et(e,"expected valid JSON character");else i6.test(u)&&et(e,"the stream contains non-printable characters");e.result+=u}}function B_(e,t,r,a){var s,o,l,u;for(Nn.isObject(r)||et(e,"cannot merge mappings; the provided source object is unacceptable"),s=Object.keys(r),l=0,u=s.length;l<u;l+=1)o=s[l],os.call(t,o)||(Lk(t,o,r[o]),a[o]=!0)}function sl(e,t,r,a,s,o,l,u,d){var f,m;if(Array.isArray(s))for(s=Array.prototype.slice.call(s),f=0,m=s.length;f<m;f+=1)Array.isArray(s[f])&&et(e,"nested arrays are not supported inside keys"),typeof s=="object"&&L_(s[f])==="[object Object]"&&(s[f]="[object Object]");if(typeof s=="object"&&L_(s)==="[object Object]"&&(s="[object Object]"),s=String(s),t===null&&(t={}),a==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(f=0,m=o.length;f<m;f+=1)B_(e,t,o[f],r);else B_(e,t,o,r);else!e.json&&!os.call(r,s)&&os.call(t,s)&&(e.line=l||e.line,e.lineStart=u||e.lineStart,e.position=d||e.position,et(e,"duplicated mapping key")),Lk(t,s,o),delete r[s];return t}function Dv(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):et(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function bn(e,t,r){for(var a=0,s=e.input.charCodeAt(e.position);s!==0;){for(;Qs(s);)s===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),s=e.input.charCodeAt(++e.position);if(t&&s===35)do s=e.input.charCodeAt(++e.position);while(s!==10&&s!==13&&s!==0);if($i(s))for(Dv(e),s=e.input.charCodeAt(e.position),a++,e.lineIndent=0;s===32;)e.lineIndent++,s=e.input.charCodeAt(++e.position);else break}return r!==-1&&a!==0&&e.lineIndent<r&&Zh(e,"deficient indentation"),a}function zm(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||yr(r)))}function Rv(e,t){t===1?e.result+=" ":t>1&&(e.result+=Nn.repeat(`
`,t-1))}function f6(e,t,r){var a,s,o,l,u,d,f,m,p=e.kind,g=e.result,y;if(y=e.input.charCodeAt(e.position),yr(y)||al(y)||y===35||y===38||y===42||y===33||y===124||y===62||y===39||y===34||y===37||y===64||y===96||(y===63||y===45)&&(s=e.input.charCodeAt(e.position+1),yr(s)||r&&al(s)))return!1;for(e.kind="scalar",e.result="",o=l=e.position,u=!1;y!==0;){if(y===58){if(s=e.input.charCodeAt(e.position+1),yr(s)||r&&al(s))break}else if(y===35){if(a=e.input.charCodeAt(e.position-1),yr(a))break}else{if(e.position===e.lineStart&&zm(e)||r&&al(y))break;if($i(y))if(d=e.line,f=e.lineStart,m=e.lineIndent,bn(e,!1,-1),e.lineIndent>=t){u=!0,y=e.input.charCodeAt(e.position);continue}else{e.position=l,e.line=d,e.lineStart=f,e.lineIndent=m;break}}u&&(is(e,o,l,!1),Rv(e,e.line-d),o=l=e.position,u=!1),Qs(y)||(l=e.position+1),y=e.input.charCodeAt(++e.position)}return is(e,o,l,!1),e.result?!0:(e.kind=p,e.result=g,!1)}function h6(e,t){var r,a,s;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,a=s=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(is(e,a,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)a=e.position,e.position++,s=e.position;else return!0;else $i(r)?(is(e,a,s,!0),Rv(e,bn(e,!1,t)),a=s=e.position):e.position===e.lineStart&&zm(e)?et(e,"unexpected end of the document within a single quoted scalar"):(e.position++,s=e.position);et(e,"unexpected end of the stream within a single quoted scalar")}function m6(e,t){var r,a,s,o,l,u;if(u=e.input.charCodeAt(e.position),u!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=a=e.position;(u=e.input.charCodeAt(e.position))!==0;){if(u===34)return is(e,r,e.position,!0),e.position++,!0;if(u===92){if(is(e,r,e.position,!0),u=e.input.charCodeAt(++e.position),$i(u))bn(e,!1,t);else if(u<256&&Ik[u])e.result+=Pk[u],e.position++;else if((l=l6(u))>0){for(s=l,o=0;s>0;s--)u=e.input.charCodeAt(++e.position),(l=o6(u))>=0?o=(o<<4)+l:et(e,"expected hexadecimal character");e.result+=u6(o),e.position++}else et(e,"unknown escape sequence");r=a=e.position}else $i(u)?(is(e,r,a,!0),Rv(e,bn(e,!1,t)),r=a=e.position):e.position===e.lineStart&&zm(e)?et(e,"unexpected end of the document within a double quoted scalar"):(e.position++,a=e.position)}et(e,"unexpected end of the stream within a double quoted scalar")}function p6(e,t){var r=!0,a,s,o,l=e.tag,u,d=e.anchor,f,m,p,g,y,_=Object.create(null),b,w,x,S;if(S=e.input.charCodeAt(e.position),S===91)m=93,y=!1,u=[];else if(S===123)m=125,y=!0,u={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),S=e.input.charCodeAt(++e.position);S!==0;){if(bn(e,!0,t),S=e.input.charCodeAt(e.position),S===m)return e.position++,e.tag=l,e.anchor=d,e.kind=y?"mapping":"sequence",e.result=u,!0;r?S===44&&et(e,"expected the node content, but found ','"):et(e,"missed comma between flow collection entries"),w=b=x=null,p=g=!1,S===63&&(f=e.input.charCodeAt(e.position+1),yr(f)&&(p=g=!0,e.position++,bn(e,!0,t))),a=e.line,s=e.lineStart,o=e.position,wl(e,t,Kh,!1,!0),w=e.tag,b=e.result,bn(e,!0,t),S=e.input.charCodeAt(e.position),(g||e.line===a)&&S===58&&(p=!0,S=e.input.charCodeAt(++e.position),bn(e,!0,t),wl(e,t,Kh,!1,!0),x=e.result),y?sl(e,u,_,w,b,x,a,s,o):p?u.push(sl(e,null,_,w,b,x,a,s,o)):u.push(b),bn(e,!0,t),S=e.input.charCodeAt(e.position),S===44?(r=!0,S=e.input.charCodeAt(++e.position)):r=!1}et(e,"unexpected end of the stream within a flow collection")}function g6(e,t){var r,a,s=Ly,o=!1,l=!1,u=t,d=0,f=!1,m,p;if(p=e.input.charCodeAt(e.position),p===124)a=!1;else if(p===62)a=!0;else return!1;for(e.kind="scalar",e.result="";p!==0;)if(p=e.input.charCodeAt(++e.position),p===43||p===45)Ly===s?s=p===43?z_:r6:et(e,"repeat of a chomping mode identifier");else if((m=c6(p))>=0)m===0?et(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?et(e,"repeat of an indentation width identifier"):(u=t+m-1,l=!0);else break;if(Qs(p)){do p=e.input.charCodeAt(++e.position);while(Qs(p));if(p===35)do p=e.input.charCodeAt(++e.position);while(!$i(p)&&p!==0)}for(;p!==0;){for(Dv(e),e.lineIndent=0,p=e.input.charCodeAt(e.position);(!l||e.lineIndent<u)&&p===32;)e.lineIndent++,p=e.input.charCodeAt(++e.position);if(!l&&e.lineIndent>u&&(u=e.lineIndent),$i(p)){d++;continue}if(e.lineIndent<u){s===z_?e.result+=Nn.repeat(`
`,o?1+d:d):s===Ly&&o&&(e.result+=`
`);break}for(a?Qs(p)?(f=!0,e.result+=Nn.repeat(`
`,o?1+d:d)):f?(f=!1,e.result+=Nn.repeat(`
`,d+1)):d===0?o&&(e.result+=" "):e.result+=Nn.repeat(`
`,d):e.result+=Nn.repeat(`
`,o?1+d:d),o=!0,l=!0,d=0,r=e.position;!$i(p)&&p!==0;)p=e.input.charCodeAt(++e.position);is(e,r,e.position,!1)}return!0}function H_(e,t){var r,a=e.tag,s=e.anchor,o=[],l,u=!1,d;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),d=e.input.charCodeAt(e.position);d!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,et(e,"tab characters must not be used in indentation")),!(d!==45||(l=e.input.charCodeAt(e.position+1),!yr(l))));){if(u=!0,e.position++,bn(e,!0,-1)&&e.lineIndent<=t){o.push(null),d=e.input.charCodeAt(e.position);continue}if(r=e.line,wl(e,t,Mk,!1,!0),o.push(e.result),bn(e,!0,-1),d=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&d!==0)et(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return u?(e.tag=a,e.anchor=s,e.kind="sequence",e.result=o,!0):!1}function y6(e,t,r){var a,s,o,l,u,d,f=e.tag,m=e.anchor,p={},g=Object.create(null),y=null,_=null,b=null,w=!1,x=!1,S;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=p),S=e.input.charCodeAt(e.position);S!==0;){if(!w&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,et(e,"tab characters must not be used in indentation")),a=e.input.charCodeAt(e.position+1),o=e.line,(S===63||S===58)&&yr(a))S===63?(w&&(sl(e,p,g,y,_,null,l,u,d),y=_=b=null),x=!0,w=!0,s=!0):w?(w=!1,s=!0):et(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,S=a;else{if(l=e.line,u=e.lineStart,d=e.position,!wl(e,r,$k,!1,!0))break;if(e.line===o){for(S=e.input.charCodeAt(e.position);Qs(S);)S=e.input.charCodeAt(++e.position);if(S===58)S=e.input.charCodeAt(++e.position),yr(S)||et(e,"a whitespace character is expected after the key-value separator within a block mapping"),w&&(sl(e,p,g,y,_,null,l,u,d),y=_=b=null),x=!0,w=!1,s=!1,y=e.tag,_=e.result;else if(x)et(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=f,e.anchor=m,!0}else if(x)et(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=f,e.anchor=m,!0}if((e.line===o||e.lineIndent>t)&&(w&&(l=e.line,u=e.lineStart,d=e.position),wl(e,t,Xh,!0,s)&&(w?_=e.result:b=e.result),w||(sl(e,p,g,y,_,b,l,u,d),y=_=b=null),bn(e,!0,-1),S=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&S!==0)et(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return w&&sl(e,p,g,y,_,null,l,u,d),x&&(e.tag=f,e.anchor=m,e.kind="mapping",e.result=p),x}function v6(e){var t,r=!1,a=!1,s,o,l;if(l=e.input.charCodeAt(e.position),l!==33)return!1;if(e.tag!==null&&et(e,"duplication of a tag property"),l=e.input.charCodeAt(++e.position),l===60?(r=!0,l=e.input.charCodeAt(++e.position)):l===33?(a=!0,s="!!",l=e.input.charCodeAt(++e.position)):s="!",t=e.position,r){do l=e.input.charCodeAt(++e.position);while(l!==0&&l!==62);e.position<e.length?(o=e.input.slice(t,e.position),l=e.input.charCodeAt(++e.position)):et(e,"unexpected end of the stream within a verbatim tag")}else{for(;l!==0&&!yr(l);)l===33&&(a?et(e,"tag suffix cannot contain exclamation marks"):(s=e.input.slice(t-1,e.position+1),Ok.test(s)||et(e,"named tag handle cannot contain such characters"),a=!0,t=e.position+1)),l=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),s6.test(o)&&et(e,"tag suffix cannot contain flow indicator characters")}o&&!zk.test(o)&&et(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{et(e,"tag name is malformed: "+o)}return r?e.tag=o:os.call(e.tagMap,s)?e.tag=e.tagMap[s]+o:s==="!"?e.tag="!"+o:s==="!!"?e.tag="tag:yaml.org,2002:"+o:et(e,'undeclared tag handle "'+s+'"'),!0}function b6(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&et(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!yr(r)&&!al(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&et(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function w6(e){var t,r,a;if(a=e.input.charCodeAt(e.position),a!==42)return!1;for(a=e.input.charCodeAt(++e.position),t=e.position;a!==0&&!yr(a)&&!al(a);)a=e.input.charCodeAt(++e.position);return e.position===t&&et(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),os.call(e.anchorMap,r)||et(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],bn(e,!0,-1),!0}function wl(e,t,r,a,s){var o,l,u,d=1,f=!1,m=!1,p,g,y,_,b,w;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=l=u=Xh===r||Mk===r,a&&bn(e,!0,-1)&&(f=!0,e.lineIndent>t?d=1:e.lineIndent===t?d=0:e.lineIndent<t&&(d=-1)),d===1)for(;v6(e)||b6(e);)bn(e,!0,-1)?(f=!0,u=o,e.lineIndent>t?d=1:e.lineIndent===t?d=0:e.lineIndent<t&&(d=-1)):u=!1;if(u&&(u=f||s),(d===1||Xh===r)&&(Kh===r||$k===r?b=t:b=t+1,w=e.position-e.lineStart,d===1?u&&(H_(e,w)||y6(e,w,b))||p6(e,b)?m=!0:(l&&g6(e,b)||h6(e,b)||m6(e,b)?m=!0:w6(e)?(m=!0,(e.tag!==null||e.anchor!==null)&&et(e,"alias node should not have any properties")):f6(e,b,Kh===r)&&(m=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):d===0&&(m=u&&H_(e,w))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&et(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),p=0,g=e.implicitTypes.length;p<g;p+=1)if(_=e.implicitTypes[p],_.resolve(e.result)){e.result=_.construct(e.result),e.tag=_.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(os.call(e.typeMap[e.kind||"fallback"],e.tag))_=e.typeMap[e.kind||"fallback"][e.tag];else for(_=null,y=e.typeMap.multi[e.kind||"fallback"],p=0,g=y.length;p<g;p+=1)if(e.tag.slice(0,y[p].tag.length)===y[p].tag){_=y[p];break}_||et(e,"unknown tag !<"+e.tag+">"),e.result!==null&&_.kind!==e.kind&&et(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+_.kind+'", not "'+e.kind+'"'),_.resolve(e.result,e.tag)?(e.result=_.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):et(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||m}function x6(e){var t=e.position,r,a,s,o=!1,l;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(l=e.input.charCodeAt(e.position))!==0&&(bn(e,!0,-1),l=e.input.charCodeAt(e.position),!(e.lineIndent>0||l!==37));){for(o=!0,l=e.input.charCodeAt(++e.position),r=e.position;l!==0&&!yr(l);)l=e.input.charCodeAt(++e.position);for(a=e.input.slice(r,e.position),s=[],a.length<1&&et(e,"directive name must not be less than one character in length");l!==0;){for(;Qs(l);)l=e.input.charCodeAt(++e.position);if(l===35){do l=e.input.charCodeAt(++e.position);while(l!==0&&!$i(l));break}if($i(l))break;for(r=e.position;l!==0&&!yr(l);)l=e.input.charCodeAt(++e.position);s.push(e.input.slice(r,e.position))}l!==0&&Dv(e),os.call(P_,a)?P_[a](e,a,s):Zh(e,'unknown document directive "'+a+'"')}if(bn(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,bn(e,!0,-1)):o&&et(e,"directives end mark is expected"),wl(e,e.lineIndent-1,Xh,!1,!0),bn(e,!0,-1),e.checkLineBreaks&&a6.test(e.input.slice(t,e.position))&&Zh(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&zm(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,bn(e,!0,-1));return}if(e.position<e.length-1)et(e,"end of the stream or a document separator is expected");else return}function Hk(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new d6(e,t),a=e.indexOf("\0");for(a!==-1&&(r.position=a,et(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)x6(r);return r.documents}function _6(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var a=Hk(e,r);if(typeof t!="function")return a;for(var s=0,o=a.length;s<o;s+=1)t(a[s])}function S6(e,t){var r=Hk(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new rr("expected a single document in the stream, but found more")}}var C6=_6,E6=S6,Uk={loadAll:C6,load:E6},Fk=Object.prototype.toString,qk=Object.prototype.hasOwnProperty,$v=65279,k6=9,fu=10,N6=13,A6=32,j6=33,T6=34,M0=35,D6=37,R6=38,$6=39,M6=42,Vk=44,O6=45,Wh=58,z6=61,L6=62,I6=63,P6=64,Yk=91,Gk=93,B6=96,Kk=123,H6=124,Xk=125,Zn={};Zn[0]="\\0";Zn[7]="\\a";Zn[8]="\\b";Zn[9]="\\t";Zn[10]="\\n";Zn[11]="\\v";Zn[12]="\\f";Zn[13]="\\r";Zn[27]="\\e";Zn[34]='\\"';Zn[92]="\\\\";Zn[133]="\\N";Zn[160]="\\_";Zn[8232]="\\L";Zn[8233]="\\P";var U6=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],F6=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function q6(e,t){var r,a,s,o,l,u,d;if(t===null)return{};for(r={},a=Object.keys(t),s=0,o=a.length;s<o;s+=1)l=a[s],u=String(t[l]),l.slice(0,2)==="!!"&&(l="tag:yaml.org,2002:"+l.slice(2)),d=e.compiledTypeMap.fallback[l],d&&qk.call(d.styleAliases,u)&&(u=d.styleAliases[u]),r[l]=u;return r}function V6(e){var t,r,a;if(t=e.toString(16).toUpperCase(),e<=255)r="x",a=2;else if(e<=65535)r="u",a=4;else if(e<=4294967295)r="U",a=8;else throw new rr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Nn.repeat("0",a-t.length)+t}var Y6=1,hu=2;function G6(e){this.schema=e.schema||Tv,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Nn.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=q6(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?hu:Y6,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function U_(e,t){for(var r=Nn.repeat(" ",t),a=0,s=-1,o="",l,u=e.length;a<u;)s=e.indexOf(`
`,a),s===-1?(l=e.slice(a),a=u):(l=e.slice(a,s+1),a=s+1),l.length&&l!==`
`&&(o+=r),o+=l;return o}function O0(e,t){return`
`+Nn.repeat(" ",e.indent*t)}function K6(e,t){var r,a,s;for(r=0,a=e.implicitTypes.length;r<a;r+=1)if(s=e.implicitTypes[r],s.resolve(t))return!0;return!1}function Qh(e){return e===A6||e===k6}function mu(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==$v||65536<=e&&e<=1114111}function F_(e){return mu(e)&&e!==$v&&e!==N6&&e!==fu}function q_(e,t,r){var a=F_(e),s=a&&!Qh(e);return(r?a:a&&e!==Vk&&e!==Yk&&e!==Gk&&e!==Kk&&e!==Xk)&&e!==M0&&!(t===Wh&&!s)||F_(t)&&!Qh(t)&&e===M0||t===Wh&&s}function X6(e){return mu(e)&&e!==$v&&!Qh(e)&&e!==O6&&e!==I6&&e!==Wh&&e!==Vk&&e!==Yk&&e!==Gk&&e!==Kk&&e!==Xk&&e!==M0&&e!==R6&&e!==M6&&e!==j6&&e!==H6&&e!==z6&&e!==L6&&e!==$6&&e!==T6&&e!==D6&&e!==P6&&e!==B6}function Z6(e){return!Qh(e)&&e!==Wh}function Yc(e,t){var r=e.charCodeAt(t),a;return r>=55296&&r<=56319&&t+1<e.length&&(a=e.charCodeAt(t+1),a>=56320&&a<=57343)?(r-55296)*1024+a-56320+65536:r}function Zk(e){var t=/^\n* /;return t.test(e)}var Wk=1,z0=2,Qk=3,Jk=4,nl=5;function W6(e,t,r,a,s,o,l,u){var d,f=0,m=null,p=!1,g=!1,y=a!==-1,_=-1,b=X6(Yc(e,0))&&Z6(Yc(e,e.length-1));if(t||l)for(d=0;d<e.length;f>=65536?d+=2:d++){if(f=Yc(e,d),!mu(f))return nl;b=b&&q_(f,m,u),m=f}else{for(d=0;d<e.length;f>=65536?d+=2:d++){if(f=Yc(e,d),f===fu)p=!0,y&&(g=g||d-_-1>a&&e[_+1]!==" ",_=d);else if(!mu(f))return nl;b=b&&q_(f,m,u),m=f}g=g||y&&d-_-1>a&&e[_+1]!==" "}return!p&&!g?b&&!l&&!s(e)?Wk:o===hu?nl:z0:r>9&&Zk(e)?nl:l?o===hu?nl:z0:g?Jk:Qk}function Q6(e,t,r,a,s){e.dump=(function(){if(t.length===0)return e.quotingType===hu?'""':"''";if(!e.noCompatMode&&(U6.indexOf(t)!==-1||F6.test(t)))return e.quotingType===hu?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,r),l=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),u=a||e.flowLevel>-1&&r>=e.flowLevel;function d(f){return K6(e,f)}switch(W6(t,u,e.indent,l,d,e.quotingType,e.forceQuotes&&!a,s)){case Wk:return t;case z0:return"'"+t.replace(/'/g,"''")+"'";case Qk:return"|"+V_(t,e.indent)+Y_(U_(t,o));case Jk:return">"+V_(t,e.indent)+Y_(U_(J6(t,l),o));case nl:return'"'+e8(t)+'"';default:throw new rr("impossible error: invalid scalar style")}})()}function V_(e,t){var r=Zk(e)?String(t):"",a=e[e.length-1]===`
`,s=a&&(e[e.length-2]===`
`||e===`
`),o=s?"+":a?"":"-";return r+o+`
`}function Y_(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function J6(e,t){for(var r=/(\n+)([^\n]*)/g,a=(function(){var f=e.indexOf(`
`);return f=f!==-1?f:e.length,r.lastIndex=f,G_(e.slice(0,f),t)})(),s=e[0]===`
`||e[0]===" ",o,l;l=r.exec(e);){var u=l[1],d=l[2];o=d[0]===" ",a+=u+(!s&&!o&&d!==""?`
`:"")+G_(d,t),s=o}return a}function G_(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,a,s=0,o,l=0,u=0,d="";a=r.exec(e);)u=a.index,u-s>t&&(o=l>s?l:u,d+=`
`+e.slice(s,o),s=o+1),l=u;return d+=`
`,e.length-s>t&&l>s?d+=e.slice(s,l)+`
`+e.slice(l+1):d+=e.slice(s),d.slice(1)}function e8(e){for(var t="",r=0,a,s=0;s<e.length;r>=65536?s+=2:s++)r=Yc(e,s),a=Zn[r],!a&&mu(r)?(t+=e[s],r>=65536&&(t+=e[s+1])):t+=a||V6(r);return t}function t8(e,t,r){var a="",s=e.tag,o,l,u;for(o=0,l=r.length;o<l;o+=1)u=r[o],e.replacer&&(u=e.replacer.call(r,String(o),u)),(ya(e,t,u,!1,!1)||typeof u>"u"&&ya(e,t,null,!1,!1))&&(a!==""&&(a+=","+(e.condenseFlow?"":" ")),a+=e.dump);e.tag=s,e.dump="["+a+"]"}function K_(e,t,r,a){var s="",o=e.tag,l,u,d;for(l=0,u=r.length;l<u;l+=1)d=r[l],e.replacer&&(d=e.replacer.call(r,String(l),d)),(ya(e,t+1,d,!0,!0,!1,!0)||typeof d>"u"&&ya(e,t+1,null,!0,!0,!1,!0))&&((!a||s!=="")&&(s+=O0(e,t)),e.dump&&fu===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=o,e.dump=s||"[]"}function n8(e,t,r){var a="",s=e.tag,o=Object.keys(r),l,u,d,f,m;for(l=0,u=o.length;l<u;l+=1)m="",a!==""&&(m+=", "),e.condenseFlow&&(m+='"'),d=o[l],f=r[d],e.replacer&&(f=e.replacer.call(r,d,f)),ya(e,t,d,!1,!1)&&(e.dump.length>1024&&(m+="? "),m+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),ya(e,t,f,!1,!1)&&(m+=e.dump,a+=m));e.tag=s,e.dump="{"+a+"}"}function r8(e,t,r,a){var s="",o=e.tag,l=Object.keys(r),u,d,f,m,p,g;if(e.sortKeys===!0)l.sort();else if(typeof e.sortKeys=="function")l.sort(e.sortKeys);else if(e.sortKeys)throw new rr("sortKeys must be a boolean or a function");for(u=0,d=l.length;u<d;u+=1)g="",(!a||s!=="")&&(g+=O0(e,t)),f=l[u],m=r[f],e.replacer&&(m=e.replacer.call(r,f,m)),ya(e,t+1,f,!0,!0,!0)&&(p=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,p&&(e.dump&&fu===e.dump.charCodeAt(0)?g+="?":g+="? "),g+=e.dump,p&&(g+=O0(e,t)),ya(e,t+1,m,!0,p)&&(e.dump&&fu===e.dump.charCodeAt(0)?g+=":":g+=": ",g+=e.dump,s+=g));e.tag=o,e.dump=s||"{}"}function X_(e,t,r){var a,s,o,l,u,d;for(s=r?e.explicitTypes:e.implicitTypes,o=0,l=s.length;o<l;o+=1)if(u=s[o],(u.instanceOf||u.predicate)&&(!u.instanceOf||typeof t=="object"&&t instanceof u.instanceOf)&&(!u.predicate||u.predicate(t))){if(r?u.multi&&u.representName?e.tag=u.representName(t):e.tag=u.tag:e.tag="?",u.represent){if(d=e.styleMap[u.tag]||u.defaultStyle,Fk.call(u.represent)==="[object Function]")a=u.represent(t,d);else if(qk.call(u.represent,d))a=u.represent[d](t,d);else throw new rr("!<"+u.tag+'> tag resolver accepts not "'+d+'" style');e.dump=a}return!0}return!1}function ya(e,t,r,a,s,o,l){e.tag=null,e.dump=r,X_(e,r,!1)||X_(e,r,!0);var u=Fk.call(e.dump),d=a,f;a&&(a=e.flowLevel<0||e.flowLevel>t);var m=u==="[object Object]"||u==="[object Array]",p,g;if(m&&(p=e.duplicates.indexOf(r),g=p!==-1),(e.tag!==null&&e.tag!=="?"||g||e.indent!==2&&t>0)&&(s=!1),g&&e.usedDuplicates[p])e.dump="*ref_"+p;else{if(m&&g&&!e.usedDuplicates[p]&&(e.usedDuplicates[p]=!0),u==="[object Object]")a&&Object.keys(e.dump).length!==0?(r8(e,t,e.dump,s),g&&(e.dump="&ref_"+p+e.dump)):(n8(e,t,e.dump),g&&(e.dump="&ref_"+p+" "+e.dump));else if(u==="[object Array]")a&&e.dump.length!==0?(e.noArrayIndent&&!l&&t>0?K_(e,t-1,e.dump,s):K_(e,t,e.dump,s),g&&(e.dump="&ref_"+p+e.dump)):(t8(e,t,e.dump),g&&(e.dump="&ref_"+p+" "+e.dump));else if(u==="[object String]")e.tag!=="?"&&Q6(e,e.dump,t,o,d);else{if(u==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new rr("unacceptable kind of an object to dump "+u)}e.tag!==null&&e.tag!=="?"&&(f=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?f="!"+f:f.slice(0,18)==="tag:yaml.org,2002:"?f="!!"+f.slice(18):f="!<"+f+">",e.dump=f+" "+e.dump)}return!0}function i8(e,t){var r=[],a=[],s,o;for(L0(e,r,a),s=0,o=a.length;s<o;s+=1)t.duplicates.push(r[a[s]]);t.usedDuplicates=new Array(o)}function L0(e,t,r){var a,s,o;if(e!==null&&typeof e=="object")if(s=t.indexOf(e),s!==-1)r.indexOf(s)===-1&&r.push(s);else if(t.push(e),Array.isArray(e))for(s=0,o=e.length;s<o;s+=1)L0(e[s],t,r);else for(a=Object.keys(e),s=0,o=a.length;s<o;s+=1)L0(e[a[s]],t,r)}function a8(e,t){t=t||{};var r=new G6(t);r.noRefs||i8(e,r);var a=e;return r.replacer&&(a=r.replacer.call({"":a},"",a)),ya(r,0,a,!0,!0)?r.dump+`
`:""}var s8=a8,o8={dump:s8};function Mv(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var l8=Fn,c8=mk,u8=vk,d8=Sk,f8=Ck,h8=Tv,m8=Uk.load,p8=Uk.loadAll,g8=o8.dump,y8=rr,v8={binary:jk,float:_k,map:yk,null:bk,pairs:Dk,set:Rk,timestamp:Nk,bool:wk,int:xk,merge:Ak,omap:Tk,seq:gk,str:pk},b8=Mv("safeLoad","load"),w8=Mv("safeLoadAll","loadAll"),x8=Mv("safeDump","dump"),pu={Type:l8,Schema:c8,FAILSAFE_SCHEMA:u8,JSON_SCHEMA:d8,CORE_SCHEMA:f8,DEFAULT_SCHEMA:h8,load:m8,loadAll:p8,dump:g8,YAMLException:y8,types:v8,safeLoad:b8,safeLoadAll:w8,safeDump:x8};function $u(e,t,r=!1,a=!1){let s=1;const o=r?e.toUpperCase():e;let l=a?`${o}${String(s).padStart(2,"0")}`:`${o}-${s}`;for(;t.has(l);)s++,l=a?`${o}${String(s).padStart(2,"0")}`:`${o}-${s}`;return l}function _8(e){const t=new Set(e?.components?.map(r=>r.ref)||[]);return $u("component",t)}function S8(e){const t=new Set(e?.boundaries?.map(r=>r.ref)||[]);return $u("boundary",t)}function Z_(e){const t=new Set(e?.assets?.map(r=>r.ref)||[]);return $u("A",t,!0,!0)}function C8(e){const t=new Set(e?.threats?.map(r=>r.ref)||[]);return $u("T",t,!0,!0)}function E8(e){const t=new Set(e?.controls?.map(r=>r.ref)||[]);return $u("C",t,!0,!0)}function k8(e){return`Asset ${e}`}function N8(e){return`Threat ${e}`}function A8(e){return`Control ${e}`}function j8(e){const t=e.match(/\d+$/);return t?`Component ${t[0]}`:"Component"}function T8(e){const t=e.match(/\d+$/);return t?`Boundary ${t[0]}`:"Boundary"}function Ys(e){return/^Component \d+$/.test(e)}function D8(e){return/^Asset A\d{2}$/.test(e)}function R8(e){return/^Threat T\d{2}$/.test(e)}function $8(e){return/^Control C\d{2}$/.test(e)}function Ch(e){return/^DF\d+$/.test(e)}function Eh(e){return/^Boundary \d+$/.test(e)}function Jh(e,t,r,a){const o=`${e}${r==="bidirectional"?"<->":"->"}${t}`;if(!a||!a.includes(o))return o;let l=1,u=`${o}_${l}`;for(;a.includes(u);)l++,u=`${o}_${l}`;return u}function M8(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_]+/g,"-").replace(/^-+|-+$/g,"")}function W_(e,t){if(!t.has(e))return e;let r=2,a=`${e}-${r}`;for(;t.has(a);)r++,a=`${e}-${r}`;return a}function x9(e){try{const t=pu.load(e),r=new Map,a=new Set,s=u=>{const d=M8(u.name),f=W_(d,a);a.add(f),r.set(u.ref,f)};t.components?.forEach(s),t.boundaries?.forEach(s),t.assets?.forEach(s),t.threats?.forEach(s),t.controls?.forEach(s),t.data_flows&&t.data_flows.forEach(u=>{const d=r.get(u.source)||u.source,f=r.get(u.destination)||u.destination,m=u.direction==="bidirectional"?"<->":"->";let p=`${d}${m}${f}`;p=W_(p,a),a.add(p),r.set(u.ref,p)});let o=e;const l=Array.from(r.entries()).sort((u,d)=>d[0].length-u[0].length);for(const[u,d]of l){const f=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");o=o.replace(new RegExp(`^(\\s*-?\\s*ref:\\s*)${f}(\\s*(?:#.*)?)$`,"gm"),`$1${d}$2`),o=o.replace(new RegExp(`^(\\s*-\\s+)${f}(\\s*(?:#.*)?)$`,"gm"),`$1${d}$2`),o=o.replace(new RegExp(`(\\[\\s*|,\\s*)${f}(\\s*(?:,|\\]))`,"g"),`$1${d}$2`),o=o.replace(new RegExp(`^(\\s*(?:source|destination):\\s*)${f}(\\s*(?:#.*)?)$`,"gm"),`$1${d}$2`)}return o}catch(t){throw new Error(`Failed to regenerate refs: ${t instanceof Error?t.message:"Unknown error"}`)}}const O8=[{value:"internal",label:"Internal",className:"type-internal"},{value:"external_dependency",label:"External",className:"type-external"},{value:"data_store",label:"Data Store",className:"type-datastore"}];function z8({data:e,selected:t}){const{label:r,ref:a,componentType:s,description:o,assets:l,availableAssets:u,isDraggingNode:d,initialEditMode:f,isFocusedForConnection:m,focusedHandleId:p,isInDataFlowCreation:g,isHandleSelectionMode:y,onNameChange:_,onEditModeChange:b,onTypeChange:w,onDescriptionChange:x,onAssetsChange:S,onCreateAsset:C,onSelectNode:A}=e,[E,j]=N.useState(f||!1),[T,z]=N.useState(!1),L=Ys(r),[V,F]=N.useState(L?"":r),[M,O]=N.useState(o||""),[R,G]=N.useState(t),[H,U]=N.useState("name"),Z=N.useRef(null),X=N.useRef(null),Q=N.useRef(null),$=N.useRef(!1);N.useEffect(()=>{f&&b?.(!0)},[f,b]),N.useEffect(()=>{f&&!$.current&&(j(!0),$.current=!0),f||($.current=!1)},[f]);const B=()=>{switch(s){case"external_dependency":return"threat-node external-dependency";case"data_store":return"threat-node data-store";default:return"threat-node internal"}},K=ae=>{if(ae.metaKey||ae.ctrlKey)return;ae.stopPropagation(),A?.();const I=Ys(r);F(I?"":r),j(!0),b?.(!0)},P=ae=>{if(!(ae.metaKey||ae.ctrlKey)&&(ae.preventDefault(),!E)){const I=Ys(r);F(I?"":r),j(!0),b?.(!0)}};N.useEffect(()=>{const ae=Ys(r);F(ae&&E?"":r)},[r,E]);const q=ae=>{ae.style.height="auto",ae.style.height=`${ae.scrollHeight}px`};N.useEffect(()=>{E&&Z.current&&setTimeout(()=>{Z.current&&(q(Z.current),Z.current.focus(),f?Z.current.setSelectionRange(0,Z.current.value.length):Z.current.setSelectionRange(Z.current.value.length,Z.current.value.length))},0)},[E,f]);const J=()=>{const ae=Ys(r),I=V.trim()?V:r;I!==r?_?.(I):!V.trim()&&!ae&&F(r)},le=ae=>{if(ae.key==="Enter")ae.preventDefault(),J(),j(!1),b?.(!1);else if(ae.key==="Escape"){const I=Ys(r);F(I?"":r),j(!1),b?.(!1)}else ae.key==="Tab"&&(ae.preventDefault(),U("description"),setTimeout(()=>X.current?.focus(),0))};N.useEffect(()=>{R&&!t&&E&&queueMicrotask(()=>{j(!1),b?.(!1)}),G(t)},[t,R,E,b]),N.useEffect(()=>{O(ae=>{const I=o||"";return ae!==I?I:ae})},[o]);const oe=ae=>{w?.(ae)},he=ae=>{S?.(ae)},ve=ae=>{ae.key==="Tab"?(ae.preventDefault(),U("assets"),setTimeout(()=>{const I=Q.current?.querySelector(".editable-picker-wrapper");I&&I.focus()},0)):ae.key==="Escape"&&(ae.preventDefault(),j(!1),b?.(!1))},W=ae=>{ae?(U("description"),setTimeout(()=>X.current?.focus(),0)):(U("name"),setTimeout(()=>Z.current?.focus(),0))},ie=[{position:ze.Top,id:"top-1",offset:0},{position:ze.Top,id:"top-2",offset:.33},{position:ze.Top,id:"top-3",offset:.66},{position:ze.Right,id:"right-1",offset:0},{position:ze.Right,id:"right-2",offset:.33},{position:ze.Right,id:"right-3",offset:.66},{position:ze.Bottom,id:"bottom-1",offset:0},{position:ze.Bottom,id:"bottom-2",offset:.33},{position:ze.Bottom,id:"bottom-3",offset:.66},{position:ze.Left,id:"left-1",offset:0},{position:ze.Left,id:"left-2",offset:.33},{position:ze.Left,id:"left-3",offset:.66}];return v.jsxs("div",{className:`${B()}${t&&!g?" selected":""}${E?" edit-mode":""}${m?" connection-focused":""}${y?" handle-selection-mode":""}`,onMouseEnter:()=>z(!0),onMouseLeave:()=>z(!1),onDoubleClick:P,children:[ie.map(ae=>v.jsxs("div",{className:`handle-wrapper handle-${ae.id}${p===ae.id?" focused":""}`,children:[v.jsx(bl,{id:ae.id,type:"source",position:ae.position,isConnectable:!0}),v.jsx(bl,{id:`target-${ae.id}`,type:"target",position:ae.position,isConnectable:!0})]},`wrapper-${ae.id}`)),v.jsx("div",{className:"node-content",children:E?v.jsx("textarea",{ref:Z,className:"node-label-input",value:V,placeholder:L?r:void 0,onChange:ae=>{F(ae.target.value),q(ae.target)},onKeyDown:le,onBlur:J,onClick:ae=>ae.stopPropagation(),rows:1}):v.jsxs("div",{className:"node-label-wrapper",children:[v.jsx("div",{className:"node-label",children:r}),v.jsx("button",{className:`node-edit-button${T&&!d?" visible":""}`,onClick:K,onMouseDown:ae=>ae.stopPropagation(),title:"Edit node",children:v.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]})}),E&&v.jsxs(v.Fragment,{children:[v.jsx(M_,{position:ze.Top,className:"node-toolbar-top",children:O8.map(ae=>v.jsx("button",{className:`node-toolbar-button ${ae.className}${s===ae.value?" active":""}`,onClick:I=>{I.stopPropagation(),oe(ae.value)},title:ae.label},ae.value))}),v.jsx(M_,{position:ze.Bottom,className:"node-info-dialog-wrapper",children:v.jsx("div",{className:"node-info-dialog",onClick:ae=>ae.stopPropagation(),onMouseDown:ae=>ae.stopPropagation(),onWheelCapture:ae=>{ae.stopPropagation()},children:v.jsxs("div",{className:"node-info-dialog-content",children:[v.jsxs("div",{className:"node-info-field",children:[v.jsx("label",{children:"Ref"}),v.jsx("div",{className:"node-info-ref",children:a})]}),v.jsxs("div",{className:"node-info-field",children:[v.jsx("label",{children:"Description"}),v.jsx("textarea",{ref:X,className:"node-info-textarea",value:M,placeholder:"Add description...",onChange:ae=>{O(ae.target.value)},onBlur:ae=>{x?.(ae.target.value)},onKeyDown:ve,onWheelCapture:ae=>{ae.stopPropagation()},rows:3})]}),v.jsxs("div",{className:"node-info-field",children:[v.jsx("label",{children:"Assets"}),v.jsx("div",{ref:Q,className:"node-input-wrapper",children:v.jsx(Av,{value:l||[],availableItems:u||[],placeholder:"Add asset...",variant:"assets",onSave:he,onCreateItem:C,useInWrapper:!0,autoEdit:H==="assets",onTabPress:W,onDeactivate:()=>{U(null),j(!1),b?.(!1)}})})]})]})})})]})]})}function L8({data:e,selected:t}){const{label:r,initialEditMode:a,onNameChange:s,onEditModeChange:o,onResizeEnd:l}=e,[u,d]=N.useState(a||!1),[f,m]=N.useState(!1),p=Eh(r),[g,y]=N.useState(p?"":r),_=N.useRef(!1),b=N.useRef(null);N.useEffect(()=>{a&&!_.current&&(d(!0),o?.(!0),_.current=!0),a||(_.current=!1)},[a,o]),N.useEffect(()=>{u&&a&&b.current&&setTimeout(()=>{b.current&&(b.current.focus(),b.current.setSelectionRange(0,b.current.value.length))},0)},[u,a]);const w=E=>{if(E.metaKey||E.ctrlKey)return;E.stopPropagation();const j=Eh(r);y(j?"":r),d(!0),o?.(!0)},x=E=>{if(!(E.metaKey||E.ctrlKey)&&(E.preventDefault(),!u)){const j=Eh(r);y(j?"":r),d(!0),o?.(!0)}},S=()=>{const E=g.trim()?g:r;E!==r&&s?.(E),d(!1),o?.(!1)},C=()=>{d(!1),o?.(!1)},A=E=>{E.key==="Enter"?S():E.key==="Escape"&&C()};return v.jsxs(v.Fragment,{children:[v.jsx(W4,{minWidth:150,minHeight:75,isVisible:t,keepAspectRatio:!1,shouldResize:()=>!0,lineClassName:"boundary-resize-line",handleClassName:"boundary-resize-handle",onResizeEnd:(E,j)=>{l&&j.width&&j.height&&l(Math.round(j.width),Math.round(j.height))}}),v.jsx("div",{className:"boundary-node",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onDoubleClick:x,children:v.jsx("div",{className:"boundary-label-container noDrag",children:u?v.jsx("input",{ref:b,type:"text",className:"boundary-label-input",value:g,placeholder:p?r:void 0,onChange:E=>y(E.target.value),onKeyDown:A,onBlur:S,autoFocus:!0,onClick:E=>E.stopPropagation()}):v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"boundary-label noDrag",children:r}),v.jsx("button",{className:`boundary-edit-button${f?" visible":""} noDrag`,onClick:w,onMouseDown:E=>E.stopPropagation(),title:"Edit boundary",children:v.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]})})})]})}const ls=N.forwardRef(({value:e,onSave:t,allowEmpty:r=!1,onTabPress:a,onNavigate:s,placeholder:o},l)=>{const u=o&&e===o,[d,f]=ht.useState(u?"":e),m=N.useRef(null);N.useImperativeHandle(l,()=>m.current),N.useEffect(()=>{f(o&&e===o?"":e)},[e,o]),N.useEffect(()=>{m.current&&(m.current.style.height="auto",m.current.style.height=m.current.scrollHeight+"px")},[d]),N.useEffect(()=>{const y=m.current;if(!y)return;const _=new ResizeObserver(()=>{y.style.height="auto",y.style.height=y.scrollHeight+"px"});return _.observe(y),()=>_.disconnect()},[]);const p=()=>{const y=o&&e===o,_=d.trim()?d:o||"";r||d.trim()?t&&_!==e&&t(_):f(y?"":e)},g=y=>{const _=m.current?.selectionStart??0,b=d.length,w=_===0,x=_===b;if(s&&y.altKey&&(y.key==="ArrowRight"||y.key==="ArrowLeft"||y.key==="ArrowDown"||y.key==="ArrowUp")){y.preventDefault(),p(),y.key==="ArrowRight"?s("right"):y.key==="ArrowLeft"?s("left"):y.key==="ArrowDown"?s("down"):y.key==="ArrowUp"&&s("up");return}if(s){if(y.key==="ArrowRight"&&x){y.preventDefault(),p(),s("right");return}else if(y.key==="ArrowLeft"&&w){y.preventDefault(),p(),s("left");return}else if(y.key==="ArrowDown"&&x){y.preventDefault(),p(),s("down");return}else if(y.key==="ArrowUp"&&w){y.preventDefault(),p(),s("up");return}}y.key==="Tab"?(y.preventDefault(),p(),a&&a(y.shiftKey)):y.key==="Enter"?(y.preventDefault(),p(),m.current?.blur()):y.key==="Escape"&&(f(e),m.current?.blur())};return v.jsx("textarea",{ref:m,className:"always-editable-cell-input",value:d,placeholder:o,onChange:y=>f(y.target.value),onKeyDown:g,onBlur:p,onClick:y=>y.stopPropagation(),rows:1,spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off"})});ls.displayName="EditableCell";const co=N.forwardRef(({value:e,onSave:t,onTabPress:r,onNavigate:a,placeholder:s},o)=>{const l=s&&e===s,[u,d]=ht.useState(l?"":e),f=N.useRef(null);N.useImperativeHandle(o,()=>f.current),N.useEffect(()=>{d(s&&e===s?"":e)},[e,s]),N.useEffect(()=>{f.current&&(f.current.style.height="auto",f.current.style.height=f.current.scrollHeight+"px")},[u]),N.useEffect(()=>{const g=f.current;if(!g)return;const y=new ResizeObserver(()=>{g.style.height="auto",g.style.height=g.scrollHeight+"px"});return y.observe(g),()=>y.disconnect()},[]);const m=()=>{const g=u.trim()?u:s||"";t&&g!==e&&t(g)},p=g=>{const y=f.current?.selectionStart??0,_=u.length,b=y===0,w=y===_;if(a&&g.altKey&&(g.key==="ArrowRight"||g.key==="ArrowLeft"||g.key==="ArrowDown"||g.key==="ArrowUp")){g.preventDefault(),m(),g.key==="ArrowRight"?a("right"):g.key==="ArrowLeft"?a("left"):g.key==="ArrowDown"?a("down"):g.key==="ArrowUp"&&a("up");return}if(a){if(g.key==="ArrowRight"&&w){g.preventDefault(),m(),a("right");return}else if(g.key==="ArrowLeft"&&b){g.preventDefault(),m(),a("left");return}else if(g.key==="ArrowDown"&&w){g.preventDefault(),m(),a("down");return}else if(g.key==="ArrowUp"&&b){g.preventDefault(),m(),a("up");return}}g.key==="Tab"?(g.preventDefault(),m(),r&&r(g.shiftKey)):g.key==="Escape"&&(d(e),f.current?.blur()),(g.ctrlKey||g.metaKey)&&g.key==="s"&&(g.preventDefault(),m())};return v.jsx("textarea",{ref:f,className:"always-editable-textarea-input",value:u,placeholder:s,onChange:g=>d(g.target.value),onKeyDown:p,onBlur:m,onClick:g=>g.stopPropagation(),rows:1,spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off"})});co.displayName="EditableTextarea";const eN=N.forwardRef(({value:e,placeholder:t="Add participants...",onSave:r,onNavigate:a,onTabPress:s},o)=>{const[l,u]=N.useState(""),d=N.useRef(null);N.useImperativeHandle(o,()=>({focus:()=>{d.current?.focus()}}));const f=N.useCallback(()=>{const y=l.trim();if(!y)return;if(e.includes(y)){u("");return}const _=[...e,y];u(""),r(_)},[l,e,r]),m=N.useCallback(y=>{const _=e.filter((b,w)=>w!==y);r(_)},[e,r]),p=N.useCallback(y=>{if(y.key==="Enter")y.preventDefault(),f();else if(y.key==="Backspace"&&l===""&&e.length>0)m(e.length-1);else if(y.key==="ArrowUp")y.preventDefault(),a?.("up");else if(y.key==="ArrowDown")y.preventDefault(),a?.("down");else if(y.key==="Tab"){y.preventDefault();const _=l.trim();if(_&&!e.includes(_)){const b=[...e,_];u(""),r(b)}s?.(y.shiftKey)}},[f,m,l,e,r,a,s]),g=N.useCallback(()=>{d.current?.focus()},[]);return v.jsxs("div",{className:"participants-input-container",onClick:g,children:[e.map((y,_)=>v.jsxs("span",{className:`participant-tag participant-color-${_%6}`,children:[v.jsx("span",{className:"participant-tag-text",children:y}),v.jsx("button",{className:"participant-tag-remove",onClick:b=>{b.stopPropagation(),m(_)},"aria-label":`Remove ${y}`,children:""})]},_)),v.jsx("input",{ref:d,className:"participants-text-input",type:"text",value:l,onChange:y=>u(y.target.value),onKeyDown:p,onBlur:f,placeholder:e.length===0?t:"","aria-label":"Add participants"})]})});eN.displayName="ParticipantsInput";function I8({id:e,sourceX:t,sourceY:r,targetX:a,targetY:s,sourcePosition:o,targetPosition:l,label:u,data:d={},selected:f}){const[m,p]=N.useState(!1),g=u||"",y=Ch(g),[_,b]=N.useState(y?"":g),{onLabelChange:w,direction:x,onEditModeChange:S,onToggleDirectionAndReverse:C,edgeRef:A,initialEditMode:E}=d,j=N.useRef(null),T=N.useRef(!1);N.useEffect(()=>{if(E&&!T.current){p(!0);const K=u||"",P=Ch(K);b(P?"":K),S?.(!0),T.current=!0}E||(T.current=!1)},[E,u,S]),N.useEffect(()=>{if(m&&j.current){j.current.style.height="auto";const K=j.current.scrollHeight;j.current.style.height=K+"px",j.current.focus(),j.current.setSelectionRange(j.current.value.length,j.current.value.length)}},[m]);const z=50,L=(K,P,q,J=z)=>{switch(q){case ze.Top:return{x:K,y:P-J};case ze.Bottom:return{x:K,y:P+J};case ze.Left:return{x:K-J,y:P};case ze.Right:return{x:K+J,y:P};default:return{x:K,y:P}}},V=L(t,r,o),F=L(a,s,l),M=`M ${t},${r} C ${V.x},${V.y} ${F.x},${F.y} ${a},${s}`,O=.125*t+.375*V.x+.375*F.x+.125*a,R=.125*r+.375*V.y+.375*F.y+.125*s,G=x==="bidirectional",H=G?"url(#arrowhead-start)":void 0,U=G?"url(#arrowhead-end)":"url(#arrowhead)",Z=()=>{if(f){p(!0);const K=u||"",P=Ch(K);b(P?"":K),S?.(!0)}},X=()=>{const K=u||"",P=_.trim()?_:K;P!==u&&w?.(A||e,P),p(!1),S?.(!1)},Q=()=>{p(!1),S?.(!1)},$=K=>{K.key==="Enter"?X():K.key==="Escape"&&Q()},B=()=>{C?.(A||e,x||"unidirectional")};return v.jsxs(v.Fragment,{children:[v.jsx(Ru,{id:e,path:M,markerStart:H,markerEnd:U}),v.jsx("circle",{r:"1.5",fill:"#999",children:v.jsx("animateMotion",{dur:"3s",repeatCount:"indefinite",path:M})}),G&&v.jsx("circle",{r:"1.5",fill:"#999",children:v.jsx("animateMotion",{dur:"3s",repeatCount:"indefinite",path:M,keyPoints:"1;0",keyTimes:"0;1",calcMode:"linear"})}),v.jsxs(S4,{children:[v.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${O}px,${R}px)`,pointerEvents:"auto"},className:"editable-edge-label-container",children:m?v.jsx("textarea",{ref:j,className:"editable-edge-label-input",value:_,placeholder:y?g:void 0,onChange:K=>{b(K.target.value),j.current&&(j.current.style.height="auto",j.current.style.height=j.current.scrollHeight+"px")},onKeyDown:$,onBlur:X,onClick:K=>K.stopPropagation(),onMouseDown:K=>K.stopPropagation(),rows:1}):v.jsx("div",{className:`editable-edge-label ${f?"selected":""}`,onClick:K=>{f&&K.stopPropagation(),Z()},onMouseDown:K=>{f&&K.stopPropagation()},children:u||""})}),f&&!m&&v.jsx("button",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${O}px,${R-24}px)`,pointerEvents:"auto"},className:"edge-toolbar-button",onClick:K=>{K.stopPropagation(),B()},title:G?"Switch to unidirectional and reverse":"Switch to bidirectional",children:G?"":""})]})]})}function P8(){return v.jsx("svg",{style:{position:"absolute",top:0,left:0,width:0,height:0},children:v.jsxs("defs",{children:[v.jsx("marker",{id:"arrowhead",markerWidth:"6",markerHeight:"6",refX:"5",refY:"3",orient:"auto",children:v.jsx("polygon",{points:"0 0, 6 3, 0 6",fill:"#666"})}),v.jsx("marker",{id:"arrowhead-start",markerWidth:"6",markerHeight:"6",refX:"1",refY:"3",orient:"auto",children:v.jsx("polygon",{points:"6 0, 0 3, 6 6",fill:"#666"})}),v.jsx("marker",{id:"arrowhead-end",markerWidth:"6",markerHeight:"6",refX:"5",refY:"3",orient:"auto",children:v.jsx("polygon",{points:"0 0, 6 3, 0 6",fill:"#666"})})]})})}function B8({fromX:e,fromY:t,toX:r,toY:a,fromPosition:s,toPosition:o}){const u=(p,g,y,_=50)=>{switch(y){case ze.Top:return{x:p,y:g-_};case ze.Bottom:return{x:p,y:g+_};case ze.Left:return{x:p-_,y:g};case ze.Right:return{x:p+_,y:g};default:return{x:p,y:g}}},d=u(e,t,s),f=u(r,a,o),m=`M ${e},${t} C ${d.x},${d.y} ${f.x},${f.y} ${r},${a}`;return v.jsxs("g",{children:[v.jsx("path",{fill:"none",stroke:"#666",strokeWidth:2,strokeDasharray:"5,5",d:m}),v.jsx("circle",{cx:r,cy:a,fill:"#fff",r:3,stroke:"#666",strokeWidth:1.5})]})}const tN=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();const H8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const U8=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase());const Q_=e=>{const t=U8(e);return t.charAt(0).toUpperCase()+t.slice(1)};var F8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const q8=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const V8=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:o,iconNode:l,...u},d)=>N.createElement("svg",{ref:d,...F8,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:tN("lucide",s),...!o&&!q8(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,m])=>N.createElement(f,m)),...Array.isArray(o)?o:[o]]));const Ze=(e,t)=>{const r=N.forwardRef(({className:a,...s},o)=>N.createElement(V8,{ref:o,iconNode:t,className:tN(`lucide-${H8(Q_(e))}`,`lucide-${e}`,a),...s}));return r.displayName=Q_(e),r};const Y8=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],G8=Ze("activity",Y8);const K8=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],X8=Ze("arrow-left",K8);const Z8=[["path",{d:"M12 17h1.5",key:"1gkc67"}],["path",{d:"M12 22h1.5",key:"1my7sn"}],["path",{d:"M12 2h1.5",key:"19tvb7"}],["path",{d:"M17.5 22H19a1 1 0 0 0 1-1",key:"10akbh"}],["path",{d:"M17.5 2H19a1 1 0 0 1 1 1v1.5",key:"1vrfjs"}],["path",{d:"M20 14v3h-2.5",key:"1naeju"}],["path",{d:"M20 8.5V10",key:"1ctpfu"}],["path",{d:"M4 10V8.5",key:"1o3zg5"}],["path",{d:"M4 19.5V14",key:"ob81pf"}],["path",{d:"M4 4.5A2.5 2.5 0 0 1 6.5 2H8",key:"s8vcyb"}],["path",{d:"M8 22H6.5a1 1 0 0 1 0-5H8",key:"1cu73q"}]],W8=Ze("book-dashed",Z8);const Q8=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],J_=Ze("box",Q8);const J8=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],eL=Ze("check",J8);const tL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Js=Ze("chevron-down",tL);const nL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Iy=Ze("chevron-right",nL);const rL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xl=Ze("circle-alert",rL);const iL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],aL=Ze("circle-check-big",iL);const sL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],oL=Ze("circle-x",sL);const lL=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],Py=Ze("code-xml",lL);const cL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],nN=Ze("copy",cL);const uL=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Gc=Ze("database",uL);const dL=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],fL=Ze("download",dL);const hL=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],mL=Ze("ellipsis",hL);const pL=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],em=Ze("external-link",pL);const gL=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],I0=Ze("eye-off",gL);const yL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],P0=Ze("eye",yL);const vL=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],bL=Ze("file-code",vL);const wL=[["path",{d:"M4.226 20.925A2 2 0 0 0 6 22h12a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v3.127",key:"wfxp4w"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 11-3 3",key:"1dgrs4"}],["path",{d:"m5 17-3-3h10",key:"1mvvaf"}]],eS=Ze("file-output",wL);const xL=[["path",{d:"M11.35 22H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v5.35",key:"17jvcc"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M14 19h6",key:"bvotb8"}],["path",{d:"M17 16v6",key:"18yu1i"}]],_L=Ze("file-plus-corner",xL);const SL=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gu=Ze("file-text",SL);const CL=[["path",{d:"M18 19a5 5 0 0 1-5-5v8",key:"sz5oeg"}],["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v5",key:"1w6njk"}],["circle",{cx:"13",cy:"12",r:"2",key:"1j92g6"}],["circle",{cx:"20",cy:"19",r:"2",key:"1obnsp"}]],tm=Ze("folder-git-2",CL);const EL=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],tS=Ze("folder",EL);const kL=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],eo=Ze("git-branch",kL);const NL=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],kh=Ze("github",NL);const AL=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],jL=Ze("hard-drive",AL);const TL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],rN=Ze("image",TL);const DL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Lm=Ze("info",DL);const RL=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],$L=Ze("link",RL);const ML=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],OL=Ze("list-todo",ML);const zL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Xs=Ze("loader-circle",zL);const LL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],IL=Ze("lock",LL);const PL=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],BL=Ze("message-square",PL);const HL=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],iN=Ze("moon",HL);const UL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],FL=Ze("panel-left-close",UL);const qL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],VL=Ze("panel-left-open",qL);const YL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],GL=Ze("panel-right-close",YL);const KL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],XL=Ze("panel-right-open",KL);const ZL=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],WL=Ze("pen",ZL);const QL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ov=Ze("plus",QL);const JL=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],eI=Ze("redo-2",JL);const tI=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],zv=Ze("refresh-cw",tI);const nI=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],B0=Ze("save",nI);const rI=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}],["path",{d:"M11 7v4",key:"m2edmq"}],["path",{d:"M11 15h.01",key:"k85uqc"}]],iI=Ze("search-alert",rI);const aI=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],aN=Ze("search",aI);const sI=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sN=Ze("settings",sI);const oI=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],lI=Ze("shapes",oI);const cI=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],uI=Ze("share-2",cI);const dI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],fI=Ze("shield-alert",dI);const hI=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],mI=Ze("shield-off",hI);const pI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],By=Ze("shield",pI);const gI=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],oN=Ze("sun",gI);const yI=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],nS=Ze("table-2",yI);const vI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],bI=Ze("target",vI);const wI=[["path",{d:"M10 2h4",key:"n1abiw"}],["path",{d:"M4.6 11a8 8 0 0 0 1.7 8.7 8 8 0 0 0 8.7 1.7",key:"10he05"}],["path",{d:"M7.4 7.4a8 8 0 0 1 10.3 1 8 8 0 0 1 .9 10.2",key:"15f7sh"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M12 12v-2",key:"fwoke6"}]],rS=Ze("timer-off",wI);const xI=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],iS=Ze("timer",xI);const _I=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],lN=Ze("trash-2",_I);const SI=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],nm=Ze("triangle-alert",SI);const CI=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],EI=Ze("undo-2",CI);const kI=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],NI=Ze("upload",kI);const AI=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],jI=Ze("wand-sparkles",AI);const TI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Lv=Ze("x",TI);function DI(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return N.useMemo(()=>a=>{t.forEach(s=>s(a))},t)}const Im=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Al(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Iv(e){return"nodeType"in e}function ar(e){var t,r;return e?Al(e)?e:Iv(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function Pv(e){const{Document:t}=ar(e);return e instanceof t}function Mu(e){return Al(e)?!1:e instanceof ar(e).HTMLElement}function cN(e){return e instanceof ar(e).SVGElement}function jl(e){return e?Al(e)?e.document:Iv(e)?Pv(e)?e:Mu(e)||cN(e)?e.ownerDocument:document:document:document}const hi=Im?N.useLayoutEffect:N.useEffect;function Pm(e){const t=N.useRef(e);return hi(()=>{t.current=e}),N.useCallback(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t.current==null?void 0:t.current(...a)},[])}function RI(){const e=N.useRef(null),t=N.useCallback((a,s)=>{e.current=setInterval(a,s)},[]),r=N.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function yu(e,t){t===void 0&&(t=[e]);const r=N.useRef(e);return hi(()=>{r.current!==e&&(r.current=e)},t),r}function Ou(e,t){const r=N.useRef();return N.useMemo(()=>{const a=e(r.current);return r.current=a,a},[...t])}function rm(e){const t=Pm(e),r=N.useRef(null),a=N.useCallback(s=>{s!==r.current&&t?.(s,r.current),r.current=s},[]);return[r,a]}function im(e){const t=N.useRef();return N.useEffect(()=>{t.current=e},[e]),t.current}let Hy={};function zu(e,t){return N.useMemo(()=>{if(t)return t;const r=Hy[e]==null?0:Hy[e]+1;return Hy[e]=r,e+"-"+r},[e,t])}function uN(e){return function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return a.reduce((o,l)=>{const u=Object.entries(l);for(const[d,f]of u){const m=o[d];m!=null&&(o[d]=m+e*f)}return o},{...t})}}const cl=uN(1),vu=uN(-1);function $I(e){return"clientX"in e&&"clientY"in e}function Bm(e){if(!e)return!1;const{KeyboardEvent:t}=ar(e.target);return t&&e instanceof t}function MI(e){if(!e)return!1;const{TouchEvent:t}=ar(e.target);return t&&e instanceof t}function am(e){if(MI(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return $I(e)?{x:e.clientX,y:e.clientY}:null}const cs=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[cs.Translate.toString(e),cs.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:a}=e;return t+" "+r+"ms "+a}}}),aS="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function OI(e){return e.matches(aS)?e:e.querySelector(aS)}const zI={display:"none"};function LI(e){let{id:t,value:r}=e;return ht.createElement("div",{id:t,style:zI},r)}function II(e){let{id:t,announcement:r,ariaLiveType:a="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ht.createElement("div",{id:t,style:s,role:"status","aria-live":a,"aria-atomic":!0},r)}function PI(){const[e,t]=N.useState("");return{announce:N.useCallback(a=>{a!=null&&t(a)},[]),announcement:e}}const dN=N.createContext(null);function BI(e){const t=N.useContext(dN);N.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function HI(){const[e]=N.useState(()=>new Set),t=N.useCallback(a=>(e.add(a),()=>e.delete(a)),[e]);return[N.useCallback(a=>{let{type:s,event:o}=a;e.forEach(l=>{var u;return(u=l[s])==null?void 0:u.call(l,o)})},[e]),t]}const UI={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},FI={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function qI(e){let{announcements:t=FI,container:r,hiddenTextDescribedById:a,screenReaderInstructions:s=UI}=e;const{announce:o,announcement:l}=PI(),u=zu("DndLiveRegion"),[d,f]=N.useState(!1);if(N.useEffect(()=>{f(!0)},[]),BI(N.useMemo(()=>({onDragStart(p){let{active:g}=p;o(t.onDragStart({active:g}))},onDragMove(p){let{active:g,over:y}=p;t.onDragMove&&o(t.onDragMove({active:g,over:y}))},onDragOver(p){let{active:g,over:y}=p;o(t.onDragOver({active:g,over:y}))},onDragEnd(p){let{active:g,over:y}=p;o(t.onDragEnd({active:g,over:y}))},onDragCancel(p){let{active:g,over:y}=p;o(t.onDragCancel({active:g,over:y}))}}),[o,t])),!d)return null;const m=ht.createElement(ht.Fragment,null,ht.createElement(LI,{id:a,value:s.draggable}),ht.createElement(II,{id:u,announcement:l}));return r?da.createPortal(m,r):m}var kn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(kn||(kn={}));function sm(){}function us(e,t){return N.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Hm(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return N.useMemo(()=>[...t].filter(a=>a!=null),[...t])}const mi=Object.freeze({x:0,y:0});function fN(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function VI(e,t){const r=am(e);if(!r)return"0 0";const a={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return a.x+"% "+a.y+"%"}function hN(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return r-a}function YI(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return a-r}function sS(e){let{left:t,top:r,height:a,width:s}=e;return[{x:t,y:r},{x:t+s,y:r},{x:t,y:r+a},{x:t+s,y:r+a}]}function mN(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function oS(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const Um=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e;const s=oS(t,t.left,t.top),o=[];for(const l of a){const{id:u}=l,d=r.get(u);if(d){const f=fN(oS(d),s);o.push({id:u,data:{droppableContainer:l,value:f}})}}return o.sort(hN)},GI=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e;const s=sS(t),o=[];for(const l of a){const{id:u}=l,d=r.get(u);if(d){const f=sS(d),m=s.reduce((g,y,_)=>g+fN(f[_],y),0),p=Number((m/4).toFixed(4));o.push({id:u,data:{droppableContainer:l,value:p}})}}return o.sort(hN)};function KI(e,t){const r=Math.max(t.top,e.top),a=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=s-a,u=o-r;if(a<s&&r<o){const d=t.width*t.height,f=e.width*e.height,m=l*u,p=m/(d+f-m);return Number(p.toFixed(4))}return 0}const XI=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e;const s=[];for(const o of a){const{id:l}=o,u=r.get(l);if(u){const d=KI(u,t);d>0&&s.push({id:l,data:{droppableContainer:o,value:d}})}}return s.sort(YI)};function ZI(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function pN(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:mi}function WI(e){return function(r){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return s.reduce((l,u)=>({...l,top:l.top+e*u.y,bottom:l.bottom+e*u.y,left:l.left+e*u.x,right:l.right+e*u.x}),{...r})}}const QI=WI(1);function gN(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function JI(e,t,r){const a=gN(t);if(!a)return e;const{scaleX:s,scaleY:o,x:l,y:u}=a,d=e.left-l-(1-s)*parseFloat(r),f=e.top-u-(1-o)*parseFloat(r.slice(r.indexOf(" ")+1)),m=s?e.width/s:e.width,p=o?e.height/o:e.height;return{width:m,height:p,top:f,right:d+m,bottom:f+p,left:d}}const eP={ignoreTransform:!1};function Tl(e,t){t===void 0&&(t=eP);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:m}=ar(e).getComputedStyle(e);f&&(r=JI(r,f,m))}const{top:a,left:s,width:o,height:l,bottom:u,right:d}=r;return{top:a,left:s,width:o,height:l,bottom:u,right:d}}function lS(e){return Tl(e,{ignoreTransform:!0})}function tP(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function nP(e,t){return t===void 0&&(t=ar(e).getComputedStyle(e)),t.position==="fixed"}function rP(e,t){t===void 0&&(t=ar(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?r.test(o):!1})}function Fm(e,t){const r=[];function a(s){if(t!=null&&r.length>=t||!s)return r;if(Pv(s)&&s.scrollingElement!=null&&!r.includes(s.scrollingElement))return r.push(s.scrollingElement),r;if(!Mu(s)||cN(s)||r.includes(s))return r;const o=ar(e).getComputedStyle(s);return s!==e&&rP(s,o)&&r.push(s),nP(s,o)?r:a(s.parentNode)}return e?a(e):r}function yN(e){const[t]=Fm(e,1);return t??null}function Uy(e){return!Im||!e?null:Al(e)?e:Iv(e)?Pv(e)||e===jl(e).scrollingElement?window:Mu(e)?e:null:null}function vN(e){return Al(e)?e.scrollX:e.scrollLeft}function bN(e){return Al(e)?e.scrollY:e.scrollTop}function H0(e){return{x:vN(e),y:bN(e)}}var Dn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Dn||(Dn={}));function wN(e){return!Im||!e?!1:e===document.scrollingElement}function xN(e){const t={x:0,y:0},r=wN(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=a.y,u=e.scrollLeft>=a.x;return{isTop:s,isLeft:o,isBottom:l,isRight:u,maxScroll:a,minScroll:t}}const iP={x:.2,y:.2};function aP(e,t,r,a,s){let{top:o,left:l,right:u,bottom:d}=r;a===void 0&&(a=10),s===void 0&&(s=iP);const{isTop:f,isBottom:m,isLeft:p,isRight:g}=xN(e),y={x:0,y:0},_={x:0,y:0},b={height:t.height*s.y,width:t.width*s.x};return!f&&o<=t.top+b.height?(y.y=Dn.Backward,_.y=a*Math.abs((t.top+b.height-o)/b.height)):!m&&d>=t.bottom-b.height&&(y.y=Dn.Forward,_.y=a*Math.abs((t.bottom-b.height-d)/b.height)),!g&&u>=t.right-b.width?(y.x=Dn.Forward,_.x=a*Math.abs((t.right-b.width-u)/b.width)):!p&&l<=t.left+b.width&&(y.x=Dn.Backward,_.x=a*Math.abs((t.left+b.width-l)/b.width)),{direction:y,speed:_}}function sP(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:r,right:a,bottom:s}=e.getBoundingClientRect();return{top:t,left:r,right:a,bottom:s,width:e.clientWidth,height:e.clientHeight}}function _N(e){return e.reduce((t,r)=>cl(t,H0(r)),mi)}function oP(e){return e.reduce((t,r)=>t+vN(r),0)}function lP(e){return e.reduce((t,r)=>t+bN(r),0)}function SN(e,t){if(t===void 0&&(t=Tl),!e)return;const{top:r,left:a,bottom:s,right:o}=t(e);yN(e)&&(s<=0||o<=0||r>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const cP=[["x",["left","right"],oP],["y",["top","bottom"],lP]];class Bv{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=Fm(r),s=_N(a);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,u]of cP)for(const d of l)Object.defineProperty(this,d,{get:()=>{const f=u(a),m=s[o]-f;return this.rect[d]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Zc{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...r)})},this.target=t}add(t,r,a){var s;(s=this.target)==null||s.addEventListener(t,r,a),this.listeners.push([t,r,a])}}function uP(e){const{EventTarget:t}=ar(e);return e instanceof t?e:jl(e)}function Fy(e,t){const r=Math.abs(e.x),a=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+a**2)>t:"x"in t&&"y"in t?r>t.x&&a>t.y:"x"in t?r>t.x:"y"in t?a>t.y:!1}var Zr;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Zr||(Zr={}));function cS(e){e.preventDefault()}function dP(e){e.stopPropagation()}var Ct;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Ct||(Ct={}));const CN={start:[Ct.Space,Ct.Enter],cancel:[Ct.Esc],end:[Ct.Space,Ct.Enter,Ct.Tab]},fP=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case Ct.Right:return{...r,x:r.x+25};case Ct.Left:return{...r,x:r.x-25};case Ct.Down:return{...r,y:r.y+25};case Ct.Up:return{...r,y:r.y-25}}};class Dl{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new Zc(jl(r)),this.windowListeners=new Zc(ar(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Zr.Resize,this.handleCancel),this.windowListeners.add(Zr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Zr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,a=t.node.current;a&&SN(a),r(mi)}handleKeyDown(t){if(Bm(t)){const{active:r,context:a,options:s}=this.props,{keyboardCodes:o=CN,coordinateGetter:l=fP,scrollBehavior:u="smooth"}=s,{code:d}=t;if(o.end.includes(d)){this.handleEnd(t);return}if(o.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:f}=a.current,m=f?{x:f.left,y:f.top}:mi;this.referenceCoordinates||(this.referenceCoordinates=m);const p=l(t,{active:r,context:a.current,currentCoordinates:m});if(p){const g=vu(p,m),y={x:0,y:0},{scrollableAncestors:_}=a.current;for(const b of _){const w=t.code,{isTop:x,isRight:S,isLeft:C,isBottom:A,maxScroll:E,minScroll:j}=xN(b),T=sP(b),z={x:Math.min(w===Ct.Right?T.right-T.width/2:T.right,Math.max(w===Ct.Right?T.left:T.left+T.width/2,p.x)),y:Math.min(w===Ct.Down?T.bottom-T.height/2:T.bottom,Math.max(w===Ct.Down?T.top:T.top+T.height/2,p.y))},L=w===Ct.Right&&!S||w===Ct.Left&&!C,V=w===Ct.Down&&!A||w===Ct.Up&&!x;if(L&&z.x!==p.x){const F=b.scrollLeft+g.x,M=w===Ct.Right&&F<=E.x||w===Ct.Left&&F>=j.x;if(M&&!g.y){b.scrollTo({left:F,behavior:u});return}M?y.x=b.scrollLeft-F:y.x=w===Ct.Right?b.scrollLeft-E.x:b.scrollLeft-j.x,y.x&&b.scrollBy({left:-y.x,behavior:u});break}else if(V&&z.y!==p.y){const F=b.scrollTop+g.y,M=w===Ct.Down&&F<=E.y||w===Ct.Up&&F>=j.y;if(M&&!g.x){b.scrollTo({top:F,behavior:u});return}M?y.y=b.scrollTop-F:y.y=w===Ct.Down?b.scrollTop-E.y:b.scrollTop-j.y,y.y&&b.scrollBy({top:-y.y,behavior:u});break}}this.handleMove(t,cl(vu(p,this.referenceCoordinates),y))}}}handleMove(t,r){const{onMove:a}=this.props;t.preventDefault(),a(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Dl.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:a=CN,onActivation:s}=t,{active:o}=r;const{code:l}=e.nativeEvent;if(a.start.includes(l)){const u=o.activatorNode.current;return u&&e.target!==u?!1:(e.preventDefault(),s?.({event:e.nativeEvent}),!0)}return!1}}];function uS(e){return!!(e&&"distance"in e)}function dS(e){return!!(e&&"delay"in e)}class Hv{constructor(t,r,a){var s;a===void 0&&(a=uP(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:o}=t,{target:l}=o;this.props=t,this.events=r,this.document=jl(l),this.documentListeners=new Zc(this.document),this.listeners=new Zc(a),this.windowListeners=new Zc(ar(l)),this.initialCoordinates=(s=am(o))!=null?s:mi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:a}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Zr.Resize,this.handleCancel),this.windowListeners.add(Zr.DragStart,cS),this.windowListeners.add(Zr.VisibilityChange,this.handleCancel),this.windowListeners.add(Zr.ContextMenu,cS),this.documentListeners.add(Zr.Keydown,this.handleKeydown),r){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(dS(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(uS(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:a,onPending:s}=this.props;s(a,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Zr.Click,dP,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Zr.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:a,initialCoordinates:s,props:o}=this,{onMove:l,options:{activationConstraint:u}}=o;if(!s)return;const d=(r=am(t))!=null?r:mi,f=vu(s,d);if(!a&&u){if(uS(u)){if(u.tolerance!=null&&Fy(f,u.tolerance))return this.handleCancel();if(Fy(f,u.distance))return this.handleStart()}if(dS(u)&&Fy(f,u.tolerance))return this.handleCancel();this.handlePending(u,f);return}t.cancelable&&t.preventDefault(),l(d)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===Ct.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const hP={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Rl extends Hv{constructor(t){const{event:r}=t,a=jl(r.target);super(t,hP,a)}}Rl.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return!r.isPrimary||r.button!==0?!1:(a?.({event:r}),!0)}}];const mP={move:{name:"mousemove"},end:{name:"mouseup"}};var U0;(function(e){e[e.RightClick=2]="RightClick"})(U0||(U0={}));class pP extends Hv{constructor(t){super(t,mP,jl(t.event.target))}}pP.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return r.button===U0.RightClick?!1:(a?.({event:r}),!0)}}];const qy={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class gP extends Hv{constructor(t){super(t,qy)}static setup(){return window.addEventListener(qy.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(qy.move.name,t)};function t(){}}}gP.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;const{touches:s}=r;return s.length>1?!1:(a?.({event:r}),!0)}}];var Wc;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Wc||(Wc={}));var om;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(om||(om={}));function yP(e){let{acceleration:t,activator:r=Wc.Pointer,canScroll:a,draggingRect:s,enabled:o,interval:l=5,order:u=om.TreeOrder,pointerCoordinates:d,scrollableAncestors:f,scrollableAncestorRects:m,delta:p,threshold:g}=e;const y=bP({delta:p,disabled:!o}),[_,b]=RI(),w=N.useRef({x:0,y:0}),x=N.useRef({x:0,y:0}),S=N.useMemo(()=>{switch(r){case Wc.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Wc.DraggableRect:return s}},[r,s,d]),C=N.useRef(null),A=N.useCallback(()=>{const j=C.current;if(!j)return;const T=w.current.x*x.current.x,z=w.current.y*x.current.y;j.scrollBy(T,z)},[]),E=N.useMemo(()=>u===om.TreeOrder?[...f].reverse():f,[u,f]);N.useEffect(()=>{if(!o||!f.length||!S){b();return}for(const j of E){if(a?.(j)===!1)continue;const T=f.indexOf(j),z=m[T];if(!z)continue;const{direction:L,speed:V}=aP(j,z,S,t,g);for(const F of["x","y"])y[F][L[F]]||(V[F]=0,L[F]=0);if(V.x>0||V.y>0){b(),C.current=j,_(A,l),w.current=V,x.current=L;return}}w.current={x:0,y:0},x.current={x:0,y:0},b()},[t,A,a,b,o,l,JSON.stringify(S),JSON.stringify(y),_,f,E,m,JSON.stringify(g)])}const vP={x:{[Dn.Backward]:!1,[Dn.Forward]:!1},y:{[Dn.Backward]:!1,[Dn.Forward]:!1}};function bP(e){let{delta:t,disabled:r}=e;const a=im(t);return Ou(s=>{if(r||!a||!s)return vP;const o={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[Dn.Backward]:s.x[Dn.Backward]||o.x===-1,[Dn.Forward]:s.x[Dn.Forward]||o.x===1},y:{[Dn.Backward]:s.y[Dn.Backward]||o.y===-1,[Dn.Forward]:s.y[Dn.Forward]||o.y===1}}},[r,t,a])}function wP(e,t){const r=t!=null?e.get(t):void 0,a=r?r.node.current:null;return Ou(s=>{var o;return t==null?null:(o=a??s)!=null?o:null},[a,t])}function xP(e,t){return N.useMemo(()=>e.reduce((r,a)=>{const{sensor:s}=a,o=s.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,a)}));return[...r,...o]},[]),[e,t])}var bu;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(bu||(bu={}));var F0;(function(e){e.Optimized="optimized"})(F0||(F0={}));const fS=new Map;function _P(e,t){let{dragging:r,dependencies:a,config:s}=t;const[o,l]=N.useState(null),{frequency:u,measure:d,strategy:f}=s,m=N.useRef(e),p=w(),g=yu(p),y=N.useCallback(function(x){x===void 0&&(x=[]),!g.current&&l(S=>S===null?x:S.concat(x.filter(C=>!S.includes(C))))},[g]),_=N.useRef(null),b=Ou(x=>{if(p&&!r)return fS;if(!x||x===fS||m.current!==e||o!=null){const S=new Map;for(let C of e){if(!C)continue;if(o&&o.length>0&&!o.includes(C.id)&&C.rect.current){S.set(C.id,C.rect.current);continue}const A=C.node.current,E=A?new Bv(d(A),A):null;C.rect.current=E,E&&S.set(C.id,E)}return S}return x},[e,o,r,p,d]);return N.useEffect(()=>{m.current=e},[e]),N.useEffect(()=>{p||y()},[r,p]),N.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),N.useEffect(()=>{p||typeof u!="number"||_.current!==null||(_.current=setTimeout(()=>{y(),_.current=null},u))},[u,p,y,...a]),{droppableRects:b,measureDroppableContainers:y,measuringScheduled:o!=null};function w(){switch(f){case bu.Always:return!1;case bu.BeforeDragging:return r;default:return!r}}}function Uv(e,t){return Ou(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function SP(e,t){return Uv(e,t)}function CP(e){let{callback:t,disabled:r}=e;const a=Pm(t),s=N.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(a)},[a,r]);return N.useEffect(()=>()=>s?.disconnect(),[s]),s}function qm(e){let{callback:t,disabled:r}=e;const a=Pm(t),s=N.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(a)},[r]);return N.useEffect(()=>()=>s?.disconnect(),[s]),s}function EP(e){return new Bv(Tl(e),e)}function hS(e,t,r){t===void 0&&(t=EP);const[a,s]=N.useState(null);function o(){s(d=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=d??r)!=null?f:null}const m=t(e);return JSON.stringify(d)===JSON.stringify(m)?d:m})}const l=CP({callback(d){if(e)for(const f of d){const{type:m,target:p}=f;if(m==="childList"&&p instanceof HTMLElement&&p.contains(e)){o();break}}}}),u=qm({callback:o});return hi(()=>{o(),e?(u?.observe(e),l?.observe(document.body,{childList:!0,subtree:!0})):(u?.disconnect(),l?.disconnect())},[e]),a}function kP(e){const t=Uv(e);return pN(e,t)}const mS=[];function NP(e){const t=N.useRef(e),r=Ou(a=>e?a&&a!==mS&&e&&t.current&&e.parentNode===t.current.parentNode?a:Fm(e):mS,[e]);return N.useEffect(()=>{t.current=e},[e]),r}function AP(e){const[t,r]=N.useState(null),a=N.useRef(e),s=N.useCallback(o=>{const l=Uy(o.target);l&&r(u=>u?(u.set(l,H0(l)),new Map(u)):null)},[]);return N.useEffect(()=>{const o=a.current;if(e!==o){l(o);const u=e.map(d=>{const f=Uy(d);return f?(f.addEventListener("scroll",s,{passive:!0}),[f,H0(f)]):null}).filter(d=>d!=null);r(u.length?new Map(u):null),a.current=e}return()=>{l(e),l(o)};function l(u){u.forEach(d=>{const f=Uy(d);f?.removeEventListener("scroll",s)})}},[s,e]),N.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>cl(o,l),mi):_N(e):mi,[e,t])}function pS(e,t){t===void 0&&(t=[]);const r=N.useRef(null);return N.useEffect(()=>{r.current=null},t),N.useEffect(()=>{const a=e!==mi;a&&!r.current&&(r.current=e),!a&&r.current&&(r.current=null)},[e]),r.current?vu(e,r.current):mi}function jP(e){N.useEffect(()=>{if(!Im)return;const t=e.map(r=>{let{sensor:a}=r;return a.setup==null?void 0:a.setup()});return()=>{for(const r of t)r?.()}},e.map(t=>{let{sensor:r}=t;return r}))}function TP(e,t){return N.useMemo(()=>e.reduce((r,a)=>{let{eventName:s,handler:o}=a;return r[s]=l=>{o(l,t)},r},{}),[e,t])}function EN(e){return N.useMemo(()=>e?tP(e):null,[e])}const gS=[];function DP(e,t){t===void 0&&(t=Tl);const[r]=e,a=EN(r?ar(r):null),[s,o]=N.useState(gS);function l(){o(()=>e.length?e.map(d=>wN(d)?a:new Bv(t(d),d)):gS)}const u=qm({callback:l});return hi(()=>{u?.disconnect(),l(),e.forEach(d=>u?.observe(d))},[e]),s}function kN(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Mu(t)?t:e}function RP(e){let{measure:t}=e;const[r,a]=N.useState(null),s=N.useCallback(f=>{for(const{target:m}of f)if(Mu(m)){a(p=>{const g=t(m);return p?{...p,width:g.width,height:g.height}:g});break}},[t]),o=qm({callback:s}),l=N.useCallback(f=>{const m=kN(f);o?.disconnect(),m&&o?.observe(m),a(m?t(m):null)},[t,o]),[u,d]=rm(l);return N.useMemo(()=>({nodeRef:u,rect:r,setRef:d}),[r,u,d])}const $P=[{sensor:Rl,options:{}},{sensor:Dl,options:{}}],MP={current:{}},Nh={draggable:{measure:lS},droppable:{measure:lS,strategy:bu.WhileDragging,frequency:F0.Optimized},dragOverlay:{measure:Tl}};class Qc extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,a;return(r=(a=this.get(t))==null?void 0:a.node.current)!=null?r:void 0}}const OP={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Qc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:sm},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Nh,measureDroppableContainers:sm,windowRect:null,measuringScheduled:!1},NN={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:sm,draggableNodes:new Map,over:null,measureDroppableContainers:sm},Lu=N.createContext(NN),AN=N.createContext(OP);function zP(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Qc}}}function LP(e,t){switch(t.type){case kn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case kn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case kn.DragEnd:case kn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case kn.RegisterDroppable:{const{element:r}=t,{id:a}=r,s=new Qc(e.droppable.containers);return s.set(a,r),{...e,droppable:{...e.droppable,containers:s}}}case kn.SetDroppableDisabled:{const{id:r,key:a,disabled:s}=t,o=e.droppable.containers.get(r);if(!o||a!==o.key)return e;const l=new Qc(e.droppable.containers);return l.set(r,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:l}}}case kn.UnregisterDroppable:{const{id:r,key:a}=t,s=e.droppable.containers.get(r);if(!s||a!==s.key)return e;const o=new Qc(e.droppable.containers);return o.delete(r),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function IP(e){let{disabled:t}=e;const{active:r,activatorEvent:a,draggableNodes:s}=N.useContext(Lu),o=im(a),l=im(r?.id);return N.useEffect(()=>{if(!t&&!a&&o&&l!=null){if(!Bm(o)||document.activeElement===o.target)return;const u=s.get(l);if(!u)return;const{activatorNode:d,node:f}=u;if(!d.current&&!f.current)return;requestAnimationFrame(()=>{for(const m of[d.current,f.current]){if(!m)continue;const p=OI(m);if(p){p.focus();break}}})}},[a,t,s,l,o]),null}function jN(e,t){let{transform:r,...a}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...a}),r):r}function PP(e){return N.useMemo(()=>({draggable:{...Nh.draggable,...e?.draggable},droppable:{...Nh.droppable,...e?.droppable},dragOverlay:{...Nh.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function BP(e){let{activeNode:t,measure:r,initialRect:a,config:s=!0}=e;const o=N.useRef(!1),{x:l,y:u}=typeof s=="boolean"?{x:s,y:s}:s;hi(()=>{if(!l&&!u||!t){o.current=!1;return}if(o.current||!a)return;const f=t?.node.current;if(!f||f.isConnected===!1)return;const m=r(f),p=pN(m,a);if(l||(p.x=0),u||(p.y=0),o.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const g=yN(f);g&&g.scrollBy({top:p.y,left:p.x})}},[t,l,u,a,r])}const Vm=N.createContext({...mi,scaleX:1,scaleY:1});var es;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(es||(es={}));const Ym=N.memo(function(t){var r,a,s,o;let{id:l,accessibility:u,autoScroll:d=!0,children:f,sensors:m=$P,collisionDetection:p=XI,measuring:g,modifiers:y,..._}=t;const b=N.useReducer(LP,void 0,zP),[w,x]=b,[S,C]=HI(),[A,E]=N.useState(es.Uninitialized),j=A===es.Initialized,{draggable:{active:T,nodes:z,translate:L},droppable:{containers:V}}=w,F=T!=null?z.get(T):null,M=N.useRef({initial:null,translated:null}),O=N.useMemo(()=>{var ut;return T!=null?{id:T,data:(ut=F?.data)!=null?ut:MP,rect:M}:null},[T,F]),R=N.useRef(null),[G,H]=N.useState(null),[U,Z]=N.useState(null),X=yu(_,Object.values(_)),Q=zu("DndDescribedBy",l),$=N.useMemo(()=>V.getEnabled(),[V]),B=PP(g),{droppableRects:K,measureDroppableContainers:P,measuringScheduled:q}=_P($,{dragging:j,dependencies:[L.x,L.y],config:B.droppable}),J=wP(z,T),le=N.useMemo(()=>U?am(U):null,[U]),oe=it(),he=SP(J,B.draggable.measure);BP({activeNode:T!=null?z.get(T):null,config:oe.layoutShiftCompensation,initialRect:he,measure:B.draggable.measure});const ve=hS(J,B.draggable.measure,he),W=hS(J?J.parentElement:null),ie=N.useRef({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:K,draggableNodes:z,draggingNode:null,draggingNodeRect:null,droppableContainers:V,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ae=V.getNodeFor((r=ie.current.over)==null?void 0:r.id),I=RP({measure:B.dragOverlay.measure}),ue=(a=I.nodeRef.current)!=null?a:J,ce=j?(s=I.rect)!=null?s:ve:null,re=!!(I.nodeRef.current&&I.rect),ne=kP(re?null:ve),fe=EN(ue?ar(ue):null),Ce=NP(j?ae??J:null),ke=DP(Ce),ye=jN(y,{transform:{x:L.x-ne.x,y:L.y-ne.y,scaleX:1,scaleY:1},activatorEvent:U,active:O,activeNodeRect:ve,containerNodeRect:W,draggingNodeRect:ce,over:ie.current.over,overlayNodeRect:I.rect,scrollableAncestors:Ce,scrollableAncestorRects:ke,windowRect:fe}),Re=le?cl(le,L):null,Pe=AP(Ce),Le=pS(Pe),Fe=pS(Pe,[ve]),Ue=cl(ye,Le),Ne=ce?QI(ce,ye):null,$e=O&&Ne?p({active:O,collisionRect:Ne,droppableRects:K,droppableContainers:$,pointerCoordinates:Re}):null,Ae=mN($e,"id"),[Ve,He]=N.useState(null),Be=re?ye:cl(ye,Fe),Ye=ZI(Be,(o=Ve?.rect)!=null?o:null,ve),mt=N.useRef(null),nt=N.useCallback((ut,kt)=>{let{sensor:Ft,options:wn}=kt;if(R.current==null)return;const fn=z.get(R.current);if(!fn)return;const qt=ut.nativeEvent,xn=new Ft({active:R.current,activeNode:fn,event:qt,options:wn,context:ie,onAbort(Xt){if(!z.get(Xt))return;const{onDragAbort:An}=X.current,$n={id:Xt};An?.($n),S({type:"onDragAbort",event:$n})},onPending(Xt,_n,An,$n){if(!z.get(Xt))return;const{onDragPending:Sn}=X.current,qn={id:Xt,constraint:_n,initialCoordinates:An,offset:$n};Sn?.(qn),S({type:"onDragPending",event:qn})},onStart(Xt){const _n=R.current;if(_n==null)return;const An=z.get(_n);if(!An)return;const{onDragStart:$n}=X.current,br={activatorEvent:qt,active:{id:_n,data:An.data,rect:M}};da.unstable_batchedUpdates(()=>{$n?.(br),E(es.Initializing),x({type:kn.DragStart,initialCoordinates:Xt,active:_n}),S({type:"onDragStart",event:br}),H(mt.current),Z(qt)})},onMove(Xt){x({type:kn.DragMove,coordinates:Xt})},onEnd:an(kn.DragEnd),onCancel:an(kn.DragCancel)});mt.current=xn;function an(Xt){return async function(){const{active:An,collisions:$n,over:br,scrollAdjustedTranslate:Sn}=ie.current;let qn=null;if(An&&Sn){const{cancelDrop:sr}=X.current;qn={activatorEvent:qt,active:An,collisions:$n,delta:Sn,over:br},Xt===kn.DragEnd&&typeof sr=="function"&&await Promise.resolve(sr(qn))&&(Xt=kn.DragCancel)}R.current=null,da.unstable_batchedUpdates(()=>{x({type:Xt}),E(es.Uninitialized),He(null),H(null),Z(null),mt.current=null;const sr=Xt===kn.DragEnd?"onDragEnd":"onDragCancel";if(qn){const Vn=X.current[sr];Vn?.(qn),S({type:sr,event:qn})}})}}},[z]),Ot=N.useCallback((ut,kt)=>(Ft,wn)=>{const fn=Ft.nativeEvent,qt=z.get(wn);if(R.current!==null||!qt||fn.dndKit||fn.defaultPrevented)return;const xn={active:qt};ut(Ft,kt.options,xn)===!0&&(fn.dndKit={capturedBy:kt.sensor},R.current=wn,nt(Ft,kt))},[z,nt]),Kt=xP(m,Ot);jP(m),hi(()=>{ve&&A===es.Initializing&&E(es.Initialized)},[ve,A]),N.useEffect(()=>{const{onDragMove:ut}=X.current,{active:kt,activatorEvent:Ft,collisions:wn,over:fn}=ie.current;if(!kt||!Ft)return;const qt={active:kt,activatorEvent:Ft,collisions:wn,delta:{x:Ue.x,y:Ue.y},over:fn};da.unstable_batchedUpdates(()=>{ut?.(qt),S({type:"onDragMove",event:qt})})},[Ue.x,Ue.y]),N.useEffect(()=>{const{active:ut,activatorEvent:kt,collisions:Ft,droppableContainers:wn,scrollAdjustedTranslate:fn}=ie.current;if(!ut||R.current==null||!kt||!fn)return;const{onDragOver:qt}=X.current,xn=wn.get(Ae),an=xn&&xn.rect.current?{id:xn.id,rect:xn.rect.current,data:xn.data,disabled:xn.disabled}:null,Xt={active:ut,activatorEvent:kt,collisions:Ft,delta:{x:fn.x,y:fn.y},over:an};da.unstable_batchedUpdates(()=>{He(an),qt?.(Xt),S({type:"onDragOver",event:Xt})})},[Ae]),hi(()=>{ie.current={activatorEvent:U,active:O,activeNode:J,collisionRect:Ne,collisions:$e,droppableRects:K,draggableNodes:z,draggingNode:ue,draggingNodeRect:ce,droppableContainers:V,over:Ve,scrollableAncestors:Ce,scrollAdjustedTranslate:Ue},M.current={initial:ce,translated:Ne}},[O,J,$e,Ne,z,ue,ce,K,V,Ve,Ce,Ue]),yP({...oe,delta:L,draggingRect:Ne,pointerCoordinates:Re,scrollableAncestors:Ce,scrollableAncestorRects:ke});const Jt=N.useMemo(()=>({active:O,activeNode:J,activeNodeRect:ve,activatorEvent:U,collisions:$e,containerNodeRect:W,dragOverlay:I,draggableNodes:z,droppableContainers:V,droppableRects:K,over:Ve,measureDroppableContainers:P,scrollableAncestors:Ce,scrollableAncestorRects:ke,measuringConfiguration:B,measuringScheduled:q,windowRect:fe}),[O,J,ve,U,$e,W,I,z,V,K,Ve,P,Ce,ke,B,q,fe]),Et=N.useMemo(()=>({activatorEvent:U,activators:Kt,active:O,activeNodeRect:ve,ariaDescribedById:{draggable:Q},dispatch:x,draggableNodes:z,over:Ve,measureDroppableContainers:P}),[U,Kt,O,ve,x,Q,z,Ve,P]);return ht.createElement(dN.Provider,{value:C},ht.createElement(Lu.Provider,{value:Et},ht.createElement(AN.Provider,{value:Jt},ht.createElement(Vm.Provider,{value:Ye},f)),ht.createElement(IP,{disabled:u?.restoreFocus===!1})),ht.createElement(qI,{...u,hiddenTextDescribedById:Q}));function it(){const ut=G?.autoScrollEnabled===!1,kt=typeof d=="object"?d.enabled===!1:d===!1,Ft=j&&!ut&&!kt;return typeof d=="object"?{...d,enabled:Ft}:{enabled:Ft}}}),HP=N.createContext(null),yS="button",UP="Draggable";function FP(e){let{id:t,data:r,disabled:a=!1,attributes:s}=e;const o=zu(UP),{activators:l,activatorEvent:u,active:d,activeNodeRect:f,ariaDescribedById:m,draggableNodes:p,over:g}=N.useContext(Lu),{role:y=yS,roleDescription:_="draggable",tabIndex:b=0}=s??{},w=d?.id===t,x=N.useContext(w?Vm:HP),[S,C]=rm(),[A,E]=rm(),j=TP(l,t),T=yu(r);hi(()=>(p.set(t,{id:t,key:o,node:S,activatorNode:A,data:T}),()=>{const L=p.get(t);L&&L.key===o&&p.delete(t)}),[p,t]);const z=N.useMemo(()=>({role:y,tabIndex:b,"aria-disabled":a,"aria-pressed":w&&y===yS?!0:void 0,"aria-roledescription":_,"aria-describedby":m.draggable}),[a,y,b,w,_,m.draggable]);return{active:d,activatorEvent:u,activeNodeRect:f,attributes:z,isDragging:w,listeners:a?void 0:j,node:S,over:g,setNodeRef:C,setActivatorNodeRef:E,transform:x}}function TN(){return N.useContext(AN)}const qP="Droppable",VP={timeout:25};function YP(e){let{data:t,disabled:r=!1,id:a,resizeObserverConfig:s}=e;const o=zu(qP),{active:l,dispatch:u,over:d,measureDroppableContainers:f}=N.useContext(Lu),m=N.useRef({disabled:r}),p=N.useRef(!1),g=N.useRef(null),y=N.useRef(null),{disabled:_,updateMeasurementsFor:b,timeout:w}={...VP,...s},x=yu(b??a),S=N.useCallback(()=>{if(!p.current){p.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{f(Array.isArray(x.current)?x.current:[x.current]),y.current=null},w)},[w]),C=qm({callback:S,disabled:_||!l}),A=N.useCallback((z,L)=>{C&&(L&&(C.unobserve(L),p.current=!1),z&&C.observe(z))},[C]),[E,j]=rm(A),T=yu(t);return N.useEffect(()=>{!C||!E.current||(C.disconnect(),p.current=!1,C.observe(E.current))},[E,C]),N.useEffect(()=>(u({type:kn.RegisterDroppable,element:{id:a,key:o,disabled:r,node:E,rect:g,data:T}}),()=>u({type:kn.UnregisterDroppable,key:o,id:a})),[a]),N.useEffect(()=>{r!==m.current.disabled&&(u({type:kn.SetDroppableDisabled,id:a,key:o,disabled:r}),m.current.disabled=r)},[a,o,r,u]),{active:l,rect:g,isOver:d?.id===a,node:E,over:d,setNodeRef:j}}function GP(e){let{animation:t,children:r}=e;const[a,s]=N.useState(null),[o,l]=N.useState(null),u=im(r);return!r&&!a&&u&&s(u),hi(()=>{if(!o)return;const d=a?.key,f=a?.props.id;if(d==null||f==null){s(null);return}Promise.resolve(t(f,o)).then(()=>{s(null)})},[t,a,o]),ht.createElement(ht.Fragment,null,r,a?N.cloneElement(a,{ref:l}):null)}const KP={x:0,y:0,scaleX:1,scaleY:1};function XP(e){let{children:t}=e;return ht.createElement(Lu.Provider,{value:NN},ht.createElement(Vm.Provider,{value:KP},t))}const ZP={position:"fixed",touchAction:"none"},WP=e=>Bm(e)?"transform 250ms ease":void 0,QP=N.forwardRef((e,t)=>{let{as:r,activatorEvent:a,adjustScale:s,children:o,className:l,rect:u,style:d,transform:f,transition:m=WP}=e;if(!u)return null;const p=s?f:{...f,scaleX:1,scaleY:1},g={...ZP,width:u.width,height:u.height,top:u.top,left:u.left,transform:cs.Transform.toString(p),transformOrigin:s&&a?VI(a,u):void 0,transition:typeof m=="function"?m(a):m,...d};return ht.createElement(r,{className:l,style:g,ref:t},o)}),JP=e=>t=>{let{active:r,dragOverlay:a}=t;const s={},{styles:o,className:l}=e;if(o!=null&&o.active)for(const[u,d]of Object.entries(o.active))d!==void 0&&(s[u]=r.node.style.getPropertyValue(u),r.node.style.setProperty(u,d));if(o!=null&&o.dragOverlay)for(const[u,d]of Object.entries(o.dragOverlay))d!==void 0&&a.node.style.setProperty(u,d);return l!=null&&l.active&&r.node.classList.add(l.active),l!=null&&l.dragOverlay&&a.node.classList.add(l.dragOverlay),function(){for(const[d,f]of Object.entries(s))r.node.style.setProperty(d,f);l!=null&&l.active&&r.node.classList.remove(l.active)}},eB=e=>{let{transform:{initial:t,final:r}}=e;return[{transform:cs.Transform.toString(t)},{transform:cs.Transform.toString(r)}]},tB={duration:250,easing:"ease",keyframes:eB,sideEffects:JP({styles:{active:{opacity:"0"}}})};function nB(e){let{config:t,draggableNodes:r,droppableContainers:a,measuringConfiguration:s}=e;return Pm((o,l)=>{if(t===null)return;const u=r.get(o);if(!u)return;const d=u.node.current;if(!d)return;const f=kN(l);if(!f)return;const{transform:m}=ar(l).getComputedStyle(l),p=gN(m);if(!p)return;const g=typeof t=="function"?t:rB(t);return SN(d,s.draggable.measure),g({active:{id:o,data:u.data,node:d,rect:s.draggable.measure(d)},draggableNodes:r,dragOverlay:{node:l,rect:s.dragOverlay.measure(f)},droppableContainers:a,measuringConfiguration:s,transform:p})})}function rB(e){const{duration:t,easing:r,sideEffects:a,keyframes:s}={...tB,...e};return o=>{let{active:l,dragOverlay:u,transform:d,...f}=o;if(!t)return;const m={x:u.rect.left-l.rect.left,y:u.rect.top-l.rect.top},p={scaleX:d.scaleX!==1?l.rect.width*d.scaleX/u.rect.width:1,scaleY:d.scaleY!==1?l.rect.height*d.scaleY/u.rect.height:1},g={x:d.x-m.x,y:d.y-m.y,...p},y=s({...f,active:l,dragOverlay:u,transform:{initial:d,final:g}}),[_]=y,b=y[y.length-1];if(JSON.stringify(_)===JSON.stringify(b))return;const w=a?.({active:l,dragOverlay:u,...f}),x=u.node.animate(y,{duration:t,easing:r,fill:"forwards"});return new Promise(S=>{x.onfinish=()=>{w?.(),S()}})}}let vS=0;function iB(e){return N.useMemo(()=>{if(e!=null)return vS++,vS},[e])}const Gm=ht.memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:a,style:s,transition:o,modifiers:l,wrapperElement:u="div",className:d,zIndex:f=999}=e;const{activatorEvent:m,active:p,activeNodeRect:g,containerNodeRect:y,draggableNodes:_,droppableContainers:b,dragOverlay:w,over:x,measuringConfiguration:S,scrollableAncestors:C,scrollableAncestorRects:A,windowRect:E}=TN(),j=N.useContext(Vm),T=iB(p?.id),z=jN(l,{activatorEvent:m,active:p,activeNodeRect:g,containerNodeRect:y,draggingNodeRect:w.rect,over:x,overlayNodeRect:w.rect,scrollableAncestors:C,scrollableAncestorRects:A,transform:j,windowRect:E}),L=Uv(g),V=nB({config:a,draggableNodes:_,droppableContainers:b,measuringConfiguration:S}),F=L?w.setRef:void 0;return ht.createElement(XP,null,ht.createElement(GP,{animation:V},p&&T?ht.createElement(QP,{key:T,id:p.id,ref:F,as:u,activatorEvent:m,adjustScale:t,className:d,transition:o,rect:L,style:{zIndex:f,...s},transform:z},r):null))});function $l(e,t,r){const a=e.slice();return a.splice(r<0?a.length+r:r,0,a.splice(t,1)[0]),a}function aB(e,t){return e.reduce((r,a,s)=>{const o=t.get(a);return o&&(r[s]=o),r},Array(e.length))}function xf(e){return e!==null&&e>=0}function sB(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function oB(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const DN=e=>{let{rects:t,activeIndex:r,overIndex:a,index:s}=e;const o=$l(t,a,r),l=t[s],u=o[s];return!u||!l?null:{x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height}},_f={scaleX:1,scaleY:1},Km=e=>{var t;let{activeIndex:r,activeNodeRect:a,index:s,rects:o,overIndex:l}=e;const u=(t=o[r])!=null?t:a;if(!u)return null;if(s===r){const f=o[l];return f?{x:0,y:r<l?f.top+f.height-(u.top+u.height):f.top-u.top,..._f}:null}const d=lB(o,s,r);return s>r&&s<=l?{x:0,y:-u.height-d,..._f}:s<r&&s>=l?{x:0,y:u.height+d,..._f}:{x:0,y:0,..._f}};function lB(e,t,r){const a=e[t],s=e[t-1],o=e[t+1];return a?r<t?s?a.top-(s.top+s.height):o?o.top-(a.top+a.height):0:o?o.top-(a.top+a.height):s?a.top-(s.top+s.height):0:0}const RN="Sortable",$N=ht.createContext({activeIndex:-1,containerId:RN,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:DN,disabled:{draggable:!1,droppable:!1}});function Xm(e){let{children:t,id:r,items:a,strategy:s=DN,disabled:o=!1}=e;const{active:l,dragOverlay:u,droppableRects:d,over:f,measureDroppableContainers:m}=TN(),p=zu(RN,r),g=u.rect!==null,y=N.useMemo(()=>a.map(j=>typeof j=="object"&&"id"in j?j.id:j),[a]),_=l!=null,b=l?y.indexOf(l.id):-1,w=f?y.indexOf(f.id):-1,x=N.useRef(y),S=!sB(y,x.current),C=w!==-1&&b===-1||S,A=oB(o);hi(()=>{S&&_&&m(y)},[S,y,_,m]),N.useEffect(()=>{x.current=y},[y]);const E=N.useMemo(()=>({activeIndex:b,containerId:p,disabled:A,disableTransforms:C,items:y,overIndex:w,useDragOverlay:g,sortedRects:aB(y,d),strategy:s}),[b,p,A.draggable,A.droppable,C,y,w,d,g,s]);return ht.createElement($N.Provider,{value:E},t)}const cB=e=>{let{id:t,items:r,activeIndex:a,overIndex:s}=e;return $l(r,a,s).indexOf(t)},uB=e=>{let{containerId:t,isSorting:r,wasDragging:a,index:s,items:o,newIndex:l,previousItems:u,previousContainerId:d,transition:f}=e;return!f||!a||u!==o&&s===l?!1:r?!0:l!==s&&t===d},dB={duration:200,easing:"ease"},MN="transform",fB=cs.Transition.toString({property:MN,duration:0,easing:"linear"}),hB={roleDescription:"sortable"};function mB(e){let{disabled:t,index:r,node:a,rect:s}=e;const[o,l]=N.useState(null),u=N.useRef(r);return hi(()=>{if(!t&&r!==u.current&&a.current){const d=s.current;if(d){const f=Tl(a.current,{ignoreTransform:!0}),m={x:d.left-f.left,y:d.top-f.top,scaleX:d.width/f.width,scaleY:d.height/f.height};(m.x||m.y)&&l(m)}}r!==u.current&&(u.current=r)},[t,r,a,s]),N.useEffect(()=>{o&&l(null)},[o]),o}function pB(e){let{animateLayoutChanges:t=uB,attributes:r,disabled:a,data:s,getNewIndex:o=cB,id:l,strategy:u,resizeObserverConfig:d,transition:f=dB}=e;const{items:m,containerId:p,activeIndex:g,disabled:y,disableTransforms:_,sortedRects:b,overIndex:w,useDragOverlay:x,strategy:S}=N.useContext($N),C=gB(a,y),A=m.indexOf(l),E=N.useMemo(()=>({sortable:{containerId:p,index:A,items:m},...s}),[p,s,A,m]),j=N.useMemo(()=>m.slice(m.indexOf(l)),[m,l]),{rect:T,node:z,isOver:L,setNodeRef:V}=YP({id:l,data:E,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...d}}),{active:F,activatorEvent:M,activeNodeRect:O,attributes:R,setNodeRef:G,listeners:H,isDragging:U,over:Z,setActivatorNodeRef:X,transform:Q}=FP({id:l,data:E,attributes:{...hB,...r},disabled:C.draggable}),$=DI(V,G),B=!!F,K=B&&!_&&xf(g)&&xf(w),P=!x&&U,q=P&&K?Q:null,le=K?q??(u??S)({rects:b,activeNodeRect:O,activeIndex:g,overIndex:w,index:A}):null,oe=xf(g)&&xf(w)?o({id:l,items:m,activeIndex:g,overIndex:w}):A,he=F?.id,ve=N.useRef({activeId:he,items:m,newIndex:oe,containerId:p}),W=m!==ve.current.items,ie=t({active:F,containerId:p,isDragging:U,isSorting:B,id:l,index:A,items:m,newIndex:ve.current.newIndex,previousItems:ve.current.items,previousContainerId:ve.current.containerId,transition:f,wasDragging:ve.current.activeId!=null}),ae=mB({disabled:!ie,index:A,node:z,rect:T});return N.useEffect(()=>{B&&ve.current.newIndex!==oe&&(ve.current.newIndex=oe),p!==ve.current.containerId&&(ve.current.containerId=p),m!==ve.current.items&&(ve.current.items=m)},[B,oe,p,m]),N.useEffect(()=>{if(he===ve.current.activeId)return;if(he!=null&&ve.current.activeId==null){ve.current.activeId=he;return}const ue=setTimeout(()=>{ve.current.activeId=he},50);return()=>clearTimeout(ue)},[he]),{active:F,activeIndex:g,attributes:R,data:E,rect:T,index:A,newIndex:oe,items:m,isOver:L,isSorting:B,isDragging:U,listeners:H,node:z,overIndex:w,over:Z,setNodeRef:$,setActivatorNodeRef:X,setDroppableNodeRef:V,setDraggableNodeRef:G,transform:ae??le,transition:I()};function I(){if(ae||W&&ve.current.newIndex===A)return fB;if(!(P&&!Bm(M)||!f)&&(B||ie))return cs.Transition.toString({...f,property:MN})}}function gB(e,t){var r,a;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e?.draggable)!=null?r:t.draggable,droppable:(a=e?.droppable)!=null?a:t.droppable}}function lm(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const yB=[Ct.Down,Ct.Right,Ct.Up,Ct.Left],Zm=(e,t)=>{let{context:{active:r,collisionRect:a,droppableRects:s,droppableContainers:o,over:l,scrollableAncestors:u}}=t;if(yB.includes(e.code)){if(e.preventDefault(),!r||!a)return;const d=[];o.getEnabled().forEach(p=>{if(!p||p!=null&&p.disabled)return;const g=s.get(p.id);if(g)switch(e.code){case Ct.Down:a.top<g.top&&d.push(p);break;case Ct.Up:a.top>g.top&&d.push(p);break;case Ct.Left:a.left>g.left&&d.push(p);break;case Ct.Right:a.left<g.left&&d.push(p);break}});const f=GI({collisionRect:a,droppableRects:s,droppableContainers:d});let m=mN(f,"id");if(m===l?.id&&f.length>1&&(m=f[1].id),m!=null){const p=o.get(r.id),g=o.get(m),y=g?s.get(g.id):null,_=g?.node.current;if(_&&y&&p&&g){const w=Fm(_).some((j,T)=>u[T]!==j),x=ON(p,g),S=vB(p,g),C=w||!x?{x:0,y:0}:{x:S?a.width-y.width:0,y:S?a.height-y.height:0},A={x:y.left,y:y.top};return C.x&&C.y?A:vu(A,C)}}}};function ON(e,t){return!lm(e)||!lm(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function vB(e,t){return!lm(e)||!lm(t)||!ON(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Bs=[{value:"internal",label:"Internal"},{value:"external_dependency",label:"External"},{value:"data_store",label:"Data Store"}],zN=N.forwardRef(({value:e,onSave:t,onTabPress:r,onNavigate:a},s)=>{const[o,l]=ht.useState(!1),[u,d]=ht.useState(-1),f=N.useRef(null);N.useImperativeHandle(s,()=>f.current);const m=b=>Bs.find(w=>w.value===b)?.label||b,p=b=>{t&&b!==e&&t(b),l(!1),d(-1)},g=b=>{if(o){if(b.key==="ArrowDown"){b.preventDefault(),d(w=>Math.min(w+1,Bs.length-1));return}else if(b.key==="ArrowUp"){b.preventDefault(),d(w=>Math.max(w-1,0));return}else if(b.key==="Enter"){b.preventDefault(),u>=0&&u<Bs.length&&p(Bs[u].value);return}else if(b.key==="Escape"){b.preventDefault(),l(!1),d(-1);return}else if(b.key==="Tab"){b.preventDefault(),l(!1),d(-1),r&&r(b.shiftKey);return}}else{if(b.key==="Enter"){b.preventDefault(),l(!0);const w=Bs.findIndex(x=>x.value===e);d(w);return}else if(b.key==="Tab"){b.preventDefault(),r&&r(b.shiftKey);return}if(a){if(b.key==="ArrowRight"){b.preventDefault(),a("right");return}else if(b.key==="ArrowLeft"){b.preventDefault(),a("left");return}else if(b.key==="ArrowDown"){b.preventDefault(),a("down");return}else if(b.key==="ArrowUp"){b.preventDefault(),a("up");return}}}},y=()=>{if(!o){l(!0);const b=Bs.findIndex(w=>w.value===e);d(b)}},_=b=>{p(b)};return N.useEffect(()=>{if(!o)return;const b=w=>{f.current&&!f.current.contains(w.target)&&(l(!1),d(-1))};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[o]),v.jsxs("div",{ref:f,className:"always-editable-type-cell",tabIndex:0,onKeyDown:g,onClick:b=>b.stopPropagation(),children:[v.jsxs("div",{className:"type-display",onClick:y,children:[m(e),v.jsx("span",{className:"type-arrow",children:""})]}),o&&v.jsx("div",{className:"type-dropdown",children:Bs.map((b,w)=>v.jsx("div",{className:`type-option ${w===u?"highlighted":""} ${b.value===e?"selected":""}`,onClick:()=>_(b.value),onMouseEnter:()=>d(w),children:b.label},b.value))})]})});zN.displayName="EditableTypeCell";function bB({listeners:e,attributes:t,setActivatorNodeRef:r}){return v.jsx("button",{ref:r,className:"drag-handle",type:"button","aria-label":"Drag to reorder",...e,...t,children:v.jsxs("svg",{width:"12",height:"16",viewBox:"0 0 12 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("circle",{cx:"3",cy:"3",r:"1.5",fill:"currentColor"}),v.jsx("circle",{cx:"9",cy:"3",r:"1.5",fill:"currentColor"}),v.jsx("circle",{cx:"3",cy:"8",r:"1.5",fill:"currentColor"}),v.jsx("circle",{cx:"9",cy:"8",r:"1.5",fill:"currentColor"}),v.jsx("circle",{cx:"3",cy:"13",r:"1.5",fill:"currentColor"}),v.jsx("circle",{cx:"9",cy:"13",r:"1.5",fill:"currentColor"})]})})}function Wm({id:e,children:t}){const{attributes:r,listeners:a,setNodeRef:s,setActivatorNodeRef:o,transform:l,transition:u,isDragging:d}=pB({id:e}),f={transform:cs.Transform.toString(l),transition:u,opacity:d?.5:1,backgroundColor:d?"var(--bg-secondary)":void 0,position:"relative"};return v.jsxs("tr",{ref:s,style:f,className:`sortable-row ${d?"is-dragging":""}`,children:[v.jsx("td",{className:"drag-handle-container",children:v.jsx(bB,{listeners:a,attributes:r,setActivatorNodeRef:o})}),t]})}const wB=ht.memo(N.forwardRef(function({threatModel:t,onComponentNameChange:r,onComponentTypeChange:a,onComponentDescriptionChange:s,onComponentAssetsChange:o,onCreateAsset:l,onRemoveComponent:u,onAddComponent:d,onReorderComponents:f,onNavigateToNextTable:m,onNavigateToPreviousTable:p},g){const y=N.useRef(new Map),_=N.useRef({focus:!1,type:null}),b=N.useRef(t?.components?.length||0),[w,x]=N.useState(null),S=Hm(us(Rl),us(Dl,{coordinateGetter:Zm})),C=L=>{x(L.active.id)},A=L=>{const{active:V,over:F}=L;if(F&&V.id!==F.id){const M=t?.components||[],O=M.findIndex(H=>H.ref===V.id),R=M.findIndex(H=>H.ref===F.id),G=$l(M,O,R).map(H=>H.ref);f(G)}x(null)},E=L=>{const V=y.current.get(L);if(V){const F=V.querySelector('input, textarea, select, [tabindex="0"]');F&&F.focus()}};N.useImperativeHandle(g,()=>({focusCellByColumn:(L,V=0)=>{const F=t?.components||[];if(F.length>0){const M=Math.min(V,F.length-1),O=`${F[M].ref}-${L}`;setTimeout(()=>E(O),50)}}})),N.useEffect(()=>{const L=t?.components?.length||0;if(_.current.focus&&L>b.current){const V=t?.components||[],F=V[V.length-1];F&&setTimeout(()=>{E(`${F.ref}-name`),_.current={focus:!1,type:null}},50)}b.current=L},[t?.components]);const j=(L,V,F)=>{const M=t?.components||[],O=M.findIndex(G=>G.ref===L);if(O===-1)return;let R=null;if(F){if(V==="assets")R=`${L}-description`;else if(V==="description")R=`${L}-type`;else if(V==="type")R=`${L}-name`;else if(V==="name"){if(O>0)R=`${M[O-1].ref}-assets`;else if(p){p("name");return}}}else if(V==="name")R=`${L}-type`;else if(V==="type")R=`${L}-description`;else if(V==="description")R=`${L}-assets`;else if(V==="assets")if(O===M.length-1){m&&m("assets");return}else R=`${M[O+1].ref}-name`;R&&E(R)},T=(L,V,F)=>{const M=t?.components||[],O=M.findIndex(G=>G.ref===L);if(O===-1)return;let R=null;switch(F){case"right":V==="name"?R=`${L}-type`:V==="type"?R=`${L}-description`:V==="description"?R=`${L}-assets`:V==="assets"&&O<M.length-1&&(R=`${M[O+1].ref}-name`);break;case"left":V==="assets"?R=`${L}-description`:V==="description"?R=`${L}-type`:V==="type"?R=`${L}-name`:V==="name"&&O>0&&(R=`${M[O-1].ref}-assets`);break;case"down":O<M.length-1?R=`${M[O+1].ref}-${V}`:m&&m(V);break;case"up":O>0?R=`${M[O-1].ref}-${V}`:p&&p(V);break}R&&E(R)},z=t?.components||[];return v.jsxs("div",{className:"table-section",children:[v.jsxs("div",{className:"table-header",children:[v.jsx("span",{children:"Components"}),v.jsx("span",{className:"header-help-icon","data-tooltip":'The "objects" of a threat model (users, applications, databases, etc.)',children:v.jsx(Lm,{size:16})})]}),v.jsx("div",{className:"table-content",children:v.jsxs("div",{className:`table-container ${w?"dragging":""}`,children:[t?.components&&t.components.length>0&&v.jsxs(Ym,{sensors:S,collisionDetection:Um,onDragStart:C,onDragEnd:A,children:[v.jsxs("table",{children:[v.jsxs("colgroup",{children:[v.jsx("col",{style:{width:"0px"}}),v.jsx("col",{style:{width:"20%"}}),v.jsx("col",{style:{width:"15%"}}),v.jsx("col",{style:{width:"auto"}}),v.jsx("col",{style:{width:"20%"}}),v.jsx("col",{style:{width:"35px"}})]}),v.jsx("thead",{className:"header-components",children:v.jsxs("tr",{children:[v.jsx("th",{}),v.jsx("th",{children:"Name"}),v.jsx("th",{children:"Type"}),v.jsx("th",{children:"Description"}),v.jsx("th",{children:"Assets"}),v.jsx("th",{className:"action-column"})]})}),v.jsx(Xm,{items:t.components.map(L=>L.ref),strategy:Km,children:v.jsx("tbody",{children:z.map(L=>v.jsxs(Wm,{id:L.ref,children:[v.jsx("td",{ref:V=>{V&&y.current.set(`${L.ref}-name`,V)},children:v.jsx(ls,{value:L.name,placeholder:Ys(L.name)?L.name:void 0,onSave:V=>r(L.ref,V),onTabPress:V=>j(L.ref,"name",V),onNavigate:V=>T(L.ref,"name",V)})}),v.jsx("td",{ref:V=>{V&&y.current.set(`${L.ref}-type`,V)},children:v.jsx(zN,{value:L.component_type,onSave:V=>a(L.ref,V),onTabPress:V=>j(L.ref,"type",V),onNavigate:V=>T(L.ref,"type",V)})}),v.jsx("td",{ref:V=>{V&&y.current.set(`${L.ref}-description`,V)},children:v.jsx(co,{value:L.description||"",onSave:V=>s(L.ref,V),onTabPress:V=>j(L.ref,"description",V),onNavigate:V=>T(L.ref,"description",V)})}),v.jsx("td",{ref:V=>{V&&y.current.set(`${L.ref}-assets`,V)},children:v.jsx(Av,{value:L.assets||[],availableItems:t?.assets?.map(V=>({ref:V.ref,name:V.name}))||[],placeholder:"Add asset...",variant:"assets",onSave:V=>o(L.ref,V),onCreateItem:l,onTabPress:V=>j(L.ref,"assets",V),onNavigate:V=>T(L.ref,"assets",V)})}),v.jsx("td",{className:"action-column",children:v.jsx("button",{className:"row-action-button remove-button",onClick:()=>u(L.ref),title:"Remove component",children:""})})]},L.ref))})})]}),v.jsx(Gm,{children:w?v.jsxs("div",{style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"8px 12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",cursor:"grabbing",minHeight:"40px",display:"flex",alignItems:"center"},children:[v.jsx("div",{style:{marginRight:"8px",opacity:.5},children:""}),v.jsx("span",{children:t?.components?.find(L=>L.ref===w)?.name||"Component"})]}):null})]}),v.jsxs("div",{className:"add-row-buttons",children:[v.jsx("button",{className:"add-row-button add-row-components",onClick:()=>{_.current={focus:!1,type:"internal"},d("internal")},children:"+ Add Internal"}),v.jsx("button",{className:"add-row-button add-row-components",onClick:()=>{_.current={focus:!0,type:"external_dependency"},d("external_dependency")},children:"+ Add External"}),v.jsx("button",{className:"add-row-button add-row-components",onClick:()=>{_.current={focus:!0,type:"data_store"},d("data_store")},children:"+ Add Data Store"})]})]})})]})}),(e,t)=>e.threatModel?.components===t.threatModel?.components&&e.threatModel?.assets===t.threatModel?.assets&&e.onComponentNameChange===t.onComponentNameChange&&e.onComponentTypeChange===t.onComponentTypeChange&&e.onComponentDescriptionChange===t.onComponentDescriptionChange&&e.onComponentAssetsChange===t.onComponentAssetsChange&&e.onCreateAsset===t.onCreateAsset&&e.onRemoveComponent===t.onRemoveComponent&&e.onAddComponent===t.onAddComponent&&e.onNavigateToNextTable===t.onNavigateToNextTable&&e.onNavigateToPreviousTable===t.onNavigateToPreviousTable),xB=ht.memo(N.forwardRef(function({threatModel:t,onAssetNameChange:r,onAssetDescriptionChange:a,onRemoveAsset:s,onAddAsset:o,onReorderAssets:l,onNavigateToNextTable:u,onNavigateToPreviousTable:d},f){const m=N.useRef(new Map),p=N.useRef(!1),g=N.useRef(t?.assets?.length||0),[y,_]=N.useState(null),b=Hm(us(Rl),us(Dl,{coordinateGetter:Zm})),w=E=>{_(E.active.id)},x=E=>{const{active:j,over:T}=E;if(T&&j.id!==T.id){const z=t?.assets||[],L=z.findIndex(M=>M.ref===j.id),V=z.findIndex(M=>M.ref===T.id),F=$l(z,L,V).map(M=>M.ref);l(F)}_(null)},S=E=>{const j=m.current.get(E);if(j){const T=j.querySelector("input, textarea");T&&T.focus()}};N.useImperativeHandle(f,()=>({focusCellByColumn:(E,j=0)=>{const T=t?.assets||[];if(T.length>0){const z=Math.min(j,T.length-1),L=`${T[z].ref}-${E}`;setTimeout(()=>S(L),50)}}})),N.useEffect(()=>{const E=t?.assets?.length||0;if(p.current&&E>g.current){const j=t?.assets||[],T=j[j.length-1];T&&setTimeout(()=>{S(`${T.ref}-name`),p.current=!1},50)}g.current=E},[t?.assets]);const C=(E,j,T)=>{const z=t?.assets||[],L=z.findIndex(F=>F.ref===E);if(L===-1)return;let V=null;if(T)j==="description"?V=`${E}-name`:j==="name"&&L>0&&(V=`${z[L-1].ref}-description`);else if(j==="name")V=`${E}-description`;else if(j==="description")if(L===z.length-1){p.current=!0,o();return}else V=`${z[L+1].ref}-name`;V&&S(V)},A=(E,j,T)=>{const z=t?.assets||[],L=z.findIndex(F=>F.ref===E);if(L===-1)return;let V=null;switch(T){case"right":j==="name"?V=`${E}-description`:j==="description"&&L<z.length-1&&(V=`${z[L+1].ref}-name`);break;case"left":j==="description"?V=`${E}-name`:j==="name"&&L>0&&(V=`${z[L-1].ref}-description`);break;case"down":if(L<z.length-1)V=`${z[L+1].ref}-${j}`;else if(u){u(j);return}break;case"up":if(L>0)V=`${z[L-1].ref}-${j}`;else if(d){d(j);return}break}V&&S(V)};return v.jsxs("div",{className:"table-section",children:[v.jsxs("div",{className:"table-header",children:[v.jsx("span",{children:"Assets"}),v.jsx("span",{className:"header-help-icon","data-tooltip":"Data or resources that needs protection.",children:v.jsx(Lm,{size:16})})]}),v.jsx("div",{className:"table-content",children:v.jsxs("div",{className:`table-container ${y?"dragging":""}`,children:[t?.assets&&t.assets.length>0&&v.jsxs(Ym,{sensors:b,collisionDetection:Um,onDragStart:w,onDragEnd:x,children:[v.jsxs("table",{children:[v.jsxs("colgroup",{children:[v.jsx("col",{style:{width:"0px"}}),v.jsx("col",{style:{width:"25%"}}),v.jsx("col",{style:{width:"auto"}}),v.jsx("col",{style:{width:"35px"}})]}),v.jsx("thead",{className:"header-assets",children:v.jsxs("tr",{children:[v.jsx("th",{}),v.jsx("th",{children:"Name"}),v.jsx("th",{children:"Description"}),v.jsx("th",{className:"action-column"})]})}),v.jsx(Xm,{items:t.assets.map(E=>E.ref),strategy:Km,children:v.jsx("tbody",{children:t.assets.map(E=>v.jsxs(Wm,{id:E.ref,children:[v.jsx("td",{ref:j=>{j&&m.current.set(`${E.ref}-name`,j)},children:v.jsx(ls,{value:E.name,placeholder:D8(E.name)?E.name:void 0,onSave:j=>r(E.ref,j),onTabPress:j=>C(E.ref,"name",j),onNavigate:j=>A(E.ref,"name",j)})}),v.jsx("td",{ref:j=>{j&&m.current.set(`${E.ref}-description`,j)},children:v.jsx(co,{value:E.description||"",onSave:j=>a(E.ref,j),onTabPress:j=>C(E.ref,"description",j),onNavigate:j=>A(E.ref,"description",j)})}),v.jsx("td",{className:"action-column",children:v.jsx("button",{className:"row-action-button remove-button",onClick:()=>s(E.ref),title:"Remove asset",children:""})})]},E.ref))})})]}),v.jsx(Gm,{children:y?v.jsxs("div",{style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"8px 12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",cursor:"grabbing",minHeight:"40px",display:"flex",alignItems:"center"},children:[v.jsx("div",{style:{marginRight:"8px",opacity:.5},children:""}),v.jsx("span",{children:t?.assets?.find(E=>E.ref===y)?.name||"Asset"})]}):null})]}),v.jsx("button",{className:"add-row-button add-row-assets",onClick:o,title:"Add asset",children:"+ Add Asset"})]})})]})}));function LN(e,t,r){const{estimatedHeight:a,estimatedWidth:s=320,minWidth:o=320,padding:l=16}=typeof r=="number"?{estimatedHeight:r,estimatedWidth:320,minWidth:320,padding:16}:r,[u,d]=N.useState({top:0,left:0,width:0,maxWidth:0,renderUpward:!1,horizontalAlign:"left"});return N.useEffect(()=>{if(e&&t.current){const f=t.current.getBoundingClientRect(),m=window.innerHeight,p=window.innerWidth,g=m-f.bottom-l,y=f.top-l,_=g<a&&y>g,b=p-f.left-l,w=f.right-l;let x="left",S=f.left,C=p-l*2;if(b>=s)x="left",S=Math.max(l,f.left),C=Math.min(b,s);else if(w>=s){x="right";const A=Math.min(w,s);S=Math.max(l,f.right-A),C=A}else{x="center";const A=Math.min(s,p-l*2);S=Math.max(l,f.left+f.width/2-A/2),S=Math.min(S,p-A-l),C=A}d({top:_?f.top:f.bottom,left:S,width:Math.max(f.width,o),maxWidth:C,renderUpward:_,horizontalAlign:x})}},[e,a,s,o,l,t]),u}function bS(e){const{control:t,threat:r,threatModel:a,metadata:s}=e;if(!s||!t&&!r)return null;const o=t?`Implement threat model control: ${t.name}`:`Address threat: ${r.name}`,l=t?_B(t,a):SB(r,a),u=`https://${s.domain}/${s.owner}/${s.repository}/issues/new`,d=new URLSearchParams({title:o,body:l,labels:"security,threat-model"});return`${u}?${d.toString()}`}function _B(e,t){const r=[];return r.push(`## Description
`),r.push(e.description||"No description provided."),r.push(`
`),r.push(`## Control Details
`),r.push(`**Control Ref:** ${e.ref}`),r.push(`**Status:** ${e.status||"Not set"}`),e.status_note&&r.push(`**Status Note:** ${e.status_note}`),r.push(`
`),e.mitigates&&e.mitigates.length>0&&(r.push(`## Mitigates Threats
`),e.mitigates.forEach(a=>{const s=t.threats?.find(o=>o.ref===a);if(s){if(r.push(`- **${s.name}** (${s.ref})`),s.description){const o=s.description.split(`
`)[0].trim();r.push(`  - ${o}`)}}else r.push(`- ${a}`)}),r.push(`
`)),e.implemented_in&&e.implemented_in.length>0&&(r.push(`## Implementation Components
`),e.implemented_in.forEach(a=>{const s=t.components?.find(o=>o.ref===a);s?(r.push(`- **${s.name}** (${s.component_type})`),s.description&&r.push(`  - ${s.description}`)):r.push(`- ${a}`)}),r.push(`
`)),r.push(`## Implementation Notes
`),r.push("- [ ] Review control requirements and acceptance criteria"),r.push("- [ ] Implement control in affected components"),r.push("- [ ] Add tests to verify control effectiveness"),r.push("- [ ] Update threat model status once complete"),r.push(`
`),r.push("---"),r.push(`*This issue was generated from threat model: ${t.name}*`),r.join(`
`)}function SB(e,t){const r=[];r.push(`## Threat Description
`),r.push(e.description||"No description provided."),r.push(`
`),r.push(`## Threat Details
`),r.push(`**Threat Ref:** ${e.ref}`),r.push(`**Status:** ${e.status||"Not set"}`),e.status_note&&r.push(`**Status Note:** ${e.status_note}`),r.push(`
`),e.affected_components&&e.affected_components.length>0&&(r.push(`## Affected Components
`),e.affected_components.forEach(o=>{const l=t.components?.find(u=>u.ref===o);l?(r.push(`- **${l.name}** (${l.component_type})`),l.description&&r.push(`  - ${l.description}`)):r.push(`- ${o}`)}),r.push(`
`)),e.affected_data_flows&&e.affected_data_flows.length>0&&(r.push(`## Affected Data Flows
`),e.affected_data_flows.forEach(o=>{const l=t.data_flows?.find(u=>u.ref===o);if(l){const u=t.components?.find(m=>m.ref===l.source),d=t.components?.find(m=>m.ref===l.destination),f=`${u?.name||l.source}  ${d?.name||l.destination}`;r.push(`- **${f}** (${l.ref})`),l.label&&r.push(`  - ${l.label}`)}else r.push(`- ${o}`)}),r.push(`
`)),e.affected_assets&&e.affected_assets.length>0&&(r.push(`## Affected Assets
`),e.affected_assets.forEach(o=>{const l=t.assets?.find(u=>u.ref===o);l?(r.push(`- **${l.name}**`),l.description&&r.push(`  - ${l.description}`)):r.push(`- ${o}`)}),r.push(`
`));const a=t.controls?.filter(o=>o.mitigates?.includes(e.ref));a&&a.length>0&&(r.push(`## Related Controls
`),a.forEach(o=>{if(r.push(`- **${o.name}** (${o.ref}) - ${o.status||"No status"}`),o.description){const l=o.description.split(`
`)[0].trim();r.push(`  - ${l}`)}}),r.push(`
`)),r.push(`## Action Items
`);const s=e.status;return s==="Evaluate"?(r.push("- [ ] Analyze threat likelihood and impact"),r.push("- [ ] Determine if threat is applicable to this system"),r.push("- [ ] Decide on mitigation strategy (Mitigate, Accept, or Dismiss)"),r.push("- [ ] Update threat status in threat model")):s==="Mitigate"?(r.push("- [ ] Design appropriate security controls"),r.push("- [ ] Implement controls in affected components"),r.push("- [ ] Test control effectiveness"),r.push("- [ ] Update threat model with control references")):s==="Accept"?(r.push("- [ ] Document risk acceptance rationale"),r.push("- [ ] Get approval from stakeholders"),r.push("- [ ] Define monitoring strategy"),r.push("- [ ] Update threat model with acceptance note")):s==="Dismiss"?(r.push("- [ ] Document why threat is not applicable"),r.push("- [ ] Update threat model with dismissal rationale")):(r.push("- [ ] Review threat details"),r.push("- [ ] Determine appropriate response"),r.push("- [ ] Update threat model status")),r.push(`
`),r.push("---"),r.push(`*This issue was generated from threat model: ${t.name}*`),r.join(`
`)}const CB=[{value:"To Do",label:"To Do",color:"gray",icon:mL,tooltip:"Control has been identified but work has not started"},{value:"In Progress",label:"In Progress",color:"blue",icon:OL,tooltip:"Control is currently being implemented"},{value:"Done",label:"Done",color:"green",icon:eL,tooltip:"Control has been fully implemented and verified"},{value:"Cancelled",label:"Cancelled",color:"red",icon:Lv,tooltip:"Control will not be implemented"}],EB=[{value:"Evaluate",label:"Evaluate",color:"blue",icon:iI,tooltip:"Threat requires further analysis and evaluation"},{value:"Mitigate",label:"Mitigate",color:"green",icon:IL,tooltip:"Threat will be mitigated with controls"},{value:"Accept",label:"Accept",color:"yellow",icon:G8,tooltip:"Threat is accepted as a known risk"},{value:"Dismiss",label:"Dismiss",color:"gray",icon:mI,tooltip:"Threat is not applicable to this system"}];function IN(e){const{entityType:t,entity:r,threatModel:a,githubMetadata:s,onStatusChange:o,onStatusLinkChange:l,onStatusNoteChange:u,onTabPress:d,onNavigate:f}=e,{status:m,status_link:p,status_note:g}=r,y=t==="control"?CB:EB,_=t==="control"?"status-picker-controls":"status-picker-threats",[b,w]=N.useState(!1),[x,S]=N.useState(m),[C,A]=N.useState(p||""),[E,j]=N.useState(g||""),[T,z]=N.useState(""),L=N.useRef(null),V=N.useRef(null),F=N.useRef(null),M=N.useRef(null),O=N.useRef(null),R=N.useRef(new Map),G=N.useRef(null),H=bS(t==="control"?{control:r,threatModel:a,metadata:s}:{threat:r,threatModel:a,metadata:s}),U=LN(b,L,{estimatedHeight:450,estimatedWidth:350,minWidth:280,padding:16}),Z=W=>{if(!W)return!0;try{const ie=new URL(W);return ie.protocol==="http:"||ie.protocol==="https:"}catch{return!1}},X=()=>{S(m),A(p||""),j(g||""),z(""),w(!0)};N.useEffect(()=>{b&&setTimeout(()=>{const W=R.current.get(0);W&&W.focus()},0)},[b]);const Q=()=>{if(C&&!Z(C)){z("Please enter a valid HTTP or HTTPS URL");return}x!==m&&o?.(x),C!==(p||"")&&l?.(C||void 0),E!==(g||"")&&u?.(E||void 0),w(!1),setTimeout(()=>{L.current?.focus()},0)},$=W=>{b||(W.key==="Tab"&&d?(W.preventDefault(),d(W.shiftKey)):f&&(W.key==="ArrowRight"?(W.preventDefault(),f("right")):W.key==="ArrowLeft"?(W.preventDefault(),f("left")):W.key==="ArrowDown"?(W.preventDefault(),f("down")):W.key==="ArrowUp"?(W.preventDefault(),f("up")):(W.key==="Enter"||W.key===" ")&&(W.preventDefault(),X())))},B=(W,ie)=>{W.key==="ArrowRight"?(W.preventDefault(),(ie===0||ie===2)&&R.current.get(ie+1)?.focus()):W.key==="ArrowLeft"?(W.preventDefault(),(ie===1||ie===3)&&R.current.get(ie-1)?.focus()):W.key==="ArrowDown"?(W.preventDefault(),ie===0||ie===1?R.current.get(ie+2)?.focus():(ie===2||ie===3)&&x&&G.current&&G.current.focus()):W.key==="ArrowUp"?(W.preventDefault(),(ie===2||ie===3)&&R.current.get(ie-2)?.focus()):W.key==="Enter"||W.key===" "?(W.preventDefault(),q(y[ie].value)):W.key==="Tab"&&!W.shiftKey?(W.preventDefault(),F.current?.focus()):W.key==="Tab"&&W.shiftKey&&ie===0&&(W.preventDefault(),Q(),d&&d(!0))},K=W=>{W.key==="ArrowUp"?(W.preventDefault(),R.current.get(2)?.focus()):W.key==="Enter"||W.key===" "?(W.preventDefault(),J()):W.key==="Tab"&&!W.shiftKey?(W.preventDefault(),F.current?.focus()):W.key==="Tab"&&W.shiftKey&&(W.preventDefault(),R.current.get(y.length-1)?.focus())},P=W=>{W.key==="Escape"&&(W.preventDefault(),W.stopPropagation(),Q())};Om(V,()=>{b&&Q()},b);const q=W=>{S(W),o?.(W)},J=()=>{S(void 0),o?.(void 0),setTimeout(()=>{R.current.get(0)?.focus()},0)},le=W=>{const ie=W.target.value;A(ie),T&&z("")},oe=()=>{C&&window.open(C,"_blank","noopener,noreferrer")},he=W=>y.find(ie=>ie.value===W)?.color||"gray",ve=W=>y.find(ie=>ie.value===W)?.label||"";return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"status-cell-wrapper",children:v.jsxs("div",{className:`status-button-group ${m?`status-${he(m)}`:"status-empty-group"}`,ref:L,onKeyDown:$,tabIndex:0,children:[v.jsx("button",{className:"status-button-area",onClick:X,tabIndex:-1,title:m?ve(m):"Add status",children:m?(()=>{const W=y.find(ae=>ae.value===m);if(!W)return null;const ie=W.icon;return v.jsx(ie,{size:12})})():v.jsx(Ov,{size:12})}),p&&v.jsx("button",{className:"link-button-area",onClick:W=>{W.stopPropagation(),window.open(p,"_blank","noopener,noreferrer")},tabIndex:-1,title:p,children:v.jsx(em,{size:12})})]})}),b&&da.createPortal(v.jsxs("div",{className:`status-picker-portal ${_} ${U.renderUpward?"render-upward":""}`,ref:V,onKeyDown:P,style:{position:"fixed",...U.renderUpward?{bottom:`${window.innerHeight-U.top}px`}:{top:`${U.top}px`},left:`${U.left}px`,width:`${U.width}px`,maxWidth:`${U.maxWidth}px`,zIndex:1e4},children:[v.jsxs("div",{className:"status-picker-header",children:[v.jsx("h3",{className:"status-picker-title",children:"Status"}),v.jsx("button",{className:"status-picker-close",onClick:Q,tabIndex:-1,children:""})]}),v.jsxs("div",{className:"status-picker-content",children:[v.jsxs("div",{className:"status-picker-section",children:[v.jsx("div",{className:"status-options",children:y.map((W,ie)=>{const ae=W.icon;return v.jsxs("button",{ref:I=>{I&&R.current.set(ie,I)},className:`status-option status-${W.color} ${x===W.value?"selected":""}`,onClick:()=>q(W.value),onKeyDown:I=>B(I,ie),title:W.tooltip,children:[v.jsx(ae,{size:16}),v.jsx("span",{children:W.label})]},W.value)})}),x&&v.jsx("button",{ref:G,className:"clear-status-btn",onClick:J,onKeyDown:K,children:"Clear Status"})]}),v.jsxs("div",{className:"status-picker-section",children:[v.jsx("label",{className:"status-picker-label",children:"Status Link"}),v.jsxs("div",{className:"link-input-group",children:[v.jsx("input",{ref:F,type:"url",className:`link-input ${T?"error":""}`,placeholder:"https://...",value:C,onChange:le,onKeyDown:W=>{W.key==="Tab"&&W.shiftKey?(W.preventDefault(),R.current.get(y.length-1)?.focus()):W.key==="Tab"&&!W.shiftKey&&(W.preventDefault(),H&&O.current?O.current.focus():M.current&&M.current.focus())}}),C&&v.jsx("button",{className:"open-link-btn",onClick:oe,title:"Open link in new tab",tabIndex:-1,children:v.jsx(em,{size:16})})]}),T&&v.jsx("div",{className:"link-error",children:T})]}),H&&v.jsx("div",{className:"status-picker-section",children:v.jsxs("button",{ref:O,className:"github-issue-btn",onClick:()=>window.open(H,"_blank","noopener,noreferrer"),onKeyDown:W=>{W.key==="Enter"||W.key===" "?(W.preventDefault(),window.open(H,"_blank","noopener,noreferrer")):W.key==="Tab"&&W.shiftKey?(W.preventDefault(),F.current?.focus()):W.key==="Tab"&&!W.shiftKey&&(W.preventDefault(),M.current?.focus())},title:`Create GitHub issue for this ${t}`,children:[v.jsx(kh,{size:16}),v.jsx("span",{children:"Create GitHub Issue"})]})}),v.jsxs("div",{className:"status-picker-section",children:[v.jsx("label",{className:"status-picker-label",children:"Status Note"}),v.jsx("textarea",{ref:M,className:"status-note-textarea",placeholder:"Add implementation notes, rationale, or additional context...",value:E,onChange:W=>j(W.target.value),onKeyDown:W=>{W.key==="Tab"&&W.shiftKey?(W.preventDefault(),H&&O.current?O.current.focus():F.current?.focus()):W.key==="Tab"&&!W.shiftKey&&(W.preventDefault(),Q(),d&&d(!1))},rows:4})]})]})]}),document.body)]})}function PN({sections:e,title:t="Affected Items",themeVariant:r="threats",className:a="multi-picker-cell",estimatedHeight:s=280,onTabPress:o,onNavigate:l}){const[u,d]=N.useState(!1),[f,m]=N.useState(null),p=N.useRef(null),g=N.useRef(null),y=N.useRef(new Map),_=N.useRef(new Map),b=LN(u,p,{estimatedHeight:s,estimatedWidth:400,minWidth:320,padding:16}),w=e.reduce((T,z)=>T+z.value.length,0);N.useEffect(()=>{if(!u)return;const T=z=>{z.key==="Escape"&&(z.target.classList.contains("picker-tag-input")||(z.preventDefault(),z.stopPropagation(),C()))};return document.addEventListener("keydown",T,!0),()=>{document.removeEventListener("keydown",T,!0)}},[u]),N.useEffect(()=>{m(u?0:null)},[u]),N.useEffect(()=>{if(f!==null&&y.current.has(f)){const T=y.current.get(f);if(T){T.scrollIntoView({behavior:"smooth",block:"nearest"});const z=T.querySelector(".editable-picker-wrapper");z&&setTimeout(()=>z.focus(),50)}}},[f]);const x=(T,z)=>{z==="down"?T<e.length-1&&m(T+1):z==="up"&&T>0&&m(T-1)},S=(T,z)=>{z?T>0?m(T-1):(C(),o&&o(!0)):T<e.length-1?m(T+1):(C(),o&&o(!1))},C=()=>{_.current.forEach(T=>{T?.()}),d(!1),setTimeout(()=>{p.current?.focus()},0)},A=T=>{u||(T.key==="Tab"&&o?(T.preventDefault(),o(T.shiftKey)):l&&(T.key==="ArrowRight"?(T.preventDefault(),l("right")):T.key==="ArrowLeft"?(T.preventDefault(),l("left")):T.key==="ArrowDown"?(T.preventDefault(),l("down")):T.key==="ArrowUp"?(T.preventDefault(),l("up")):(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),d(!0))))},E=T=>{T.stopPropagation()};Om(g,C,u,[".picker-suggestions",".picker-tag-remove",".picker-suggestion-item",".picker-tags-container"],100);const j=T=>T.badgeClass?T.badgeClass:`badge-${T.variant}`;return v.jsxs("div",{className:a,ref:p,onKeyDown:A,tabIndex:0,children:[u?null:v.jsx("div",{className:"multi-picker-compact",onClick:()=>d(!0),children:w===0?v.jsx("div",{className:"multi-picker-empty-button",title:"Add related items",children:v.jsx(Ov,{size:12})}):v.jsx("div",{className:"multi-picker-summary",children:(()=>{const T=e.filter(L=>L.variant==="assets"||L.variant==="components").reduce((L,V)=>L+V.value.length,0),z=e.filter(L=>L.variant!=="assets"&&L.variant!=="components");return v.jsxs(v.Fragment,{children:[T>0&&v.jsx("span",{className:"multi-picker-badge badge-components",title:`${T} assets/components`,children:T}),z.map((L,V)=>L.value.length>0?v.jsx("span",{className:`multi-picker-badge ${j(L)}`,title:`${L.value.length} ${L.label.toLowerCase()}`,children:L.value.length},V):null)]})})()})}),u&&da.createPortal(v.jsxs("div",{ref:g,className:`multi-picker-expanded multi-picker-theme-${r} ${b.renderUpward?"render-upward":""}`,style:{position:"fixed",...b.renderUpward?{bottom:`${window.innerHeight-b.top}px`}:{top:`${b.top}px`},left:`${b.left}px`,width:`${b.width}px`,maxWidth:`${b.maxWidth}px`},onBlur:E,children:[v.jsxs("div",{className:"multi-picker-header",children:[v.jsx("span",{className:"multi-picker-title",children:t}),v.jsx("button",{className:"multi-picker-close",onClick:C,title:"Collapse",children:""})]}),e.map((T,z)=>v.jsxs("div",{className:"multi-picker-section",ref:L=>{L&&y.current.set(z,L)},children:[v.jsx("label",{className:"multi-picker-label",children:T.label}),v.jsx(Av,{value:T.value,availableItems:T.availableItems,placeholder:T.placeholder,variant:T.variant,onSave:T.onChange,autoEdit:f===z,useInWrapper:!0,onTabPress:L=>S(z,L),onDeactivate:()=>m(null),onNavigate:L=>{(L==="up"||L==="down")&&x(z,L)},onRegisterSave:L=>{_.current.set(z,L)}})]},z))]}),document.body)]})}const kB=ht.memo(N.forwardRef(function({threatModel:t,githubMetadata:r,onThreatNameChange:a,onThreatDescriptionChange:s,onThreatAffectedComponentsChange:o,onThreatAffectedDataFlowsChange:l,onThreatAffectedAssetsChange:u,onThreatStatusChange:d,onThreatStatusLinkChange:f,onThreatStatusNoteChange:m,onRemoveThreat:p,onAddThreat:g,onReorderThreats:y,onNavigateToNextTable:_,onNavigateToPreviousTable:b},w){const x=N.useRef(new Map),S=N.useRef(!1),C=N.useRef(t?.threats?.length||0),[A,E]=N.useState(null),j=Hm(us(Rl),us(Dl,{coordinateGetter:Zm})),T=M=>{E(M.active.id)},z=M=>{const{active:O,over:R}=M;if(R&&O.id!==R.id){const G=t?.threats||[],H=G.findIndex(X=>X.ref===O.id),U=G.findIndex(X=>X.ref===R.id),Z=$l(G,H,U).map(X=>X.ref);y(Z)}E(null)};N.useImperativeHandle(w,()=>({focusCellByColumn:(M,O=0)=>{const R=t?.threats||[];if(R.length>0){const G=Math.min(O,R.length-1),H=`${R[G].ref}-${M}`;setTimeout(()=>L(H),50)}}})),N.useEffect(()=>{const M=t?.threats?.length||0;if(S.current&&M>C.current){const O=t?.threats||[],R=O[O.length-1];R&&setTimeout(()=>{L(`${R.ref}-name`),S.current=!1},50)}C.current=M},[t?.threats]);const L=M=>{const O=x.current.get(M);if(O){const R=O.querySelector("input, textarea");if(R)R.focus();else{const G=O.querySelector("[tabindex]");if(G)G.focus();else{const H=O.querySelector('div[tabindex="0"]');H&&H.focus()}}}},V=(M,O,R)=>{const G=t?.threats||[],H=G.findIndex(Z=>Z.ref===M);if(H===-1)return;let U=null;if(R)O==="status"?U=`${M}-items`:O==="items"?U=`${M}-description`:O==="description"?U=`${M}-name`:O==="name"&&H>0&&(U=`${G[H-1].ref}-status`);else if(O==="name")U=`${M}-description`;else if(O==="description")U=`${M}-items`;else if(O==="items")U=`${M}-status`;else if(O==="status")if(H===G.length-1){S.current=!0,g();return}else U=`${G[H+1].ref}-name`;U&&L(U)},F=(M,O,R)=>{const G=t?.threats||[],H=G.findIndex(Z=>Z.ref===M);if(H===-1)return;let U=null;switch(R){case"right":O==="name"?U=`${M}-description`:O==="description"?U=`${M}-items`:O==="items"?U=`${M}-status`:O==="status"&&H<G.length-1&&(U=`${G[H+1].ref}-name`);break;case"left":O==="status"?U=`${M}-items`:O==="items"?U=`${M}-description`:O==="description"?U=`${M}-name`:O==="name"&&H>0&&(U=`${G[H-1].ref}-status`);break;case"down":if(H<G.length-1)U=`${G[H+1].ref}-${O}`;else if(_){_(O);return}break;case"up":if(H>0)U=`${G[H-1].ref}-${O}`;else if(b){b(O);return}break}U&&L(U)};return v.jsxs("div",{className:"table-section",children:[v.jsxs("div",{className:"table-header",children:[v.jsx("span",{children:"Threats"}),v.jsx("span",{className:"header-help-icon","data-tooltip":"Potential risks or vulnerabilities that could impact the system.",children:v.jsx(Lm,{size:16})})]}),v.jsx("div",{className:"table-content",children:v.jsxs("div",{className:`table-container ${A?"dragging":""}`,children:[t?.threats&&t.threats.length>0&&v.jsxs(Ym,{sensors:j,collisionDetection:Um,onDragStart:T,onDragEnd:z,children:[v.jsxs("table",{children:[v.jsxs("colgroup",{children:[v.jsx("col",{style:{width:"0px"}}),v.jsx("col",{style:{width:"20%"}}),v.jsx("col",{style:{width:"auto"}}),v.jsx("col",{style:{width:"40px"}}),v.jsx("col",{style:{width:"45px"}}),v.jsx("col",{style:{width:"35px"}})]}),v.jsx("thead",{className:"header-threats",children:v.jsxs("tr",{children:[v.jsx("th",{}),v.jsx("th",{children:"Name"}),v.jsx("th",{children:"Description"}),v.jsx("th",{className:"affected-items-th",children:"Items"}),v.jsx("th",{className:"status-column-th",children:"Status"}),v.jsx("th",{className:"action-column"})]})}),v.jsx(Xm,{items:t.threats.map(M=>M.ref),strategy:Km,children:v.jsx("tbody",{children:t.threats.map(M=>v.jsxs(Wm,{id:M.ref,children:[v.jsx("td",{ref:O=>{O&&x.current.set(`${M.ref}-name`,O)},children:v.jsx(ls,{value:M.name,placeholder:R8(M.name)?M.name:void 0,onSave:O=>a(M.ref,O),onTabPress:O=>V(M.ref,"name",O),onNavigate:O=>F(M.ref,"name",O)})}),v.jsx("td",{ref:O=>{O&&x.current.set(`${M.ref}-description`,O)},children:v.jsx(co,{value:M.description||"",onSave:O=>s(M.ref,O),onTabPress:O=>V(M.ref,"description",O),onNavigate:O=>F(M.ref,"description",O)})}),v.jsx("td",{className:"affected-items-td",ref:O=>{O&&x.current.set(`${M.ref}-items`,O)},children:v.jsx(PN,{title:"Affected Items",themeVariant:"threats",onTabPress:O=>V(M.ref,"items",O),onNavigate:O=>F(M.ref,"items",O),sections:[{label:"Components",value:M.affected_components||[],availableItems:t?.components?.map(O=>({ref:O.ref,name:O.name}))||[],placeholder:"Add component...",variant:"components",onChange:O=>o(M.ref,O)},{label:"Assets",value:M.affected_assets||[],availableItems:t?.assets?.map(O=>({ref:O.ref,name:O.name}))||[],placeholder:"Add asset...",variant:"assets",onChange:O=>u(M.ref,O)},{label:"Data Flows",value:M.affected_data_flows||[],availableItems:t?.data_flows?.map(O=>{const R=t.components.find(Z=>Z.ref===O.source),G=t.components.find(Z=>Z.ref===O.destination),H=O.direction==="bidirectional"?`${R?.name||O.source}  ${G?.name||O.destination}`:`${R?.name||O.source}  ${G?.name||O.destination}`,U=O.label?`${O.label}: ${H}`:H;return{ref:O.ref,name:U}})||[],placeholder:"Add data flow...",variant:"dataflows",onChange:O=>l(M.ref,O)}]})}),v.jsx("td",{className:"status-column-td",children:v.jsx("div",{ref:O=>{O&&x.current.set(`${M.ref}-status`,O)},children:t&&v.jsx(IN,{entityType:"threat",entity:M,threatModel:t,githubMetadata:r,onStatusChange:O=>d(M.ref,O),onStatusLinkChange:O=>f(M.ref,O),onStatusNoteChange:O=>m(M.ref,O),onTabPress:O=>V(M.ref,"status",O),onNavigate:O=>F(M.ref,"status",O)})})}),v.jsx("td",{className:"action-column",children:v.jsx("button",{className:"row-action-button remove-button",onClick:()=>p(M.ref),title:"Remove threat",children:""})})]},M.ref))})})]}),v.jsx(Gm,{children:A?v.jsxs("div",{style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"8px 12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",cursor:"grabbing",minHeight:"40px",display:"flex",alignItems:"center"},children:[v.jsx("div",{style:{marginRight:"8px",opacity:.5},children:""}),v.jsx("span",{children:t?.threats?.find(M=>M.ref===A)?.name||"Threat"})]}):null})]}),v.jsx("button",{className:"add-row-button add-row-threats",onClick:g,title:"Add threat",children:"+ Add Threat"})]})})]})})),NB=ht.memo(N.forwardRef(function({threatModel:t,githubMetadata:r,onControlNameChange:a,onControlDescriptionChange:s,onControlStatusChange:o,onControlStatusLinkChange:l,onControlStatusNoteChange:u,onControlMitigatesChange:d,onControlImplementedInChange:f,onRemoveControl:m,onAddControl:p,onReorderControls:g,onNavigateToPreviousTable:y},_){const b=N.useRef(new Map),w=N.useRef(!1),[x,S]=N.useState(null),C=t?.controls||[],A=Hm(us(Rl),us(Dl,{coordinateGetter:Zm})),E=F=>{S(F.active.id)},j=F=>{const{active:M,over:O}=F;if(O&&M.id!==O.id){const R=t?.controls||[],G=R.findIndex(Z=>Z.ref===M.id),H=R.findIndex(Z=>Z.ref===O.id),U=$l(R,G,H).map(Z=>Z.ref);g(U)}S(null)};N.useImperativeHandle(_,()=>({focusCellByColumnIndex:(F,M=0)=>{if(C.length>0){const O=Math.min(M,C.length-1);setTimeout(()=>T(C[O].ref,F),50)}}})),N.useEffect(()=>{if(w.current&&C.length>0){const F=C[C.length-1];T(F.ref,0),w.current=!1}},[C]);const T=(F,M)=>{const O=`${F}-${M}`,R=b.current.get(O);if(R){const G=R.querySelector('[tabindex="0"], input, textarea');G&&G.focus()}},z=(F,M,O)=>{const R=C.findIndex(G=>G.ref===F);R!==-1&&(O?M>0?T(F,M-1):R>0&&T(C[R-1].ref,3):M<3?T(F,M+1):R<C.length-1?T(C[R+1].ref,0):(w.current=!0,p()))},L=(F,M,O)=>{const R=C.findIndex(G=>G.ref===F);R!==-1&&(O==="up"?R>0?T(C[R-1].ref,M):y&&y(M):O==="down"?R<C.length-1&&T(C[R+1].ref,M):O==="left"?M>0?T(F,M-1):R>0&&T(C[R-1].ref,3):O==="right"&&(M<3?T(F,M+1):R<C.length-1&&T(C[R+1].ref,0)))},V=(F,M)=>{C.findIndex(R=>R.ref===F)!==-1&&(M?T(F,1):T(F,3))};return v.jsxs("div",{className:"table-section",children:[v.jsxs("div",{className:"table-header",children:[v.jsx("span",{children:"Controls"}),v.jsx("span",{className:"header-help-icon","data-tooltip":"Measures implemented to mitigate threats.",children:v.jsx(Lm,{size:16})})]}),v.jsx("div",{className:"table-content",children:v.jsxs("div",{className:`table-container ${x?"dragging":""}`,children:[C.length>0&&v.jsxs(Ym,{sensors:A,collisionDetection:Um,onDragStart:E,onDragEnd:j,children:[v.jsxs("table",{children:[v.jsxs("colgroup",{children:[v.jsx("col",{style:{width:"0px"}}),v.jsx("col",{style:{width:"20%"}}),v.jsx("col",{style:{width:"auto"}}),v.jsx("col",{style:{width:"40px"}}),v.jsx("col",{style:{width:"45px"}}),v.jsx("col",{style:{width:"35px"}})]}),v.jsx("thead",{className:"header-controls",children:v.jsxs("tr",{children:[v.jsx("th",{}),v.jsx("th",{children:"Name"}),v.jsx("th",{children:"Description"}),v.jsx("th",{className:"control-items-th",children:"Items"}),v.jsx("th",{className:"status-column-th",children:"Status"}),v.jsx("th",{className:"action-column"})]})}),v.jsx(Xm,{items:C.map(F=>F.ref),strategy:Km,children:v.jsx("tbody",{children:C.map(F=>v.jsxs(Wm,{id:F.ref,children:[v.jsx("td",{children:v.jsx("div",{ref:M=>{M&&b.current.set(`${F.ref}-0`,M)},children:v.jsx(ls,{value:F.name,placeholder:$8(F.name)?F.name:void 0,onSave:M=>a(F.ref,M),onTabPress:M=>z(F.ref,0,M),onNavigate:M=>L(F.ref,0,M)})})}),v.jsx("td",{children:v.jsx("div",{ref:M=>{M&&b.current.set(`${F.ref}-1`,M)},children:v.jsx(co,{value:F.description||"",onSave:M=>s(F.ref,M),onTabPress:M=>z(F.ref,1,M),onNavigate:M=>L(F.ref,1,M)})})}),v.jsx("td",{className:"control-items-td",ref:M=>{M&&b.current.set(`${F.ref}-2`,M)},children:v.jsx(PN,{title:"Affected Items",themeVariant:"controls",sections:[{label:"Mitigates",value:F.mitigates||[],availableItems:t?.threats?.map(M=>({ref:M.ref,name:M.name}))||[],placeholder:"Add threat...",variant:"threats",onChange:M=>d(F.ref,M)},{label:"Implemented In",value:F.implemented_in||[],availableItems:t?.components?.map(M=>({ref:M.ref,name:M.name}))||[],placeholder:"Add component...",variant:"components",onChange:M=>f(F.ref,M)}],estimatedHeight:220,onTabPress:M=>V(F.ref,M),onNavigate:M=>L(F.ref,2,M)})}),v.jsx("td",{className:"status-column-td",children:v.jsx("div",{ref:M=>{M&&b.current.set(`${F.ref}-3`,M)},children:t&&v.jsx(IN,{entityType:"control",entity:F,threatModel:t,githubMetadata:r,onStatusChange:M=>o(F.ref,M),onStatusLinkChange:M=>l(F.ref,M),onStatusNoteChange:M=>u(F.ref,M),onTabPress:M=>z(F.ref,3,M),onNavigate:M=>L(F.ref,3,M)})})}),v.jsx("td",{className:"action-column",children:v.jsx("button",{className:"row-action-button remove-button",onClick:()=>m(F.ref),title:"Remove control",children:""})})]},F.ref))})})]}),v.jsx(Gm,{children:x?v.jsxs("div",{style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"8px 12px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",cursor:"grabbing",minHeight:"40px",display:"flex",alignItems:"center"},children:[v.jsx("div",{style:{marginRight:"8px",opacity:.5},children:""}),v.jsx("span",{children:C.find(F=>F.ref===x)?.name||"Control"})]}):null})]}),v.jsx("button",{className:"add-row-button add-row-controls",onClick:p,title:"Add control",children:"+ Add Control"})]})})]})})),Hs=[{value:"unidirectional",label:"Unidirectional"},{value:"bidirectional",label:"Bidirectional"}],BN=N.forwardRef(({value:e,onSave:t,onTabPress:r,onNavigate:a},s)=>{const[o,l]=ht.useState(!1),[u,d]=ht.useState(-1),f=N.useRef(null);N.useImperativeHandle(s,()=>f.current);const m=b=>Hs.find(w=>w.value===b)?.label||b,p=b=>{t&&b!==e&&t(b),l(!1),d(-1)},g=b=>{if(o){if(b.key==="ArrowDown"){b.preventDefault(),d(w=>Math.min(w+1,Hs.length-1));return}else if(b.key==="ArrowUp"){b.preventDefault(),d(w=>Math.max(w-1,0));return}else if(b.key==="Enter"){b.preventDefault(),u>=0&&u<Hs.length&&p(Hs[u].value);return}else if(b.key==="Escape"){b.preventDefault(),l(!1),d(-1);return}else if(b.key==="Tab"){b.preventDefault(),l(!1),d(-1),r&&r(b.shiftKey);return}}else{if(b.key==="Enter"){b.preventDefault(),l(!0);const w=Hs.findIndex(x=>x.value===e);d(w);return}else if(b.key==="Tab"){b.preventDefault(),r&&r(b.shiftKey);return}if(a){if(b.key==="ArrowRight"){b.preventDefault(),a("right");return}else if(b.key==="ArrowLeft"){b.preventDefault(),a("left");return}else if(b.key==="ArrowDown"){b.preventDefault(),a("down");return}else if(b.key==="ArrowUp"){b.preventDefault(),a("up");return}}}},y=()=>{if(!o){l(!0);const b=Hs.findIndex(w=>w.value===e);d(b)}},_=b=>{p(b)};return N.useEffect(()=>{if(!o)return;const b=w=>{f.current&&!f.current.contains(w.target)&&(l(!1),d(-1))};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[o]),v.jsxs("div",{ref:f,className:"always-editable-direction-cell",tabIndex:0,onKeyDown:g,onClick:b=>b.stopPropagation(),children:[v.jsxs("div",{className:"direction-display",onClick:y,children:[m(e),v.jsx("span",{className:"direction-arrow",children:""})]}),o&&v.jsx("div",{className:"direction-dropdown",children:Hs.map((b,w)=>v.jsx("div",{className:`direction-option ${w===u?"highlighted":""} ${b.value===e?"selected":""}`,onClick:()=>_(b.value),onMouseEnter:()=>d(w),children:b.label},b.value))})]})});BN.displayName="EditableDirectionCell";const AB=ht.memo(N.forwardRef(function({threatModel:t,handleBoundaryNameChange:r,handleBoundaryDescriptionChange:a,handleDataFlowDirectionChange:s,handleDataFlowLabelChange:o,handleRemoveBoundary:l,handleRemoveDataFlow:u,onNavigateToPreviousTable:d,onNavigateToNextTable:f},m){const[p,g]=N.useState(!1),y=N.useRef(new Map),_=t?.boundaries&&t.boundaries.length>0||t?.data_flows&&t.data_flows.length>0;if(N.useImperativeHandle(m,()=>({focusCell:(A,E,j=0)=>{let T=[],z="";if(A==="boundary"){if(T=t?.boundaries||[],T.length>0){const L=Math.min(j,T.length-1);z=`boundary-${T[L].ref}-${E}`}}else if(A==="dataflow"&&(T=t?.data_flows||[],T.length>0)){const L=Math.min(j,T.length-1);z=`dataflow-${T[L].ref}-${E}`}z&&(g(!0),setTimeout(()=>b(z),50))}})),!_)return null;const b=A=>{const E=y.current.get(A);if(E){const j=E.querySelector('input, textarea, select, [tabindex="0"]');j&&j.focus()}},w=(A,E,j)=>{const T=t?.boundaries||[],z=T.findIndex(V=>V.ref===A);if(z===-1)return;let L=null;if(!j)E==="name"?L=`boundary-${A}-description`:E==="description"&&(z<T.length-1?L=`boundary-${T[z+1].ref}-name`:t?.data_flows&&t.data_flows.length>0&&(L=`dataflow-${t.data_flows[0].ref}-direction`));else if(E==="description")L=`boundary-${A}-name`;else if(E==="name"){if(z>0)L=`boundary-${T[z-1].ref}-description`;else if(d){d("boundary",E);return}}L&&b(L)},x=(A,E,j)=>{const T=t?.boundaries||[],z=T.findIndex(V=>V.ref===A);if(z===-1)return;let L=null;switch(j){case"right":E==="name"?L=`boundary-${A}-description`:E==="description"&&z<T.length-1&&(L=`boundary-${T[z+1].ref}-name`);break;case"left":E==="description"?L=`boundary-${A}-name`:E==="name"&&z>0&&(L=`boundary-${T[z-1].ref}-description`);break;case"down":if(z<T.length-1)L=`boundary-${T[z+1].ref}-${E}`;else if(t?.data_flows&&t.data_flows.length>0){const V=E==="name"?"direction":"label";L=`dataflow-${t.data_flows[0].ref}-${V}`}break;case"up":if(z>0)L=`boundary-${T[z-1].ref}-${E}`;else if(d){d("boundary",E);return}break}L&&b(L)},S=(A,E,j)=>{const T=t?.data_flows||[],z=T.findIndex(V=>V.ref===A);if(z===-1)return;let L=null;if(!j)E==="direction"?L=`dataflow-${A}-label`:E==="label"&&z<T.length-1&&(L=`dataflow-${T[z+1].ref}-direction`);else if(E==="label")L=`dataflow-${A}-direction`;else if(E==="direction"){if(z>0)L=`dataflow-${T[z-1].ref}-label`;else if(t?.boundaries&&t.boundaries.length>0)L=`boundary-${t.boundaries[t.boundaries.length-1].ref}-description`;else if(d){d("dataflow",E);return}}L&&b(L)},C=(A,E,j)=>{const T=t?.data_flows||[],z=T.findIndex(V=>V.ref===A);if(z===-1)return;let L=null;switch(j){case"right":E==="direction"?L=`dataflow-${A}-label`:E==="label"&&z<T.length-1&&(L=`dataflow-${T[z+1].ref}-direction`);break;case"left":E==="label"?L=`dataflow-${A}-direction`:E==="direction"&&z>0&&(L=`dataflow-${T[z-1].ref}-label`);break;case"down":if(z<T.length-1)L=`dataflow-${T[z+1].ref}-${E}`;else if(f){f("dataflow",E);return}break;case"up":if(z>0)L=`dataflow-${T[z-1].ref}-${E}`;else if(d){d("dataflow",E);return}break}L&&b(L)};return v.jsxs("div",{className:"architecture-section",children:[v.jsxs("button",{className:"architecture-toggle",onClick:()=>g(!p),children:[v.jsx("span",{className:`architecture-toggle-icon ${p?"expanded":""}`,children:""}),v.jsx("span",{children:"Diagram Artifacts"})]}),p&&v.jsxs("div",{className:"architecture-content",children:[t?.boundaries&&t.boundaries.length>0&&v.jsxs("div",{className:"table-container",children:[v.jsx("h3",{children:"Boundaries"}),v.jsx("h4",{children:"Trust boundaries in the system"}),v.jsxs("table",{children:[v.jsxs("colgroup",{children:[v.jsx("col",{style:{width:"20%"}}),v.jsx("col",{style:{width:"auto"}}),v.jsx("col",{style:{width:"30%"}}),v.jsx("col",{style:{width:"35px"}})]}),v.jsx("thead",{className:"header-boundaries",children:v.jsxs("tr",{children:[v.jsx("th",{children:"Name"}),v.jsx("th",{children:"Description"}),v.jsx("th",{children:"Components"}),v.jsx("th",{className:"action-column"})]})}),v.jsx("tbody",{children:t.boundaries.map(A=>v.jsxs("tr",{children:[v.jsx("td",{ref:E=>{E&&y.current.set(`boundary-${A.ref}-name`,E)},children:v.jsx(ls,{value:A.name,placeholder:Eh(A.name)?A.name:void 0,onSave:E=>r(A.ref,E),onTabPress:E=>w(A.ref,"name",E),onNavigate:E=>x(A.ref,"name",E)})}),v.jsx("td",{ref:E=>{E&&y.current.set(`boundary-${A.ref}-description`,E)},children:v.jsx(co,{value:A.description||"",onSave:E=>a(A.ref,E),onTabPress:E=>w(A.ref,"description",E),onNavigate:E=>x(A.ref,"description",E)})}),v.jsxs("td",{children:[v.jsx("div",{className:"picker-readonly-wrapper",children:(A.components||[]).map(E=>{const j=t?.components?.find(T=>T.ref===E);return j?v.jsx("span",{className:"picker-tag-readonly picker-variant-components",children:j.name},E):null})}),(!A.components||A.components.length===0)&&v.jsx("span",{className:"no-items-text",children:"-"})]}),v.jsx("td",{className:"action-column",children:v.jsx("button",{className:"row-action-button remove-button",onClick:()=>l(A.ref),title:"Remove boundary",children:""})})]},A.ref))})]})]}),t?.data_flows&&t.data_flows.length>0&&v.jsxs("div",{className:"table-container",children:[v.jsx("h3",{children:"Data Flows"}),v.jsx("h4",{children:"Connections between components with data flowing between them"}),v.jsxs("table",{children:[v.jsxs("colgroup",{children:[v.jsx("col",{style:{width:"20%"}}),v.jsx("col",{style:{width:"20%"}}),v.jsx("col",{style:{width:"20%"}}),v.jsx("col",{style:{width:"auto"}}),v.jsx("col",{style:{width:"35px"}})]}),v.jsx("thead",{className:"header-dataflows",children:v.jsxs("tr",{children:[v.jsx("th",{children:"Source"}),v.jsx("th",{children:"Destination"}),v.jsx("th",{children:"Direction"}),v.jsx("th",{children:"Label"}),v.jsx("th",{className:"action-column"})]})}),v.jsx("tbody",{children:t.data_flows.map(A=>{const E=t.components.find(T=>T.ref===A.source),j=t.components.find(T=>T.ref===A.destination);return v.jsxs("tr",{children:[v.jsx("td",{children:E?.name||A.source}),v.jsx("td",{children:j?.name||A.destination}),v.jsx("td",{ref:T=>{T&&y.current.set(`dataflow-${A.ref}-direction`,T)},children:v.jsx(BN,{value:A.direction||"unidirectional",onSave:T=>s(A.ref,T),onTabPress:T=>S(A.ref,"direction",T),onNavigate:T=>C(A.ref,"direction",T)})}),v.jsx("td",{ref:T=>{T&&y.current.set(`dataflow-${A.ref}-label`,T)},children:v.jsx(ls,{value:A.label||"",placeholder:A.label&&Ch(A.label)?A.label:void 0,onSave:T=>o(A.ref,T),onTabPress:T=>S(A.ref,"label",T),onNavigate:T=>C(A.ref,"label",T)})}),v.jsx("td",{className:"action-column",children:v.jsx("button",{className:"row-action-button remove-button",onClick:()=>u(A.ref),title:"Remove data flow",children:""})})]},A.ref)})})]})]})]})]})}),(e,t)=>e.threatModel?.boundaries===t.threatModel?.boundaries&&e.threatModel?.data_flows===t.threatModel?.data_flows&&e.threatModel?.components===t.threatModel?.components&&e.handleBoundaryNameChange===t.handleBoundaryNameChange&&e.handleBoundaryDescriptionChange===t.handleBoundaryDescriptionChange&&e.handleDataFlowDirectionChange===t.handleDataFlowDirectionChange&&e.handleDataFlowLabelChange===t.handleDataFlowLabelChange&&e.handleRemoveBoundary===t.handleRemoveBoundary&&e.handleRemoveDataFlow===t.handleRemoveDataFlow&&e.onNavigateToPreviousTable===t.onNavigateToPreviousTable),jB=({threatModel:e,threatsTableRef:t,controlsTableRef:r,onExpandThreatsSection:a,onExpandControlsSection:s})=>{const[o,l]=N.useState(new Set);if(!e)return v.jsx("div",{className:"summary-section",children:v.jsx("p",{className:"summary-empty-state",children:"No threat model data available."})});const u=$=>$>=100?"summary-progress-fill-complete":$<25?"summary-progress-fill-warning":"summary-progress-fill",d=$=>{l(B=>{const K=new Set(B);return K.has($)?K.delete($):K.add($),K})},f=$=>{a&&a(),setTimeout(()=>{if(t?.current&&e?.threats){const B=e.threats.findIndex(K=>K.ref===$.ref);B!==-1&&t.current.focusCellByColumn("name",B)}},100)},m=$=>{s&&s(),setTimeout(()=>{if(r?.current&&e?.controls){const B=e.controls.findIndex(K=>K.ref===$.ref);B!==-1&&r.current.focusCellByColumnIndex(0,B)}},100)},p=e.components||[],g=e.assets||[],y=e.data_flows||[],_=e.boundaries||[],b=e.threats||[],w=e.controls||[],x={evaluate:b.filter($=>$.status==="Evaluate").length,mitigate:b.filter($=>$.status==="Mitigate").length,accept:b.filter($=>$.status==="Accept").length,dismiss:b.filter($=>$.status==="Dismiss").length,noStatus:b.filter($=>!$.status).length},S={toDo:w.filter($=>$.status==="To Do").length,inProgress:w.filter($=>$.status==="In Progress").length,done:w.filter($=>$.status==="Done").length,cancelled:w.filter($=>$.status==="Cancelled").length,noStatus:w.filter($=>!$.status).length},C=b.filter($=>w.some(B=>B.mitigates?.includes($.ref)&&B.status!=="Cancelled")),A=b.filter($=>!w.some(B=>B.mitigates?.includes($.ref)&&B.status!=="Cancelled")),E=C.length,j=b.filter($=>{const B=w.some(P=>P.mitigates?.includes($.ref)&&P.status!=="Cancelled"),K=$.status==="Accept"||$.status==="Dismiss";return!B&&!K}),T=b.filter($=>$.status==="Evaluate"),z=w.filter($=>!$.mitigates||$.mitigates.length===0),L=new Set;y.forEach($=>{$.source&&L.add($.source),$.destination&&L.add($.destination)});const V=p.filter($=>!L.has($.ref)).length,F=_.filter($=>!$.components||$.components.length===0).length,M=b.filter($=>{if($.status==="Accept"||$.status==="Dismiss")return!0;if($.status==="Mitigate"){const B=w.filter(K=>K.mitigates?.includes($.ref));return B.length===0?!1:B.every(K=>K.status==="Done")}return!1}),O=b.filter($=>!M.includes($)),R=M.length,G=b.length>0?R/b.length*100:0,H=w.length>0?(S.done+S.cancelled)/w.length*100:0,U=w.filter($=>$.status==="Done"||$.status==="Cancelled"),Z=w.filter($=>$.status!=="Done"&&$.status!=="Cancelled"),X=b.length>0?E/b.length*100:0,Q=j.length>0||T.length>0||z.length>0||V>0||F>0;return v.jsxs("div",{className:"summary-section",children:[Q&&v.jsxs("div",{className:"summary-subsection summary-action-items",children:[v.jsxs("h3",{className:"summary-subsection-title",children:[v.jsx(xl,{size:16}),v.jsx("span",{children:"Action Items"})]}),v.jsxs("div",{className:"summary-action-list",children:[j.length>0&&v.jsxs("div",{className:"summary-action-item",children:[v.jsx(nm,{size:14,className:"summary-action-icon"}),v.jsxs("div",{className:"summary-action-content",children:[v.jsxs("span",{className:"summary-action-text",children:[v.jsx("strong",{children:j.length})," ",j.length===1?"threat has":"threats have"," no mitigating controls and ",j.length===1?"is":"are"," not accepted or dismissed:"]}),v.jsx("ul",{className:"summary-action-items-list",children:j.map($=>v.jsx("li",{className:"summary-clickable-item",onClick:()=>f($),children:$.name},$.ref))})]})]}),T.length>0&&v.jsxs("div",{className:"summary-action-item",children:[v.jsx(xl,{size:14,className:"summary-action-icon"}),v.jsxs("div",{className:"summary-action-content",children:[v.jsxs("span",{className:"summary-action-text",children:[v.jsx("strong",{children:T.length})," ",T.length===1?"threat needs":"threats need"," evaluation:"]}),v.jsx("ul",{className:"summary-action-items-list",children:T.map($=>v.jsx("li",{className:"summary-clickable-item",onClick:()=>f($),children:$.name},$.ref))})]})]}),z.length>0&&v.jsxs("div",{className:"summary-action-item",children:[v.jsx(By,{size:14,className:"summary-action-icon"}),v.jsxs("div",{className:"summary-action-content",children:[v.jsxs("span",{className:"summary-action-text",children:[v.jsx("strong",{children:z.length})," ",z.length===1?"control is":"controls are"," not mitigating any threats:"]}),v.jsx("ul",{className:"summary-action-items-list",children:z.map($=>v.jsx("li",{className:"summary-clickable-item",onClick:()=>m($),children:$.name},$.ref))})]})]}),V>0&&v.jsxs("div",{className:"summary-action-item",children:[v.jsx(J_,{size:14,className:"summary-action-icon"}),v.jsxs("span",{className:"summary-action-text",children:[v.jsx("strong",{children:V})," ",V===1?"component is":"components are"," not connected to any data flows"]})]}),F>0&&v.jsxs("div",{className:"summary-action-item",children:[v.jsx(eo,{size:14,className:"summary-action-icon"}),v.jsxs("span",{className:"summary-action-text",children:[v.jsx("strong",{children:F})," ",F===1?"boundary has":"boundaries have"," no components"]})]})]})]}),v.jsxs("div",{className:"summary-subsection",children:[v.jsxs("h3",{className:"summary-subsection-title",children:[v.jsx(bI,{size:16}),v.jsx("span",{children:"Core Completeness"})]}),v.jsxs("div",{className:"summary-stats-grid",children:[v.jsxs("div",{className:"summary-stat-card",children:[v.jsx(J_,{size:14,className:"summary-stat-icon"}),v.jsx("div",{className:"summary-stat-label",children:"Components"}),v.jsx("div",{className:`summary-stat-value ${p.length===0?"summary-stat-warning":""}`,children:p.length})]}),v.jsxs("div",{className:"summary-stat-card",children:[v.jsx(Gc,{size:14,className:"summary-stat-icon"}),v.jsx("div",{className:"summary-stat-label",children:"Assets"}),v.jsx("div",{className:`summary-stat-value ${g.length===0?"summary-stat-warning":""}`,children:g.length})]}),v.jsxs("div",{className:"summary-stat-card",children:[v.jsx(eo,{size:14,className:"summary-stat-icon"}),v.jsx("div",{className:"summary-stat-label",children:"Data Flows"}),v.jsx("div",{className:`summary-stat-value ${y.length===0?"summary-stat-warning":""}`,children:y.length})]}),v.jsxs("div",{className:"summary-stat-card",children:[v.jsx(nm,{size:14,className:"summary-stat-icon"}),v.jsx("div",{className:"summary-stat-label",children:"Threats"}),v.jsx("div",{className:`summary-stat-value ${b.length===0?"summary-stat-warning":""}`,children:b.length})]}),v.jsxs("div",{className:"summary-stat-card",children:[v.jsx(By,{size:14,className:"summary-stat-icon"}),v.jsx("div",{className:"summary-stat-label",children:"Controls"}),v.jsx("div",{className:`summary-stat-value ${w.length===0?"summary-stat-warning":""}`,children:w.length})]})]})]}),v.jsxs("div",{className:"summary-subsection",children:[v.jsxs("h3",{className:"summary-subsection-title",children:[v.jsx(By,{size:16}),v.jsx("span",{children:"Coverage & Mitigation"})]}),v.jsxs("div",{className:"summary-metrics",children:[v.jsxs("div",{className:"summary-metric-row",children:[v.jsxs("div",{className:"summary-metric-header summary-metric-expandable",onClick:()=>d("threatCoverage"),children:[v.jsxs("div",{className:"summary-metric-header-content",children:[o.has("threatCoverage")?v.jsx(Js,{size:16}):v.jsx(Iy,{size:16}),v.jsx("div",{className:"summary-metric-label",children:"Threats with Controls"})]}),v.jsxs("div",{className:"summary-metric-value",children:[v.jsxs("span",{className:"summary-metric-main",children:[E," of ",b.length]}),b.length>0&&v.jsxs("span",{className:"summary-metric-percentage",children:["(",X.toFixed(0),"%)"]})]})]}),b.length>0&&v.jsx("div",{className:"summary-progress-bar",children:v.jsx("div",{className:u(X),style:{width:`${X}%`}})}),o.has("threatCoverage")&&v.jsxs("div",{className:"summary-metric-details",children:[C.length>0&&v.jsxs("div",{className:"summary-metric-detail-section",children:[v.jsxs("div",{className:"summary-metric-detail-header",children:["With Controls (",C.length,"):"]}),v.jsx("ul",{className:"summary-metric-items-list",children:C.map($=>v.jsx("li",{className:"summary-clickable-item",onClick:()=>f($),children:$.name},$.ref))})]}),A.length>0&&v.jsxs("div",{className:"summary-metric-detail-section",children:[v.jsxs("div",{className:"summary-metric-detail-header",children:["Without Controls (",A.length,"):"]}),v.jsx("ul",{className:"summary-metric-items-list",children:A.map($=>v.jsx("li",{className:"summary-clickable-item",onClick:()=>f($),children:$.name},$.ref))})]})]})]}),v.jsxs("div",{className:"summary-metric-row",children:[v.jsxs("div",{className:"summary-metric-header summary-metric-expandable",onClick:()=>d("threatResolution"),children:[v.jsxs("div",{className:"summary-metric-header-content",children:[o.has("threatResolution")?v.jsx(Js,{size:16}):v.jsx(Iy,{size:16}),v.jsx("div",{className:"summary-metric-label",children:"Threat Resolution"})]}),v.jsxs("div",{className:"summary-metric-value",children:[v.jsxs("span",{className:"summary-metric-main",children:[R," of ",b.length]}),b.length>0&&v.jsxs("span",{className:"summary-metric-percentage",children:["(",G.toFixed(0),"%)"]})]})]}),b.length>0&&v.jsx("div",{className:"summary-progress-bar",children:v.jsx("div",{className:u(G),style:{width:`${G}%`}})}),o.has("threatResolution")&&v.jsxs("div",{className:"summary-metric-details",children:[M.length>0&&v.jsxs("div",{className:"summary-metric-detail-section",children:[v.jsxs("div",{className:"summary-metric-detail-header",children:["Resolved (",M.length,"):"]}),v.jsx("ul",{className:"summary-metric-items-list",children:M.map($=>v.jsx("li",{className:"summary-clickable-item",onClick:()=>f($),children:$.name},$.ref))})]}),O.length>0&&v.jsxs("div",{className:"summary-metric-detail-section",children:[v.jsxs("div",{className:"summary-metric-detail-header",children:["Not Resolved (",O.length,"):"]}),v.jsx("ul",{className:"summary-metric-items-list",children:O.map($=>v.jsx("li",{className:"summary-clickable-item",onClick:()=>f($),children:$.name},$.ref))})]})]})]}),v.jsxs("div",{className:"summary-metric-row",children:[v.jsxs("div",{className:"summary-metric-header summary-metric-expandable",onClick:()=>d("controlImplementation"),children:[v.jsxs("div",{className:"summary-metric-header-content",children:[o.has("controlImplementation")?v.jsx(Js,{size:16}):v.jsx(Iy,{size:16}),v.jsx("div",{className:"summary-metric-label",children:"Control Implementation"})]}),v.jsxs("div",{className:"summary-metric-value",children:[v.jsxs("span",{className:"summary-metric-main",children:[S.done+S.cancelled," of ",w.length]}),w.length>0&&v.jsxs("span",{className:"summary-metric-percentage",children:["(",H.toFixed(0),"%)"]})]})]}),w.length>0&&v.jsx("div",{className:"summary-progress-bar",children:v.jsx("div",{className:u(H),style:{width:`${H}%`}})}),o.has("controlImplementation")&&v.jsxs("div",{className:"summary-metric-details",children:[U.length>0&&v.jsxs("div",{className:"summary-metric-detail-section",children:[v.jsxs("div",{className:"summary-metric-detail-header",children:["Implemented (",U.length,"):"]}),v.jsx("ul",{className:"summary-metric-items-list",children:U.map($=>v.jsx("li",{className:"summary-clickable-item",onClick:()=>m($),children:$.name},$.ref))})]}),Z.length>0&&v.jsxs("div",{className:"summary-metric-detail-section",children:[v.jsxs("div",{className:"summary-metric-detail-header",children:["Not Implemented (",Z.length,"):"]}),v.jsx("ul",{className:"summary-metric-items-list",children:Z.map($=>v.jsx("li",{className:"summary-clickable-item",onClick:()=>m($),children:$.name},$.ref))})]})]})]})]})]}),v.jsxs("div",{className:"summary-subsection",children:[v.jsxs("h3",{className:"summary-subsection-title",children:[v.jsx(aL,{size:16}),v.jsx("span",{children:"Status Distribution"})]}),v.jsxs("div",{className:"summary-distribution-grid",children:[v.jsxs("div",{className:"summary-distribution-card",children:[v.jsx("div",{className:"summary-distribution-header",children:"Threats"}),v.jsxs("div",{className:"summary-distribution-items",children:[v.jsxs("div",{className:"summary-distribution-item",children:[v.jsx("span",{className:"summary-status-badge summary-status-evaluate",children:"Evaluate"}),v.jsx("span",{className:"summary-distribution-count",children:x.evaluate})]}),v.jsxs("div",{className:"summary-distribution-item",children:[v.jsx("span",{className:"summary-status-badge summary-status-mitigate",children:"Mitigate"}),v.jsx("span",{className:"summary-distribution-count",children:x.mitigate})]}),v.jsxs("div",{className:"summary-distribution-item",children:[v.jsx("span",{className:"summary-status-badge summary-status-accept",children:"Accept"}),v.jsx("span",{className:"summary-distribution-count",children:x.accept})]}),v.jsxs("div",{className:"summary-distribution-item",children:[v.jsx("span",{className:"summary-status-badge summary-status-dismiss",children:"Dismiss"}),v.jsx("span",{className:"summary-distribution-count",children:x.dismiss})]}),x.noStatus>0&&v.jsxs("div",{className:"summary-distribution-item",children:[v.jsx("span",{className:"summary-status-badge summary-status-none",children:"No Status"}),v.jsx("span",{className:"summary-distribution-count",children:x.noStatus})]})]})]}),v.jsxs("div",{className:"summary-distribution-card",children:[v.jsx("div",{className:"summary-distribution-header",children:"Controls"}),v.jsxs("div",{className:"summary-distribution-items",children:[v.jsxs("div",{className:"summary-distribution-item",children:[v.jsx("span",{className:"summary-status-badge summary-status-todo",children:"To Do"}),v.jsx("span",{className:"summary-distribution-count",children:S.toDo})]}),v.jsxs("div",{className:"summary-distribution-item",children:[v.jsx("span",{className:"summary-status-badge summary-status-inprogress",children:"In Progress"}),v.jsx("span",{className:"summary-distribution-count",children:S.inProgress})]}),v.jsxs("div",{className:"summary-distribution-item",children:[v.jsx("span",{className:"summary-status-badge summary-status-done",children:"Done"}),v.jsx("span",{className:"summary-distribution-count",children:S.done})]}),v.jsxs("div",{className:"summary-distribution-item",children:[v.jsx("span",{className:"summary-status-badge summary-status-cancelled",children:"Cancelled"}),v.jsx("span",{className:"summary-distribution-count",children:S.cancelled})]}),S.noStatus>0&&v.jsxs("div",{className:"summary-distribution-item",children:[v.jsx("span",{className:"summary-status-badge summary-status-none",children:"No Status"}),v.jsx("span",{className:"summary-distribution-count",children:S.noStatus})]})]})]})]})]})]})},TB=({onConfirm:e,onCancel:t})=>v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content",children:[v.jsx("h2",{children:"Discard Current Threat Model?"}),v.jsx("p",{children:"Opening a new threat model will discard any unsaved changes to your current threat model."}),v.jsx("p",{children:"Make sure you've saved your work before continuing."}),v.jsxs("div",{className:"modal-actions",children:[v.jsx("button",{className:"button button-secondary",onClick:t,children:"Cancel"}),v.jsx("button",{className:"button button-primary button-danger",onClick:e,children:"Discard & Continue"})]})]})}),DB=({fileName:e,onKeepMine:t,onLoadExternal:r,onSaveAs:a})=>v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content",children:[v.jsx("h2",{children:"File Changed Externally"}),v.jsxs("p",{children:[v.jsx("strong",{children:e})," has been modified outside the editor. You have unsaved changes that may conflict with the external version."]}),v.jsx("p",{children:v.jsx("strong",{children:"Choose how to resolve this:"})}),v.jsxs("ul",{style:{marginLeft:"1.5rem",marginBottom:"1rem",lineHeight:"1.6"},children:[v.jsxs("li",{children:[v.jsx("strong",{children:"Keep My Changes:"})," Ignore the external changes and continue editing"]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Load External Changes:"})," Discard your edits and reload from disk"]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Save Copy & Load External:"})," Save your version to a new file, then load the external version"]})]}),v.jsxs("div",{className:"modal-actions external-change-actions",children:[v.jsx("button",{className:"button button-secondary",onClick:a,children:"Save Copy & Load External"}),v.jsx("button",{className:"button button-secondary",onClick:t,children:"Keep My Changes"}),v.jsx("button",{className:"button button-primary",onClick:r,children:"Load External Changes"})]})]})}),RB={load:"Load a threat model from GitHub",commit:"Commit changes to GitHub","create-issue":"Create a GitHub issue",sync:"Sync with GitHub repository"},$B={load:["Contents (Read)"],commit:["Contents (Read & Write)"],"create-issue":["Issues (Write)"],sync:["Contents (Read)","Issues (Read)"]},MB={load:[["repo","public_repo"]],commit:[["repo"]],"create-issue":[["repo"]],sync:[["repo"]]},Ml=[{domain:"github.com",apiBaseUrl:"https://api.github.com",displayName:"GitHub.com",isEnterprise:!1,isDefault:!0}],OB=Object.fromEntries(Ml.map(e=>[e.domain,e.apiBaseUrl]));function zB(){const e=Ml.find(t=>t.isDefault);if(!e)throw new Error("No default GitHub domain configured");return e.domain}function LB(e){return Ml.some(t=>t.domain===e)}function IB(){return Ml.map(e=>e.domain.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|")}const HN=({action:e,domain:t,onSubmit:r,onCancel:a,onChangeDomain:s,isValidating:o=!1,error:l})=>{const[u,d]=N.useState(""),[f,m]=N.useState(!1),[p,g]=N.useState(!1),y=N.useRef(null);N.useEffect(()=>{y.current?.focus()},[]);const _=()=>{u.trim()&&r(u.trim(),p)},b=$B[e],w=RB[e],x=t==="github.com"?"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token":"https://docs.github.com/en/enterprise-server@latest/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token";return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content pat-modal",children:[v.jsx("h2",{children:"Enter GitHub Token"}),v.jsxs("p",{className:"action-description",children:["Action: ",v.jsx("strong",{children:w})]}),v.jsxs("div",{children:[s&&v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"github-domain",children:"GitHub Instance"}),v.jsx("select",{id:"github-domain",value:t,onChange:S=>s(S.target.value),disabled:o,children:Ml.map(S=>v.jsxs("option",{value:S.domain,children:[S.displayName,S.isEnterprise?" (Enterprise)":""]},S.domain))})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"pat-input",children:"Personal Access Token (PAT)"}),v.jsxs("div",{className:"pat-input-wrapper",children:[v.jsx("input",{ref:y,id:"pat-input",name:"github-token",type:f?"text":"password",value:u,onChange:S=>d(S.target.value),onKeyDown:S=>{S.key==="Enter"&&u.trim()&&!o&&_()},placeholder:"ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",disabled:o}),v.jsx("button",{type:"button",className:"toggle-visibility",onClick:()=>m(!f),title:f?"Hide token":"Show token",children:f?v.jsx(I0,{size:18}):v.jsx(P0,{size:18})})]})]}),l&&v.jsx("div",{className:"pat-error",children:l.includes("missing required permissions")?v.jsxs("div",{className:"pat-error-detailed",children:[v.jsxs("div",{className:"pat-error-header",children:[v.jsx(fI,{size:16}),v.jsx("strong",{children:"Insufficient Permissions"})]}),v.jsx("p",{children:l})]}):l}),v.jsxs("div",{className:"form-group checkbox-group",children:[v.jsxs("label",{className:"checkbox-label",children:[v.jsx("input",{type:"checkbox",checked:p,onChange:S=>g(S.target.checked),disabled:o}),v.jsx("span",{children:"Remember token for this session"})]}),v.jsx("p",{className:"field-hint",children:"Token will be stored in sessionStorage and deleted when you close the browser tab. Without this option, you'll need to enter your token for each action."})]}),v.jsxs("div",{className:"scopes-info",children:[v.jsx("h4",{children:"Required Permissions"}),v.jsxs("p",{children:["Your"," ",v.jsxs("a",{href:x,target:"_blank",rel:"noopener noreferrer",children:["Personal Access Token ",v.jsx(em,{size:12})]})," ","needs these scopes:"]}),v.jsx("ul",{children:b.map(S=>v.jsx("li",{children:S},S))})]}),v.jsxs("div",{className:"modal-actions",children:[v.jsx("button",{type:"button",className:"button button-secondary",onClick:a,disabled:o,children:"Cancel"}),v.jsx("button",{type:"button",className:"button button-primary",onClick:_,disabled:!u.trim()||o,children:o?"Validating...":"Authenticate"})]})]})]})})},Qm="flowstate-github-pat",UN=3600*1e3;let ul=null,wS=!1;function PB(){if(wS)return;window.addEventListener("beforeunload",()=>{Iu()}),ds()&&Fv(),wS=!0}function Fv(){ul&&clearTimeout(ul),ul=setTimeout(()=>{console.log("[PAT Storage] Clearing PAT due to inactivity"),Iu()},UN)}function ds(){try{const e=sessionStorage.getItem(Qm);if(!e)return null;const t=JSON.parse(e);return Date.now()-t.storedAt>UN?(Iu(),null):t}catch(e){return console.error("[PAT Storage] Error reading PAT config:",e),null}}function q0(e){const t=ds();return!t||t.domain!==e?null:t.token}function BB(e){const t=ds();return t!==null&&t.domain===e}function FN(e,t,r=!0){const a={token:e,domain:t,storedAt:Date.now(),persistInSession:r};try{sessionStorage.setItem(Qm,JSON.stringify(a))}catch(s){console.error("[PAT Storage] Error storing PAT:",s)}Fv()}function Iu(){try{sessionStorage.removeItem(Qm)}catch(e){console.error("[PAT Storage] Error clearing PAT:",e)}ul&&(clearTimeout(ul),ul=null)}function HB(){const e=ds();if(e&&e.persistInSession){e.storedAt=Date.now();try{sessionStorage.setItem(Qm,JSON.stringify(e))}catch(t){console.error("[PAT Storage] Error updating PAT timestamp:",t)}}Fv()}function UB(){return ds()?.persistInSession??!1}function to(){const e=ds();e&&!e.persistInSession&&(Iu(),console.log("[PAT Storage] Cleared temporary PAT"))}class Rn extends Error{status;githubError;constructor(t,r,a){super(t),this.name="GitHubApiError",this.status=r,this.githubError=a}}function FB(e){const t={hasNext:!1,hasPrev:!1};if(!e)return t;const r=e.split(",").map(a=>a.trim());for(const a of r){const s=a.match(/<([^>]+)>;\s*rel="([^"]+)"/);if(!s)continue;const[,o,l]=s,d=new URL(o).searchParams.get("page"),f=d?parseInt(d,10):void 0;switch(l){case"next":t.hasNext=!0,t.nextPage=f;break;case"prev":t.hasPrev=!0,t.prevPage=f;break;case"last":t.lastPage=f;break}}return t}class wu{token;domain;baseUrl;constructor(t,r){this.token=t,this.domain=r;const a=OB[r];if(!a)throw new Error(`No API base URL configured for domain: ${r}. Please check githubDomains.config.ts`);this.baseUrl=a}async request(t,r={}){return(await this.requestWithHeaders(t,r)).data}async requestWithHeaders(t,r={}){const a=`${this.baseUrl}${t}`,s={Authorization:`Bearer ${this.token}`,Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28",...r.headers};r.body&&(s["Content-Type"]="application/json");const o=await fetch(a,{...r,headers:s});if(HB(),!o.ok){let f;try{f=await o.json()}catch{}const m=f?.message||`GitHub API error: ${o.status}`;throw new Rn(m,o.status,f)}if(o.status===204)return{data:{},headers:o.headers};const l=await o.json(),u=o.headers.get("Link"),d=FB(u);return{data:l,headers:o.headers,pagination:d}}getDomain(){return this.domain}async getUser(){return this.request("/user")}async listOrganizations(){return this.request("/user/orgs")}async listAccessibleRepositories(){return this.request("/user/repos?per_page=100&sort=updated&affiliation=owner,collaborator,organization_member")}async listAccessibleRepositoriesPage(t=1){return this.request(`/user/repos?per_page=100&page=${t}&sort=updated&affiliation=owner,collaborator,organization_member`)}async listRepositories(t,r="org"){const a=r==="org"?`/orgs/${t}/repos`:`/users/${t}/repos`;return this.request(`${a}?per_page=100&sort=updated`)}async getRepository(t,r){return this.request(`/repos/${t}/${r}`)}async listBranches(t,r){return this.request(`/repos/${t}/${r}/branches?per_page=100`)}async getBranch(t,r,a){return this.request(`/repos/${t}/${r}/branches/${encodeURIComponent(a)}`)}async getContents(t,r,a,s){const o=a.split("/").map(u=>encodeURIComponent(u)).join("/"),l=s?`?ref=${encodeURIComponent(s)}`:"";return this.request(`/repos/${encodeURIComponent(t)}/${encodeURIComponent(r)}/contents/${o}${l}`)}async getFileContent(t,r,a,s){const o=await this.getContents(t,r,a,s);if(Array.isArray(o))throw new Rn("Path is a directory, not a file",400);if(o.type!=="file"||!o.content)throw new Rn("Path is not a file or has no content",400);const l=o.content.replace(/\n/g,""),u=atob(l),d=new Uint8Array(u.length);for(let m=0;m<u.length;m++)d[m]=u.charCodeAt(m);return{content:new TextDecoder("utf-8").decode(d),sha:o.sha}}async listThreatModels(t,r,a){try{return await this.listThreatModelsRecursive(t,r,".threat-models",a)}catch(s){if(s instanceof Rn&&s.status===404)return[];throw s}}async listThreatModelsRecursive(t,r,a,s){const o=await this.getContents(t,r,a,s);if(!Array.isArray(o))return[];const l=[],u=o.filter(f=>f.type==="dir");for(const f of o)f.type==="file"&&(f.name.endsWith(".yaml")||f.name.endsWith(".yml"))&&l.push(f);const d=await Promise.all(u.map(f=>this.listThreatModelsRecursive(t,r,f.path,s)));for(const f of d)l.push(...f);return l}async createOrUpdateFile(t,r,a,s,o,l,u){const d=btoa(unescape(encodeURIComponent(s))),f={message:o,content:d,branch:l};return u&&(f.sha=u),this.request(`/repos/${t}/${r}/contents/${a}`,{method:"PUT",body:JSON.stringify(f)})}async getIssue(t,r,a){return this.request(`/repos/${t}/${r}/issues/${a}`)}async createIssue(t,r,a){return this.request(`/repos/${t}/${r}/issues`,{method:"POST",body:JSON.stringify(a)})}async getRef(t,r,a){return this.request(`/repos/${t}/${r}/git/ref/${a}`)}async getGitCommit(t,r,a){return this.request(`/repos/${t}/${r}/git/commits/${a}`)}async createBlob(t,r,a,s="utf-8"){return this.request(`/repos/${t}/${r}/git/blobs`,{method:"POST",body:JSON.stringify({content:a,encoding:s})})}async createTree(t,r,a,s){const o={tree:a};return s&&(o.base_tree=s),this.request(`/repos/${t}/${r}/git/trees`,{method:"POST",body:JSON.stringify(o)})}async createGitCommit(t,r,a,s,o){return this.request(`/repos/${t}/${r}/git/commits`,{method:"POST",body:JSON.stringify({message:a,tree:s,parents:o})})}async updateRef(t,r,a,s,o=!1){return this.request(`/repos/${t}/${r}/git/refs/${a}`,{method:"PATCH",body:JSON.stringify({sha:s,force:o})})}async createMultiFileCommit(t,r,a,s,o){const u=(await this.getRef(t,r,`heads/${a}`)).object.sha,f=(await this.getGitCommit(t,r,u)).tree.sha,m=[];for(const y of o)if(y.isBase64){const _=await this.createBlob(t,r,y.content,"base64");m.push({path:y.path,mode:"100644",type:"blob",sha:_.sha})}else m.push({path:y.path,mode:"100644",type:"blob",content:y.content});const p=await this.createTree(t,r,m,f),g=await this.createGitCommit(t,r,s,p.sha,[u]);return await this.updateRef(t,r,`heads/${a}`,g.sha),{commitSha:g.sha,commitUrl:g.html_url||`https://${this.domain}/${t}/${r}/commit/${g.sha}`}}async validateToken(){try{return await this.getUser(),!0}catch{return!1}}async validateTokenForAction(t){try{const{data:r,headers:a}=await this.requestWithHeaders("/user"),s=a.get("X-OAuth-Scopes");return s!==null?this.validateClassicTokenScopes(t,r,s):this.validateFineGrainedTokenPermissions(t,r)}catch(r){if(r instanceof Rn&&r.status===401)return{valid:!1,missingPermissions:["Valid authentication  token may be expired or revoked"],tokenType:"unknown"};throw r}}validateClassicTokenScopes(t,r,a){const s=a.split(",").map(u=>u.trim()).filter(Boolean),o=MB[t],l=[];for(const u of o)u.some(f=>s.includes(f))||l.push(u.join(" or "));return{valid:l.length===0,user:r,missingPermissions:l.length>0?l.map(u=>`Missing scope: ${u}`):[],tokenType:"classic"}}async validateFineGrainedTokenPermissions(t,r){const a=[],s=["load","commit","sync"].includes(t),o=t==="commit";if(s||o)try{const l=await this.request("/user/repos?per_page=1&sort=updated");if(l.length>0)try{await this.request(`/repos/${l[0].owner.login}/${l[0].name}/branches?per_page=1`)}catch(u){u instanceof Rn&&(u.status===403||u.status===404)&&a.push("Contents (Read)  token cannot read repository contents")}else a.push("Contents (Read)  token has no access to any repositories")}catch(l){l instanceof Rn&&l.status===403?a.push("Metadata (Read)  no repository access"):a.push("Contents (Read)  could not verify repository access")}return o&&a.includes("Contents (Read)"),{valid:a.length===0,user:r,missingPermissions:a,tokenType:"fine-grained"}}async getFileCommits(t,r,a,s,o=1){const l=new URLSearchParams({path:a,per_page:o.toString()});return s&&l.append("sha",s),this.request(`/repos/${t}/${r}/commits?${l.toString()}`)}async getFileSha(t,r,a,s){try{const o=await this.getContents(t,r,a,s);return Array.isArray(o)?null:o.sha}catch(o){if(o instanceof Rn&&o.status===404)return null;throw o}}}function qB(e){const t=IB(),r=new RegExp(`https:\\/\\/(${t})\\/([^/]+)\\/([^/]+)\\/issues\\/(\\d+)`),a=e.match(r);if(!a)return null;const s=a[1];return LB(s)?{domain:s,owner:a[2],repo:a[3],number:parseInt(a[4],10)}:null}const VB=({domain:e,onDomainChange:t,githubMetadata:r,onSync:a,onClose:s})=>{const[o,l]=N.useState(!1),[u,d]=N.useState(!1),[f,m]=N.useState(""),[p,g]=N.useState(!1),[y,_]=N.useState(!0),[b,w]=N.useState(null),[x,S]=N.useState(!1),[C,A]=N.useState(()=>ds()),[E,j]=N.useState(()=>UB()),T=()=>{Iu(),l(!1),A(null),j(!1)},z=async()=>{if(!f.trim()){w("Please enter a token");return}w(null),S(!0);try{if(!await new wu(f.trim(),e).validateToken()){w("Invalid token or insufficient permissions"),S(!1);return}FN(f.trim(),e,y),A(ds()),j(y),m(""),d(!1),S(!1)}catch(F){w(F instanceof Error?F.message:"Failed to validate token"),S(!1)}},L=()=>{d(!1),m(""),w(null),g(!1),_(!0)},V=e==="github.com"?"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token":"https://docs.github.com/en/enterprise-server@latest/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token";return v.jsx("div",{className:"modal-overlay",onClick:s,children:v.jsxs("div",{className:"modal-content github-settings-modal",onClick:F=>F.stopPropagation(),children:[v.jsx("h2",{children:"GitHub Settings"}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h3",{children:"GitHub Instance"}),v.jsx("p",{className:"settings-description",children:"Select which GitHub instance to use for loading and committing threat models."}),v.jsx("div",{className:"domain-selector",children:Ml.map(F=>v.jsxs("label",{className:"domain-option",children:[v.jsx("input",{type:"radio",name:"github-domain",value:F.domain,checked:e===F.domain,onChange:()=>t(F.domain)}),v.jsxs("span",{className:"domain-label",children:[v.jsx("strong",{children:F.domain}),v.jsx("span",{className:"domain-sublabel",children:F.isEnterprise?"GitHub Enterprise":"Public GitHub"})]})]},F.domain))})]}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h3",{children:"Personal Access Token"}),C&&E?v.jsxs("div",{className:"pat-status",children:[v.jsxs("div",{className:"pat-status-info",children:[v.jsxs("span",{className:"pat-status-badge pat-stored",children:["Token stored for ",C.domain]}),v.jsx("button",{className:"toggle-visibility-btn",onClick:()=>l(!o),children:o?v.jsx(I0,{size:16}):v.jsx(P0,{size:16})})]}),o&&v.jsxs("div",{className:"pat-details",children:[v.jsxs("p",{children:[v.jsx("strong",{children:"Domain:"})," ",C.domain]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Stored at:"})," ",new Date(C.storedAt).toLocaleString()]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Token:"})," ",C.token.substring(0,8),"..."]})]}),v.jsxs("button",{className:"button button-danger clear-pat-btn",onClick:T,children:[v.jsx(lN,{size:16}),"Clear stored token"]})]}):v.jsx(v.Fragment,{children:u?v.jsxs("div",{className:"pat-input-form",children:[v.jsxs("div",{className:"pat-input-group",children:[v.jsxs("label",{htmlFor:"pat-input",className:"pat-input-label",children:["Enter Personal Access Token for ",e]}),v.jsxs("div",{className:"pat-input-wrapper",children:[v.jsx("input",{id:"pat-input",type:p?"text":"password",className:"pat-input",value:f,onChange:F=>m(F.target.value),placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",disabled:x}),v.jsx("button",{className:"toggle-visibility-btn pat-input-toggle",onClick:()=>g(!p),type:"button",children:p?v.jsx(I0,{size:16}):v.jsx(P0,{size:16})})]})]}),v.jsxs("label",{className:"pat-persist-option",children:[v.jsx("input",{type:"checkbox",checked:y,onChange:F=>_(F.target.checked),disabled:x}),v.jsx("span",{children:"Keep token for this session"})]}),b&&v.jsxs("div",{className:"pat-error",children:[v.jsx(xl,{size:14}),v.jsx("span",{children:b})]}),v.jsxs("div",{className:"pat-input-actions",children:[v.jsx("button",{className:"button button-primary",onClick:z,disabled:x||!f.trim(),children:x?v.jsxs(v.Fragment,{children:[v.jsx(Xs,{size:16,className:"spinner"}),"Validating..."]}):v.jsxs(v.Fragment,{children:[v.jsx(B0,{size:16}),"Save Token"]})}),v.jsx("button",{className:"button button-secondary",onClick:L,disabled:x,children:"Cancel"})]})]}):v.jsxs("div",{className:"pat-status",children:[v.jsx("span",{className:"pat-status-badge pat-not-stored",children:"No token stored"}),v.jsx("p",{className:"pat-hint",children:"You'll be prompted to enter a PAT when performing GitHub actions."}),v.jsx("button",{className:"button button-secondary",onClick:()=>d(!0),children:"Add Token"})]})}),v.jsxs("a",{href:V,target:"_blank",rel:"noopener noreferrer",className:"pat-guide-link",children:["Learn how to create a Personal Access Token ",v.jsx(em,{size:12})]})]}),r&&v.jsxs("div",{className:"settings-section",children:[v.jsx("h3",{children:"Current File"}),v.jsxs("div",{className:"metadata-display",children:[v.jsxs("div",{className:"metadata-row",children:[v.jsx("span",{className:"metadata-label",children:"Domain:"}),v.jsx("span",{className:"metadata-value",children:r.domain})]}),v.jsxs("div",{className:"metadata-row",children:[v.jsx("span",{className:"metadata-label",children:"Repository:"}),v.jsxs("span",{className:"metadata-value",children:[r.owner,"/",r.repository]})]}),v.jsxs("div",{className:"metadata-row",children:[v.jsx("span",{className:"metadata-label",children:"Branch:"}),v.jsx("span",{className:"metadata-value",children:r.branch})]}),v.jsxs("div",{className:"metadata-row",children:[v.jsx("span",{className:"metadata-label",children:"Path:"}),v.jsx("span",{className:"metadata-value",children:r.path})]}),v.jsxs("div",{className:"metadata-row",children:[v.jsx("span",{className:"metadata-label",children:"Loaded at:"}),v.jsx("span",{className:"metadata-value",children:new Date(r.loadedAt).toLocaleString()})]}),a&&v.jsxs("button",{className:"button button-secondary sync-button",onClick:a,children:[v.jsx(zv,{size:16}),"Sync with Repository"]})]}),v.jsxs("div",{className:"metadata-warning",children:[v.jsx(xl,{size:14}),v.jsx("span",{children:"Changes to domain settings won't affect the current file's connection. They apply to new GitHub operations."})]})]}),v.jsx("div",{className:"modal-actions",children:v.jsx("button",{className:"button button-primary",onClick:s,children:"Done"})})]})})};function YB({apiClient:e,selectedOwner:t,selectedRepo:r,selectedBranch:a,onRepoChange:s,onBranchChange:o,disabled:l=!1,autoSelectDefaultBranch:u=!0,initialRepos:d=[],initialBranches:f=[]}){const[m,p]=N.useState(d),[g,y]=N.useState(f),[_,b]=N.useState(""),[w,x]=N.useState(!1),[S,C]=N.useState(!1),[A,E]=N.useState(!1),[j,T]=N.useState(!1),[z,L]=N.useState(1),[V,F]=N.useState(!1),[M,O]=N.useState(!1),R=async()=>{if(!(A||w||!e)){x(!0);try{const Z=await e.listAccessibleRepositories();p(Z.map(X=>({name:X.name,owner:X.owner.login,full_name:X.full_name}))),L(1),F(Z.length===100),E(!0)}catch(Z){console.error("Failed to load repositories:",Z)}finally{x(!1)}}},G=N.useCallback(async()=>{if(!V||M||_.trim()||!e)return;const Z=z+1;O(!0);try{const X=await e.listAccessibleRepositoriesPage(Z);p(Q=>[...Q,...X.map($=>({name:$.name,owner:$.owner.login,full_name:$.full_name}))]),L(Z),F(X.length===100)}catch(X){console.error("Failed to load more repositories:",X)}finally{O(!1)}},[V,M,_,z,e]);N.useEffect(()=>{if(!t||!r||j||S||!e)return;(async()=>{C(!0);try{const X=await e.listBranches(t,r);if(y(X.map(Q=>({name:Q.name,protected:Q.protected}))),u&&!a){const $=(await e.listAccessibleRepositories()).find(B=>B.name===r);if($){const B=X.find(K=>K.name===$.default_branch);B&&o(B.name)}}T(!0)}catch(X){console.error("Failed to load branches:",X)}finally{C(!1)}})()},[t,r,j,S,e,u,a,o]),N.useEffect(()=>{e&&!A&&!w&&m.length<=1&&R()},[e,A,w,m.length]),N.useEffect(()=>{j&&(T(!1),y([]))},[t,r]);const H=Z=>{const X=Z.target.value;if(X==="__LOAD_MORE__"){G(),Z.target.value=r?`${t}/${r}`:"";return}if(!X){s("","");return}const[Q,$]=X.split("/");s(Q||"",$||"")},U=_.trim()?m.filter(Z=>Z.full_name.toLowerCase().includes(_.toLowerCase())):m;return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"github-selector-group",children:[v.jsxs("label",{children:[v.jsx(tm,{size:14}),"Repository *"]}),v.jsx("div",{className:"repo-search-wrapper",children:v.jsxs("div",{className:"repo-search-input",children:[v.jsx(aN,{size:16,className:"search-icon"}),v.jsx("input",{type:"text",placeholder:"Search repositories...",value:_,onChange:Z=>b(Z.target.value),onFocus:R,disabled:l||w}),_&&v.jsx("button",{className:"clear-search",onClick:()=>b(""),"aria-label":"Clear search",type:"button",children:""})]})}),v.jsxs("div",{className:"select-wrapper",children:[v.jsxs("select",{value:r?`${t}/${r}`:"",onChange:H,disabled:l||w||M,required:!0,children:[v.jsx("option",{value:"",children:"Select a repository..."}),U.map(Z=>v.jsx("option",{value:Z.full_name,children:Z.full_name},Z.full_name)),V&&!_.trim()&&v.jsx("option",{value:"__LOAD_MORE__",className:"load-more-option",children:M?" Loading more...":" Load More Repositories"})]}),v.jsx(Js,{size:16,className:"select-icon"}),(w||M)&&v.jsx(Xs,{size:16,className:"loading-icon spin"})]}),m.length>0&&U.length===0&&v.jsx("div",{className:"no-results",children:"No repositories match your search"})]}),v.jsxs("div",{className:"github-selector-group",children:[v.jsxs("label",{children:[v.jsx(eo,{size:14}),"Branch *"]}),v.jsxs("div",{className:"select-wrapper",children:[v.jsxs("select",{value:a,onChange:Z=>o(Z.target.value),disabled:l||S||!t||!r,required:!0,children:[v.jsx("option",{value:"",children:S?"Loading branches...":"Select..."}),g.map(Z=>v.jsxs("option",{value:Z.name,children:[Z.name," ",Z.protected?"":""]},Z.name))]}),v.jsx(Js,{size:16,className:"select-icon"}),S&&v.jsx(Xs,{size:16,className:"loading-icon spin"})]})]})]})}function GB({isOpen:e,metadata:t,threatModelName:r,getApiClient:a,onClose:s,onCommit:o}){const[l,u]=N.useState(""),[d,f]=N.useState(""),[m,p]=N.useState(""),[g,y]=N.useState(""),[_,b]=N.useState(""),[w,x]=N.useState(""),[S,C]=N.useState([]),[A,E]=N.useState([]),[j,T]=N.useState(null),[z,L]=N.useState(!1),[V,F]=N.useState(!1),[M,O]=N.useState(!t),[R,G]=N.useState(!1),[H,U]=N.useState(),[Z,X]=N.useState(!1),[Q,$]=N.useState(),[B,K]=N.useState(!1),[P,q]=N.useState(null),[J,le]=N.useState(!1);N.useEffect(()=>{if(e){if(le(!1),G(!1),U(void 0),X(!1),$(void 0),q(null),t){p(t.owner),y(t.repository),b(t.branch);const W=t.path.startsWith(".threat-models/")?t.path.slice(15):t.path.split("/").pop()||"";x(W.replace(/\.(yaml|yml)$/i,"")),C([{name:t.repository,owner:t.owner,full_name:`${t.owner}/${t.repository}`}]),E([{name:t.branch,protected:!1}])}else p(""),y(""),b(""),x(r.toLowerCase().replace(/\s+/g,"-")),C([]),E([]);a().then(W=>T(W))}},[e,t,r,a]),N.useEffect(()=>{e&&!l&&u(t?`Update threat model: ${r}`:`Add threat model: ${r}`)},[e,t,r,l]);const oe=()=>{O(!0)};N.useEffect(()=>{if(!e||!t||J||M)return;(async()=>{try{const ie=await a();if(!ie){q("GitHub authentication required"),le(!0);return}const ae=await ie.getFileSha(t.owner,t.repository,t.path,t.branch);ae&&ae!==t.sha?(G(!0),U(ae)):(G(!1),U(t.sha)),le(!0)}catch(ie){console.error("Failed to check for conflicts:",ie),G(!1),U(void 0),le(!0)}})()},[e,t,J,M,a]),N.useEffect(()=>{if(!e||!m||!g||!_||!w.trim()){X(!1),$(void 0);return}if(t&&m===t.owner&&g===t.repository&&_===t.branch&&`${w.trim()}.yaml`===(t.path.startsWith(".threat-models/")?t.path.slice(15):t.path.split("/").pop())){X(!1),$(void 0);return}const ie=setTimeout(async()=>{try{const ae=await a();if(!ae)return;const I=`.threat-models/${w.trim()}.yaml`,ue=await ae.getFileSha(m,g,I,_);ue?(X(!0),$(ue)):(X(!1),$(void 0))}catch{X(!1),$(void 0)}},500);return()=>clearTimeout(ie)},[e,m,g,_,w,t,a]);const he=async W=>{if(W.preventDefault(),!l.trim()){q("Please enter a commit summary");return}if(!m||!g||!_){q("Please select owner, repository, and branch");return}if(!w.trim()){q("Please enter a filename");return}const ie=w.trim().split("/").reduce((ae,I)=>(I===".."?ae.pop():I&&I!=="."&&ae.push(I),ae),[]).join("/");if(!ie){q("Invalid filename");return}K(!0),q(null);try{const ae=`.threat-models/${ie}.yaml`;let I;R&&H?I=H:Z&&Q?I=Q:t&&m===t.owner&&g===t.repository&&_===t.branch&&`${w.trim()}.yaml`===(t.path.startsWith(".threat-models/")?t.path.slice(15):t.path.split("/").pop())&&(I=t.sha);const ue=d.trim()?`${l.trim()}

${d.trim()}`:l.trim();await o(m,g,_,ae,ue,I,z||V?{includeDiagramImage:z,includeMarkdownFile:V}:void 0),s()}catch(ae){q(ae instanceof Error?ae.message:"Failed to commit changes")}finally{K(!1)}},ve=()=>{B||(to(),le(!1),s())};return e?v.jsx("div",{className:"github-commit-modal-overlay",onClick:ve,children:v.jsxs("div",{className:"github-commit-modal",onClick:W=>W.stopPropagation(),children:[v.jsxs("div",{className:"github-commit-modal-header",children:[v.jsx(eo,{size:24}),v.jsx("h2",{children:"Commit to GitHub"}),v.jsx("button",{onClick:ve,disabled:B,style:{marginLeft:"auto",background:"none",border:"none",color:"var(--text-secondary)",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:v.jsx(Lv,{size:20})})]}),v.jsxs("form",{onSubmit:he,children:[v.jsxs("div",{className:"github-commit-modal-body",children:[M?v.jsxs(v.Fragment,{children:[v.jsx(YB,{apiClient:j,selectedOwner:m,selectedRepo:g,selectedBranch:_,onRepoChange:(W,ie)=>{p(W),y(ie),b("")},onBranchChange:b,disabled:B,autoSelectDefaultBranch:!1,initialRepos:S,initialBranches:A}),v.jsxs("div",{className:"github-selector-group",children:[v.jsxs("label",{children:[v.jsx(gu,{size:14}),"Path / Filename *"]}),v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.875rem"},children:".threat-models/"}),v.jsx("input",{type:"text",id:"filename-input",value:w,onChange:W=>x(W.target.value),placeholder:"subfolder/threat-model",disabled:B,required:!0,style:{flex:1}}),v.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.875rem"},children:".yaml"})]})]})]}):v.jsxs("div",{className:"commit-form-group",children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[v.jsx("label",{className:"commit-form-label",children:"Destination"}),v.jsx("button",{type:"button",onClick:oe,disabled:B,style:{padding:"0.25rem 0.5rem",fontSize:"0.875rem",background:"var(--button-background)",color:"var(--button-text)",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer"},children:"Edit"})]}),v.jsxs("div",{style:{padding:"0.75rem",background:"var(--bg-secondary)",borderRadius:"4px",fontSize:"0.875rem",color:"var(--text-primary)"},children:[v.jsxs("div",{children:[v.jsx("strong",{children:"Repository:"})," ",m,"/",g]}),v.jsxs("div",{style:{marginTop:"0.25rem"},children:[v.jsx("strong",{children:"Branch:"})," ",_]}),v.jsxs("div",{style:{marginTop:"0.25rem"},children:[v.jsx("strong",{children:"Path:"})," /.threat-models/",w,".yaml"]})]})]}),R&&v.jsxs("div",{className:"commit-warning",children:[v.jsx(nm,{size:20}),v.jsxs("div",{className:"commit-warning-content",children:[v.jsx("p",{className:"commit-warning-title",children:"File has been modified"}),v.jsx("p",{className:"commit-warning-message",children:"The file in the repository has been modified since you loaded it. Committing will overwrite those changes."})]})]}),Z&&!R&&v.jsxs("div",{className:"commit-warning",children:[v.jsx(nm,{size:20}),v.jsxs("div",{className:"commit-warning-content",children:[v.jsx("p",{className:"commit-warning-title",children:"File already exists"}),v.jsx("p",{className:"commit-warning-message",children:"A file with this name already exists at the specified location. Committing will overwrite the existing file."})]})]}),v.jsxs("div",{className:"commit-extra-files",children:[v.jsxs("label",{className:"commit-form-label",children:[v.jsx(_L,{size:14})," Additional Files"]}),v.jsxs("div",{className:"commit-extra-files-options",children:[v.jsxs("label",{className:"commit-checkbox-label",children:[v.jsx("input",{type:"checkbox",checked:z,onChange:W=>L(W.target.checked),disabled:B}),v.jsx(rN,{size:14}),v.jsx("span",{children:"Include data flow diagram (.png)"})]}),v.jsxs("label",{className:"commit-checkbox-label",children:[v.jsx("input",{type:"checkbox",checked:V,onChange:W=>F(W.target.checked),disabled:B}),v.jsx(bL,{size:14}),v.jsx("span",{children:"Include markdown documentation (.md)"})]}),V&&!z&&v.jsx("p",{className:"commit-extra-files-hint",children:"Markdown will include a Mermaid diagram since no image is selected."}),V&&z&&v.jsx("p",{className:"commit-extra-files-hint",children:"Markdown will reference the PNG diagram image."})]})]}),v.jsxs("div",{className:"github-selector-group",children:[v.jsxs("label",{children:[v.jsx(eo,{size:14}),"Commit Summary *"]}),v.jsx("input",{type:"text",id:"commit-summary",value:l,onChange:W=>u(W.target.value),placeholder:"Brief summary of changes",disabled:B,required:!0,maxLength:72})]}),v.jsxs("div",{className:"github-selector-group",children:[v.jsxs("label",{children:[v.jsx(BL,{size:14}),"Description (optional)"]}),v.jsx("textarea",{id:"commit-description",value:d,onChange:W=>f(W.target.value),placeholder:"Additional details about your changes...",disabled:B,rows:4})]}),P&&v.jsxs("div",{className:"commit-error",children:[v.jsx(oL,{size:20}),v.jsx("p",{className:"commit-error-message",children:P})]})]}),v.jsxs("div",{className:"github-commit-modal-footer",children:[v.jsx("button",{type:"button",className:"cancel-button",onClick:ve,disabled:B,children:"Cancel"}),v.jsx("button",{type:"submit",className:"commit-button",disabled:B||!l.trim()||!m||!g||!_||!w.trim(),children:B?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"commit-loading-spinner"}),"Committing..."]}):v.jsxs(v.Fragment,{children:[v.jsx(eo,{size:16}),"Commit Changes"]})})]})]})]})}):null}const KB=({onConfirm:e,onCancel:t,hasLocalChanges:r,remoteUpdatedAt:a,localLoadedAt:s})=>v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-content github-sync-modal",children:[v.jsxs("div",{className:"sync-modal-header",children:[v.jsx(zv,{size:24,className:"sync-icon"}),v.jsx("h2",{children:"Sync Conflict Detected"})]}),v.jsxs("div",{className:"sync-modal-body",children:[v.jsxs("div",{className:"sync-warning",children:[v.jsx(xl,{size:20}),v.jsxs("p",{children:["The threat model in the repository has been updated since you loaded it.",r&&v.jsxs(v.Fragment,{children:[v.jsx("br",{}),v.jsx("br",{}),v.jsx("strong",{children:"Warning:"})," You have unsaved local changes. Loading the latest version from GitHub will discard your current work."]})]})]}),v.jsxs("div",{className:"sync-details",children:[v.jsxs("div",{className:"sync-detail-row",children:[v.jsx("span",{className:"detail-label",children:"You loaded:"}),v.jsx("span",{className:"detail-value",children:new Date(s).toLocaleString()})]}),v.jsxs("div",{className:"sync-detail-row",children:[v.jsx("span",{className:"detail-label",children:"Remote updated:"}),v.jsx("span",{className:"detail-value",children:new Date(a).toLocaleString()})]})]}),v.jsxs("div",{className:"sync-options",children:[v.jsx("p",{children:v.jsx("strong",{children:"What would you like to do?"})}),v.jsxs("ul",{children:[v.jsxs("li",{children:[v.jsx("strong",{children:"Load Latest:"})," Replace your current version with the latest from GitHub (your local changes will be lost)"]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Keep Current:"})," Continue working with your current version"]})]})]})]}),v.jsxs("div",{className:"modal-actions",children:[v.jsx("button",{className:"button button-secondary",onClick:t,children:"Keep Current"}),v.jsx("button",{className:"button button-primary button-warning",onClick:e,children:"Load Latest"})]})]})}),XB=({isDarkMode:e,onDarkModeChange:t,onGenerateShareLink:r})=>{const[a,s]=N.useState(!1),o=N.useRef(null);return N.useEffect(()=>{const l=u=>{o.current&&!o.current.contains(u.target)&&s(!1)};if(a)return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[a]),v.jsxs("div",{className:"settings-dropdown",ref:o,children:[v.jsx("button",{className:"settings-dropdown-trigger",onClick:()=>s(!a),"aria-label":"Settings",title:"Settings","aria-expanded":a,children:v.jsx(sN,{size:20})}),a&&v.jsxs("div",{className:"settings-dropdown-menu",children:[v.jsxs("button",{className:"settings-dropdown-item",onClick:()=>{t(!e),s(!1)},children:[v.jsx("span",{className:"settings-dropdown-icon",children:e?v.jsx(oN,{size:16}):v.jsx(iN,{size:16})}),v.jsx("span",{children:e?"Light Mode":"Dark Mode"})]}),r&&v.jsxs("button",{className:"settings-dropdown-item",onClick:()=>{r(),s(!1)},children:[v.jsx("span",{className:"settings-dropdown-icon",children:v.jsx(uI,{size:16})}),v.jsx("span",{children:"Generate Share Link"})]})]})]})},Ah=async e=>{const t=await fetch(`/${e}`);if(!t.ok)throw new Error(`Failed to load template from ${e}: ${t.statusText}`);return t.text()},ZB=()=>[{name:"Simple Web Application",path:"templates/simple.yaml",description:"A basic threat model for a web application with user, web server, and database",tags:["web","basic","beginner"]},{name:"Version Control and CI CD",path:"templates/version_control_and_cicd.yaml",description:"Threat model for the usage of GitHub to code and deploy applications",tags:["cicd","intermediate"]},{name:"API Provider",path:"templates/api_provider.yaml",description:"Basic architecture to provide an API endpoint",tags:["api","provider","intermediate"]},{name:"Mobile App with Backend",path:"templates/mobile_app_backend.yaml",description:"A mobile application communicating with backend services including authentication, API gateway, and database",tags:["mobile","backend","api","intermediate","AI-generated"]},{name:"Serverless Architecture",path:"templates/serverless_architecture.yaml",description:"Event-driven serverless application with functions, API gateway, managed database, object storage, and message queues",tags:["serverless","cloud","lambda","event-driven","advanced","AI-generated"]},{name:"Containerized Microservices",path:"templates/containerized_microservices.yaml",description:"Kubernetes-orchestrated microservices with service mesh, ingress controller, container registry, and persistent storage",tags:["kubernetes","containers","microservices","docker","service-mesh","advanced","AI-generated"]},{name:"IoT System",path:"templates/iot_system.yaml",description:"Internet of Things architecture with edge devices, gateways, IoT hub, stream processing, and device management",tags:["iot","edge","devices","sensors","telemetry","advanced","AI-generated"]},{name:"Web App with CDN",path:"templates/web_app_cdn.yaml",description:"Web application delivered through CDN with origin server, application backend, database, and caching layer",tags:["web","cdn","cache","intermediate","AI-generated"]},{name:"Payment Processing Flow",path:"templates/payment_processing.yaml",description:"Online payment processing flow including card data handling, payment gateway integration, fraud detection, and webhooks",tags:["payment","pci-dss","e-commerce","business-flow","intermediate","AI-generated"]}];function lo(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function WB(e,t){let r;const a=()=>{if(r)return r;const s=indexedDB.open(e);return s.onupgradeneeded=()=>s.result.createObjectStore(t),r=lo(s),r.then(o=>{o.onclose=()=>r=void 0},()=>{}),r};return(s,o)=>a().then(l=>o(l.transaction(t,s).objectStore(t)))}let Vy;function Jm(){return Vy||(Vy=WB("keyval-store","keyval")),Vy}function Ol(e,t=Jm()){return t("readonly",r=>lo(r.get(e)))}function uo(e,t,r=Jm()){return r("readwrite",a=>(a.put(t,e),lo(a.transaction)))}function qv(e,t=Jm()){return t("readwrite",r=>(r.delete(e),lo(r.transaction)))}function QB(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},lo(e.transaction)}function JB(e=Jm()){return e("readonly",t=>{if(t.getAll&&t.getAllKeys)return Promise.all([lo(t.getAllKeys()),lo(t.getAll())]).then(([a,s])=>a.map((o,l)=>[o,s[l]]));const r=[];return e("readonly",a=>QB(a,s=>r.push([s.key,s.value])).then(()=>r))})}const Vv="autosave-draft",Yv="threat-model-",xS="indexeddb-migrated",Sf=async(e,t,r,a)=>{const s=`${Yv}${Date.now()}`,o={id:s,name:e,content:t,savedAt:Date.now(),...a&&{githubMetadata:a}};return await uo(s,o),s},qN=async(e,t,r,a)=>{const s=await Ol(e);return s?(s.content=t,s.savedAt=Date.now(),r!==void 0&&(s.name=r),a!==void 0&&(s.githubMetadata=a),await uo(e,s),!0):!1},_S=async()=>(await JB()).filter(([t])=>t.startsWith(Yv)).map(([t,r])=>r).sort((t,r)=>r.savedAt-t.savedAt),eH=async e=>await Ol(e)||null,tH=async e=>{await qv(e)},nH=async(e,t)=>{const r=await Ol(e);r&&(r.name=t,await uo(e,r))},rH=async(e,t)=>{const r=await Ol(e);if(!r)return null;const a=`${Yv}${Date.now()}`,s={...r,id:a,name:`${r.name} (Copy)`,savedAt:Date.now()};return await uo(a,s),a},Ti=async(e,t,r,a,s,o)=>{const l={name:e,content:t,savedAt:Date.now(),...r&&{githubMetadata:r},...a&&{saveSource:a},...s&&{lastSavedToSourceAt:s},...o!==void 0&&{isDirty:o}};await uo(Vv,l)},iH=async()=>await Ol(Vv)||null,aH=async()=>{await qv(Vv)},sH=async()=>{if(localStorage.getItem(xS))return 0;let t=0;for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);if(a?.startsWith("threat-model-")){const s=localStorage.getItem(a);if(s)try{const o=JSON.parse(s),l={id:a,name:o.name,content:o.content,savedAt:o.savedAt};await uo(a,l),t++}catch(o){console.error(`Failed to migrate ${a}:`,o)}}}return localStorage.setItem(xS,"true"),t},Gv="local-file-handle",SS=()=>"showOpenFilePicker"in window&&"showSaveFilePicker"in window,Cf=async e=>{await uo(Gv,e)},oH=async()=>await Ol(Gv)||null,Ef=async()=>{await qv(Gv)},VN=async(e,t="readwrite")=>{try{const r={mode:t};let a=await e.queryPermission(r);return a==="granted"?!0:(a=await e.requestPermission(r),a==="granted")}catch(r){return console.error("Error requesting file handle permission:",r),!1}},Kv=async(e,t)=>{const r=await e.createWritable();try{await r.write(t)}finally{await r.close()}return(await e.getFile()).lastModified},lH=async()=>{try{const[e]=await window.showOpenFilePicker({types:[{description:"YAML files",accept:{"text/yaml":[".yaml",".yml"]}}],multiple:!1}),t=await e.getFile(),r=await t.text();return{handle:e,content:r,name:t.name,lastModified:t.lastModified}}catch(e){if(e instanceof Error&&e.name==="AbortError")return null;throw e}},kf=async(e,t)=>{try{const r=await window.showSaveFilePicker({suggestedName:t||"threat_model.yaml",types:[{description:"YAML files",accept:{"text/yaml":[".yaml",".yml"]}}]});return await Kv(r,e),r}catch(r){if(r instanceof Error&&r.name==="AbortError")return null;throw r}},cH=({source:e,onFileSelect:t,onBack:r,isDarkMode:a,onDarkModeChange:s,onMetadataLoad:o,onGenerateShareLink:l})=>{const[u,d]=N.useState([]),[f,m]=N.useState([]),[p,g]=N.useState(!1),[y,_]=N.useState(null),[b,w]=N.useState(null),[x,S]=N.useState("");N.useEffect(()=>{(async()=>{if(e==="templates"){g(!0),_(null);try{const O=ZB();d(O)}catch(O){_(O instanceof Error?O.message:"Failed to load templates")}finally{g(!1)}}else if(e==="browser"){g(!0),_(null);try{const O=await _S();m(O)}catch(O){_(O instanceof Error?O.message:"Failed to load saved models")}finally{g(!1)}}})()},[e]);const C=M=>{g(!0),_(null),Ah(M.path).then(O=>{o&&o(null),t({name:M.name,content:O},null)}).catch(O=>{_(O instanceof Error?O.message:"Failed to load template"),g(!1)})},A=async M=>{g(!0),_(null);try{const O=await eH(M.id);if(!O)throw new Error("Failed to load saved model");o&&o(O.githubMetadata),t({name:O.name,content:O.content},null,O.id)}catch(O){_(O instanceof Error?O.message:"Failed to load model"),g(!1)}},E=async(M,O)=>{if(O.stopPropagation(),!!confirm("Are you sure you want to delete this threat model?"))try{await tH(M),m(R=>R.filter(G=>G.id!==M))}catch(R){_(R instanceof Error?R.message:"Failed to delete model")}},j=(M,O)=>{O.stopPropagation(),w(M.id),S(M.name)},T=async M=>{if(!x.trim()){w(null);return}try{await nH(M,x.trim()),m(O=>O.map(R=>R.id===M?{...R,name:x.trim()}:R)),w(null)}catch(O){_(O instanceof Error?O.message:"Failed to rename model")}},z=async(M,O)=>{O.stopPropagation();try{if(await rH(M.id)){const G=await _S();m(G)}}catch(R){_(R instanceof Error?R.message:"Failed to duplicate model")}},L=()=>{console.log("GitHub integration not yet implemented")},V=()=>{switch(e){case"templates":return v.jsxs("div",{className:"file-list",children:[v.jsx("h2",{children:"Templates"}),y&&v.jsx("div",{className:"error-message",children:y}),p?v.jsx("div",{className:"loading",children:"Loading templates..."}):u.length>0?u.map(M=>v.jsx("div",{className:"file-item-container",children:v.jsxs("button",{className:"file-item",onClick:()=>C(M),disabled:p,children:[v.jsx("span",{className:"file-icon",children:""}),v.jsxs("div",{className:"file-details",children:[v.jsx("span",{className:"file-name",children:M.name}),M.description&&v.jsx("span",{className:"file-description",children:M.description})]})]})},M.path)):v.jsx("div",{className:"empty-state",children:v.jsx("p",{children:"No templates found"})})]});case"browser":return v.jsxs("div",{className:"file-list",children:[v.jsx("h2",{children:"Browser Data"}),y&&v.jsx("div",{className:"error-message",children:y}),p?v.jsx("div",{className:"loading",children:"Loading saved models..."}):f.length>0?v.jsx("div",{children:f.map(M=>v.jsxs("div",{className:"file-item-container",children:[v.jsxs("button",{className:"file-item",onClick:()=>A(M),disabled:p,children:[v.jsx("span",{className:"file-icon",children:""}),v.jsxs("div",{className:"file-details",children:[b===M.id?v.jsx("input",{type:"text",value:x,onChange:O=>S(O.target.value),onBlur:()=>T(M.id),onKeyDown:O=>{O.key==="Enter"?T(M.id):O.key==="Escape"&&w(null)},onClick:O=>O.stopPropagation(),className:"rename-input",autoFocus:!0}):v.jsx("span",{className:"file-name",children:M.name}),v.jsxs("span",{className:"file-description",children:["Saved ",new Date(M.savedAt).toLocaleString()]})]})]}),v.jsxs("div",{className:"file-actions",children:[v.jsx("button",{className:"action-button",onClick:O=>j(M,O),title:"Rename",children:v.jsx(WL,{size:16})}),v.jsx("button",{className:"action-button",onClick:O=>z(M,O),title:"Duplicate",children:v.jsx(nN,{size:16})}),v.jsx("button",{className:"action-button delete-button",onClick:O=>E(M.id,O),title:"Delete",children:v.jsx(lN,{size:16})})]})]},M.id))}):v.jsxs("div",{className:"empty-state",children:[v.jsx("p",{children:"No threat models saved in browser yet"}),v.jsx("p",{className:"empty-hint",children:"Threat models you save will appear here"})]})]});case"github":return v.jsxs("div",{className:"file-list",children:[v.jsx("h2",{children:"GitHub Integration"}),v.jsxs("div",{className:"empty-state",children:[v.jsx("p",{children:"GitHub integration coming soon"}),v.jsx("button",{className:"placeholder-button",onClick:L,children:"Connect to GitHub"})]})]});default:return null}},F={empty:"New Model",templates:"Templates",upload:"Upload from Local",browser:"Browser Data",github:"GitHub Integration"};return v.jsxs("div",{className:"file-browser",children:[v.jsxs("nav",{className:"navbar",children:[v.jsxs("div",{className:"navbar-left",children:[v.jsx("button",{className:"navbar-button back-button",onClick:r,title:"Back to source selection",children:v.jsx(X8,{size:20})}),v.jsx("span",{className:"navbar-title",children:F[e]})]}),v.jsx("div",{className:"navbar-right",children:v.jsx(XB,{isDarkMode:a,onDarkModeChange:s,onGenerateShareLink:l})})]}),v.jsx("div",{className:"file-browser-content",children:V()})]})},uH=({isOpen:e,token:t,domain:r,onFileSelect:a,onClose:s,onError:o})=>{const[l]=N.useState(()=>new wu(t,r)),[u,d]=N.useState([]),[f,m]=N.useState([]),[p,g]=N.useState([]),[y,_]=N.useState([]),[b,w]=N.useState(""),[x,S]=N.useState(""),[C,A]=N.useState(""),[E,j]=N.useState(""),[T,z]=N.useState("idle"),[L,V]=N.useState("idle"),[F,M]=N.useState("idle"),[O,R]=N.useState(null),[G,H]=N.useState(1),[U,Z]=N.useState(!1),[X,Q]=N.useState(!1);N.useEffect(()=>{if(!b.trim())m(u);else{const J=b.toLowerCase();m(u.filter(le=>le.full_name.toLowerCase().includes(J)||le.description?.toLowerCase().includes(J)))}},[b,u]),N.useEffect(()=>{let J=!1;return(async()=>{z("loading");try{const oe=await l.listAccessibleRepositories();if(J)return;d(oe),H(1);const he=oe.length===100;Z(he),z("idle")}catch(oe){if(J)return;z("error");const he=oe instanceof Rn?oe.message:"Failed to load repositories";o(he)}})(),()=>{J=!0}},[l,o]),N.useEffect(()=>{if(!x||!C){g([]),j(""),_([]);return}(async()=>{V("loading"),g([]),j(""),_([]);try{const le=await l.listBranches(x,C);g(le);const oe=u.find(he=>he.name===C);if(oe){const he=le.find(ve=>ve.name===oe.default_branch);he&&j(he.name)}V("idle")}catch(le){V("error");const oe=le instanceof Rn?le.message:"Failed to load branches";o(oe)}})()},[l,x,C,u,o]),N.useEffect(()=>{if(!x||!C||!E){_([]);return}(async()=>{M("loading"),_([]);try{const le=await l.listThreatModels(x,C,E);_(le),M("idle")}catch(le){M("error");const oe=le instanceof Rn?le.message:"Failed to load threat models";o(oe)}})()},[l,x,C,E,o]);const $=N.useCallback(async()=>{if(!U||X||b.trim())return;const J=G+1;Q(!0);try{const le=await l.listAccessibleRepositoriesPage(J);d(he=>[...he,...le]),H(J);const oe=le.length===100;Z(oe)}catch(le){const oe=le instanceof Rn?le.message:"Failed to load more repositories";o(oe)}finally{Q(!1)}},[U,X,b,G,l,o]),B=N.useCallback(J=>{const le=J.target.value;if(le==="__LOAD_MORE__"){$(),J.target.value="";return}if(!le){A(""),S("");return}const oe=u.find(he=>he.full_name===le);oe&&(S(oe.owner.login),A(oe.name))},[u,$]),K=N.useCallback(async J=>{R(J.path);try{const{content:le,sha:oe}=await l.getFileContent(x,C,J.path,E),he={domain:r,owner:x,repository:C,branch:E,path:J.path,sha:oe,loadedAt:Date.now()};a(le,he)}catch(le){const oe=le instanceof Rn?le.message:le instanceof Error?`Failed to load file: ${le.message}`:"Failed to load file";o(oe),console.error("GitHub file load error:",le)}finally{R(null)}},[l,r,x,C,E,a,o]),P=N.useCallback(async()=>{if(!(!x||!C||!E)){M("loading");try{const J=await l.listThreatModels(x,C,E);_(J),M("idle")}catch(J){M("error");const le=J instanceof Rn?J.message:"Failed to refresh files";o(le)}}},[l,x,C,E,o]),q=N.useCallback(()=>{to(),s()},[s]);return e?v.jsx("div",{className:"github-load-modal-overlay",onClick:q,children:v.jsxs("div",{className:"github-load-modal",onClick:J=>J.stopPropagation(),children:[v.jsxs("div",{className:"github-load-modal-header",children:[v.jsx(tm,{size:20}),v.jsx("h2",{children:"Load from GitHub"}),v.jsx("button",{className:"github-load-modal-close",onClick:q,"aria-label":"Close",children:v.jsx(Lv,{size:20})})]}),v.jsxs("div",{className:"github-load-modal-body",children:[v.jsxs("div",{className:"github-selector-group",children:[v.jsxs("label",{children:[v.jsx(tm,{size:14}),"Repository"]}),v.jsx("div",{className:"repo-search-wrapper",children:v.jsxs("div",{className:"repo-search-input",children:[v.jsx(aN,{size:16,className:"search-icon"}),v.jsx("input",{type:"text",placeholder:"Search repositories...",value:b,onChange:J=>w(J.target.value),disabled:T==="loading"}),b&&v.jsx("button",{className:"clear-search",onClick:()=>w(""),"aria-label":"Clear search",children:""})]})}),v.jsxs("div",{className:"select-wrapper",children:[v.jsxs("select",{value:C?`${x}/${C}`:"",onChange:B,disabled:T==="loading"||X,children:[v.jsx("option",{value:"",children:"Select a repository..."}),f.map(J=>v.jsx("option",{value:J.full_name,children:J.full_name},J.id)),U&&!b.trim()&&v.jsx("option",{value:"__LOAD_MORE__",className:"load-more-option",children:X?" Loading more...":" Load More Repositories"})]}),v.jsx(Js,{size:16,className:"select-icon"}),(T==="loading"||X)&&v.jsx(Xs,{size:16,className:"loading-icon spin"})]}),f.length===0&&u.length>0&&v.jsx("div",{className:"no-results",children:"No repositories match your search"})]}),v.jsxs("div",{className:"github-selector-group",children:[v.jsxs("label",{children:[v.jsx(eo,{size:14}),"Branch"]}),v.jsxs("div",{className:"select-wrapper",children:[v.jsxs("select",{value:E,onChange:J=>j(J.target.value),disabled:!C||L==="loading",children:[v.jsx("option",{value:"",children:"Select..."}),p.map(J=>v.jsx("option",{value:J.name,children:J.name},J.name))]}),v.jsx(Js,{size:16,className:"select-icon"}),L==="loading"&&v.jsx(Xs,{size:16,className:"loading-icon spin"})]})]}),v.jsxs("div",{className:"github-files-section",children:[v.jsxs("div",{className:"files-header",children:[v.jsxs("label",{children:[v.jsx(gu,{size:14}),"Threat Models"]}),E&&v.jsx("button",{className:"refresh-btn",onClick:P,disabled:F==="loading",title:"Refresh file list",children:v.jsx(zv,{size:14,className:F==="loading"?"spin":""})})]}),v.jsxs("div",{className:"files-path-hint",children:[v.jsx(tS,{size:12}),v.jsxs("span",{children:["Scanning ",v.jsx("code",{children:"/.threat-models"})," and subfolders"]})]}),v.jsx("div",{className:"github-files-list",children:F==="loading"?v.jsxs("div",{className:"files-loading",children:[v.jsx(Xs,{size:20,className:"spin"}),v.jsx("span",{children:"Loading threat models..."})]}):y.length===0&&E?v.jsxs("div",{className:"files-empty",children:[v.jsx(xl,{size:20}),v.jsx("span",{children:"No threat models found in /.threat-models"})]}):E?y.map(J=>{const le=J.path.startsWith(".threat-models/")?J.path.slice(15):J.name,oe=le.includes("/")?le.substring(0,le.lastIndexOf("/")):null;return v.jsxs("button",{className:"github-file-item",onClick:()=>K(J),disabled:O!==null,children:[v.jsx(gu,{size:16}),v.jsxs("span",{className:"file-name",children:[J.name,oe&&v.jsxs("span",{className:"file-subfolder",children:[v.jsx(tS,{size:14}),oe]})]}),O===J.path&&v.jsx(Xs,{size:14,className:"spin"})]},J.path)}):v.jsx("div",{className:"files-empty",children:v.jsx("span",{children:"Select a branch to view threat models"})})})]})]})]})}):null};function dH({onResize:e,minWidth:t=500,maxWidth:r=1e3}){const a=N.useRef(!1),s=N.useCallback(o=>{o.preventDefault(),a.current=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[]);return N.useEffect(()=>{const o=u=>{if(!a.current)return;const d=u.clientX,f=Math.round(d/50)*50,m=Math.max(t,Math.min(r,f));e(m)},l=()=>{a.current&&(a.current=!1,document.body.style.cursor="",document.body.style.userSelect="")};return document.addEventListener("mousemove",o),document.addEventListener("mouseup",l),()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",l)}},[e,t,r]),v.jsx("div",{className:"resize-divider",onMouseDown:s,role:"separator","aria-orientation":"vertical","aria-label":"Resize sidebar",children:v.jsx("div",{className:"resize-divider-handle"})})}const CS="flowstate-github-domain";function YN(){N.useEffect(()=>{PB()},[]);const[e,t]=N.useState(()=>localStorage.getItem(CS)||zB()),[r,a]=N.useState(null),[s,o]=N.useState(!1),[l,u]=N.useState(!1),[d,f]=N.useState(null),[m,p]=N.useState(null),[g,y]=N.useState(!1),[_,b]=N.useState(null),w=N.useCallback(F=>{t(F),localStorage.setItem(CS,F)},[]),x=N.useCallback(F=>{f(F),p(null),o(!0)},[]),S=N.useCallback(()=>{o(!1),f(null),p(null),_&&(_(null),b(null))},[_]),C=N.useCallback(()=>{u(!0)},[]),A=N.useCallback(()=>{u(!1)},[]),E=N.useCallback(async(F,M)=>{y(!0),p(null);try{const O=new wu(F,e);if(d){const R=await O.validateTokenForAction(d);if(!R.valid){const G=R.missingPermissions.length>0?R.missingPermissions.join(", "):"Unknown permission issue",H=R.tokenType==="classic"?" (classic PAT)":R.tokenType==="fine-grained"?" (fine-grained PAT)":"";return p(`Token is valid but missing required permissions${H}: ${G}. Please create a new token with the correct permissions.`),y(!1),!1}}else if(!await O.validateToken())return p("Invalid token. Please check your PAT and try again."),y(!1),!1;return FN(F,e,M),_&&(_(O),b(null)),o(!1),f(null),y(!1),!0}catch(O){const R=O instanceof Rn?O.message:"Failed to validate token. Please try again.";return p(R),y(!1),!1}},[e,d,_]),j=N.useCallback(()=>{const F=q0(e);return F?new wu(F,e):null},[e]),T=N.useCallback(F=>{if(BB(e)){const M=j();if(M)return Promise.resolve(M)}return new Promise(M=>{b(()=>M),x(F)})},[e,j,x]),z=N.useCallback(()=>{to()},[]),L=N.useCallback(async(F,M,O,R)=>{if(!r)throw new Error("No GitHub metadata available. Cannot determine where to commit.");let G=j();if(!G&&(G=await T("commit"),!G))throw new Error("GitHub authentication required");try{const H=O||r.branch,U=R||r.sha,Z=await G.createOrUpdateFile(r.owner,r.repository,r.path,F,M,H,U),X={...r,branch:H,sha:Z.content.sha,loadedAt:Date.now()};return a(X),z(),X}catch(H){throw H instanceof Rn?new Error(`Failed to commit: ${H.message}`):H}},[r,j,T,z,a]),V=N.useCallback(async F=>{if(!r)throw new Error("No GitHub metadata available. Cannot sync.");let M=j();if(!M&&(M=await T("sync"),!M))throw new Error("GitHub authentication required");const O={fileConflict:!1,controlsSynced:[]};try{const{sha:R}=await M.getFileContent(r.owner,r.repository,r.path,r.branch);if(R!==r.sha){O.fileConflict=!0;try{const G=await M.getFileCommits(r.owner,r.repository,r.path,r.branch,1);G.length>0&&G[0].commit.author.date?O.fileUpdatedAt=G[0].commit.author.date:O.fileUpdatedAt=new Date().toISOString()}catch(G){console.warn("Failed to fetch commit date:",G),O.fileUpdatedAt=new Date().toISOString()}}if(F.controls&&F.controls.length>0)for(const G of F.controls){if(!G.status_link)continue;const H={ref:G.ref,name:G.name,statusLink:G.status_link,oldStatus:G.status,synced:!1};try{const U=qB(G.status_link);if(!U){H.error="Invalid issue URL format",O.controlsSynced.push(H);continue}if(U.domain!==r.domain||U.owner!==r.owner||U.repo!==r.repository)continue;try{const Z=await M.getIssue(U.owner,U.repo,U.number);let X;if(Z.state==="closed")Z.state_reason==="not_planned"?X="Cancelled":X="Done";else if(Z.state==="open"){const Q=Z.labels.map($=>$.name.toLowerCase());Q.includes("in progress")||Q.includes("in-progress")?X="In Progress":X="To Do"}X&&X!==G.status?(H.newStatus=X,H.synced=!0):(H.synced=!0,H.newStatus=G.status)}catch(Z){Z instanceof Rn&&Z.status===404?(H.error="Issue not found (404)",H.newStatus=void 0):H.error=Z instanceof Error?Z.message:"Unknown error"}}catch(U){H.error=U instanceof Error?U.message:"Failed to parse URL"}O.controlsSynced.push(H)}return O.fileConflict||z(),O}catch(R){throw R instanceof Rn?new Error(`Failed to sync: ${R.message}`):R}},[r,j,T,z]);return{domain:e,githubMetadata:r,isPatModalOpen:s,isSettingsModalOpen:l,patModalAction:d,patError:m,isValidatingPat:g,setDomain:w,setGitHubMetadata:a,openPatModal:x,closePatModal:S,openSettingsModal:C,closeSettingsModal:A,submitPat:E,getApiClient:j,requirePat:T,cleanupPat:z,commitFile:L,syncWithRepository:V}}const GN=N.createContext(void 0),fH=({children:e})=>{const[t,r]=N.useState([]),a=N.useCallback((l,u="info",d=5e3)=>{const f=`toast-${Date.now()}-${Math.random()}`,m={id:f,message:l,type:u,duration:d};return r(p=>[...p,m]),u!=="loading"&&d>0&&setTimeout(()=>{s(f)},d),f},[]),s=N.useCallback(l=>{r(u=>u.filter(d=>d.id!==l))},[]),o=N.useCallback((l,u,d)=>{r(m=>m.map(p=>p.id===l?{...p,message:u,type:d,duration:d==="loading"?0:p.duration}:p));const f=t.find(m=>m.id===l);if(f&&d!=="loading"){const m=f.duration||5e3;setTimeout(()=>{s(l)},m)}},[t,s]);return v.jsx(GN.Provider,{value:{toasts:t,showToast:a,dismissToast:s,updateToast:o},children:e})},Xv=()=>{const e=N.useContext(GN);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},KN="flowstate-autosave-settings";function hH(){try{const e=localStorage.getItem(KN);if(e){const t=JSON.parse(e);return{autoSaveLocalFiles:typeof t.autoSaveLocalFiles=="boolean"?t.autoSaveLocalFiles:!1,autoSaveBrowserFiles:typeof t.autoSaveBrowserFiles=="boolean"?t.autoSaveBrowserFiles:!1}}}catch{}return{autoSaveLocalFiles:!1,autoSaveBrowserFiles:!1}}function mH(e){localStorage.setItem(KN,JSON.stringify(e))}const XN=N.createContext(void 0),pH=({children:e})=>{const[t,r]=N.useState(null),[a,s]=N.useState(null),[o,l]=N.useState(!1),[u,d]=N.useState(hH),f=N.useRef(null),m=N.useCallback(b=>{f.current=b,r(b)},[]),p=N.useCallback((b,w)=>{s(w??Date.now()),l(!1),b&&(f.current=b,r(b))},[]),g=N.useCallback(()=>{l(!0)},[]),y=N.useCallback(()=>{f.current=null,r(null),s(null),l(!1)},[]),_=N.useCallback(b=>{d(b),mH(b)},[]);return v.jsx(XN.Provider,{value:{saveSource:t,lastSavedAt:a,isDirty:o,setSaveSource:m,markSaved:p,markDirty:g,clearSaveState:y,autoSaveSettings:u,setAutoSaveSettings:_},children:e})};function ZN(){const e=N.useContext(XN);if(!e)throw new Error("useSaveState must be used within a SaveStateProvider");return e}function gH({onAddComponent:e,onAddBoundary:t}){const r=l=>{const u=document.createElement("div");switch(u.style.position="absolute",u.style.top="-1000px",u.style.padding="4px",u.style.border="2px solid var(--node-border, #000)",u.style.background="var(--bg-primary, white)",u.style.minWidth="140px",u.style.minHeight="46px",u.style.opacity="0.8",u.style.fontSize="14px",u.style.fontWeight="500",u.style.textAlign="center",u.style.padding="10px",u.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",l){case"internal":u.style.borderRadius="25px",u.textContent="New Component";break;case"external_dependency":u.style.borderRadius="0",u.textContent="New External";break;case"data_store":u.style.borderRadius="0",u.style.borderLeft="none",u.style.borderRight="none",u.textContent="New Data Store";break}return u},a=()=>{const l=document.createElement("div");l.style.position="absolute",l.style.top="-1000px",l.style.width="150px",l.style.height="75px",l.style.border="2px dashed #dc2626",l.style.background="transparent",l.style.opacity="0.8",l.style.boxShadow="0 4px 12px rgba(220, 38, 38, 0.15)";const u=document.createElement("div");return u.style.position="absolute",u.style.top="2px",u.style.left="2px",u.style.fontWeight="600",u.style.fontSize="11px",u.style.color="#dc2626",u.style.padding="2px 4px",u.textContent="New Boundary",l.appendChild(u),l},s=(l,u,d)=>{l.dataTransfer.effectAllowed="move";const f=JSON.stringify(u==="component"?{type:"component",componentType:d}:{type:"boundary"});l.dataTransfer.setData("application/reactflow",f),l.currentTarget.classList.add("dragging");const p=u==="component"&&d?r(d):a();document.body.appendChild(p),l.dataTransfer.setDragImage(p,70,25),setTimeout(()=>{document.body.removeChild(p)},0)},o=l=>{l.currentTarget.classList.remove("dragging")};return v.jsxs("div",{className:"canvas-toolbar",children:[v.jsx("button",{className:"canvas-toolbar-button",onClick:()=>e("internal"),draggable:!0,onDragStart:l=>s(l,"component","internal"),onDragEnd:o,title:"Add internal component (click or drag)",children:v.jsx("div",{className:"mini-node mini-internal",children:v.jsx("span",{className:"mini-label",children:"Internal"})})}),v.jsx("button",{className:"canvas-toolbar-button",onClick:()=>e("external_dependency"),draggable:!0,onDragStart:l=>s(l,"component","external_dependency"),onDragEnd:o,title:"Add external dependency (click or drag)",children:v.jsx("div",{className:"mini-node mini-external",children:v.jsx("span",{className:"mini-label",children:"External"})})}),v.jsx("button",{className:"canvas-toolbar-button",onClick:()=>e("data_store"),draggable:!0,onDragStart:l=>s(l,"component","data_store"),onDragEnd:o,title:"Add data store (click or drag)",children:v.jsx("div",{className:"mini-node mini-datastore",children:v.jsx("span",{className:"mini-label",children:"Data Store"})})}),v.jsx("button",{className:"canvas-toolbar-button",onClick:t,draggable:!0,onDragStart:l=>s(l,"boundary"),onDragEnd:o,title:"Add boundary (click or drag)",children:v.jsx("div",{className:"mini-node mini-boundary",children:v.jsx("span",{className:"mini-label",children:"Boundary"})})})]})}const yH=({title:e,instruction:t,keybindings:r=[],show:a})=>a?v.jsx("div",{className:"canvas-overlay",children:v.jsxs("div",{className:"overlay-content",children:[v.jsx("div",{className:"overlay-action",children:e}),r.length>0&&v.jsx("div",{className:"overlay-keybinds",children:r.map((s,o)=>v.jsxs(ht.Fragment,{children:[o>0&&v.jsx("span",{className:"keybind-separator"}),v.jsxs("span",{className:"keybind-group",children:[v.jsx("span",{className:"keybind-keys",children:s.isArrowKeys?v.jsxs(v.Fragment,{children:[v.jsx("kbd",{className:"key key-arrow",children:""}),v.jsx("kbd",{className:"key key-arrow",children:""}),v.jsx("kbd",{className:"key key-arrow",children:""}),v.jsx("kbd",{className:"key key-arrow",children:""})]}):s.keys.map((l,u)=>v.jsx("kbd",{className:"key",children:l},u))}),v.jsx("span",{className:"keybind-label",children:s.label})]})]},o))}),t&&v.jsx("div",{className:"overlay-instruction",children:t})]})}):null;function Nf({trigger:e,items:t,title:r}){const[a,s]=N.useState(!1),o=N.useRef(null);Om(o,()=>s(!1),a);const l=u=>{u(),s(!1)};return v.jsxs("div",{className:"navbar-dropdown",ref:o,title:r,"data-testid":"navbar-dropdown",children:[v.jsx("button",{className:"navbar-dropdown-trigger",onClick:()=>s(!a),"aria-expanded":a,children:e}),a&&v.jsx("div",{className:"navbar-dropdown-menu",children:t.map((u,d)=>v.jsxs("button",{className:"navbar-dropdown-item",onClick:()=>l(u.onClick),children:[u.icon&&v.jsx("span",{className:"navbar-dropdown-icon",children:u.icon}),v.jsx("span",{children:u.label}),u.shortcut&&v.jsx("span",{className:"navbar-dropdown-shortcut",children:u.shortcut})]},d))})]})}function vH(e){const t=new Date(e),r=new Date,a=new Date(r.getFullYear(),r.getMonth(),r.getDate()),s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),o=a.getTime()-s.getTime(),l=Math.floor(o/(1e3*60*60*24));if(l>0)return`${l} day${l===1?"":"s"} ago`;const u=String(t.getHours()).padStart(2,"0"),d=String(t.getMinutes()).padStart(2,"0");return`${u}:${d}`}function bH({isCollapsed:e,isCanvasCollapsed:t,sidebarView:r,mobileView:a="tables",isDarkMode:s,canUndo:o,canRedo:l,canSaveToFile:u,localFileName:d,onSidebarCollapse:f,onCanvasCollapse:m,onSidebarViewChange:p,onMobileViewChange:g,onUndo:y,onRedo:_,onNewThreatModel:b,onQuickSave:w,onSaveToBrowser:x,onSaveToFile:S,onSaveToNewFile:C,onSaveToNewBrowser:A,onCommitToGitHub:E,onDownloadFolder:j,onCopyToConfluence:T,onCopyDiagramToClipboard:z,onCopyAsYaml:L,onCopyAsMarkdown:V,onDarkModeToggle:F,onGitHubSettingsClick:M,onGenerateShareLink:O}){const{saveSource:R,lastSavedAt:G,isDirty:H,autoSaveSettings:U,setAutoSaveSettings:Z}=ZN();let X=null;const Q=U.autoSaveBrowserFiles&&R?.type==="browser"||U.autoSaveLocalFiles&&R?.type==="file";if(R){const $=Q?H?"Saving":"Saved":G?`last saved ${vH(G)}`:"",B=H&&!Q?v.jsx("span",{className:"navbar-indicator-dirty",title:"Unsaved changes",children:""}):null;switch(R.type){case"github":{const K=R.metadata;X=v.jsxs("a",{className:"navbar-save-indicator navbar-save-indicator--github",href:`https://${K.domain}/${K.owner}/${K.repository}/blob/${K.branch}/${K.path}`,target:"_blank",rel:"noopener noreferrer",title:`View ${K.path} on ${K.domain}
${$}`,children:[v.jsx(tm,{size:14}),v.jsxs("span",{className:"navbar-indicator-name",children:[K.owner,"/",K.repository]}),v.jsx("span",{className:"navbar-indicator-saved",children:$}),B]});break}case"file":{X=v.jsxs("span",{className:"navbar-save-indicator navbar-save-indicator--file",title:`Editing local file: ${R.fileName}
${$}`,children:[v.jsx(jL,{size:14}),v.jsx("span",{className:"navbar-indicator-name",children:R.fileName}),v.jsx("span",{className:"navbar-indicator-saved",children:$}),B]});break}case"browser":{X=v.jsxs("span",{className:"navbar-save-indicator navbar-save-indicator--browser",title:`Saved in browser storage: ${R.modelName}
${$}`,children:[v.jsx(Gc,{size:14}),v.jsx("span",{className:"navbar-indicator-name",children:R.modelName}),v.jsx("span",{className:"navbar-indicator-saved",children:$}),B]});break}}}else X=v.jsx("span",{className:"navbar-save-indicator navbar-save-indicator--none",title:"This model has not been saved yet",children:v.jsx("span",{className:"navbar-indicator-saved",children:"Not saved"})});return v.jsxs("nav",{className:"navbar",children:[v.jsxs("div",{className:"navbar-left",children:[!e&&v.jsxs("div",{className:"navbar-toggle navbar-toggle-desktop",children:[v.jsxs("button",{className:`navbar-toggle-button ${r==="tables"?"active":""}`,onClick:()=>p("tables"),title:"Table View",children:[v.jsx(nS,{size:16}),v.jsx("span",{children:"Tables"})]}),v.jsxs("button",{className:`navbar-toggle-button ${r==="yaml"?"active":""}`,onClick:()=>p("yaml"),title:"YAML Editor",children:[v.jsx(Py,{size:16}),v.jsx("span",{children:"YAML"})]})]}),v.jsxs("div",{className:"navbar-toggle navbar-toggle-mobile",children:[v.jsxs("button",{className:`navbar-toggle-button ${a==="tables"?"active":""}`,onClick:()=>g?.("tables"),title:"Table View",children:[v.jsx(nS,{size:16}),v.jsx("span",{children:"Tables"})]}),v.jsxs("button",{className:`navbar-toggle-button ${a==="yaml"?"active":""}`,onClick:()=>g?.("yaml"),title:"YAML Editor",children:[v.jsx(Py,{size:16}),v.jsx("span",{children:"YAML"})]}),v.jsxs("button",{className:`navbar-toggle-button ${a==="canvas"?"active":""}`,onClick:()=>g?.("canvas"),title:"Canvas View",children:[v.jsx(lI,{size:16}),v.jsx("span",{children:"Canvas"})]})]}),v.jsx("button",{className:"navbar-button collapse-button navbar-button-desktop",onClick:f,title:e?"Show sidebar":"Hide sidebar",children:e?v.jsx(VL,{size:20}):v.jsx(FL,{size:20})}),v.jsx("button",{className:"navbar-button canvas-collapse-button navbar-button-desktop",onClick:m,title:t?"Show canvas":"Hide canvas",children:t?v.jsx(XL,{size:20}):v.jsx(GL,{size:20})})]}),v.jsxs("div",{className:"navbar-center",children:[v.jsx("h1",{className:"navbar-title",children:"FlowState TM"}),X]}),v.jsxs("div",{className:"navbar-right",children:[v.jsx("button",{className:"navbar-button",onClick:y,disabled:!o,title:"Undo (Cmd/Ctrl+Z)",style:{opacity:o?1:.5,cursor:o?"pointer":"not-allowed"},children:v.jsx(EI,{size:20})}),v.jsx("button",{className:"navbar-button",onClick:_,disabled:!l,title:"Redo (Cmd/Ctrl+Shift+Z)",style:{opacity:l?1:.5,cursor:l?"pointer":"not-allowed"},children:v.jsx(eI,{size:20})}),v.jsx(Nf,{trigger:v.jsx(Ov,{size:20}),title:"New threat model",items:[{label:"New Threat Model",icon:v.jsx(jI,{size:16}),onClick:()=>b("empty")},{label:"Load from Template",icon:v.jsx(W8,{size:16}),onClick:()=>b("templates")},{label:"Load from Local",icon:v.jsx(NI,{size:16}),onClick:()=>b("upload")},{label:"Load from Browser Storage",icon:v.jsx(Gc,{size:16}),onClick:()=>b("browser")},{label:"Load from GitHub",icon:v.jsx(kh,{size:16}),onClick:()=>b("github")}]}),v.jsx(Nf,{trigger:v.jsx(B0,{size:20}),title:"Save threat model",items:[{label:R?`Save (${R.type==="github"?"GitHub":R.type==="file"?R.fileName:"Browser"})`:"Save",icon:v.jsx(B0,{size:16}),onClick:w,shortcut:"S"},...R?.type==="file"&&u&&C?[{label:"Save to New File...",icon:v.jsx(eS,{size:16}),onClick:C}]:[],...R?.type==="browser"&&A?[{label:"Save to New Browser Storage...",icon:v.jsx(Gc,{size:16}),onClick:A}]:[],...u&&S&&R?.type!=="file"?[{label:"Save to File...",icon:v.jsx(eS,{size:16}),onClick:S}]:[],...R?.type!=="browser"?[{label:"Save to Browser Storage",icon:v.jsx(Gc,{size:16}),onClick:x}]:[],{label:"Download ZIP Folder",icon:v.jsx(fL,{size:16}),onClick:j},...E?[{label:"Commit to GitHub",icon:v.jsx(kh,{size:16}),onClick:E}]:[]]}),v.jsx(Nf,{trigger:v.jsx(nN,{size:20}),title:"Copy to Clipboard",items:[...z?[{label:"Copy DFD as Image",icon:v.jsx(rN,{size:16}),onClick:z}]:[],...L?[{label:"Copy as YAML",icon:v.jsx(Py,{size:16}),onClick:L}]:[],...V?[{label:"Copy as Markdown",icon:v.jsx(gu,{size:16}),onClick:V}]:[],{label:"Copy as Confluence Markup",icon:v.jsx(gu,{size:16}),onClick:T},...O?[{label:"Copy Shareable Link",icon:v.jsx($L,{size:16}),onClick:O}]:[]]}),v.jsx(Nf,{trigger:v.jsx(sN,{size:20}),title:"Settings",items:[{label:s?"Light Mode":"Dark Mode",icon:s?v.jsx(oN,{size:16}):v.jsx(iN,{size:16}),onClick:F},{label:U.autoSaveLocalFiles?"Auto-save local files: On":"Auto-save local files: Off",icon:U.autoSaveLocalFiles?v.jsx(iS,{size:16}):v.jsx(rS,{size:16}),onClick:()=>Z({...U,autoSaveLocalFiles:!U.autoSaveLocalFiles})},{label:U.autoSaveBrowserFiles?"Auto-save browser files: On":"Auto-save browser files: Off",icon:U.autoSaveBrowserFiles?v.jsx(iS,{size:16}):v.jsx(rS,{size:16}),onClick:()=>Z({...U,autoSaveBrowserFiles:!U.autoSaveBrowserFiles})},...M?[{label:"GitHub Settings",icon:v.jsx(kh,{size:16}),onClick:M}]:[]]})]})]})}var Af={exports:{}},Yy={},ia={},Us={},Gy={},Ky={},Xy={},ES;function cm(){return ES||(ES=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(S){if(super(),!e.IDENTIFIER.test(S))throw new Error("CodeGen: name must be a valid identifier");this.str=S}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class a extends t{constructor(S){super(),this._items=typeof S=="string"?[S]:S}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const S=this._items[0];return S===""||S==='""'}get str(){var S;return(S=this._str)!==null&&S!==void 0?S:this._str=this._items.reduce((C,A)=>`${C}${A}`,"")}get names(){var S;return(S=this._names)!==null&&S!==void 0?S:this._names=this._items.reduce((C,A)=>(A instanceof r&&(C[A.str]=(C[A.str]||0)+1),C),{})}}e._Code=a,e.nil=new a("");function s(x,...S){const C=[x[0]];let A=0;for(;A<S.length;)u(C,S[A]),C.push(x[++A]);return new a(C)}e._=s;const o=new a("+");function l(x,...S){const C=[y(x[0])];let A=0;for(;A<S.length;)C.push(o),u(C,S[A]),C.push(o,y(x[++A]));return d(C),new a(C)}e.str=l;function u(x,S){S instanceof a?x.push(...S._items):S instanceof r?x.push(S):x.push(p(S))}e.addCodeArg=u;function d(x){let S=1;for(;S<x.length-1;){if(x[S]===o){const C=f(x[S-1],x[S+1]);if(C!==void 0){x.splice(S-1,3,C);continue}x[S++]="+"}S++}}function f(x,S){if(S==='""')return x;if(x==='""')return S;if(typeof x=="string")return S instanceof r||x[x.length-1]!=='"'?void 0:typeof S!="string"?`${x.slice(0,-1)}${S}"`:S[0]==='"'?x.slice(0,-1)+S.slice(1):void 0;if(typeof S=="string"&&S[0]==='"'&&!(x instanceof r))return`"${x}${S.slice(1)}`}function m(x,S){return S.emptyStr()?x:x.emptyStr()?S:l`${x}${S}`}e.strConcat=m;function p(x){return typeof x=="number"||typeof x=="boolean"||x===null?x:y(Array.isArray(x)?x.join(","):x)}function g(x){return new a(y(x))}e.stringify=g;function y(x){return JSON.stringify(x).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=y;function _(x){return typeof x=="string"&&e.IDENTIFIER.test(x)?new a(`.${x}`):s`[${x}]`}e.getProperty=_;function b(x){if(typeof x=="string"&&e.IDENTIFIER.test(x))return new a(`${x}`);throw new Error(`CodeGen: invalid export name: ${x}, use explicit $id name mapping`)}e.getEsmExportName=b;function w(x){return new a(x.toString())}e.regexpCode=w})(Xy)),Xy}var Zy={},kS;function NS(){return kS||(kS=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=cm();class r extends Error{constructor(f){super(`CodeGen: "code" for ${f} not defined`),this.value=f.value}}var a;(function(d){d[d.Started=0]="Started",d[d.Completed=1]="Completed"})(a||(e.UsedValueState=a={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:f,parent:m}={}){this._names={},this._prefixes=f,this._parent=m}toName(f){return f instanceof t.Name?f:this.name(f)}name(f){return new t.Name(this._newName(f))}_newName(f){const m=this._names[f]||this._nameGroup(f);return`${f}${m.index++}`}_nameGroup(f){var m,p;if(!((p=(m=this._parent)===null||m===void 0?void 0:m._prefixes)===null||p===void 0)&&p.has(f)||this._prefixes&&!this._prefixes.has(f))throw new Error(`CodeGen: prefix "${f}" is not allowed in this scope`);return this._names[f]={prefix:f,index:0}}}e.Scope=s;class o extends t.Name{constructor(f,m){super(m),this.prefix=f}setValue(f,{property:m,itemIndex:p}){this.value=f,this.scopePath=(0,t._)`.${new t.Name(m)}[${p}]`}}e.ValueScopeName=o;const l=(0,t._)`\n`;class u extends s{constructor(f){super(f),this._values={},this._scope=f.scope,this.opts={...f,_n:f.lines?l:t.nil}}get(){return this._scope}name(f){return new o(f,this._newName(f))}value(f,m){var p;if(m.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const g=this.toName(f),{prefix:y}=g,_=(p=m.key)!==null&&p!==void 0?p:m.ref;let b=this._values[y];if(b){const S=b.get(_);if(S)return S}else b=this._values[y]=new Map;b.set(_,g);const w=this._scope[y]||(this._scope[y]=[]),x=w.length;return w[x]=m.ref,g.setValue(m,{property:y,itemIndex:x}),g}getValue(f,m){const p=this._values[f];if(p)return p.get(m)}scopeRefs(f,m=this._values){return this._reduceValues(m,p=>{if(p.scopePath===void 0)throw new Error(`CodeGen: name "${p}" has no value`);return(0,t._)`${f}${p.scopePath}`})}scopeCode(f=this._values,m,p){return this._reduceValues(f,g=>{if(g.value===void 0)throw new Error(`CodeGen: name "${g}" has no value`);return g.value.code},m,p)}_reduceValues(f,m,p={},g){let y=t.nil;for(const _ in f){const b=f[_];if(!b)continue;const w=p[_]=p[_]||new Map;b.forEach(x=>{if(w.has(x))return;w.set(x,a.Started);let S=m(x);if(S){const C=this.opts.es5?e.varKinds.var:e.varKinds.const;y=(0,t._)`${y}${C} ${x} = ${S};${this.opts._n}`}else if(S=g?.(x))y=(0,t._)`${y}${S}${this.opts._n}`;else throw new r(x);w.set(x,a.Completed)})}return y}}e.ValueScope=u})(Zy)),Zy}var AS;function bt(){return AS||(AS=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=cm(),r=NS();var a=cm();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return a._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return a.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return a.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return a.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return a.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return a.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return a.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return a.Name}});var s=NS();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(P,q){return this}}class l extends o{constructor(P,q,J){super(),this.varKind=P,this.name=q,this.rhs=J}render({es5:P,_n:q}){const J=P?r.varKinds.var:this.varKind,le=this.rhs===void 0?"":` = ${this.rhs}`;return`${J} ${this.name}${le};`+q}optimizeNames(P,q){if(P[this.name.str])return this.rhs&&(this.rhs=R(this.rhs,P,q)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class u extends o{constructor(P,q,J){super(),this.lhs=P,this.rhs=q,this.sideEffects=J}render({_n:P}){return`${this.lhs} = ${this.rhs};`+P}optimizeNames(P,q){if(!(this.lhs instanceof t.Name&&!P[this.lhs.str]&&!this.sideEffects))return this.rhs=R(this.rhs,P,q),this}get names(){const P=this.lhs instanceof t.Name?{}:{...this.lhs.names};return O(P,this.rhs)}}class d extends u{constructor(P,q,J,le){super(P,J,le),this.op=q}render({_n:P}){return`${this.lhs} ${this.op}= ${this.rhs};`+P}}class f extends o{constructor(P){super(),this.label=P,this.names={}}render({_n:P}){return`${this.label}:`+P}}class m extends o{constructor(P){super(),this.label=P,this.names={}}render({_n:P}){return`break${this.label?` ${this.label}`:""};`+P}}class p extends o{constructor(P){super(),this.error=P}render({_n:P}){return`throw ${this.error};`+P}get names(){return this.error.names}}class g extends o{constructor(P){super(),this.code=P}render({_n:P}){return`${this.code};`+P}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(P,q){return this.code=R(this.code,P,q),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class y extends o{constructor(P=[]){super(),this.nodes=P}render(P){return this.nodes.reduce((q,J)=>q+J.render(P),"")}optimizeNodes(){const{nodes:P}=this;let q=P.length;for(;q--;){const J=P[q].optimizeNodes();Array.isArray(J)?P.splice(q,1,...J):J?P[q]=J:P.splice(q,1)}return P.length>0?this:void 0}optimizeNames(P,q){const{nodes:J}=this;let le=J.length;for(;le--;){const oe=J[le];oe.optimizeNames(P,q)||(G(P,oe.names),J.splice(le,1))}return J.length>0?this:void 0}get names(){return this.nodes.reduce((P,q)=>M(P,q.names),{})}}class _ extends y{render(P){return"{"+P._n+super.render(P)+"}"+P._n}}class b extends y{}class w extends _{}w.kind="else";class x extends _{constructor(P,q){super(q),this.condition=P}render(P){let q=`if(${this.condition})`+super.render(P);return this.else&&(q+="else "+this.else.render(P)),q}optimizeNodes(){super.optimizeNodes();const P=this.condition;if(P===!0)return this.nodes;let q=this.else;if(q){const J=q.optimizeNodes();q=this.else=Array.isArray(J)?new w(J):J}if(q)return P===!1?q instanceof x?q:q.nodes:this.nodes.length?this:new x(H(P),q instanceof x?[q]:q.nodes);if(!(P===!1||!this.nodes.length))return this}optimizeNames(P,q){var J;if(this.else=(J=this.else)===null||J===void 0?void 0:J.optimizeNames(P,q),!!(super.optimizeNames(P,q)||this.else))return this.condition=R(this.condition,P,q),this}get names(){const P=super.names;return O(P,this.condition),this.else&&M(P,this.else.names),P}}x.kind="if";class S extends _{}S.kind="for";class C extends S{constructor(P){super(),this.iteration=P}render(P){return`for(${this.iteration})`+super.render(P)}optimizeNames(P,q){if(super.optimizeNames(P,q))return this.iteration=R(this.iteration,P,q),this}get names(){return M(super.names,this.iteration.names)}}class A extends S{constructor(P,q,J,le){super(),this.varKind=P,this.name=q,this.from=J,this.to=le}render(P){const q=P.es5?r.varKinds.var:this.varKind,{name:J,from:le,to:oe}=this;return`for(${q} ${J}=${le}; ${J}<${oe}; ${J}++)`+super.render(P)}get names(){const P=O(super.names,this.from);return O(P,this.to)}}class E extends S{constructor(P,q,J,le){super(),this.loop=P,this.varKind=q,this.name=J,this.iterable=le}render(P){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(P)}optimizeNames(P,q){if(super.optimizeNames(P,q))return this.iterable=R(this.iterable,P,q),this}get names(){return M(super.names,this.iterable.names)}}class j extends _{constructor(P,q,J){super(),this.name=P,this.args=q,this.async=J}render(P){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(P)}}j.kind="func";class T extends y{render(P){return"return "+super.render(P)}}T.kind="return";class z extends _{render(P){let q="try"+super.render(P);return this.catch&&(q+=this.catch.render(P)),this.finally&&(q+=this.finally.render(P)),q}optimizeNodes(){var P,q;return super.optimizeNodes(),(P=this.catch)===null||P===void 0||P.optimizeNodes(),(q=this.finally)===null||q===void 0||q.optimizeNodes(),this}optimizeNames(P,q){var J,le;return super.optimizeNames(P,q),(J=this.catch)===null||J===void 0||J.optimizeNames(P,q),(le=this.finally)===null||le===void 0||le.optimizeNames(P,q),this}get names(){const P=super.names;return this.catch&&M(P,this.catch.names),this.finally&&M(P,this.finally.names),P}}class L extends _{constructor(P){super(),this.error=P}render(P){return`catch(${this.error})`+super.render(P)}}L.kind="catch";class V extends _{render(P){return"finally"+super.render(P)}}V.kind="finally";class F{constructor(P,q={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...q,_n:q.lines?`
`:""},this._extScope=P,this._scope=new r.Scope({parent:P}),this._nodes=[new b]}toString(){return this._root.render(this.opts)}name(P){return this._scope.name(P)}scopeName(P){return this._extScope.name(P)}scopeValue(P,q){const J=this._extScope.value(P,q);return(this._values[J.prefix]||(this._values[J.prefix]=new Set)).add(J),J}getScopeValue(P,q){return this._extScope.getValue(P,q)}scopeRefs(P){return this._extScope.scopeRefs(P,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(P,q,J,le){const oe=this._scope.toName(q);return J!==void 0&&le&&(this._constants[oe.str]=J),this._leafNode(new l(P,oe,J)),oe}const(P,q,J){return this._def(r.varKinds.const,P,q,J)}let(P,q,J){return this._def(r.varKinds.let,P,q,J)}var(P,q,J){return this._def(r.varKinds.var,P,q,J)}assign(P,q,J){return this._leafNode(new u(P,q,J))}add(P,q){return this._leafNode(new d(P,e.operators.ADD,q))}code(P){return typeof P=="function"?P():P!==t.nil&&this._leafNode(new g(P)),this}object(...P){const q=["{"];for(const[J,le]of P)q.length>1&&q.push(","),q.push(J),(J!==le||this.opts.es5)&&(q.push(":"),(0,t.addCodeArg)(q,le));return q.push("}"),new t._Code(q)}if(P,q,J){if(this._blockNode(new x(P)),q&&J)this.code(q).else().code(J).endIf();else if(q)this.code(q).endIf();else if(J)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(P){return this._elseNode(new x(P))}else(){return this._elseNode(new w)}endIf(){return this._endBlockNode(x,w)}_for(P,q){return this._blockNode(P),q&&this.code(q).endFor(),this}for(P,q){return this._for(new C(P),q)}forRange(P,q,J,le,oe=this.opts.es5?r.varKinds.var:r.varKinds.let){const he=this._scope.toName(P);return this._for(new A(oe,he,q,J),()=>le(he))}forOf(P,q,J,le=r.varKinds.const){const oe=this._scope.toName(P);if(this.opts.es5){const he=q instanceof t.Name?q:this.var("_arr",q);return this.forRange("_i",0,(0,t._)`${he}.length`,ve=>{this.var(oe,(0,t._)`${he}[${ve}]`),J(oe)})}return this._for(new E("of",le,oe,q),()=>J(oe))}forIn(P,q,J,le=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(P,(0,t._)`Object.keys(${q})`,J);const oe=this._scope.toName(P);return this._for(new E("in",le,oe,q),()=>J(oe))}endFor(){return this._endBlockNode(S)}label(P){return this._leafNode(new f(P))}break(P){return this._leafNode(new m(P))}return(P){const q=new T;if(this._blockNode(q),this.code(P),q.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(P,q,J){if(!q&&!J)throw new Error('CodeGen: "try" without "catch" and "finally"');const le=new z;if(this._blockNode(le),this.code(P),q){const oe=this.name("e");this._currNode=le.catch=new L(oe),q(oe)}return J&&(this._currNode=le.finally=new V,this.code(J)),this._endBlockNode(L,V)}throw(P){return this._leafNode(new p(P))}block(P,q){return this._blockStarts.push(this._nodes.length),P&&this.code(P).endBlock(q),this}endBlock(P){const q=this._blockStarts.pop();if(q===void 0)throw new Error("CodeGen: not in self-balancing block");const J=this._nodes.length-q;if(J<0||P!==void 0&&J!==P)throw new Error(`CodeGen: wrong number of nodes: ${J} vs ${P} expected`);return this._nodes.length=q,this}func(P,q=t.nil,J,le){return this._blockNode(new j(P,q,J)),le&&this.code(le).endFunc(),this}endFunc(){return this._endBlockNode(j)}optimize(P=1){for(;P-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(P){return this._currNode.nodes.push(P),this}_blockNode(P){this._currNode.nodes.push(P),this._nodes.push(P)}_endBlockNode(P,q){const J=this._currNode;if(J instanceof P||q&&J instanceof q)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${q?`${P.kind}/${q.kind}`:P.kind}"`)}_elseNode(P){const q=this._currNode;if(!(q instanceof x))throw new Error('CodeGen: "else" without "if"');return this._currNode=q.else=P,this}get _root(){return this._nodes[0]}get _currNode(){const P=this._nodes;return P[P.length-1]}set _currNode(P){const q=this._nodes;q[q.length-1]=P}}e.CodeGen=F;function M(K,P){for(const q in P)K[q]=(K[q]||0)+(P[q]||0);return K}function O(K,P){return P instanceof t._CodeOrName?M(K,P.names):K}function R(K,P,q){if(K instanceof t.Name)return J(K);if(!le(K))return K;return new t._Code(K._items.reduce((oe,he)=>(he instanceof t.Name&&(he=J(he)),he instanceof t._Code?oe.push(...he._items):oe.push(he),oe),[]));function J(oe){const he=q[oe.str];return he===void 0||P[oe.str]!==1?oe:(delete P[oe.str],he)}function le(oe){return oe instanceof t._Code&&oe._items.some(he=>he instanceof t.Name&&P[he.str]===1&&q[he.str]!==void 0)}}function G(K,P){for(const q in P)K[q]=(K[q]||0)-(P[q]||0)}function H(K){return typeof K=="boolean"||typeof K=="number"||K===null?!K:(0,t._)`!${B(K)}`}e.not=H;const U=$(e.operators.AND);function Z(...K){return K.reduce(U)}e.and=Z;const X=$(e.operators.OR);function Q(...K){return K.reduce(X)}e.or=Q;function $(K){return(P,q)=>P===t.nil?q:q===t.nil?P:(0,t._)`${B(P)} ${K} ${B(q)}`}function B(K){return K instanceof t.Name?K:(0,t._)`(${K})`}})(Ky)),Ky}var pt={},jS;function jt(){if(jS)return pt;jS=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.checkStrictMode=pt.getErrorPath=pt.Type=pt.useFunc=pt.setEvaluated=pt.evaluatedPropsToName=pt.mergeEvaluated=pt.eachItem=pt.unescapeJsonPointer=pt.escapeJsonPointer=pt.escapeFragment=pt.unescapeFragment=pt.schemaRefOrVal=pt.schemaHasRulesButRef=pt.schemaHasRules=pt.checkUnknownRules=pt.alwaysValidSchema=pt.toHash=void 0;const e=bt(),t=cm();function r(E){const j={};for(const T of E)j[T]=!0;return j}pt.toHash=r;function a(E,j){return typeof j=="boolean"?j:Object.keys(j).length===0?!0:(s(E,j),!o(j,E.self.RULES.all))}pt.alwaysValidSchema=a;function s(E,j=E.schema){const{opts:T,self:z}=E;if(!T.strictSchema||typeof j=="boolean")return;const L=z.RULES.keywords;for(const V in j)L[V]||A(E,`unknown keyword: "${V}"`)}pt.checkUnknownRules=s;function o(E,j){if(typeof E=="boolean")return!E;for(const T in E)if(j[T])return!0;return!1}pt.schemaHasRules=o;function l(E,j){if(typeof E=="boolean")return!E;for(const T in E)if(T!=="$ref"&&j.all[T])return!0;return!1}pt.schemaHasRulesButRef=l;function u({topSchemaRef:E,schemaPath:j},T,z,L){if(!L){if(typeof T=="number"||typeof T=="boolean")return T;if(typeof T=="string")return(0,e._)`${T}`}return(0,e._)`${E}${j}${(0,e.getProperty)(z)}`}pt.schemaRefOrVal=u;function d(E){return p(decodeURIComponent(E))}pt.unescapeFragment=d;function f(E){return encodeURIComponent(m(E))}pt.escapeFragment=f;function m(E){return typeof E=="number"?`${E}`:E.replace(/~/g,"~0").replace(/\//g,"~1")}pt.escapeJsonPointer=m;function p(E){return E.replace(/~1/g,"/").replace(/~0/g,"~")}pt.unescapeJsonPointer=p;function g(E,j){if(Array.isArray(E))for(const T of E)j(T);else j(E)}pt.eachItem=g;function y({mergeNames:E,mergeToName:j,mergeValues:T,resultToName:z}){return(L,V,F,M)=>{const O=F===void 0?V:F instanceof e.Name?(V instanceof e.Name?E(L,V,F):j(L,V,F),F):V instanceof e.Name?(j(L,F,V),V):T(V,F);return M===e.Name&&!(O instanceof e.Name)?z(L,O):O}}pt.mergeEvaluated={props:y({mergeNames:(E,j,T)=>E.if((0,e._)`${T} !== true && ${j} !== undefined`,()=>{E.if((0,e._)`${j} === true`,()=>E.assign(T,!0),()=>E.assign(T,(0,e._)`${T} || {}`).code((0,e._)`Object.assign(${T}, ${j})`))}),mergeToName:(E,j,T)=>E.if((0,e._)`${T} !== true`,()=>{j===!0?E.assign(T,!0):(E.assign(T,(0,e._)`${T} || {}`),b(E,T,j))}),mergeValues:(E,j)=>E===!0?!0:{...E,...j},resultToName:_}),items:y({mergeNames:(E,j,T)=>E.if((0,e._)`${T} !== true && ${j} !== undefined`,()=>E.assign(T,(0,e._)`${j} === true ? true : ${T} > ${j} ? ${T} : ${j}`)),mergeToName:(E,j,T)=>E.if((0,e._)`${T} !== true`,()=>E.assign(T,j===!0?!0:(0,e._)`${T} > ${j} ? ${T} : ${j}`)),mergeValues:(E,j)=>E===!0?!0:Math.max(E,j),resultToName:(E,j)=>E.var("items",j)})};function _(E,j){if(j===!0)return E.var("props",!0);const T=E.var("props",(0,e._)`{}`);return j!==void 0&&b(E,T,j),T}pt.evaluatedPropsToName=_;function b(E,j,T){Object.keys(T).forEach(z=>E.assign((0,e._)`${j}${(0,e.getProperty)(z)}`,!0))}pt.setEvaluated=b;const w={};function x(E,j){return E.scopeValue("func",{ref:j,code:w[j.code]||(w[j.code]=new t._Code(j.code))})}pt.useFunc=x;var S;(function(E){E[E.Num=0]="Num",E[E.Str=1]="Str"})(S||(pt.Type=S={}));function C(E,j,T){if(E instanceof e.Name){const z=j===S.Num;return T?z?(0,e._)`"[" + ${E} + "]"`:(0,e._)`"['" + ${E} + "']"`:z?(0,e._)`"/" + ${E}`:(0,e._)`"/" + ${E}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return T?(0,e.getProperty)(E).toString():"/"+m(E)}pt.getErrorPath=C;function A(E,j,T=E.opts.strictSchema){if(T){if(j=`strict mode: ${j}`,T===!0)throw new Error(j);E.self.logger.warn(j)}}return pt.checkStrictMode=A,pt}var jf={},TS;function ms(){if(TS)return jf;TS=1,Object.defineProperty(jf,"__esModule",{value:!0});const e=bt(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return jf.default=t,jf}var DS;function ep(){return DS||(DS=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=bt(),r=jt(),a=ms();e.keywordError={message:({keyword:w})=>(0,t.str)`must pass "${w}" keyword validation`},e.keyword$DataError={message:({keyword:w,schemaType:x})=>x?(0,t.str)`"${w}" keyword must be ${x} ($data)`:(0,t.str)`"${w}" keyword is invalid ($data)`};function s(w,x=e.keywordError,S,C){const{it:A}=w,{gen:E,compositeRule:j,allErrors:T}=A,z=p(w,x,S);C??(j||T)?d(E,z):f(A,(0,t._)`[${z}]`)}e.reportError=s;function o(w,x=e.keywordError,S){const{it:C}=w,{gen:A,compositeRule:E,allErrors:j}=C,T=p(w,x,S);d(A,T),E||j||f(C,a.default.vErrors)}e.reportExtraError=o;function l(w,x){w.assign(a.default.errors,x),w.if((0,t._)`${a.default.vErrors} !== null`,()=>w.if(x,()=>w.assign((0,t._)`${a.default.vErrors}.length`,x),()=>w.assign(a.default.vErrors,null)))}e.resetErrorsCount=l;function u({gen:w,keyword:x,schemaValue:S,data:C,errsCount:A,it:E}){if(A===void 0)throw new Error("ajv implementation error");const j=w.name("err");w.forRange("i",A,a.default.errors,T=>{w.const(j,(0,t._)`${a.default.vErrors}[${T}]`),w.if((0,t._)`${j}.instancePath === undefined`,()=>w.assign((0,t._)`${j}.instancePath`,(0,t.strConcat)(a.default.instancePath,E.errorPath))),w.assign((0,t._)`${j}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${x}`),E.opts.verbose&&(w.assign((0,t._)`${j}.schema`,S),w.assign((0,t._)`${j}.data`,C))})}e.extendErrors=u;function d(w,x){const S=w.const("err",x);w.if((0,t._)`${a.default.vErrors} === null`,()=>w.assign(a.default.vErrors,(0,t._)`[${S}]`),(0,t._)`${a.default.vErrors}.push(${S})`),w.code((0,t._)`${a.default.errors}++`)}function f(w,x){const{gen:S,validateName:C,schemaEnv:A}=w;A.$async?S.throw((0,t._)`new ${w.ValidationError}(${x})`):(S.assign((0,t._)`${C}.errors`,x),S.return(!1))}const m={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function p(w,x,S){const{createErrors:C}=w.it;return C===!1?(0,t._)`{}`:g(w,x,S)}function g(w,x,S={}){const{gen:C,it:A}=w,E=[y(A,S),_(w,S)];return b(w,x,E),C.object(...E)}function y({errorPath:w},{instancePath:x}){const S=x?(0,t.str)`${w}${(0,r.getErrorPath)(x,r.Type.Str)}`:w;return[a.default.instancePath,(0,t.strConcat)(a.default.instancePath,S)]}function _({keyword:w,it:{errSchemaPath:x}},{schemaPath:S,parentSchema:C}){let A=C?x:(0,t.str)`${x}/${w}`;return S&&(A=(0,t.str)`${A}${(0,r.getErrorPath)(S,r.Type.Str)}`),[m.schemaPath,A]}function b(w,{params:x,message:S},C){const{keyword:A,data:E,schemaValue:j,it:T}=w,{opts:z,propertyName:L,topSchemaRef:V,schemaPath:F}=T;C.push([m.keyword,A],[m.params,typeof x=="function"?x(w):x||(0,t._)`{}`]),z.messages&&C.push([m.message,typeof S=="function"?S(w):S]),z.verbose&&C.push([m.schema,j],[m.parentSchema,(0,t._)`${V}${F}`],[a.default.data,E]),L&&C.push([m.propertyName,L])}})(Gy)),Gy}var RS;function wH(){if(RS)return Us;RS=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.boolOrEmptySchema=Us.topBoolOrEmptySchema=void 0;const e=ep(),t=bt(),r=ms(),a={message:"boolean schema is false"};function s(u){const{gen:d,schema:f,validateName:m}=u;f===!1?l(u,!1):typeof f=="object"&&f.$async===!0?d.return(r.default.data):(d.assign((0,t._)`${m}.errors`,null),d.return(!0))}Us.topBoolOrEmptySchema=s;function o(u,d){const{gen:f,schema:m}=u;m===!1?(f.var(d,!1),l(u)):f.var(d,!0)}Us.boolOrEmptySchema=o;function l(u,d){const{gen:f,data:m}=u,p={gen:f,keyword:"false schema",data:m,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:u};(0,e.reportError)(p,a,void 0,d)}return Us}var Hn={},Fs={},$S;function WN(){if($S)return Fs;$S=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.getRules=Fs.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function r(s){return typeof s=="string"&&t.has(s)}Fs.isJSONType=r;function a(){const s={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...s,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},s.number,s.string,s.array,s.object],post:{rules:[]},all:{},keywords:{}}}return Fs.getRules=a,Fs}var aa={},MS;function QN(){if(MS)return aa;MS=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.shouldUseRule=aa.shouldUseGroup=aa.schemaHasRulesForType=void 0;function e({schema:a,self:s},o){const l=s.RULES.types[o];return l&&l!==!0&&t(a,l)}aa.schemaHasRulesForType=e;function t(a,s){return s.rules.some(o=>r(a,o))}aa.shouldUseGroup=t;function r(a,s){var o;return a[s.keyword]!==void 0||((o=s.definition.implements)===null||o===void 0?void 0:o.some(l=>a[l]!==void 0))}return aa.shouldUseRule=r,aa}var OS;function um(){if(OS)return Hn;OS=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.reportTypeError=Hn.checkDataTypes=Hn.checkDataType=Hn.coerceAndCheckDataType=Hn.getJSONTypes=Hn.getSchemaTypes=Hn.DataType=void 0;const e=WN(),t=QN(),r=ep(),a=bt(),s=jt();var o;(function(S){S[S.Correct=0]="Correct",S[S.Wrong=1]="Wrong"})(o||(Hn.DataType=o={}));function l(S){const C=u(S.type);if(C.includes("null")){if(S.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!C.length&&S.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');S.nullable===!0&&C.push("null")}return C}Hn.getSchemaTypes=l;function u(S){const C=Array.isArray(S)?S:S?[S]:[];if(C.every(e.isJSONType))return C;throw new Error("type must be JSONType or JSONType[]: "+C.join(","))}Hn.getJSONTypes=u;function d(S,C){const{gen:A,data:E,opts:j}=S,T=m(C,j.coerceTypes),z=C.length>0&&!(T.length===0&&C.length===1&&(0,t.schemaHasRulesForType)(S,C[0]));if(z){const L=_(C,E,j.strictNumbers,o.Wrong);A.if(L,()=>{T.length?p(S,C,T):w(S)})}return z}Hn.coerceAndCheckDataType=d;const f=new Set(["string","number","integer","boolean","null"]);function m(S,C){return C?S.filter(A=>f.has(A)||C==="array"&&A==="array"):[]}function p(S,C,A){const{gen:E,data:j,opts:T}=S,z=E.let("dataType",(0,a._)`typeof ${j}`),L=E.let("coerced",(0,a._)`undefined`);T.coerceTypes==="array"&&E.if((0,a._)`${z} == 'object' && Array.isArray(${j}) && ${j}.length == 1`,()=>E.assign(j,(0,a._)`${j}[0]`).assign(z,(0,a._)`typeof ${j}`).if(_(C,j,T.strictNumbers),()=>E.assign(L,j))),E.if((0,a._)`${L} !== undefined`);for(const F of A)(f.has(F)||F==="array"&&T.coerceTypes==="array")&&V(F);E.else(),w(S),E.endIf(),E.if((0,a._)`${L} !== undefined`,()=>{E.assign(j,L),g(S,L)});function V(F){switch(F){case"string":E.elseIf((0,a._)`${z} == "number" || ${z} == "boolean"`).assign(L,(0,a._)`"" + ${j}`).elseIf((0,a._)`${j} === null`).assign(L,(0,a._)`""`);return;case"number":E.elseIf((0,a._)`${z} == "boolean" || ${j} === null
              || (${z} == "string" && ${j} && ${j} == +${j})`).assign(L,(0,a._)`+${j}`);return;case"integer":E.elseIf((0,a._)`${z} === "boolean" || ${j} === null
              || (${z} === "string" && ${j} && ${j} == +${j} && !(${j} % 1))`).assign(L,(0,a._)`+${j}`);return;case"boolean":E.elseIf((0,a._)`${j} === "false" || ${j} === 0 || ${j} === null`).assign(L,!1).elseIf((0,a._)`${j} === "true" || ${j} === 1`).assign(L,!0);return;case"null":E.elseIf((0,a._)`${j} === "" || ${j} === 0 || ${j} === false`),E.assign(L,null);return;case"array":E.elseIf((0,a._)`${z} === "string" || ${z} === "number"
              || ${z} === "boolean" || ${j} === null`).assign(L,(0,a._)`[${j}]`)}}}function g({gen:S,parentData:C,parentDataProperty:A},E){S.if((0,a._)`${C} !== undefined`,()=>S.assign((0,a._)`${C}[${A}]`,E))}function y(S,C,A,E=o.Correct){const j=E===o.Correct?a.operators.EQ:a.operators.NEQ;let T;switch(S){case"null":return(0,a._)`${C} ${j} null`;case"array":T=(0,a._)`Array.isArray(${C})`;break;case"object":T=(0,a._)`${C} && typeof ${C} == "object" && !Array.isArray(${C})`;break;case"integer":T=z((0,a._)`!(${C} % 1) && !isNaN(${C})`);break;case"number":T=z();break;default:return(0,a._)`typeof ${C} ${j} ${S}`}return E===o.Correct?T:(0,a.not)(T);function z(L=a.nil){return(0,a.and)((0,a._)`typeof ${C} == "number"`,L,A?(0,a._)`isFinite(${C})`:a.nil)}}Hn.checkDataType=y;function _(S,C,A,E){if(S.length===1)return y(S[0],C,A,E);let j;const T=(0,s.toHash)(S);if(T.array&&T.object){const z=(0,a._)`typeof ${C} != "object"`;j=T.null?z:(0,a._)`!${C} || ${z}`,delete T.null,delete T.array,delete T.object}else j=a.nil;T.number&&delete T.integer;for(const z in T)j=(0,a.and)(j,y(z,C,A,E));return j}Hn.checkDataTypes=_;const b={message:({schema:S})=>`must be ${S}`,params:({schema:S,schemaValue:C})=>typeof S=="string"?(0,a._)`{type: ${S}}`:(0,a._)`{type: ${C}}`};function w(S){const C=x(S);(0,r.reportError)(C,b)}Hn.reportTypeError=w;function x(S){const{gen:C,data:A,schema:E}=S,j=(0,s.schemaRefOrVal)(S,E,"type");return{gen:C,keyword:"type",data:A,schema:E.type,schemaCode:j,schemaValue:j,parentSchema:E,params:{},it:S}}return Hn}var Bc={},zS;function xH(){if(zS)return Bc;zS=1,Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.assignDefaults=void 0;const e=bt(),t=jt();function r(s,o){const{properties:l,items:u}=s.schema;if(o==="object"&&l)for(const d in l)a(s,d,l[d].default);else o==="array"&&Array.isArray(u)&&u.forEach((d,f)=>a(s,f,d.default))}Bc.assignDefaults=r;function a(s,o,l){const{gen:u,compositeRule:d,data:f,opts:m}=s;if(l===void 0)return;const p=(0,e._)`${f}${(0,e.getProperty)(o)}`;if(d){(0,t.checkStrictMode)(s,`default is ignored for: ${p}`);return}let g=(0,e._)`${p} === undefined`;m.useDefaults==="empty"&&(g=(0,e._)`${g} || ${p} === null || ${p} === ""`),u.if(g,(0,e._)`${p} = ${(0,e.stringify)(l)}`)}return Bc}var ai={},Mt={},LS;function gi(){if(LS)return Mt;LS=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.validateUnion=Mt.validateArray=Mt.usePattern=Mt.callValidateCode=Mt.schemaProperties=Mt.allSchemaProperties=Mt.noPropertyInData=Mt.propertyInData=Mt.isOwnProperty=Mt.hasPropFunc=Mt.reportMissingProp=Mt.checkMissingProp=Mt.checkReportMissingProp=void 0;const e=bt(),t=jt(),r=ms(),a=jt();function s(S,C){const{gen:A,data:E,it:j}=S;A.if(m(A,E,C,j.opts.ownProperties),()=>{S.setParams({missingProperty:(0,e._)`${C}`},!0),S.error()})}Mt.checkReportMissingProp=s;function o({gen:S,data:C,it:{opts:A}},E,j){return(0,e.or)(...E.map(T=>(0,e.and)(m(S,C,T,A.ownProperties),(0,e._)`${j} = ${T}`)))}Mt.checkMissingProp=o;function l(S,C){S.setParams({missingProperty:C},!0),S.error()}Mt.reportMissingProp=l;function u(S){return S.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}Mt.hasPropFunc=u;function d(S,C,A){return(0,e._)`${u(S)}.call(${C}, ${A})`}Mt.isOwnProperty=d;function f(S,C,A,E){const j=(0,e._)`${C}${(0,e.getProperty)(A)} !== undefined`;return E?(0,e._)`${j} && ${d(S,C,A)}`:j}Mt.propertyInData=f;function m(S,C,A,E){const j=(0,e._)`${C}${(0,e.getProperty)(A)} === undefined`;return E?(0,e.or)(j,(0,e.not)(d(S,C,A))):j}Mt.noPropertyInData=m;function p(S){return S?Object.keys(S).filter(C=>C!=="__proto__"):[]}Mt.allSchemaProperties=p;function g(S,C){return p(C).filter(A=>!(0,t.alwaysValidSchema)(S,C[A]))}Mt.schemaProperties=g;function y({schemaCode:S,data:C,it:{gen:A,topSchemaRef:E,schemaPath:j,errorPath:T},it:z},L,V,F){const M=F?(0,e._)`${S}, ${C}, ${E}${j}`:C,O=[[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,T)],[r.default.parentData,z.parentData],[r.default.parentDataProperty,z.parentDataProperty],[r.default.rootData,r.default.rootData]];z.opts.dynamicRef&&O.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const R=(0,e._)`${M}, ${A.object(...O)}`;return V!==e.nil?(0,e._)`${L}.call(${V}, ${R})`:(0,e._)`${L}(${R})`}Mt.callValidateCode=y;const _=(0,e._)`new RegExp`;function b({gen:S,it:{opts:C}},A){const E=C.unicodeRegExp?"u":"",{regExp:j}=C.code,T=j(A,E);return S.scopeValue("pattern",{key:T.toString(),ref:T,code:(0,e._)`${j.code==="new RegExp"?_:(0,a.useFunc)(S,j)}(${A}, ${E})`})}Mt.usePattern=b;function w(S){const{gen:C,data:A,keyword:E,it:j}=S,T=C.name("valid");if(j.allErrors){const L=C.let("valid",!0);return z(()=>C.assign(L,!1)),L}return C.var(T,!0),z(()=>C.break()),T;function z(L){const V=C.const("len",(0,e._)`${A}.length`);C.forRange("i",0,V,F=>{S.subschema({keyword:E,dataProp:F,dataPropType:t.Type.Num},T),C.if((0,e.not)(T),L)})}}Mt.validateArray=w;function x(S){const{gen:C,schema:A,keyword:E,it:j}=S;if(!Array.isArray(A))throw new Error("ajv implementation error");if(A.some(V=>(0,t.alwaysValidSchema)(j,V))&&!j.opts.unevaluated)return;const z=C.let("valid",!1),L=C.name("_valid");C.block(()=>A.forEach((V,F)=>{const M=S.subschema({keyword:E,schemaProp:F,compositeRule:!0},L);C.assign(z,(0,e._)`${z} || ${L}`),S.mergeValidEvaluated(M,L)||C.if((0,e.not)(z))})),S.result(z,()=>S.reset(),()=>S.error(!0))}return Mt.validateUnion=x,Mt}var IS;function _H(){if(IS)return ai;IS=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.validateKeywordUsage=ai.validSchemaType=ai.funcKeywordCode=ai.macroKeywordCode=void 0;const e=bt(),t=ms(),r=gi(),a=ep();function s(g,y){const{gen:_,keyword:b,schema:w,parentSchema:x,it:S}=g,C=y.macro.call(S.self,w,x,S),A=f(_,b,C);S.opts.validateSchema!==!1&&S.self.validateSchema(C,!0);const E=_.name("valid");g.subschema({schema:C,schemaPath:e.nil,errSchemaPath:`${S.errSchemaPath}/${b}`,topSchemaRef:A,compositeRule:!0},E),g.pass(E,()=>g.error(!0))}ai.macroKeywordCode=s;function o(g,y){var _;const{gen:b,keyword:w,schema:x,parentSchema:S,$data:C,it:A}=g;d(A,y);const E=!C&&y.compile?y.compile.call(A.self,x,S,A):y.validate,j=f(b,w,E),T=b.let("valid");g.block$data(T,z),g.ok((_=y.valid)!==null&&_!==void 0?_:T);function z(){if(y.errors===!1)F(),y.modifying&&l(g),M(()=>g.error());else{const O=y.async?L():V();y.modifying&&l(g),M(()=>u(g,O))}}function L(){const O=b.let("ruleErrs",null);return b.try(()=>F((0,e._)`await `),R=>b.assign(T,!1).if((0,e._)`${R} instanceof ${A.ValidationError}`,()=>b.assign(O,(0,e._)`${R}.errors`),()=>b.throw(R))),O}function V(){const O=(0,e._)`${j}.errors`;return b.assign(O,null),F(e.nil),O}function F(O=y.async?(0,e._)`await `:e.nil){const R=A.opts.passContext?t.default.this:t.default.self,G=!("compile"in y&&!C||y.schema===!1);b.assign(T,(0,e._)`${O}${(0,r.callValidateCode)(g,j,R,G)}`,y.modifying)}function M(O){var R;b.if((0,e.not)((R=y.valid)!==null&&R!==void 0?R:T),O)}}ai.funcKeywordCode=o;function l(g){const{gen:y,data:_,it:b}=g;y.if(b.parentData,()=>y.assign(_,(0,e._)`${b.parentData}[${b.parentDataProperty}]`))}function u(g,y){const{gen:_}=g;_.if((0,e._)`Array.isArray(${y})`,()=>{_.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${y} : ${t.default.vErrors}.concat(${y})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,a.extendErrors)(g)},()=>g.error())}function d({schemaEnv:g},y){if(y.async&&!g.$async)throw new Error("async keyword in sync schema")}function f(g,y,_){if(_===void 0)throw new Error(`keyword "${y}" failed to compile`);return g.scopeValue("keyword",typeof _=="function"?{ref:_}:{ref:_,code:(0,e.stringify)(_)})}function m(g,y,_=!1){return!y.length||y.some(b=>b==="array"?Array.isArray(g):b==="object"?g&&typeof g=="object"&&!Array.isArray(g):typeof g==b||_&&typeof g>"u")}ai.validSchemaType=m;function p({schema:g,opts:y,self:_,errSchemaPath:b},w,x){if(Array.isArray(w.keyword)?!w.keyword.includes(x):w.keyword!==x)throw new Error("ajv implementation error");const S=w.dependencies;if(S?.some(C=>!Object.prototype.hasOwnProperty.call(g,C)))throw new Error(`parent schema must have dependencies of ${x}: ${S.join(",")}`);if(w.validateSchema&&!w.validateSchema(g[x])){const A=`keyword "${x}" value is invalid at path "${b}": `+_.errorsText(w.validateSchema.errors);if(y.validateSchema==="log")_.logger.error(A);else throw new Error(A)}}return ai.validateKeywordUsage=p,ai}var sa={},PS;function SH(){if(PS)return sa;PS=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.extendSubschemaMode=sa.extendSubschemaData=sa.getSubschema=void 0;const e=bt(),t=jt();function r(o,{keyword:l,schemaProp:u,schema:d,schemaPath:f,errSchemaPath:m,topSchemaRef:p}){if(l!==void 0&&d!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(l!==void 0){const g=o.schema[l];return u===void 0?{schema:g,schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(l)}`,errSchemaPath:`${o.errSchemaPath}/${l}`}:{schema:g[u],schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(l)}${(0,e.getProperty)(u)}`,errSchemaPath:`${o.errSchemaPath}/${l}/${(0,t.escapeFragment)(u)}`}}if(d!==void 0){if(f===void 0||m===void 0||p===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:d,schemaPath:f,topSchemaRef:p,errSchemaPath:m}}throw new Error('either "keyword" or "schema" must be passed')}sa.getSubschema=r;function a(o,l,{dataProp:u,dataPropType:d,data:f,dataTypes:m,propertyName:p}){if(f!==void 0&&u!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:g}=l;if(u!==void 0){const{errorPath:_,dataPathArr:b,opts:w}=l,x=g.let("data",(0,e._)`${l.data}${(0,e.getProperty)(u)}`,!0);y(x),o.errorPath=(0,e.str)`${_}${(0,t.getErrorPath)(u,d,w.jsPropertySyntax)}`,o.parentDataProperty=(0,e._)`${u}`,o.dataPathArr=[...b,o.parentDataProperty]}if(f!==void 0){const _=f instanceof e.Name?f:g.let("data",f,!0);y(_),p!==void 0&&(o.propertyName=p)}m&&(o.dataTypes=m);function y(_){o.data=_,o.dataLevel=l.dataLevel+1,o.dataTypes=[],l.definedProperties=new Set,o.parentData=l.data,o.dataNames=[...l.dataNames,_]}}sa.extendSubschemaData=a;function s(o,{jtdDiscriminator:l,jtdMetadata:u,compositeRule:d,createErrors:f,allErrors:m}){d!==void 0&&(o.compositeRule=d),f!==void 0&&(o.createErrors=f),m!==void 0&&(o.allErrors=m),o.jtdDiscriminator=l,o.jtdMetadata=u}return sa.extendSubschemaMode=s,sa}var nr={},Wy,BS;function JN(){return BS||(BS=1,Wy=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var a,s,o;if(Array.isArray(t)){if(a=t.length,a!=r.length)return!1;for(s=a;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),a=o.length,a!==Object.keys(r).length)return!1;for(s=a;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=a;s--!==0;){var l=o[s];if(!e(t[l],r[l]))return!1}return!0}return t!==t&&r!==r}),Wy}var Qy={exports:{}},HS;function CH(){if(HS)return Qy.exports;HS=1;var e=Qy.exports=function(a,s,o){typeof s=="function"&&(o=s,s={}),o=s.cb||o;var l=typeof o=="function"?o:o.pre||function(){},u=o.post||function(){};t(s,l,u,a,"",a)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(a,s,o,l,u,d,f,m,p,g){if(l&&typeof l=="object"&&!Array.isArray(l)){s(l,u,d,f,m,p,g);for(var y in l){var _=l[y];if(Array.isArray(_)){if(y in e.arrayKeywords)for(var b=0;b<_.length;b++)t(a,s,o,_[b],u+"/"+y+"/"+b,d,u,y,l,b)}else if(y in e.propsKeywords){if(_&&typeof _=="object")for(var w in _)t(a,s,o,_[w],u+"/"+y+"/"+r(w),d,u,y,l,w)}else(y in e.keywords||a.allKeys&&!(y in e.skipKeywords))&&t(a,s,o,_,u+"/"+y,d,u,y,l)}o(l,u,d,f,m,p,g)}}function r(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}return Qy.exports}var US;function tp(){if(US)return nr;US=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.getSchemaRefs=nr.resolveUrl=nr.normalizeId=nr._getFullPath=nr.getFullPath=nr.inlineRef=void 0;const e=jt(),t=JN(),r=CH(),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function s(b,w=!0){return typeof b=="boolean"?!0:w===!0?!l(b):w?u(b)<=w:!1}nr.inlineRef=s;const o=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(b){for(const w in b){if(o.has(w))return!0;const x=b[w];if(Array.isArray(x)&&x.some(l)||typeof x=="object"&&l(x))return!0}return!1}function u(b){let w=0;for(const x in b){if(x==="$ref")return 1/0;if(w++,!a.has(x)&&(typeof b[x]=="object"&&(0,e.eachItem)(b[x],S=>w+=u(S)),w===1/0))return 1/0}return w}function d(b,w="",x){x!==!1&&(w=p(w));const S=b.parse(w);return f(b,S)}nr.getFullPath=d;function f(b,w){return b.serialize(w).split("#")[0]+"#"}nr._getFullPath=f;const m=/#\/?$/;function p(b){return b?b.replace(m,""):""}nr.normalizeId=p;function g(b,w,x){return x=p(x),b.resolve(w,x)}nr.resolveUrl=g;const y=/^[a-z_][-a-z0-9._]*$/i;function _(b,w){if(typeof b=="boolean")return{};const{schemaId:x,uriResolver:S}=this.opts,C=p(b[x]||w),A={"":C},E=d(S,C,!1),j={},T=new Set;return r(b,{allKeys:!0},(V,F,M,O)=>{if(O===void 0)return;const R=E+F;let G=A[O];typeof V[x]=="string"&&(G=H.call(this,V[x])),U.call(this,V.$anchor),U.call(this,V.$dynamicAnchor),A[F]=G;function H(Z){const X=this.opts.uriResolver.resolve;if(Z=p(G?X(G,Z):Z),T.has(Z))throw L(Z);T.add(Z);let Q=this.refs[Z];return typeof Q=="string"&&(Q=this.refs[Q]),typeof Q=="object"?z(V,Q.schema,Z):Z!==p(R)&&(Z[0]==="#"?(z(V,j[Z],Z),j[Z]=V):this.refs[Z]=R),Z}function U(Z){if(typeof Z=="string"){if(!y.test(Z))throw new Error(`invalid anchor "${Z}"`);H.call(this,`#${Z}`)}}}),j;function z(V,F,M){if(F!==void 0&&!t(V,F))throw L(M)}function L(V){return new Error(`reference "${V}" resolves to more than one schema`)}}return nr.getSchemaRefs=_,nr}var FS;function np(){if(FS)return ia;FS=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.getData=ia.KeywordCxt=ia.validateFunctionCode=void 0;const e=wH(),t=um(),r=QN(),a=um(),s=xH(),o=_H(),l=SH(),u=bt(),d=ms(),f=tp(),m=jt(),p=ep();function g(W){if(E(W)&&(T(W),A(W))){w(W);return}y(W,()=>(0,e.topBoolOrEmptySchema)(W))}ia.validateFunctionCode=g;function y({gen:W,validateName:ie,schema:ae,schemaEnv:I,opts:ue},ce){ue.code.es5?W.func(ie,(0,u._)`${d.default.data}, ${d.default.valCxt}`,I.$async,()=>{W.code((0,u._)`"use strict"; ${S(ae,ue)}`),b(W,ue),W.code(ce)}):W.func(ie,(0,u._)`${d.default.data}, ${_(ue)}`,I.$async,()=>W.code(S(ae,ue)).code(ce))}function _(W){return(0,u._)`{${d.default.instancePath}="", ${d.default.parentData}, ${d.default.parentDataProperty}, ${d.default.rootData}=${d.default.data}${W.dynamicRef?(0,u._)`, ${d.default.dynamicAnchors}={}`:u.nil}}={}`}function b(W,ie){W.if(d.default.valCxt,()=>{W.var(d.default.instancePath,(0,u._)`${d.default.valCxt}.${d.default.instancePath}`),W.var(d.default.parentData,(0,u._)`${d.default.valCxt}.${d.default.parentData}`),W.var(d.default.parentDataProperty,(0,u._)`${d.default.valCxt}.${d.default.parentDataProperty}`),W.var(d.default.rootData,(0,u._)`${d.default.valCxt}.${d.default.rootData}`),ie.dynamicRef&&W.var(d.default.dynamicAnchors,(0,u._)`${d.default.valCxt}.${d.default.dynamicAnchors}`)},()=>{W.var(d.default.instancePath,(0,u._)`""`),W.var(d.default.parentData,(0,u._)`undefined`),W.var(d.default.parentDataProperty,(0,u._)`undefined`),W.var(d.default.rootData,d.default.data),ie.dynamicRef&&W.var(d.default.dynamicAnchors,(0,u._)`{}`)})}function w(W){const{schema:ie,opts:ae,gen:I}=W;y(W,()=>{ae.$comment&&ie.$comment&&O(W),V(W),I.let(d.default.vErrors,null),I.let(d.default.errors,0),ae.unevaluated&&x(W),z(W),R(W)})}function x(W){const{gen:ie,validateName:ae}=W;W.evaluated=ie.const("evaluated",(0,u._)`${ae}.evaluated`),ie.if((0,u._)`${W.evaluated}.dynamicProps`,()=>ie.assign((0,u._)`${W.evaluated}.props`,(0,u._)`undefined`)),ie.if((0,u._)`${W.evaluated}.dynamicItems`,()=>ie.assign((0,u._)`${W.evaluated}.items`,(0,u._)`undefined`))}function S(W,ie){const ae=typeof W=="object"&&W[ie.schemaId];return ae&&(ie.code.source||ie.code.process)?(0,u._)`/*# sourceURL=${ae} */`:u.nil}function C(W,ie){if(E(W)&&(T(W),A(W))){j(W,ie);return}(0,e.boolOrEmptySchema)(W,ie)}function A({schema:W,self:ie}){if(typeof W=="boolean")return!W;for(const ae in W)if(ie.RULES.all[ae])return!0;return!1}function E(W){return typeof W.schema!="boolean"}function j(W,ie){const{schema:ae,gen:I,opts:ue}=W;ue.$comment&&ae.$comment&&O(W),F(W),M(W);const ce=I.const("_errs",d.default.errors);z(W,ce),I.var(ie,(0,u._)`${ce} === ${d.default.errors}`)}function T(W){(0,m.checkUnknownRules)(W),L(W)}function z(W,ie){if(W.opts.jtd)return H(W,[],!1,ie);const ae=(0,t.getSchemaTypes)(W.schema),I=(0,t.coerceAndCheckDataType)(W,ae);H(W,ae,!I,ie)}function L(W){const{schema:ie,errSchemaPath:ae,opts:I,self:ue}=W;ie.$ref&&I.ignoreKeywordsWithRef&&(0,m.schemaHasRulesButRef)(ie,ue.RULES)&&ue.logger.warn(`$ref: keywords ignored in schema at path "${ae}"`)}function V(W){const{schema:ie,opts:ae}=W;ie.default!==void 0&&ae.useDefaults&&ae.strictSchema&&(0,m.checkStrictMode)(W,"default is ignored in the schema root")}function F(W){const ie=W.schema[W.opts.schemaId];ie&&(W.baseId=(0,f.resolveUrl)(W.opts.uriResolver,W.baseId,ie))}function M(W){if(W.schema.$async&&!W.schemaEnv.$async)throw new Error("async schema in sync schema")}function O({gen:W,schemaEnv:ie,schema:ae,errSchemaPath:I,opts:ue}){const ce=ae.$comment;if(ue.$comment===!0)W.code((0,u._)`${d.default.self}.logger.log(${ce})`);else if(typeof ue.$comment=="function"){const re=(0,u.str)`${I}/$comment`,ne=W.scopeValue("root",{ref:ie.root});W.code((0,u._)`${d.default.self}.opts.$comment(${ce}, ${re}, ${ne}.schema)`)}}function R(W){const{gen:ie,schemaEnv:ae,validateName:I,ValidationError:ue,opts:ce}=W;ae.$async?ie.if((0,u._)`${d.default.errors} === 0`,()=>ie.return(d.default.data),()=>ie.throw((0,u._)`new ${ue}(${d.default.vErrors})`)):(ie.assign((0,u._)`${I}.errors`,d.default.vErrors),ce.unevaluated&&G(W),ie.return((0,u._)`${d.default.errors} === 0`))}function G({gen:W,evaluated:ie,props:ae,items:I}){ae instanceof u.Name&&W.assign((0,u._)`${ie}.props`,ae),I instanceof u.Name&&W.assign((0,u._)`${ie}.items`,I)}function H(W,ie,ae,I){const{gen:ue,schema:ce,data:re,allErrors:ne,opts:fe,self:Ce}=W,{RULES:ke}=Ce;if(ce.$ref&&(fe.ignoreKeywordsWithRef||!(0,m.schemaHasRulesButRef)(ce,ke))){ue.block(()=>le(W,"$ref",ke.all.$ref.definition));return}fe.jtd||Z(W,ie),ue.block(()=>{for(const Re of ke.rules)ye(Re);ye(ke.post)});function ye(Re){(0,r.shouldUseGroup)(ce,Re)&&(Re.type?(ue.if((0,a.checkDataType)(Re.type,re,fe.strictNumbers)),U(W,Re),ie.length===1&&ie[0]===Re.type&&ae&&(ue.else(),(0,a.reportTypeError)(W)),ue.endIf()):U(W,Re),ne||ue.if((0,u._)`${d.default.errors} === ${I||0}`))}}function U(W,ie){const{gen:ae,schema:I,opts:{useDefaults:ue}}=W;ue&&(0,s.assignDefaults)(W,ie.type),ae.block(()=>{for(const ce of ie.rules)(0,r.shouldUseRule)(I,ce)&&le(W,ce.keyword,ce.definition,ie.type)})}function Z(W,ie){W.schemaEnv.meta||!W.opts.strictTypes||(X(W,ie),W.opts.allowUnionTypes||Q(W,ie),$(W,W.dataTypes))}function X(W,ie){if(ie.length){if(!W.dataTypes.length){W.dataTypes=ie;return}ie.forEach(ae=>{K(W.dataTypes,ae)||q(W,`type "${ae}" not allowed by context "${W.dataTypes.join(",")}"`)}),P(W,ie)}}function Q(W,ie){ie.length>1&&!(ie.length===2&&ie.includes("null"))&&q(W,"use allowUnionTypes to allow union type keyword")}function $(W,ie){const ae=W.self.RULES.all;for(const I in ae){const ue=ae[I];if(typeof ue=="object"&&(0,r.shouldUseRule)(W.schema,ue)){const{type:ce}=ue.definition;ce.length&&!ce.some(re=>B(ie,re))&&q(W,`missing type "${ce.join(",")}" for keyword "${I}"`)}}}function B(W,ie){return W.includes(ie)||ie==="number"&&W.includes("integer")}function K(W,ie){return W.includes(ie)||ie==="integer"&&W.includes("number")}function P(W,ie){const ae=[];for(const I of W.dataTypes)K(ie,I)?ae.push(I):ie.includes("integer")&&I==="number"&&ae.push("integer");W.dataTypes=ae}function q(W,ie){const ae=W.schemaEnv.baseId+W.errSchemaPath;ie+=` at "${ae}" (strictTypes)`,(0,m.checkStrictMode)(W,ie,W.opts.strictTypes)}class J{constructor(ie,ae,I){if((0,o.validateKeywordUsage)(ie,ae,I),this.gen=ie.gen,this.allErrors=ie.allErrors,this.keyword=I,this.data=ie.data,this.schema=ie.schema[I],this.$data=ae.$data&&ie.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,m.schemaRefOrVal)(ie,this.schema,I,this.$data),this.schemaType=ae.schemaType,this.parentSchema=ie.schema,this.params={},this.it=ie,this.def=ae,this.$data)this.schemaCode=ie.gen.const("vSchema",ve(this.$data,ie));else if(this.schemaCode=this.schemaValue,!(0,o.validSchemaType)(this.schema,ae.schemaType,ae.allowUndefined))throw new Error(`${I} value must be ${JSON.stringify(ae.schemaType)}`);("code"in ae?ae.trackErrors:ae.errors!==!1)&&(this.errsCount=ie.gen.const("_errs",d.default.errors))}result(ie,ae,I){this.failResult((0,u.not)(ie),ae,I)}failResult(ie,ae,I){this.gen.if(ie),I?I():this.error(),ae?(this.gen.else(),ae(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(ie,ae){this.failResult((0,u.not)(ie),void 0,ae)}fail(ie){if(ie===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(ie),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(ie){if(!this.$data)return this.fail(ie);const{schemaCode:ae}=this;this.fail((0,u._)`${ae} !== undefined && (${(0,u.or)(this.invalid$data(),ie)})`)}error(ie,ae,I){if(ae){this.setParams(ae),this._error(ie,I),this.setParams({});return}this._error(ie,I)}_error(ie,ae){(ie?p.reportExtraError:p.reportError)(this,this.def.error,ae)}$dataError(){(0,p.reportError)(this,this.def.$dataError||p.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,p.resetErrorsCount)(this.gen,this.errsCount)}ok(ie){this.allErrors||this.gen.if(ie)}setParams(ie,ae){ae?Object.assign(this.params,ie):this.params=ie}block$data(ie,ae,I=u.nil){this.gen.block(()=>{this.check$data(ie,I),ae()})}check$data(ie=u.nil,ae=u.nil){if(!this.$data)return;const{gen:I,schemaCode:ue,schemaType:ce,def:re}=this;I.if((0,u.or)((0,u._)`${ue} === undefined`,ae)),ie!==u.nil&&I.assign(ie,!0),(ce.length||re.validateSchema)&&(I.elseIf(this.invalid$data()),this.$dataError(),ie!==u.nil&&I.assign(ie,!1)),I.else()}invalid$data(){const{gen:ie,schemaCode:ae,schemaType:I,def:ue,it:ce}=this;return(0,u.or)(re(),ne());function re(){if(I.length){if(!(ae instanceof u.Name))throw new Error("ajv implementation error");const fe=Array.isArray(I)?I:[I];return(0,u._)`${(0,a.checkDataTypes)(fe,ae,ce.opts.strictNumbers,a.DataType.Wrong)}`}return u.nil}function ne(){if(ue.validateSchema){const fe=ie.scopeValue("validate$data",{ref:ue.validateSchema});return(0,u._)`!${fe}(${ae})`}return u.nil}}subschema(ie,ae){const I=(0,l.getSubschema)(this.it,ie);(0,l.extendSubschemaData)(I,this.it,ie),(0,l.extendSubschemaMode)(I,ie);const ue={...this.it,...I,items:void 0,props:void 0};return C(ue,ae),ue}mergeEvaluated(ie,ae){const{it:I,gen:ue}=this;I.opts.unevaluated&&(I.props!==!0&&ie.props!==void 0&&(I.props=m.mergeEvaluated.props(ue,ie.props,I.props,ae)),I.items!==!0&&ie.items!==void 0&&(I.items=m.mergeEvaluated.items(ue,ie.items,I.items,ae)))}mergeValidEvaluated(ie,ae){const{it:I,gen:ue}=this;if(I.opts.unevaluated&&(I.props!==!0||I.items!==!0))return ue.if(ae,()=>this.mergeEvaluated(ie,u.Name)),!0}}ia.KeywordCxt=J;function le(W,ie,ae,I){const ue=new J(W,ae,ie);"code"in ae?ae.code(ue,I):ue.$data&&ae.validate?(0,o.funcKeywordCode)(ue,ae):"macro"in ae?(0,o.macroKeywordCode)(ue,ae):(ae.compile||ae.validate)&&(0,o.funcKeywordCode)(ue,ae)}const oe=/^\/(?:[^~]|~0|~1)*$/,he=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ve(W,{dataLevel:ie,dataNames:ae,dataPathArr:I}){let ue,ce;if(W==="")return d.default.rootData;if(W[0]==="/"){if(!oe.test(W))throw new Error(`Invalid JSON-pointer: ${W}`);ue=W,ce=d.default.rootData}else{const Ce=he.exec(W);if(!Ce)throw new Error(`Invalid JSON-pointer: ${W}`);const ke=+Ce[1];if(ue=Ce[2],ue==="#"){if(ke>=ie)throw new Error(fe("property/index",ke));return I[ie-ke]}if(ke>ie)throw new Error(fe("data",ke));if(ce=ae[ie-ke],!ue)return ce}let re=ce;const ne=ue.split("/");for(const Ce of ne)Ce&&(ce=(0,u._)`${ce}${(0,u.getProperty)((0,m.unescapeJsonPointer)(Ce))}`,re=(0,u._)`${re} && ${ce}`);return re;function fe(Ce,ke){return`Cannot access ${Ce} ${ke} levels up, current level is ${ie}`}}return ia.getData=ve,ia}var Tf={},qS;function Zv(){if(qS)return Tf;qS=1,Object.defineProperty(Tf,"__esModule",{value:!0});class e extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return Tf.default=e,Tf}var Df={},VS;function rp(){if(VS)return Df;VS=1,Object.defineProperty(Df,"__esModule",{value:!0});const e=tp();class t extends Error{constructor(a,s,o,l){super(l||`can't resolve reference ${o} from id ${s}`),this.missingRef=(0,e.resolveUrl)(a,s,o),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(a,this.missingRef))}}return Df.default=t,Df}var Dr={},YS;function Wv(){if(YS)return Dr;YS=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.resolveSchema=Dr.getCompilingSchema=Dr.resolveRef=Dr.compileSchema=Dr.SchemaEnv=void 0;const e=bt(),t=Zv(),r=ms(),a=tp(),s=jt(),o=np();class l{constructor(x){var S;this.refs={},this.dynamicAnchors={};let C;typeof x.schema=="object"&&(C=x.schema),this.schema=x.schema,this.schemaId=x.schemaId,this.root=x.root||this,this.baseId=(S=x.baseId)!==null&&S!==void 0?S:(0,a.normalizeId)(C?.[x.schemaId||"$id"]),this.schemaPath=x.schemaPath,this.localRefs=x.localRefs,this.meta=x.meta,this.$async=C?.$async,this.refs={}}}Dr.SchemaEnv=l;function u(w){const x=m.call(this,w);if(x)return x;const S=(0,a.getFullPath)(this.opts.uriResolver,w.root.baseId),{es5:C,lines:A}=this.opts.code,{ownProperties:E}=this.opts,j=new e.CodeGen(this.scope,{es5:C,lines:A,ownProperties:E});let T;w.$async&&(T=j.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const z=j.scopeName("validate");w.validateName=z;const L={gen:j,allErrors:this.opts.allErrors,data:r.default.data,parentData:r.default.parentData,parentDataProperty:r.default.parentDataProperty,dataNames:[r.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:j.scopeValue("schema",this.opts.code.source===!0?{ref:w.schema,code:(0,e.stringify)(w.schema)}:{ref:w.schema}),validateName:z,ValidationError:T,schema:w.schema,schemaEnv:w,rootId:S,baseId:w.baseId||S,schemaPath:e.nil,errSchemaPath:w.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let V;try{this._compilations.add(w),(0,o.validateFunctionCode)(L),j.optimize(this.opts.code.optimize);const F=j.toString();V=`${j.scopeRefs(r.default.scope)}return ${F}`,this.opts.code.process&&(V=this.opts.code.process(V,w));const O=new Function(`${r.default.self}`,`${r.default.scope}`,V)(this,this.scope.get());if(this.scope.value(z,{ref:O}),O.errors=null,O.schema=w.schema,O.schemaEnv=w,w.$async&&(O.$async=!0),this.opts.code.source===!0&&(O.source={validateName:z,validateCode:F,scopeValues:j._values}),this.opts.unevaluated){const{props:R,items:G}=L;O.evaluated={props:R instanceof e.Name?void 0:R,items:G instanceof e.Name?void 0:G,dynamicProps:R instanceof e.Name,dynamicItems:G instanceof e.Name},O.source&&(O.source.evaluated=(0,e.stringify)(O.evaluated))}return w.validate=O,w}catch(F){throw delete w.validate,delete w.validateName,V&&this.logger.error("Error compiling schema, function code:",V),F}finally{this._compilations.delete(w)}}Dr.compileSchema=u;function d(w,x,S){var C;S=(0,a.resolveUrl)(this.opts.uriResolver,x,S);const A=w.refs[S];if(A)return A;let E=g.call(this,w,S);if(E===void 0){const j=(C=w.localRefs)===null||C===void 0?void 0:C[S],{schemaId:T}=this.opts;j&&(E=new l({schema:j,schemaId:T,root:w,baseId:x}))}if(E!==void 0)return w.refs[S]=f.call(this,E)}Dr.resolveRef=d;function f(w){return(0,a.inlineRef)(w.schema,this.opts.inlineRefs)?w.schema:w.validate?w:u.call(this,w)}function m(w){for(const x of this._compilations)if(p(x,w))return x}Dr.getCompilingSchema=m;function p(w,x){return w.schema===x.schema&&w.root===x.root&&w.baseId===x.baseId}function g(w,x){let S;for(;typeof(S=this.refs[x])=="string";)x=S;return S||this.schemas[x]||y.call(this,w,x)}function y(w,x){const S=this.opts.uriResolver.parse(x),C=(0,a._getFullPath)(this.opts.uriResolver,S);let A=(0,a.getFullPath)(this.opts.uriResolver,w.baseId,void 0);if(Object.keys(w.schema).length>0&&C===A)return b.call(this,S,w);const E=(0,a.normalizeId)(C),j=this.refs[E]||this.schemas[E];if(typeof j=="string"){const T=y.call(this,w,j);return typeof T?.schema!="object"?void 0:b.call(this,S,T)}if(typeof j?.schema=="object"){if(j.validate||u.call(this,j),E===(0,a.normalizeId)(x)){const{schema:T}=j,{schemaId:z}=this.opts,L=T[z];return L&&(A=(0,a.resolveUrl)(this.opts.uriResolver,A,L)),new l({schema:T,schemaId:z,root:w,baseId:A})}return b.call(this,S,j)}}Dr.resolveSchema=y;const _=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function b(w,{baseId:x,schema:S,root:C}){var A;if(((A=w.fragment)===null||A===void 0?void 0:A[0])!=="/")return;for(const T of w.fragment.slice(1).split("/")){if(typeof S=="boolean")return;const z=S[(0,s.unescapeFragment)(T)];if(z===void 0)return;S=z;const L=typeof S=="object"&&S[this.opts.schemaId];!_.has(T)&&L&&(x=(0,a.resolveUrl)(this.opts.uriResolver,x,L))}let E;if(typeof S!="boolean"&&S.$ref&&!(0,s.schemaHasRulesButRef)(S,this.RULES)){const T=(0,a.resolveUrl)(this.opts.uriResolver,x,S.$ref);E=y.call(this,C,T)}const{schemaId:j}=this.opts;if(E=E||new l({schema:S,schemaId:j,root:C,baseId:x}),E.schema!==E.root.schema)return E}return Dr}const EH="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",kH="Meta-schema for $data reference (JSON AnySchema extension proposal)",NH="object",AH=["$data"],jH={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},TH=!1,DH={$id:EH,description:kH,type:NH,required:AH,properties:jH,additionalProperties:TH};var Rf={},Hc={exports:{}},Jy,GS;function eA(){if(GS)return Jy;GS=1;const e=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),t=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function r(g){let y="",_=0,b=0;for(b=0;b<g.length;b++)if(_=g[b].charCodeAt(0),_!==48){if(!(_>=48&&_<=57||_>=65&&_<=70||_>=97&&_<=102))return"";y+=g[b];break}for(b+=1;b<g.length;b++){if(_=g[b].charCodeAt(0),!(_>=48&&_<=57||_>=65&&_<=70||_>=97&&_<=102))return"";y+=g[b]}return y}const a=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function s(g){return g.length=0,!0}function o(g,y,_){if(g.length){const b=r(g);if(b!=="")y.push(b);else return _.error=!0,!1;g.length=0}return!0}function l(g){let y=0;const _={error:!1,address:"",zone:""},b=[],w=[];let x=!1,S=!1,C=o;for(let A=0;A<g.length;A++){const E=g[A];if(!(E==="["||E==="]"))if(E===":"){if(x===!0&&(S=!0),!C(w,b,_))break;if(++y>7){_.error=!0;break}A>0&&g[A-1]===":"&&(x=!0),b.push(":");continue}else if(E==="%"){if(!C(w,b,_))break;C=s}else{w.push(E);continue}}return w.length&&(C===s?_.zone=w.join(""):S?b.push(w.join("")):b.push(r(w))),_.address=b.join(""),_}function u(g){if(d(g,":")<2)return{host:g,isIPV6:!1};const y=l(g);if(y.error)return{host:g,isIPV6:!1};{let _=y.address,b=y.address;return y.zone&&(_+="%"+y.zone,b+="%25"+y.zone),{host:_,isIPV6:!0,escapedHost:b}}}function d(g,y){let _=0;for(let b=0;b<g.length;b++)g[b]===y&&_++;return _}function f(g){let y=g;const _=[];let b=-1,w=0;for(;w=y.length;){if(w===1){if(y===".")break;if(y==="/"){_.push("/");break}else{_.push(y);break}}else if(w===2){if(y[0]==="."){if(y[1]===".")break;if(y[1]==="/"){y=y.slice(2);continue}}else if(y[0]==="/"&&(y[1]==="."||y[1]==="/")){_.push("/");break}}else if(w===3&&y==="/.."){_.length!==0&&_.pop(),_.push("/");break}if(y[0]==="."){if(y[1]==="."){if(y[2]==="/"){y=y.slice(3);continue}}else if(y[1]==="/"){y=y.slice(2);continue}}else if(y[0]==="/"&&y[1]==="."){if(y[2]==="/"){y=y.slice(2);continue}else if(y[2]==="."&&y[3]==="/"){y=y.slice(3),_.length!==0&&_.pop();continue}}if((b=y.indexOf("/",1))===-1){_.push(y);break}else _.push(y.slice(0,b)),y=y.slice(b)}return _.join("")}function m(g,y){const _=y!==!0?escape:unescape;return g.scheme!==void 0&&(g.scheme=_(g.scheme)),g.userinfo!==void 0&&(g.userinfo=_(g.userinfo)),g.host!==void 0&&(g.host=_(g.host)),g.path!==void 0&&(g.path=_(g.path)),g.query!==void 0&&(g.query=_(g.query)),g.fragment!==void 0&&(g.fragment=_(g.fragment)),g}function p(g){const y=[];if(g.userinfo!==void 0&&(y.push(g.userinfo),y.push("@")),g.host!==void 0){let _=unescape(g.host);if(!t(_)){const b=u(_);b.isIPV6===!0?_=`[${b.escapedHost}]`:_=g.host}y.push(_)}return(typeof g.port=="number"||typeof g.port=="string")&&(y.push(":"),y.push(String(g.port))),y.length?y.join(""):void 0}return Jy={nonSimpleDomain:a,recomposeAuthority:p,normalizeComponentEncoding:m,removeDotSegments:f,isIPv4:t,isUUID:e,normalizeIPv6:u,stringArrayToHexStripped:r},Jy}var e0,KS;function RH(){if(KS)return e0;KS=1;const{isUUID:e}=eA(),t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,r=["http","https","ws","wss","urn","urn:uuid"];function a(E){return r.indexOf(E)!==-1}function s(E){return E.secure===!0?!0:E.secure===!1?!1:E.scheme?E.scheme.length===3&&(E.scheme[0]==="w"||E.scheme[0]==="W")&&(E.scheme[1]==="s"||E.scheme[1]==="S")&&(E.scheme[2]==="s"||E.scheme[2]==="S"):!1}function o(E){return E.host||(E.error=E.error||"HTTP URIs must have a host."),E}function l(E){const j=String(E.scheme).toLowerCase()==="https";return(E.port===(j?443:80)||E.port==="")&&(E.port=void 0),E.path||(E.path="/"),E}function u(E){return E.secure=s(E),E.resourceName=(E.path||"/")+(E.query?"?"+E.query:""),E.path=void 0,E.query=void 0,E}function d(E){if((E.port===(s(E)?443:80)||E.port==="")&&(E.port=void 0),typeof E.secure=="boolean"&&(E.scheme=E.secure?"wss":"ws",E.secure=void 0),E.resourceName){const[j,T]=E.resourceName.split("?");E.path=j&&j!=="/"?j:void 0,E.query=T,E.resourceName=void 0}return E.fragment=void 0,E}function f(E,j){if(!E.path)return E.error="URN can not be parsed",E;const T=E.path.match(t);if(T){const z=j.scheme||E.scheme||"urn";E.nid=T[1].toLowerCase(),E.nss=T[2];const L=`${z}:${j.nid||E.nid}`,V=A(L);E.path=void 0,V&&(E=V.parse(E,j))}else E.error=E.error||"URN can not be parsed.";return E}function m(E,j){if(E.nid===void 0)throw new Error("URN without nid cannot be serialized");const T=j.scheme||E.scheme||"urn",z=E.nid.toLowerCase(),L=`${T}:${j.nid||z}`,V=A(L);V&&(E=V.serialize(E,j));const F=E,M=E.nss;return F.path=`${z||j.nid}:${M}`,j.skipEscape=!0,F}function p(E,j){const T=E;return T.uuid=T.nss,T.nss=void 0,!j.tolerant&&(!T.uuid||!e(T.uuid))&&(T.error=T.error||"UUID is not valid."),T}function g(E){const j=E;return j.nss=(E.uuid||"").toLowerCase(),j}const y={scheme:"http",domainHost:!0,parse:o,serialize:l},_={scheme:"https",domainHost:y.domainHost,parse:o,serialize:l},b={scheme:"ws",domainHost:!0,parse:u,serialize:d},w={scheme:"wss",domainHost:b.domainHost,parse:b.parse,serialize:b.serialize},C={http:y,https:_,ws:b,wss:w,urn:{scheme:"urn",parse:f,serialize:m,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:p,serialize:g,skipNormalize:!0}};Object.setPrototypeOf(C,null);function A(E){return E&&(C[E]||C[E.toLowerCase()])||void 0}return e0={wsIsSecure:s,SCHEMES:C,isValidSchemeName:a,getSchemeHandler:A},e0}var XS;function $H(){if(XS)return Hc.exports;XS=1;const{normalizeIPv6:e,removeDotSegments:t,recomposeAuthority:r,normalizeComponentEncoding:a,isIPv4:s,nonSimpleDomain:o}=eA(),{SCHEMES:l,getSchemeHandler:u}=RH();function d(w,x){return typeof w=="string"?w=g(_(w,x),x):typeof w=="object"&&(w=_(g(w,x),x)),w}function f(w,x,S){const C=S?Object.assign({scheme:"null"},S):{scheme:"null"},A=m(_(w,C),_(x,C),C,!0);return C.skipEscape=!0,g(A,C)}function m(w,x,S,C){const A={};return C||(w=_(g(w,S),S),x=_(g(x,S),S)),S=S||{},!S.tolerant&&x.scheme?(A.scheme=x.scheme,A.userinfo=x.userinfo,A.host=x.host,A.port=x.port,A.path=t(x.path||""),A.query=x.query):(x.userinfo!==void 0||x.host!==void 0||x.port!==void 0?(A.userinfo=x.userinfo,A.host=x.host,A.port=x.port,A.path=t(x.path||""),A.query=x.query):(x.path?(x.path[0]==="/"?A.path=t(x.path):((w.userinfo!==void 0||w.host!==void 0||w.port!==void 0)&&!w.path?A.path="/"+x.path:w.path?A.path=w.path.slice(0,w.path.lastIndexOf("/")+1)+x.path:A.path=x.path,A.path=t(A.path)),A.query=x.query):(A.path=w.path,x.query!==void 0?A.query=x.query:A.query=w.query),A.userinfo=w.userinfo,A.host=w.host,A.port=w.port),A.scheme=w.scheme),A.fragment=x.fragment,A}function p(w,x,S){return typeof w=="string"?(w=unescape(w),w=g(a(_(w,S),!0),{...S,skipEscape:!0})):typeof w=="object"&&(w=g(a(w,!0),{...S,skipEscape:!0})),typeof x=="string"?(x=unescape(x),x=g(a(_(x,S),!0),{...S,skipEscape:!0})):typeof x=="object"&&(x=g(a(x,!0),{...S,skipEscape:!0})),w.toLowerCase()===x.toLowerCase()}function g(w,x){const S={host:w.host,scheme:w.scheme,userinfo:w.userinfo,port:w.port,path:w.path,query:w.query,nid:w.nid,nss:w.nss,uuid:w.uuid,fragment:w.fragment,reference:w.reference,resourceName:w.resourceName,secure:w.secure,error:""},C=Object.assign({},x),A=[],E=u(C.scheme||S.scheme);E&&E.serialize&&E.serialize(S,C),S.path!==void 0&&(C.skipEscape?S.path=unescape(S.path):(S.path=escape(S.path),S.scheme!==void 0&&(S.path=S.path.split("%3A").join(":")))),C.reference!=="suffix"&&S.scheme&&A.push(S.scheme,":");const j=r(S);if(j!==void 0&&(C.reference!=="suffix"&&A.push("//"),A.push(j),S.path&&S.path[0]!=="/"&&A.push("/")),S.path!==void 0){let T=S.path;!C.absolutePath&&(!E||!E.absolutePath)&&(T=t(T)),j===void 0&&T[0]==="/"&&T[1]==="/"&&(T="/%2F"+T.slice(2)),A.push(T)}return S.query!==void 0&&A.push("?",S.query),S.fragment!==void 0&&A.push("#",S.fragment),A.join("")}const y=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function _(w,x){const S=Object.assign({},x),C={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let A=!1;S.reference==="suffix"&&(S.scheme?w=S.scheme+":"+w:w="//"+w);const E=w.match(y);if(E){if(C.scheme=E[1],C.userinfo=E[3],C.host=E[4],C.port=parseInt(E[5],10),C.path=E[6]||"",C.query=E[7],C.fragment=E[8],isNaN(C.port)&&(C.port=E[5]),C.host)if(s(C.host)===!1){const z=e(C.host);C.host=z.host.toLowerCase(),A=z.isIPV6}else A=!0;C.scheme===void 0&&C.userinfo===void 0&&C.host===void 0&&C.port===void 0&&C.query===void 0&&!C.path?C.reference="same-document":C.scheme===void 0?C.reference="relative":C.fragment===void 0?C.reference="absolute":C.reference="uri",S.reference&&S.reference!=="suffix"&&S.reference!==C.reference&&(C.error=C.error||"URI is not a "+S.reference+" reference.");const j=u(S.scheme||C.scheme);if(!S.unicodeSupport&&(!j||!j.unicodeSupport)&&C.host&&(S.domainHost||j&&j.domainHost)&&A===!1&&o(C.host))try{C.host=URL.domainToASCII(C.host.toLowerCase())}catch(T){C.error=C.error||"Host's domain name can not be converted to ASCII: "+T}(!j||j&&!j.skipNormalize)&&(w.indexOf("%")!==-1&&(C.scheme!==void 0&&(C.scheme=unescape(C.scheme)),C.host!==void 0&&(C.host=unescape(C.host))),C.path&&(C.path=escape(unescape(C.path))),C.fragment&&(C.fragment=encodeURI(decodeURIComponent(C.fragment)))),j&&j.parse&&j.parse(C,S)}else C.error=C.error||"URI can not be parsed.";return C}const b={SCHEMES:l,normalize:d,resolve:f,resolveComponent:m,equal:p,serialize:g,parse:_};return Hc.exports=b,Hc.exports.default=b,Hc.exports.fastUri=b,Hc.exports}var ZS;function MH(){if(ZS)return Rf;ZS=1,Object.defineProperty(Rf,"__esModule",{value:!0});const e=$H();return e.code='require("ajv/dist/runtime/uri").default',Rf.default=e,Rf}var WS;function OH(){return WS||(WS=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=np();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=bt();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const a=Zv(),s=rp(),o=WN(),l=Wv(),u=bt(),d=tp(),f=um(),m=jt(),p=DH,g=MH(),y=(Q,$)=>new RegExp(Q,$);y.code="new RegExp";const _=["removeAdditional","useDefaults","coerceTypes"],b=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),w={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},x={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},S=200;function C(Q){var $,B,K,P,q,J,le,oe,he,ve,W,ie,ae,I,ue,ce,re,ne,fe,Ce,ke,ye,Re,Pe,Le;const Fe=Q.strict,Ue=($=Q.code)===null||$===void 0?void 0:$.optimize,Ne=Ue===!0||Ue===void 0?1:Ue||0,$e=(K=(B=Q.code)===null||B===void 0?void 0:B.regExp)!==null&&K!==void 0?K:y,Ae=(P=Q.uriResolver)!==null&&P!==void 0?P:g.default;return{strictSchema:(J=(q=Q.strictSchema)!==null&&q!==void 0?q:Fe)!==null&&J!==void 0?J:!0,strictNumbers:(oe=(le=Q.strictNumbers)!==null&&le!==void 0?le:Fe)!==null&&oe!==void 0?oe:!0,strictTypes:(ve=(he=Q.strictTypes)!==null&&he!==void 0?he:Fe)!==null&&ve!==void 0?ve:"log",strictTuples:(ie=(W=Q.strictTuples)!==null&&W!==void 0?W:Fe)!==null&&ie!==void 0?ie:"log",strictRequired:(I=(ae=Q.strictRequired)!==null&&ae!==void 0?ae:Fe)!==null&&I!==void 0?I:!1,code:Q.code?{...Q.code,optimize:Ne,regExp:$e}:{optimize:Ne,regExp:$e},loopRequired:(ue=Q.loopRequired)!==null&&ue!==void 0?ue:S,loopEnum:(ce=Q.loopEnum)!==null&&ce!==void 0?ce:S,meta:(re=Q.meta)!==null&&re!==void 0?re:!0,messages:(ne=Q.messages)!==null&&ne!==void 0?ne:!0,inlineRefs:(fe=Q.inlineRefs)!==null&&fe!==void 0?fe:!0,schemaId:(Ce=Q.schemaId)!==null&&Ce!==void 0?Ce:"$id",addUsedSchema:(ke=Q.addUsedSchema)!==null&&ke!==void 0?ke:!0,validateSchema:(ye=Q.validateSchema)!==null&&ye!==void 0?ye:!0,validateFormats:(Re=Q.validateFormats)!==null&&Re!==void 0?Re:!0,unicodeRegExp:(Pe=Q.unicodeRegExp)!==null&&Pe!==void 0?Pe:!0,int32range:(Le=Q.int32range)!==null&&Le!==void 0?Le:!0,uriResolver:Ae}}class A{constructor($={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,$=this.opts={...$,...C($)};const{es5:B,lines:K}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:b,es5:B,lines:K}),this.logger=M($.logger);const P=$.validateFormats;$.validateFormats=!1,this.RULES=(0,o.getRules)(),E.call(this,w,$,"NOT SUPPORTED"),E.call(this,x,$,"DEPRECATED","warn"),this._metaOpts=V.call(this),$.formats&&z.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),$.keywords&&L.call(this,$.keywords),typeof $.meta=="object"&&this.addMetaSchema($.meta),T.call(this),$.validateFormats=P}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:$,meta:B,schemaId:K}=this.opts;let P=p;K==="id"&&(P={...p},P.id=P.$id,delete P.$id),B&&$&&this.addMetaSchema(P,P[K],!1)}defaultMeta(){const{meta:$,schemaId:B}=this.opts;return this.opts.defaultMeta=typeof $=="object"?$[B]||$:void 0}validate($,B){let K;if(typeof $=="string"){if(K=this.getSchema($),!K)throw new Error(`no schema with key or ref "${$}"`)}else K=this.compile($);const P=K(B);return"$async"in K||(this.errors=K.errors),P}compile($,B){const K=this._addSchema($,B);return K.validate||this._compileSchemaEnv(K)}compileAsync($,B){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:K}=this.opts;return P.call(this,$,B);async function P(ve,W){await q.call(this,ve.$schema);const ie=this._addSchema(ve,W);return ie.validate||J.call(this,ie)}async function q(ve){ve&&!this.getSchema(ve)&&await P.call(this,{$ref:ve},!0)}async function J(ve){try{return this._compileSchemaEnv(ve)}catch(W){if(!(W instanceof s.default))throw W;return le.call(this,W),await oe.call(this,W.missingSchema),J.call(this,ve)}}function le({missingSchema:ve,missingRef:W}){if(this.refs[ve])throw new Error(`AnySchema ${ve} is loaded but ${W} cannot be resolved`)}async function oe(ve){const W=await he.call(this,ve);this.refs[ve]||await q.call(this,W.$schema),this.refs[ve]||this.addSchema(W,ve,B)}async function he(ve){const W=this._loading[ve];if(W)return W;try{return await(this._loading[ve]=K(ve))}finally{delete this._loading[ve]}}}addSchema($,B,K,P=this.opts.validateSchema){if(Array.isArray($)){for(const J of $)this.addSchema(J,void 0,K,P);return this}let q;if(typeof $=="object"){const{schemaId:J}=this.opts;if(q=$[J],q!==void 0&&typeof q!="string")throw new Error(`schema ${J} must be string`)}return B=(0,d.normalizeId)(B||q),this._checkUnique(B),this.schemas[B]=this._addSchema($,K,B,P,!0),this}addMetaSchema($,B,K=this.opts.validateSchema){return this.addSchema($,B,!0,K),this}validateSchema($,B){if(typeof $=="boolean")return!0;let K;if(K=$.$schema,K!==void 0&&typeof K!="string")throw new Error("$schema must be a string");if(K=K||this.opts.defaultMeta||this.defaultMeta(),!K)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const P=this.validate(K,$);if(!P&&B){const q="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(q);else throw new Error(q)}return P}getSchema($){let B;for(;typeof(B=j.call(this,$))=="string";)$=B;if(B===void 0){const{schemaId:K}=this.opts,P=new l.SchemaEnv({schema:{},schemaId:K});if(B=l.resolveSchema.call(this,P,$),!B)return;this.refs[$]=B}return B.validate||this._compileSchemaEnv(B)}removeSchema($){if($ instanceof RegExp)return this._removeAllSchemas(this.schemas,$),this._removeAllSchemas(this.refs,$),this;switch(typeof $){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const B=j.call(this,$);return typeof B=="object"&&this._cache.delete(B.schema),delete this.schemas[$],delete this.refs[$],this}case"object":{const B=$;this._cache.delete(B);let K=$[this.opts.schemaId];return K&&(K=(0,d.normalizeId)(K),delete this.schemas[K],delete this.refs[K]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary($){for(const B of $)this.addKeyword(B);return this}addKeyword($,B){let K;if(typeof $=="string")K=$,typeof B=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),B.keyword=K);else if(typeof $=="object"&&B===void 0){if(B=$,K=B.keyword,Array.isArray(K)&&!K.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(R.call(this,K,B),!B)return(0,m.eachItem)(K,q=>G.call(this,q)),this;U.call(this,B);const P={...B,type:(0,f.getJSONTypes)(B.type),schemaType:(0,f.getJSONTypes)(B.schemaType)};return(0,m.eachItem)(K,P.type.length===0?q=>G.call(this,q,P):q=>P.type.forEach(J=>G.call(this,q,P,J))),this}getKeyword($){const B=this.RULES.all[$];return typeof B=="object"?B.definition:!!B}removeKeyword($){const{RULES:B}=this;delete B.keywords[$],delete B.all[$];for(const K of B.rules){const P=K.rules.findIndex(q=>q.keyword===$);P>=0&&K.rules.splice(P,1)}return this}addFormat($,B){return typeof B=="string"&&(B=new RegExp(B)),this.formats[$]=B,this}errorsText($=this.errors,{separator:B=", ",dataVar:K="data"}={}){return!$||$.length===0?"No errors":$.map(P=>`${K}${P.instancePath} ${P.message}`).reduce((P,q)=>P+B+q)}$dataMetaSchema($,B){const K=this.RULES.all;$=JSON.parse(JSON.stringify($));for(const P of B){const q=P.split("/").slice(1);let J=$;for(const le of q)J=J[le];for(const le in K){const oe=K[le];if(typeof oe!="object")continue;const{$data:he}=oe.definition,ve=J[le];he&&ve&&(J[le]=X(ve))}}return $}_removeAllSchemas($,B){for(const K in $){const P=$[K];(!B||B.test(K))&&(typeof P=="string"?delete $[K]:P&&!P.meta&&(this._cache.delete(P.schema),delete $[K]))}}_addSchema($,B,K,P=this.opts.validateSchema,q=this.opts.addUsedSchema){let J;const{schemaId:le}=this.opts;if(typeof $=="object")J=$[le];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof $!="boolean")throw new Error("schema must be object or boolean")}let oe=this._cache.get($);if(oe!==void 0)return oe;K=(0,d.normalizeId)(J||K);const he=d.getSchemaRefs.call(this,$,K);return oe=new l.SchemaEnv({schema:$,schemaId:le,meta:B,baseId:K,localRefs:he}),this._cache.set(oe.schema,oe),q&&!K.startsWith("#")&&(K&&this._checkUnique(K),this.refs[K]=oe),P&&this.validateSchema($,!0),oe}_checkUnique($){if(this.schemas[$]||this.refs[$])throw new Error(`schema with key or id "${$}" already exists`)}_compileSchemaEnv($){if($.meta?this._compileMetaSchema($):l.compileSchema.call(this,$),!$.validate)throw new Error("ajv implementation error");return $.validate}_compileMetaSchema($){const B=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,$)}finally{this.opts=B}}}A.ValidationError=a.default,A.MissingRefError=s.default,e.default=A;function E(Q,$,B,K="error"){for(const P in Q){const q=P;q in $&&this.logger[K](`${B}: option ${P}. ${Q[q]}`)}}function j(Q){return Q=(0,d.normalizeId)(Q),this.schemas[Q]||this.refs[Q]}function T(){const Q=this.opts.schemas;if(Q)if(Array.isArray(Q))this.addSchema(Q);else for(const $ in Q)this.addSchema(Q[$],$)}function z(){for(const Q in this.opts.formats){const $=this.opts.formats[Q];$&&this.addFormat(Q,$)}}function L(Q){if(Array.isArray(Q)){this.addVocabulary(Q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const $ in Q){const B=Q[$];B.keyword||(B.keyword=$),this.addKeyword(B)}}function V(){const Q={...this.opts};for(const $ of _)delete Q[$];return Q}const F={log(){},warn(){},error(){}};function M(Q){if(Q===!1)return F;if(Q===void 0)return console;if(Q.log&&Q.warn&&Q.error)return Q;throw new Error("logger must implement log, warn and error methods")}const O=/^[a-z_$][a-z0-9_$:-]*$/i;function R(Q,$){const{RULES:B}=this;if((0,m.eachItem)(Q,K=>{if(B.keywords[K])throw new Error(`Keyword ${K} is already defined`);if(!O.test(K))throw new Error(`Keyword ${K} has invalid name`)}),!!$&&$.$data&&!("code"in $||"validate"in $))throw new Error('$data keyword must have "code" or "validate" function')}function G(Q,$,B){var K;const P=$?.post;if(B&&P)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:q}=this;let J=P?q.post:q.rules.find(({type:oe})=>oe===B);if(J||(J={type:B,rules:[]},q.rules.push(J)),q.keywords[Q]=!0,!$)return;const le={keyword:Q,definition:{...$,type:(0,f.getJSONTypes)($.type),schemaType:(0,f.getJSONTypes)($.schemaType)}};$.before?H.call(this,J,le,$.before):J.rules.push(le),q.all[Q]=le,(K=$.implements)===null||K===void 0||K.forEach(oe=>this.addKeyword(oe))}function H(Q,$,B){const K=Q.rules.findIndex(P=>P.keyword===B);K>=0?Q.rules.splice(K,0,$):(Q.rules.push($),this.logger.warn(`rule ${B} is not defined`))}function U(Q){let{metaSchema:$}=Q;$!==void 0&&(Q.$data&&this.opts.$data&&($=X($)),Q.validateSchema=this.compile($,!0))}const Z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function X(Q){return{anyOf:[Q,Z]}}})(Yy)),Yy}var $f={},Mf={},Of={},QS;function zH(){if(QS)return Of;QS=1,Object.defineProperty(Of,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return Of.default=e,Of}var Ja={},JS;function LH(){if(JS)return Ja;JS=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.callRef=Ja.getValidate=void 0;const e=rp(),t=gi(),r=bt(),a=ms(),s=Wv(),o=jt(),l={keyword:"$ref",schemaType:"string",code(f){const{gen:m,schema:p,it:g}=f,{baseId:y,schemaEnv:_,validateName:b,opts:w,self:x}=g,{root:S}=_;if((p==="#"||p==="#/")&&y===S.baseId)return A();const C=s.resolveRef.call(x,S,y,p);if(C===void 0)throw new e.default(g.opts.uriResolver,y,p);if(C instanceof s.SchemaEnv)return E(C);return j(C);function A(){if(_===S)return d(f,b,_,_.$async);const T=m.scopeValue("root",{ref:S});return d(f,(0,r._)`${T}.validate`,S,S.$async)}function E(T){const z=u(f,T);d(f,z,T,T.$async)}function j(T){const z=m.scopeValue("schema",w.code.source===!0?{ref:T,code:(0,r.stringify)(T)}:{ref:T}),L=m.name("valid"),V=f.subschema({schema:T,dataTypes:[],schemaPath:r.nil,topSchemaRef:z,errSchemaPath:p},L);f.mergeEvaluated(V),f.ok(L)}}};function u(f,m){const{gen:p}=f;return m.validate?p.scopeValue("validate",{ref:m.validate}):(0,r._)`${p.scopeValue("wrapper",{ref:m})}.validate`}Ja.getValidate=u;function d(f,m,p,g){const{gen:y,it:_}=f,{allErrors:b,schemaEnv:w,opts:x}=_,S=x.passContext?a.default.this:r.nil;g?C():A();function C(){if(!w.$async)throw new Error("async schema referenced by sync schema");const T=y.let("valid");y.try(()=>{y.code((0,r._)`await ${(0,t.callValidateCode)(f,m,S)}`),j(m),b||y.assign(T,!0)},z=>{y.if((0,r._)`!(${z} instanceof ${_.ValidationError})`,()=>y.throw(z)),E(z),b||y.assign(T,!1)}),f.ok(T)}function A(){f.result((0,t.callValidateCode)(f,m,S),()=>j(m),()=>E(m))}function E(T){const z=(0,r._)`${T}.errors`;y.assign(a.default.vErrors,(0,r._)`${a.default.vErrors} === null ? ${z} : ${a.default.vErrors}.concat(${z})`),y.assign(a.default.errors,(0,r._)`${a.default.vErrors}.length`)}function j(T){var z;if(!_.opts.unevaluated)return;const L=(z=p?.validate)===null||z===void 0?void 0:z.evaluated;if(_.props!==!0)if(L&&!L.dynamicProps)L.props!==void 0&&(_.props=o.mergeEvaluated.props(y,L.props,_.props));else{const V=y.var("props",(0,r._)`${T}.evaluated.props`);_.props=o.mergeEvaluated.props(y,V,_.props,r.Name)}if(_.items!==!0)if(L&&!L.dynamicItems)L.items!==void 0&&(_.items=o.mergeEvaluated.items(y,L.items,_.items));else{const V=y.var("items",(0,r._)`${T}.evaluated.items`);_.items=o.mergeEvaluated.items(y,V,_.items,r.Name)}}}return Ja.callRef=d,Ja.default=l,Ja}var e2;function IH(){if(e2)return Mf;e2=1,Object.defineProperty(Mf,"__esModule",{value:!0});const e=zH(),t=LH(),r=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return Mf.default=r,Mf}var zf={},Lf={},t2;function PH(){if(t2)return Lf;t2=1,Object.defineProperty(Lf,"__esModule",{value:!0});const e=bt(),t=e.operators,r={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},a={message:({keyword:o,schemaCode:l})=>(0,e.str)`must be ${r[o].okStr} ${l}`,params:({keyword:o,schemaCode:l})=>(0,e._)`{comparison: ${r[o].okStr}, limit: ${l}}`},s={keyword:Object.keys(r),type:"number",schemaType:"number",$data:!0,error:a,code(o){const{keyword:l,data:u,schemaCode:d}=o;o.fail$data((0,e._)`${u} ${r[l].fail} ${d} || isNaN(${u})`)}};return Lf.default=s,Lf}var If={},n2;function BH(){if(n2)return If;n2=1,Object.defineProperty(If,"__esModule",{value:!0});const e=bt(),r={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:a})=>(0,e.str)`must be multiple of ${a}`,params:({schemaCode:a})=>(0,e._)`{multipleOf: ${a}}`},code(a){const{gen:s,data:o,schemaCode:l,it:u}=a,d=u.opts.multipleOfPrecision,f=s.let("res"),m=d?(0,e._)`Math.abs(Math.round(${f}) - ${f}) > 1e-${d}`:(0,e._)`${f} !== parseInt(${f})`;a.fail$data((0,e._)`(${l} === 0 || (${f} = ${o}/${l}, ${m}))`)}};return If.default=r,If}var Pf={},Bf={},r2;function HH(){if(r2)return Bf;r2=1,Object.defineProperty(Bf,"__esModule",{value:!0});function e(t){const r=t.length;let a=0,s=0,o;for(;s<r;)a++,o=t.charCodeAt(s++),o>=55296&&o<=56319&&s<r&&(o=t.charCodeAt(s),(o&64512)===56320&&s++);return a}return Bf.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',Bf}var i2;function UH(){if(i2)return Pf;i2=1,Object.defineProperty(Pf,"__esModule",{value:!0});const e=bt(),t=jt(),r=HH(),s={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:o,schemaCode:l}){const u=o==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${u} than ${l} characters`},params:({schemaCode:o})=>(0,e._)`{limit: ${o}}`},code(o){const{keyword:l,data:u,schemaCode:d,it:f}=o,m=l==="maxLength"?e.operators.GT:e.operators.LT,p=f.opts.unicode===!1?(0,e._)`${u}.length`:(0,e._)`${(0,t.useFunc)(o.gen,r.default)}(${u})`;o.fail$data((0,e._)`${p} ${m} ${d}`)}};return Pf.default=s,Pf}var Hf={},a2;function FH(){if(a2)return Hf;a2=1,Object.defineProperty(Hf,"__esModule",{value:!0});const e=gi(),t=bt(),a={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:s})=>(0,t.str)`must match pattern "${s}"`,params:({schemaCode:s})=>(0,t._)`{pattern: ${s}}`},code(s){const{data:o,$data:l,schema:u,schemaCode:d,it:f}=s,m=f.opts.unicodeRegExp?"u":"",p=l?(0,t._)`(new RegExp(${d}, ${m}))`:(0,e.usePattern)(s,u);s.fail$data((0,t._)`!${p}.test(${o})`)}};return Hf.default=a,Hf}var Uf={},s2;function qH(){if(s2)return Uf;s2=1,Object.defineProperty(Uf,"__esModule",{value:!0});const e=bt(),r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:a,schemaCode:s}){const o=a==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${o} than ${s} properties`},params:({schemaCode:a})=>(0,e._)`{limit: ${a}}`},code(a){const{keyword:s,data:o,schemaCode:l}=a,u=s==="maxProperties"?e.operators.GT:e.operators.LT;a.fail$data((0,e._)`Object.keys(${o}).length ${u} ${l}`)}};return Uf.default=r,Uf}var Ff={},o2;function VH(){if(o2)return Ff;o2=1,Object.defineProperty(Ff,"__esModule",{value:!0});const e=gi(),t=bt(),r=jt(),s={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:o}})=>(0,t.str)`must have required property '${o}'`,params:({params:{missingProperty:o}})=>(0,t._)`{missingProperty: ${o}}`},code(o){const{gen:l,schema:u,schemaCode:d,data:f,$data:m,it:p}=o,{opts:g}=p;if(!m&&u.length===0)return;const y=u.length>=g.loopRequired;if(p.allErrors?_():b(),g.strictRequired){const S=o.parentSchema.properties,{definedProperties:C}=o.it;for(const A of u)if(S?.[A]===void 0&&!C.has(A)){const E=p.schemaEnv.baseId+p.errSchemaPath,j=`required property "${A}" is not defined at "${E}" (strictRequired)`;(0,r.checkStrictMode)(p,j,p.opts.strictRequired)}}function _(){if(y||m)o.block$data(t.nil,w);else for(const S of u)(0,e.checkReportMissingProp)(o,S)}function b(){const S=l.let("missing");if(y||m){const C=l.let("valid",!0);o.block$data(C,()=>x(S,C)),o.ok(C)}else l.if((0,e.checkMissingProp)(o,u,S)),(0,e.reportMissingProp)(o,S),l.else()}function w(){l.forOf("prop",d,S=>{o.setParams({missingProperty:S}),l.if((0,e.noPropertyInData)(l,f,S,g.ownProperties),()=>o.error())})}function x(S,C){o.setParams({missingProperty:S}),l.forOf(S,d,()=>{l.assign(C,(0,e.propertyInData)(l,f,S,g.ownProperties)),l.if((0,t.not)(C),()=>{o.error(),l.break()})},t.nil)}}};return Ff.default=s,Ff}var qf={},l2;function YH(){if(l2)return qf;l2=1,Object.defineProperty(qf,"__esModule",{value:!0});const e=bt(),r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:a,schemaCode:s}){const o=a==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${o} than ${s} items`},params:({schemaCode:a})=>(0,e._)`{limit: ${a}}`},code(a){const{keyword:s,data:o,schemaCode:l}=a,u=s==="maxItems"?e.operators.GT:e.operators.LT;a.fail$data((0,e._)`${o}.length ${u} ${l}`)}};return qf.default=r,qf}var Vf={},Yf={},c2;function Qv(){if(c2)return Yf;c2=1,Object.defineProperty(Yf,"__esModule",{value:!0});const e=JN();return e.code='require("ajv/dist/runtime/equal").default',Yf.default=e,Yf}var u2;function GH(){if(u2)return Vf;u2=1,Object.defineProperty(Vf,"__esModule",{value:!0});const e=um(),t=bt(),r=jt(),a=Qv(),o={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:l,j:u}})=>(0,t.str)`must NOT have duplicate items (items ## ${u} and ${l} are identical)`,params:({params:{i:l,j:u}})=>(0,t._)`{i: ${l}, j: ${u}}`},code(l){const{gen:u,data:d,$data:f,schema:m,parentSchema:p,schemaCode:g,it:y}=l;if(!f&&!m)return;const _=u.let("valid"),b=p.items?(0,e.getSchemaTypes)(p.items):[];l.block$data(_,w,(0,t._)`${g} === false`),l.ok(_);function w(){const A=u.let("i",(0,t._)`${d}.length`),E=u.let("j");l.setParams({i:A,j:E}),u.assign(_,!0),u.if((0,t._)`${A} > 1`,()=>(x()?S:C)(A,E))}function x(){return b.length>0&&!b.some(A=>A==="object"||A==="array")}function S(A,E){const j=u.name("item"),T=(0,e.checkDataTypes)(b,j,y.opts.strictNumbers,e.DataType.Wrong),z=u.const("indices",(0,t._)`{}`);u.for((0,t._)`;${A}--;`,()=>{u.let(j,(0,t._)`${d}[${A}]`),u.if(T,(0,t._)`continue`),b.length>1&&u.if((0,t._)`typeof ${j} == "string"`,(0,t._)`${j} += "_"`),u.if((0,t._)`typeof ${z}[${j}] == "number"`,()=>{u.assign(E,(0,t._)`${z}[${j}]`),l.error(),u.assign(_,!1).break()}).code((0,t._)`${z}[${j}] = ${A}`)})}function C(A,E){const j=(0,r.useFunc)(u,a.default),T=u.name("outer");u.label(T).for((0,t._)`;${A}--;`,()=>u.for((0,t._)`${E} = ${A}; ${E}--;`,()=>u.if((0,t._)`${j}(${d}[${A}], ${d}[${E}])`,()=>{l.error(),u.assign(_,!1).break(T)})))}}};return Vf.default=o,Vf}var Gf={},d2;function KH(){if(d2)return Gf;d2=1,Object.defineProperty(Gf,"__esModule",{value:!0});const e=bt(),t=jt(),r=Qv(),s={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:o})=>(0,e._)`{allowedValue: ${o}}`},code(o){const{gen:l,data:u,$data:d,schemaCode:f,schema:m}=o;d||m&&typeof m=="object"?o.fail$data((0,e._)`!${(0,t.useFunc)(l,r.default)}(${u}, ${f})`):o.fail((0,e._)`${m} !== ${u}`)}};return Gf.default=s,Gf}var Kf={},f2;function XH(){if(f2)return Kf;f2=1,Object.defineProperty(Kf,"__esModule",{value:!0});const e=bt(),t=jt(),r=Qv(),s={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:o})=>(0,e._)`{allowedValues: ${o}}`},code(o){const{gen:l,data:u,$data:d,schema:f,schemaCode:m,it:p}=o;if(!d&&f.length===0)throw new Error("enum must have non-empty array");const g=f.length>=p.opts.loopEnum;let y;const _=()=>y??(y=(0,t.useFunc)(l,r.default));let b;if(g||d)b=l.let("valid"),o.block$data(b,w);else{if(!Array.isArray(f))throw new Error("ajv implementation error");const S=l.const("vSchema",m);b=(0,e.or)(...f.map((C,A)=>x(S,A)))}o.pass(b);function w(){l.assign(b,!1),l.forOf("v",m,S=>l.if((0,e._)`${_()}(${u}, ${S})`,()=>l.assign(b,!0).break()))}function x(S,C){const A=f[C];return typeof A=="object"&&A!==null?(0,e._)`${_()}(${u}, ${S}[${C}])`:(0,e._)`${u} === ${A}`}}};return Kf.default=s,Kf}var h2;function ZH(){if(h2)return zf;h2=1,Object.defineProperty(zf,"__esModule",{value:!0});const e=PH(),t=BH(),r=UH(),a=FH(),s=qH(),o=VH(),l=YH(),u=GH(),d=KH(),f=XH(),m=[e.default,t.default,r.default,a.default,s.default,o.default,l.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,f.default];return zf.default=m,zf}var Xf={},Wo={},m2;function tA(){if(m2)return Wo;m2=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.validateAdditionalItems=void 0;const e=bt(),t=jt(),a={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{parentSchema:l,it:u}=o,{items:d}=l;if(!Array.isArray(d)){(0,t.checkStrictMode)(u,'"additionalItems" is ignored when "items" is not an array of schemas');return}s(o,d)}};function s(o,l){const{gen:u,schema:d,data:f,keyword:m,it:p}=o;p.items=!0;const g=u.const("len",(0,e._)`${f}.length`);if(d===!1)o.setParams({len:l.length}),o.pass((0,e._)`${g} <= ${l.length}`);else if(typeof d=="object"&&!(0,t.alwaysValidSchema)(p,d)){const _=u.var("valid",(0,e._)`${g} <= ${l.length}`);u.if((0,e.not)(_),()=>y(_)),o.ok(_)}function y(_){u.forRange("i",l.length,g,b=>{o.subschema({keyword:m,dataProp:b,dataPropType:t.Type.Num},_),p.allErrors||u.if((0,e.not)(_),()=>u.break())})}}return Wo.validateAdditionalItems=s,Wo.default=a,Wo}var Zf={},Qo={},p2;function nA(){if(p2)return Qo;p2=1,Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.validateTuple=void 0;const e=bt(),t=jt(),r=gi(),a={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(o){const{schema:l,it:u}=o;if(Array.isArray(l))return s(o,"additionalItems",l);u.items=!0,!(0,t.alwaysValidSchema)(u,l)&&o.ok((0,r.validateArray)(o))}};function s(o,l,u=o.schema){const{gen:d,parentSchema:f,data:m,keyword:p,it:g}=o;b(f),g.opts.unevaluated&&u.length&&g.items!==!0&&(g.items=t.mergeEvaluated.items(d,u.length,g.items));const y=d.name("valid"),_=d.const("len",(0,e._)`${m}.length`);u.forEach((w,x)=>{(0,t.alwaysValidSchema)(g,w)||(d.if((0,e._)`${_} > ${x}`,()=>o.subschema({keyword:p,schemaProp:x,dataProp:x},y)),o.ok(y))});function b(w){const{opts:x,errSchemaPath:S}=g,C=u.length,A=C===w.minItems&&(C===w.maxItems||w[l]===!1);if(x.strictTuples&&!A){const E=`"${p}" is ${C}-tuple, but minItems or maxItems/${l} are not specified or different at path "${S}"`;(0,t.checkStrictMode)(g,E,x.strictTuples)}}}return Qo.validateTuple=s,Qo.default=a,Qo}var g2;function WH(){if(g2)return Zf;g2=1,Object.defineProperty(Zf,"__esModule",{value:!0});const e=nA(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:r=>(0,e.validateTuple)(r,"items")};return Zf.default=t,Zf}var Wf={},y2;function QH(){if(y2)return Wf;y2=1,Object.defineProperty(Wf,"__esModule",{value:!0});const e=bt(),t=jt(),r=gi(),a=tA(),o={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:l}})=>(0,e.str)`must NOT have more than ${l} items`,params:({params:{len:l}})=>(0,e._)`{limit: ${l}}`},code(l){const{schema:u,parentSchema:d,it:f}=l,{prefixItems:m}=d;f.items=!0,!(0,t.alwaysValidSchema)(f,u)&&(m?(0,a.validateAdditionalItems)(l,m):l.ok((0,r.validateArray)(l)))}};return Wf.default=o,Wf}var Qf={},v2;function JH(){if(v2)return Qf;v2=1,Object.defineProperty(Qf,"__esModule",{value:!0});const e=bt(),t=jt(),a={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:s,max:o}})=>o===void 0?(0,e.str)`must contain at least ${s} valid item(s)`:(0,e.str)`must contain at least ${s} and no more than ${o} valid item(s)`,params:({params:{min:s,max:o}})=>o===void 0?(0,e._)`{minContains: ${s}}`:(0,e._)`{minContains: ${s}, maxContains: ${o}}`},code(s){const{gen:o,schema:l,parentSchema:u,data:d,it:f}=s;let m,p;const{minContains:g,maxContains:y}=u;f.opts.next?(m=g===void 0?1:g,p=y):m=1;const _=o.const("len",(0,e._)`${d}.length`);if(s.setParams({min:m,max:p}),p===void 0&&m===0){(0,t.checkStrictMode)(f,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(p!==void 0&&m>p){(0,t.checkStrictMode)(f,'"minContains" > "maxContains" is always invalid'),s.fail();return}if((0,t.alwaysValidSchema)(f,l)){let C=(0,e._)`${_} >= ${m}`;p!==void 0&&(C=(0,e._)`${C} && ${_} <= ${p}`),s.pass(C);return}f.items=!0;const b=o.name("valid");p===void 0&&m===1?x(b,()=>o.if(b,()=>o.break())):m===0?(o.let(b,!0),p!==void 0&&o.if((0,e._)`${d}.length > 0`,w)):(o.let(b,!1),w()),s.result(b,()=>s.reset());function w(){const C=o.name("_valid"),A=o.let("count",0);x(C,()=>o.if(C,()=>S(A)))}function x(C,A){o.forRange("i",0,_,E=>{s.subschema({keyword:"contains",dataProp:E,dataPropType:t.Type.Num,compositeRule:!0},C),A()})}function S(C){o.code((0,e._)`${C}++`),p===void 0?o.if((0,e._)`${C} >= ${m}`,()=>o.assign(b,!0).break()):(o.if((0,e._)`${C} > ${p}`,()=>o.assign(b,!1).break()),m===1?o.assign(b,!0):o.if((0,e._)`${C} >= ${m}`,()=>o.assign(b,!0)))}}};return Qf.default=a,Qf}var t0={},b2;function eU(){return b2||(b2=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=bt(),r=jt(),a=gi();e.error={message:({params:{property:d,depsCount:f,deps:m}})=>{const p=f===1?"property":"properties";return(0,t.str)`must have ${p} ${m} when property ${d} is present`},params:({params:{property:d,depsCount:f,deps:m,missingProperty:p}})=>(0,t._)`{property: ${d},
    missingProperty: ${p},
    depsCount: ${f},
    deps: ${m}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(d){const[f,m]=o(d);l(d,f),u(d,m)}};function o({schema:d}){const f={},m={};for(const p in d){if(p==="__proto__")continue;const g=Array.isArray(d[p])?f:m;g[p]=d[p]}return[f,m]}function l(d,f=d.schema){const{gen:m,data:p,it:g}=d;if(Object.keys(f).length===0)return;const y=m.let("missing");for(const _ in f){const b=f[_];if(b.length===0)continue;const w=(0,a.propertyInData)(m,p,_,g.opts.ownProperties);d.setParams({property:_,depsCount:b.length,deps:b.join(", ")}),g.allErrors?m.if(w,()=>{for(const x of b)(0,a.checkReportMissingProp)(d,x)}):(m.if((0,t._)`${w} && (${(0,a.checkMissingProp)(d,b,y)})`),(0,a.reportMissingProp)(d,y),m.else())}}e.validatePropertyDeps=l;function u(d,f=d.schema){const{gen:m,data:p,keyword:g,it:y}=d,_=m.name("valid");for(const b in f)(0,r.alwaysValidSchema)(y,f[b])||(m.if((0,a.propertyInData)(m,p,b,y.opts.ownProperties),()=>{const w=d.subschema({keyword:g,schemaProp:b},_);d.mergeValidEvaluated(w,_)},()=>m.var(_,!0)),d.ok(_))}e.validateSchemaDeps=u,e.default=s})(t0)),t0}var Jf={},w2;function tU(){if(w2)return Jf;w2=1,Object.defineProperty(Jf,"__esModule",{value:!0});const e=bt(),t=jt(),a={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:s})=>(0,e._)`{propertyName: ${s.propertyName}}`},code(s){const{gen:o,schema:l,data:u,it:d}=s;if((0,t.alwaysValidSchema)(d,l))return;const f=o.name("valid");o.forIn("key",u,m=>{s.setParams({propertyName:m}),s.subschema({keyword:"propertyNames",data:m,dataTypes:["string"],propertyName:m,compositeRule:!0},f),o.if((0,e.not)(f),()=>{s.error(!0),d.allErrors||o.break()})}),s.ok(f)}};return Jf.default=a,Jf}var eh={},x2;function rA(){if(x2)return eh;x2=1,Object.defineProperty(eh,"__esModule",{value:!0});const e=gi(),t=bt(),r=ms(),a=jt(),o={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:l})=>(0,t._)`{additionalProperty: ${l.additionalProperty}}`},code(l){const{gen:u,schema:d,parentSchema:f,data:m,errsCount:p,it:g}=l;if(!p)throw new Error("ajv implementation error");const{allErrors:y,opts:_}=g;if(g.props=!0,_.removeAdditional!=="all"&&(0,a.alwaysValidSchema)(g,d))return;const b=(0,e.allSchemaProperties)(f.properties),w=(0,e.allSchemaProperties)(f.patternProperties);x(),l.ok((0,t._)`${p} === ${r.default.errors}`);function x(){u.forIn("key",m,j=>{!b.length&&!w.length?A(j):u.if(S(j),()=>A(j))})}function S(j){let T;if(b.length>8){const z=(0,a.schemaRefOrVal)(g,f.properties,"properties");T=(0,e.isOwnProperty)(u,z,j)}else b.length?T=(0,t.or)(...b.map(z=>(0,t._)`${j} === ${z}`)):T=t.nil;return w.length&&(T=(0,t.or)(T,...w.map(z=>(0,t._)`${(0,e.usePattern)(l,z)}.test(${j})`))),(0,t.not)(T)}function C(j){u.code((0,t._)`delete ${m}[${j}]`)}function A(j){if(_.removeAdditional==="all"||_.removeAdditional&&d===!1){C(j);return}if(d===!1){l.setParams({additionalProperty:j}),l.error(),y||u.break();return}if(typeof d=="object"&&!(0,a.alwaysValidSchema)(g,d)){const T=u.name("valid");_.removeAdditional==="failing"?(E(j,T,!1),u.if((0,t.not)(T),()=>{l.reset(),C(j)})):(E(j,T),y||u.if((0,t.not)(T),()=>u.break()))}}function E(j,T,z){const L={keyword:"additionalProperties",dataProp:j,dataPropType:a.Type.Str};z===!1&&Object.assign(L,{compositeRule:!0,createErrors:!1,allErrors:!1}),l.subschema(L,T)}}};return eh.default=o,eh}var th={},_2;function nU(){if(_2)return th;_2=1,Object.defineProperty(th,"__esModule",{value:!0});const e=np(),t=gi(),r=jt(),a=rA(),s={keyword:"properties",type:"object",schemaType:"object",code(o){const{gen:l,schema:u,parentSchema:d,data:f,it:m}=o;m.opts.removeAdditional==="all"&&d.additionalProperties===void 0&&a.default.code(new e.KeywordCxt(m,a.default,"additionalProperties"));const p=(0,t.allSchemaProperties)(u);for(const w of p)m.definedProperties.add(w);m.opts.unevaluated&&p.length&&m.props!==!0&&(m.props=r.mergeEvaluated.props(l,(0,r.toHash)(p),m.props));const g=p.filter(w=>!(0,r.alwaysValidSchema)(m,u[w]));if(g.length===0)return;const y=l.name("valid");for(const w of g)_(w)?b(w):(l.if((0,t.propertyInData)(l,f,w,m.opts.ownProperties)),b(w),m.allErrors||l.else().var(y,!0),l.endIf()),o.it.definedProperties.add(w),o.ok(y);function _(w){return m.opts.useDefaults&&!m.compositeRule&&u[w].default!==void 0}function b(w){o.subschema({keyword:"properties",schemaProp:w,dataProp:w},y)}}};return th.default=s,th}var nh={},S2;function rU(){if(S2)return nh;S2=1,Object.defineProperty(nh,"__esModule",{value:!0});const e=gi(),t=bt(),r=jt(),a=jt(),s={keyword:"patternProperties",type:"object",schemaType:"object",code(o){const{gen:l,schema:u,data:d,parentSchema:f,it:m}=o,{opts:p}=m,g=(0,e.allSchemaProperties)(u),y=g.filter(A=>(0,r.alwaysValidSchema)(m,u[A]));if(g.length===0||y.length===g.length&&(!m.opts.unevaluated||m.props===!0))return;const _=p.strictSchema&&!p.allowMatchingProperties&&f.properties,b=l.name("valid");m.props!==!0&&!(m.props instanceof t.Name)&&(m.props=(0,a.evaluatedPropsToName)(l,m.props));const{props:w}=m;x();function x(){for(const A of g)_&&S(A),m.allErrors?C(A):(l.var(b,!0),C(A),l.if(b))}function S(A){for(const E in _)new RegExp(A).test(E)&&(0,r.checkStrictMode)(m,`property ${E} matches pattern ${A} (use allowMatchingProperties)`)}function C(A){l.forIn("key",d,E=>{l.if((0,t._)`${(0,e.usePattern)(o,A)}.test(${E})`,()=>{const j=y.includes(A);j||o.subschema({keyword:"patternProperties",schemaProp:A,dataProp:E,dataPropType:a.Type.Str},b),m.opts.unevaluated&&w!==!0?l.assign((0,t._)`${w}[${E}]`,!0):!j&&!m.allErrors&&l.if((0,t.not)(b),()=>l.break())})})}}};return nh.default=s,nh}var rh={},C2;function iU(){if(C2)return rh;C2=1,Object.defineProperty(rh,"__esModule",{value:!0});const e=jt(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(r){const{gen:a,schema:s,it:o}=r;if((0,e.alwaysValidSchema)(o,s)){r.fail();return}const l=a.name("valid");r.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},l),r.failResult(l,()=>r.reset(),()=>r.error())},error:{message:"must NOT be valid"}};return rh.default=t,rh}var ih={},E2;function aU(){if(E2)return ih;E2=1,Object.defineProperty(ih,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:gi().validateUnion,error:{message:"must match a schema in anyOf"}};return ih.default=t,ih}var ah={},k2;function sU(){if(k2)return ah;k2=1,Object.defineProperty(ah,"__esModule",{value:!0});const e=bt(),t=jt(),a={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:s})=>(0,e._)`{passingSchemas: ${s.passing}}`},code(s){const{gen:o,schema:l,parentSchema:u,it:d}=s;if(!Array.isArray(l))throw new Error("ajv implementation error");if(d.opts.discriminator&&u.discriminator)return;const f=l,m=o.let("valid",!1),p=o.let("passing",null),g=o.name("_valid");s.setParams({passing:p}),o.block(y),s.result(m,()=>s.reset(),()=>s.error(!0));function y(){f.forEach((_,b)=>{let w;(0,t.alwaysValidSchema)(d,_)?o.var(g,!0):w=s.subschema({keyword:"oneOf",schemaProp:b,compositeRule:!0},g),b>0&&o.if((0,e._)`${g} && ${m}`).assign(m,!1).assign(p,(0,e._)`[${p}, ${b}]`).else(),o.if(g,()=>{o.assign(m,!0),o.assign(p,b),w&&s.mergeEvaluated(w,e.Name)})})}}};return ah.default=a,ah}var sh={},N2;function oU(){if(N2)return sh;N2=1,Object.defineProperty(sh,"__esModule",{value:!0});const e=jt(),t={keyword:"allOf",schemaType:"array",code(r){const{gen:a,schema:s,it:o}=r;if(!Array.isArray(s))throw new Error("ajv implementation error");const l=a.name("valid");s.forEach((u,d)=>{if((0,e.alwaysValidSchema)(o,u))return;const f=r.subschema({keyword:"allOf",schemaProp:d},l);r.ok(l),r.mergeEvaluated(f)})}};return sh.default=t,sh}var oh={},A2;function lU(){if(A2)return oh;A2=1,Object.defineProperty(oh,"__esModule",{value:!0});const e=bt(),t=jt(),a={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:o})=>(0,e.str)`must match "${o.ifClause}" schema`,params:({params:o})=>(0,e._)`{failingKeyword: ${o.ifClause}}`},code(o){const{gen:l,parentSchema:u,it:d}=o;u.then===void 0&&u.else===void 0&&(0,t.checkStrictMode)(d,'"if" without "then" and "else" is ignored');const f=s(d,"then"),m=s(d,"else");if(!f&&!m)return;const p=l.let("valid",!0),g=l.name("_valid");if(y(),o.reset(),f&&m){const b=l.let("ifClause");o.setParams({ifClause:b}),l.if(g,_("then",b),_("else",b))}else f?l.if(g,_("then")):l.if((0,e.not)(g),_("else"));o.pass(p,()=>o.error(!0));function y(){const b=o.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},g);o.mergeEvaluated(b)}function _(b,w){return()=>{const x=o.subschema({keyword:b},g);l.assign(p,g),o.mergeValidEvaluated(x,p),w?l.assign(w,(0,e._)`${b}`):o.setParams({ifClause:b})}}}};function s(o,l){const u=o.schema[l];return u!==void 0&&!(0,t.alwaysValidSchema)(o,u)}return oh.default=a,oh}var lh={},j2;function cU(){if(j2)return lh;j2=1,Object.defineProperty(lh,"__esModule",{value:!0});const e=jt(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:r,parentSchema:a,it:s}){a.if===void 0&&(0,e.checkStrictMode)(s,`"${r}" without "if" is ignored`)}};return lh.default=t,lh}var T2;function uU(){if(T2)return Xf;T2=1,Object.defineProperty(Xf,"__esModule",{value:!0});const e=tA(),t=WH(),r=nA(),a=QH(),s=JH(),o=eU(),l=tU(),u=rA(),d=nU(),f=rU(),m=iU(),p=aU(),g=sU(),y=oU(),_=lU(),b=cU();function w(x=!1){const S=[m.default,p.default,g.default,y.default,_.default,b.default,l.default,u.default,o.default,d.default,f.default];return x?S.push(t.default,a.default):S.push(e.default,r.default),S.push(s.default),S}return Xf.default=w,Xf}var ch={},uh={},D2;function dU(){if(D2)return uh;D2=1,Object.defineProperty(uh,"__esModule",{value:!0});const e=bt(),r={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:a})=>(0,e.str)`must match format "${a}"`,params:({schemaCode:a})=>(0,e._)`{format: ${a}}`},code(a,s){const{gen:o,data:l,$data:u,schema:d,schemaCode:f,it:m}=a,{opts:p,errSchemaPath:g,schemaEnv:y,self:_}=m;if(!p.validateFormats)return;u?b():w();function b(){const x=o.scopeValue("formats",{ref:_.formats,code:p.code.formats}),S=o.const("fDef",(0,e._)`${x}[${f}]`),C=o.let("fType"),A=o.let("format");o.if((0,e._)`typeof ${S} == "object" && !(${S} instanceof RegExp)`,()=>o.assign(C,(0,e._)`${S}.type || "string"`).assign(A,(0,e._)`${S}.validate`),()=>o.assign(C,(0,e._)`"string"`).assign(A,S)),a.fail$data((0,e.or)(E(),j()));function E(){return p.strictSchema===!1?e.nil:(0,e._)`${f} && !${A}`}function j(){const T=y.$async?(0,e._)`(${S}.async ? await ${A}(${l}) : ${A}(${l}))`:(0,e._)`${A}(${l})`,z=(0,e._)`(typeof ${A} == "function" ? ${T} : ${A}.test(${l}))`;return(0,e._)`${A} && ${A} !== true && ${C} === ${s} && !${z}`}}function w(){const x=_.formats[d];if(!x){E();return}if(x===!0)return;const[S,C,A]=j(x);S===s&&a.pass(T());function E(){if(p.strictSchema===!1){_.logger.warn(z());return}throw new Error(z());function z(){return`unknown format "${d}" ignored in schema at path "${g}"`}}function j(z){const L=z instanceof RegExp?(0,e.regexpCode)(z):p.code.formats?(0,e._)`${p.code.formats}${(0,e.getProperty)(d)}`:void 0,V=o.scopeValue("formats",{key:d,ref:z,code:L});return typeof z=="object"&&!(z instanceof RegExp)?[z.type||"string",z.validate,(0,e._)`${V}.validate`]:["string",z,V]}function T(){if(typeof x=="object"&&!(x instanceof RegExp)&&x.async){if(!y.$async)throw new Error("async format in sync schema");return(0,e._)`await ${A}(${l})`}return typeof C=="function"?(0,e._)`${A}(${l})`:(0,e._)`${A}.test(${l})`}}}};return uh.default=r,uh}var R2;function fU(){if(R2)return ch;R2=1,Object.defineProperty(ch,"__esModule",{value:!0});const t=[dU().default];return ch.default=t,ch}var qs={},$2;function hU(){return $2||($2=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.contentVocabulary=qs.metadataVocabulary=void 0,qs.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],qs.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),qs}var M2;function mU(){if(M2)return $f;M2=1,Object.defineProperty($f,"__esModule",{value:!0});const e=IH(),t=ZH(),r=uU(),a=fU(),s=hU(),o=[e.default,t.default,(0,r.default)(),a.default,s.metadataVocabulary,s.contentVocabulary];return $f.default=o,$f}var dh={},Uc={},O2;function pU(){if(O2)return Uc;O2=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.DiscrError=void 0;var e;return(function(t){t.Tag="tag",t.Mapping="mapping"})(e||(Uc.DiscrError=e={})),Uc}var z2;function gU(){if(z2)return dh;z2=1,Object.defineProperty(dh,"__esModule",{value:!0});const e=bt(),t=pU(),r=Wv(),a=rp(),s=jt(),l={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:u,tagName:d}})=>u===t.DiscrError.Tag?`tag "${d}" must be string`:`value of tag "${d}" must be in oneOf`,params:({params:{discrError:u,tag:d,tagName:f}})=>(0,e._)`{error: ${u}, tag: ${f}, tagValue: ${d}}`},code(u){const{gen:d,data:f,schema:m,parentSchema:p,it:g}=u,{oneOf:y}=p;if(!g.opts.discriminator)throw new Error("discriminator: requires discriminator option");const _=m.propertyName;if(typeof _!="string")throw new Error("discriminator: requires propertyName");if(m.mapping)throw new Error("discriminator: mapping is not supported");if(!y)throw new Error("discriminator: requires oneOf keyword");const b=d.let("valid",!1),w=d.const("tag",(0,e._)`${f}${(0,e.getProperty)(_)}`);d.if((0,e._)`typeof ${w} == "string"`,()=>x(),()=>u.error(!1,{discrError:t.DiscrError.Tag,tag:w,tagName:_})),u.ok(b);function x(){const A=C();d.if(!1);for(const E in A)d.elseIf((0,e._)`${w} === ${E}`),d.assign(b,S(A[E]));d.else(),u.error(!1,{discrError:t.DiscrError.Mapping,tag:w,tagName:_}),d.endIf()}function S(A){const E=d.name("valid"),j=u.subschema({keyword:"oneOf",schemaProp:A},E);return u.mergeEvaluated(j,e.Name),E}function C(){var A;const E={},j=z(p);let T=!0;for(let F=0;F<y.length;F++){let M=y[F];if(M?.$ref&&!(0,s.schemaHasRulesButRef)(M,g.self.RULES)){const R=M.$ref;if(M=r.resolveRef.call(g.self,g.schemaEnv.root,g.baseId,R),M instanceof r.SchemaEnv&&(M=M.schema),M===void 0)throw new a.default(g.opts.uriResolver,g.baseId,R)}const O=(A=M?.properties)===null||A===void 0?void 0:A[_];if(typeof O!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${_}"`);T=T&&(j||z(M)),L(O,F)}if(!T)throw new Error(`discriminator: "${_}" must be required`);return E;function z({required:F}){return Array.isArray(F)&&F.includes(_)}function L(F,M){if(F.const)V(F.const,M);else if(F.enum)for(const O of F.enum)V(O,M);else throw new Error(`discriminator: "properties/${_}" must have "const" or "enum"`)}function V(F,M){if(typeof F!="string"||F in E)throw new Error(`discriminator: "${_}" values must be unique strings`);E[F]=M}}}};return dh.default=l,dh}const yU="http://json-schema.org/draft-07/schema#",vU="http://json-schema.org/draft-07/schema#",bU="Core schema meta-schema",wU={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},xU=["object","boolean"],_U={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},SU={$schema:yU,$id:vU,title:bU,definitions:wU,type:xU,properties:_U,default:!0};var L2;function CU(){return L2||(L2=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=OH(),a=mU(),s=gU(),o=SU,l=["/properties"],u="http://json-schema.org/draft-07/schema";class d extends r.default{_addVocabularies(){super._addVocabularies(),a.default.forEach(_=>this.addVocabulary(_)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const _=this.opts.$data?this.$dataMetaSchema(o,l):o;this.addMetaSchema(_,u,!1),this.refs["http://json-schema.org/schema"]=u}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(u)?u:void 0)}}t.Ajv=d,e.exports=t=d,e.exports.Ajv=d,Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var f=np();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return f.KeywordCxt}});var m=bt();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return m._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return m.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return m.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return m.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return m.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return m.CodeGen}});var p=Zv();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return p.default}});var g=rp();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return g.default}})})(Af,Af.exports)),Af.exports}var EU=CU();const kU=xu(EU),NU="http://json-schema.org/draft-07/schema#",AU="https://example.com/threat-model.schema.json",jU="Threat Model",TU="Schema for defining threat models with components, data flows, threats, and controls",DU="object",RU=["schema_version","name"],$U={schema_version:{type:"string",description:"Version of the threat model schema",pattern:"^[0-9]+\\.[0-9]+$"},name:{type:"string",description:"Name of the threat model",minLength:1},description:{type:"string",description:"Description of the threat model"},participants:{type:"array",description:"List of participants involved in the threat model (e.g. names or email addresses)",items:{type:"string",minLength:1}},assets:{type:"array",description:"Data or resources that need protection",items:{$ref:"#/definitions/asset"}},components:{type:"array",description:"Components in the system (internal, external, or data stores)",items:{$ref:"#/definitions/component"}},data_flows:{type:"array",description:"Data flows between components",items:{$ref:"#/definitions/dataFlow"}},boundaries:{type:"array",description:"Trust boundaries in the system",items:{$ref:"#/definitions/boundary"}},threats:{type:"array",description:"Security threats to the system",items:{$ref:"#/definitions/threat"}},controls:{type:"array",description:"Security controls that mitigate threats",items:{$ref:"#/definitions/control"}}},MU={asset:{type:"object",required:["ref","name"],properties:{ref:{type:"string",description:"Unique reference identifier for the asset",pattern:"^[a-zA-Z0-9_-]+$"},name:{type:"string",description:"Name of the asset",minLength:1},description:{type:"string",description:"Description of the asset"}}},component:{type:"object",required:["ref","name","component_type"],properties:{ref:{type:"string",description:"Unique reference identifier for the component",pattern:"^[a-zA-Z0-9_-]+$"},name:{type:"string",description:"Name of the component",minLength:1},component_type:{type:"string",description:"Type of component",enum:["internal","external_dependency","data_store"]},description:{type:"string",description:"Description of the component"},assets:{type:"array",description:"References to assets processed or stored by this component",items:{type:"string"}},x:{type:"number",description:"X coordinate for diagram visualization"},y:{type:"number",description:"Y coordinate for diagram visualization"}}},dataFlow:{type:"object",required:["ref","source","destination"],properties:{ref:{type:"string",description:"Unique reference identifier for the data flow",pattern:"^[a-zA-Z0-9_<>-]+$"},source:{type:"string",description:"Reference to the source component"},destination:{type:"string",description:"Reference to the destination component"},direction:{type:"string",description:"Direction of data flow",enum:["unidirectional","bidirectional"],default:"unidirectional"},label:{type:"string",description:"Label for the data flow (e.g., protocol, data type)"},source_point:{type:"string",description:"Connection point on the source component (e.g., top-1, top-2, top-3, right-1, right-2, right-3, bottom-1, bottom-2, bottom-3, left-1, left-2, left-3). Positions are ordered left-to-right for top/bottom and top-to-bottom for left/right.",pattern:"^(top|right|bottom|left)-[123]$"},destination_point:{type:"string",description:"Connection point on the destination component (e.g., top-1, top-2, top-3, right-1, right-2, right-3, bottom-1, bottom-2, bottom-3, left-1, left-2, left-3). Positions are ordered left-to-right for top/bottom and top-to-bottom for left/right.",pattern:"^(top|right|bottom|left)-[123]$"}}},boundary:{type:"object",required:["ref","name"],properties:{ref:{type:"string",description:"Unique reference identifier for the boundary",pattern:"^[a-zA-Z0-9_-]+$"},name:{type:"string",description:"Name of the boundary",minLength:1},description:{type:"string",description:"Description of the boundary"},components:{type:"array",description:"References to components within this boundary",items:{type:"string"}},x:{type:"number",description:"X coordinate for boundary position"},y:{type:"number",description:"Y coordinate for boundary position"},width:{type:"number",description:"Width of the boundary"},height:{type:"number",description:"Height of the boundary"}}},threat:{type:"object",required:["ref","name"],properties:{ref:{type:"string",description:"Unique reference identifier for the threat",pattern:"^[a-zA-Z0-9_-]+$"},name:{type:"string",description:"Name of the threat",minLength:1},description:{type:"string",description:"Description of the threat"},affected_components:{type:"array",description:"References to components affected by this threat",items:{type:"string"}},affected_data_flows:{type:"array",description:"References to data flows affected by this threat",items:{type:"string"}},affected_assets:{type:"array",description:"References to assets affected by this threat",items:{type:"string"}},status:{type:"string",description:"Status of the threat (how it will be handled)",enum:["Mitigate","Accept","Dismiss","Evaluate"]},status_link:{type:"string",description:"URL pointing to a work item for handling this threat (e.g., Jira task)"},status_note:{type:"string",description:"Additional notes about the threat status and how it will be handled"}}},control:{type:"object",required:["ref","name"],properties:{ref:{type:"string",description:"Unique reference identifier for the control",pattern:"^[a-zA-Z0-9_-]+$"},name:{type:"string",description:"Name of the control",minLength:1},description:{type:"string",description:"Description of the control"},mitigates:{type:"array",description:"References to threats that this control mitigates",items:{type:"string"}},implemented_in:{type:"array",description:"References to components where this control is implemented",items:{type:"string"}},status:{type:"string",description:"Implementation status of the control",enum:["To Do","In Progress","Done","Cancelled"]},status_link:{type:"string",description:"URL pointing to a work item for implementing this control (e.g., Jira task)"},status_note:{type:"string",description:"Additional notes about the control implementation status"}}}},OU={$schema:NU,$id:AU,title:jU,description:TU,type:DU,required:RU,properties:$U,definitions:MU},zU=new kU({allErrors:!0,strict:!1}),I2=zU.compile(OU),LU={maxAliasCount:100,schema:pu.CORE_SCHEMA,json:!0},IU=/^-?\s*ref:\s*(.+)$/,iA=/^(\s+)(\w+):/,PU=/\|[-+]?$/;function ca(e){try{const t=pu.load(e,LU);if(!t||typeof t!="object")throw new Error("Invalid YAML: Expected an object");if(!I2(t)){const s=(I2.errors||[]).map(o=>`${o.instancePath||"root"}: ${o.message}`).join("; ");throw new Error(`Schema validation failed: ${s}`)}return t}catch(t){throw t instanceof pu.YAMLException?new Error(`YAML parsing error: ${t.message}`):t}}function _l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Un(e){const t=e.trimStart(),r=e.length-t.length;return{raw:e,trimmed:t,indent:r}}function BU(e){return PU.test(e)}function Jv(e){const t=e.match(IU);return t?t[1].trim().replace(/^["']|["']$/g,""):null}function V0(e,t){return e.trimmed.length>0&&!e.trimmed.startsWith("#")&&e.indent<=t&&!e.trimmed.startsWith("-")}function HU(e,t){for(let r=0;r<e.length;r++){const a=Un(e[r]);if(a.trimmed===`${t}:`||a.trimmed.startsWith(`${t}: `))return{startIndex:r,indent:a.indent,inSection:!0}}return null}function UU(e,t,r,a){let s=-1,o=0,l=0;for(let u=t+1;u<e.length;u++){const d=Un(e[u]);if(V0(d,r)){if(s!==-1)return{startIndex:s,endIndex:u-1,indent:o,fieldIndent:l};break}if(d.trimmed.startsWith("- ref:")){if(Jv(d.trimmed)===a){s=u,o=d.indent,l=0;continue}else if(s!==-1)return{startIndex:s,endIndex:u-1,indent:o,fieldIndent:l}}if(s!==-1&&l===0){const f=d.raw.match(iA);f&&!d.trimmed.startsWith("-")&&(l=f[1].length)}}if(s!==-1){let u=s;for(let d=s+1;d<e.length;d++){const f=Un(e[d]);if(!(!f.trimmed||f.trimmed.startsWith("#"))){if(V0(f,r)||f.indent<=o&&!f.trimmed.startsWith("-"))break;u=d}}return{startIndex:s,endIndex:u,indent:o,fieldIndent:l}}return null}function Y0(e,t,r,a){let s=t;for(;s+1<e.length;){const o=Un(e[s+1]);if(o.raw===""&&!a)break;if(o.raw===""||o.indent>r&&(o.trimmed.startsWith("-")||a||o.trimmed!=="")){if(!a&&o.trimmed&&!o.trimmed.startsWith("-")&&o.indent===r||a&&o.trimmed&&o.indent<=r)break;s++}else break}return s}function Pu(e,t=""){if(e.includes(`
`)){const r=e.split(`
`),a=t+"  ";return`|
`+r.map(s=>a+s).join(`
`)}return e.includes(":")||e.includes("#")||e.startsWith(" ")||e.endsWith(" ")||e.startsWith('"')||e.startsWith("'")||/^[{[\]&*!|>'"%@`]/.test(e)||e===""||e==="true"||e==="false"||e==="null"||e==="yes"||e==="no"?'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"':e}function FU(e,t=""){return Array.isArray(e)?e.length===0?"[]":`[${e.join(", ")}]`:typeof e=="number"?Math.round(e).toString():Pu(String(e),t)}function G0(e,t,r){const a=FU(t,r);return`${r}${e}: ${a}`}function qU(e,t,r){const a=new RegExp(`^(\\s*)${_l(r)}:\\s*(.*)$`);for(let s=t.startIndex;s<=t.endIndex&&s<e.length;s++){const o=e[s].match(a);if(o){const l=o[1].length,u=o[2].trim(),d=BU(u);return{lineIndex:s,indent:l,existingValue:u,isPipeStyle:d}}}return null}function VU(e,t,r,a,s,o){const l=" ".repeat(a.indent);if(Array.isArray(o)){if(o.length===0)return Y0(t,r,a.indent,a.isPipeStyle);e.push(G0(s,o,l))}else e.push(G0(s,o,l));return Y0(t,r,a.indent,a.isPipeStyle)}function YU(e,t,r,a,s,o){const l=" ".repeat(s||o+4),u=G0(r,a,l),d=t>=0?t+1:e.length;e.splice(d,0,u)}function st(e,t,r,a,s){const o=e.split(`
`),l=[],u=HU(o,t);if(!u)return e;const d=UU(o,u.startIndex,u.indent,r);if(!d)return e;let f=!1,m=-1;for(let p=0;p<o.length;p++){const g=o[p];if(p>=d.startIndex&&p<=d.endIndex&&!f){const y=Un(g);if(y.trimmed&&!y.trimmed.startsWith("#")&&(y.indent>d.indent||y.trimmed.startsWith("-"))&&(m=l.length),d.fieldIndent===0){const b=g.match(iA);b&&!y.trimmed.startsWith("-")&&(d.fieldIndent=b[1].length)}const _=qU([g],{...d,startIndex:0,endIndex:0},a);if(_)if(f=!0,_.lineIndex=p,s===void 0||Array.isArray(s)&&s.length===0){p=Y0(o,p,_.indent,_.isPipeStyle);continue}else{p=VU(l,o,p,_,a,s),m=l.length-1;continue}}if(p===d.endIndex&&!f&&s!==void 0&&(!Array.isArray(s)||s.length>0)){l.push(g),YU(l,m!==-1?m:l.length-1,a,s,d.fieldIndent,d.indent);continue}l.push(g)}return fs(l.join(`
`))}function GU(e,t,r,a){const s=a?.arrayFields??[],o=a?.scalarFields??[],l=a?.regenerateDataFlowRefs??!1;if(t===r)return{yamlContent:e,actualRef:r};e.split(`
`).some(p=>{const g=p.match(/^(\s*-?\s*)ref:\s*(.+)$/);return g?g[2].trim().replace(/^["']|["']$/g,"")===t:!1});let u=r;const d=e.split(`
`),f=[],m=new Map;if(l){let p=-1,g=-1,y=null,_=null,b="unidirectional";for(let w=0;w<d.length;w++){const x=d[w],S=Un(x);if(x.match(/^\s*-\s*ref:\s*.+$/))p>=0&&y&&_&&m.set(p,{source:y,destination:_,direction:b,refLineIdx:g}),w+1<d.length&&(d[w+1].match(/^\s+source:/)||d[w+1].match(/^\s+destination:/))?(p=w,g=w,y=null,_=null,b="unidirectional"):p=-1;else if(p>=0){const C=x.match(/^\s+source:\s*(.+)$/);C&&(y=C[1].trim().replace(/^["']|["']$/g,""));const A=x.match(/^\s+destination:\s*(.+)$/);A&&(_=A[1].trim().replace(/^["']|["']$/g,""));const E=x.match(/^\s+direction:\s*(.+)$/);E&&(b=E[1].trim().replace(/^["']|["']$/g,"")),S.indent<=2&&x.match(/^\s*-\s+\w+:/)&&(y&&_&&m.set(p,{source:y,destination:_,direction:b,refLineIdx:g}),p=-1)}}p>=0&&y&&_&&m.set(p,{source:y,destination:_,direction:b,refLineIdx:g})}for(let p=0;p<d.length;p++){let g=d[p];const y=Un(g),_=g.match(/^(\s*-?\s*)ref:\s*(.+)$/);if(_){if(_[2].trim().replace(/^["']|["']$/g,"")===t){const x=_[1],S=Pu(u);g=`${x}ref: ${S}`}else if(l&&m.has(p)){const x=m.get(p);let S=x.source===t?u:x.source,C=x.destination===t?u:x.destination;const A=x.direction==="bidirectional"?"<->":"->",E=`${S}${A}${C}`;g=`${_[1]}ref: ${E}`}}for(const w of s){const x=new RegExp(`^(\\s*)${_l(w)}:\\s*\\[(.+)\\]$`),S=g.match(x);if(S){const C=S[1],E=S[2].split(",").map(j=>j.trim()).map(j=>{const T=j.replace(/^["']|["']$/g,"");return T===t?u:T});g=`${C}${w}: [${E.join(", ")}]`;break}}for(const w of o){const x=new RegExp(`^(\\s*)${_l(w)}:\\s*(.+)$`),S=g.match(x);if(S){const C=S[1];S[2].trim().replace(/^["']|["']$/g,"")===t&&(g=`${C}${w}: ${u}`);break}}const b=y.trimmed.match(/^-\s*(.+)$/);b&&!y.trimmed.includes(":")&&b[1].trim().replace(/^["']|["']$/g,"")===t&&(g=`${" ".repeat(y.indent)}- ${u}`),f.push(g)}return{yamlContent:fs(f.join(`
`)),actualRef:u}}function K0(e,t,r){return GU(e,t,r,{arrayFields:["affected_data_flows"]}).yamlContent}function ns(e,t,r){const a=e.split(`
`),s=[];for(let o=0;o<a.length;o++){let l=a[o];const u=Un(l);let d=!1;for(const m of r){const p=new RegExp(`^(\\s*)${_l(m)}:\\s*\\[(.*)\\]$`),g=l.match(p);if(g){const y=g[1],_=g[2].trim();if(_==="")break;const b=_.split(",").map(x=>x.trim().replace(/^["']|["']$/g,"")),w=b.filter(x=>x!==t);w.length===0?d=!0:w.length!==b.length&&(l=`${y}${m}: [${w.join(", ")}]`);break}}if(d)continue;const f=u.trimmed.match(/^-\s*(.+)$/);f&&!u.trimmed.includes(":")&&f[1].trim().replace(/^["']|["']$/g,"")===t||s.push(l)}return fs(s.join(`
`))}function P2(e,t,r){const a=new RegExp(`^(${_l(t)}:)\\s*(.*)$`,"m"),s=Pu(r);return e.replace(a,`$1 ${s}`)}function KU(e,t,r){const a=e.split(`
`),s=new RegExp(`^${_l(t)}:`);let o=-1,l=-1;for(let d=0;d<a.length;d++)if(s.test(a[d])){if(o=d,/:\s*\[\s*\]/.test(a[d])){l=d;break}l=d;for(let f=d+1;f<a.length;f++){const m=a[f];if(m.trim()===""){l=f;continue}if(/^\s+-\s/.test(m))l=f;else break}break}if(r.length===0){if(o!==-1){for(;l+1<a.length&&a[l+1].trim()==="";)l++;return a.splice(o,l-o+1),a.join(`
`)}return e}const u=[`${t}:`];for(const d of r)u.push(`  - ${Pu(d)}`);if(o!==-1)a.splice(o,l-o+1,...u);else{let d=-1;for(let f=0;f<a.length;f++)if(a[f].startsWith("description:")){d=f+1;break}else a[f].startsWith("name:")&&d===-1&&(d=f+1);if(d===-1){for(let f=0;f<a.length;f++)if(a[f].startsWith("schema_version:")){d=f+1;break}}d!==-1&&a.splice(d,0,...u)}return a.join(`
`)}function Gs(e,t,r){const a=e.split(`
`);let s=!1,o=0,l=2,u=-1,d=-1,f=!1,m=0;for(let y=0;y<a.length;y++){const _=a[y],b=_.trimStart(),w=_.length-b.length;if(b.startsWith(`${t}:`)){s=!0,o=w,b===`${t}: []`&&(d=y);continue}if(s&&(f&&(b.length===0||w>m?u=y:f=!1),(b.endsWith("|")||b.endsWith("|-")||b.endsWith("|+"))&&(f=!0,m=w,u=y),b.startsWith("-")&&!f&&(w===o||w===o+2)?(l=w,u=y):b&&!b.startsWith("#")&&!f&&w>o&&!b.endsWith("|")&&!b.endsWith("|-")&&!b.endsWith("|+")&&(u=y),b.length>0&&!b.startsWith("#")&&w<=o&&!b.startsWith("-"))){s=!1;break}}if(d>=0){const y=[];for(let _=0;_<a.length;_++)if(_===d){y.push(`${" ".repeat(o)}${t}:`);const b=n0(r,o+2);if(y.push(...b),_+1<a.length){const w=a[_+1],x=Un(w);x.trimmed&&(x.indent<=o||x.trimmed.startsWith("#"))&&y.push("")}}else y.push(a[_]);return fs(y.join(`
`))}let p=a.length-1;if(u>=0)p=u;else for(let y=0;y<a.length;y++)if(a[y].trimStart().startsWith(`${t}:`)){p=y;break}const g=[];for(let y=0;y<a.length;y++)if(g.push(a[y]),y===p){u>=0&&g.push("");const _=n0(r,l);g.push(..._);const b=y+1;if(b<a.length){const w=a[b],x=Un(w);x.trimmed&&(x.indent<=o||x.trimmed.startsWith("#")&&x.indent<=o)&&g.push("")}}if(u===-1&&!a.some(y=>y.trimStart().startsWith(`${t}:`))){g.push(""),g.push(`${t}:`);const y=n0(r,2);g.push(...y),g.push("")}return fs(g.join(`
`))}function fh(e,t,r){const a=e.split(`
`);let s=-1,o=0;for(let b=0;b<a.length;b++){const w=Un(a[b]);if(w.trimmed===`${t}:`||w.trimmed.startsWith(`${t}: `)){s=b,o=w.indent;break}}if(s===-1)return e;let l=a.length,u=s;for(let b=s+1;b<a.length;b++){const w=Un(a[b]);if(w.trimmed.length>0&&!w.trimmed.startsWith("#")&&w.indent<=o&&!w.trimmed.startsWith("-")){l=b;break}if(w.trimmed.startsWith("#")&&w.indent<=o&&b>0&&a[b-1].trim()===""){let x=!1;for(let S=b+1;S<a.length;S++){const C=Un(a[S]);if(!(C.trimmed.length===0||C.trimmed.startsWith("#"))){C.indent<=o&&!C.trimmed.startsWith("-")&&(x=!0);break}}if(x){l=b;break}}w.trimmed.length>0&&(u=b)}l>u+1&&(l=u+1);const d=new Map;let f=null,m=[],p=!1,g=0;for(let b=s+1;b<l;b++){const w=Un(a[b]);if(w.trimmed.startsWith("- ref:")){if(f!==null){for(;m.length>0&&m[m.length-1].trim()==="";)m.pop();d.set(f,m)}f=Jv(w.trimmed),m=[a[b]],p=!1;continue}if(f!==null){if(!p&&w.trimmed&&(w.trimmed.endsWith("|")||w.trimmed.endsWith("|-")||w.trimmed.endsWith("|+"))){p=!0,g=w.indent,m.push(a[b]);continue}if(p)if(w.trimmed===""||w.indent>g){m.push(a[b]);continue}else p=!1;m.push(a[b])}}if(f!==null){for(;m.length>0&&m[m.length-1].trim()==="";)m.pop();d.set(f,m)}if(d.size===0)return e;const y=[];for(let b=0;b<=s;b++)y.push(a[b]);let _=!0;for(const b of r){const w=d.get(b);w&&(_||y.push(""),y.push(...w),_=!1)}for(let b=l;b<a.length;b++)y.push(a[b]);return fs(y.join(`
`))}function oi(e,t,r){const a=e.split(`
`),s=[];let o=!1,l=!1,u=0,d=-1,f=0,m=!1,p=0,g=!1,y=!1,_=!1;for(let b=0;b<a.length;b++){const w=a[b],x=Un(w);if(x.trimmed.startsWith(`${t}:`)){o=!0,u=x.indent,d=s.length,s.push(w);continue}if(o&&V0(x,u)&&(o=!1,l=!1,m=!1,_=!1),o&&x.trimmed.startsWith("- ref:"))if(Jv(x.trimmed)===r){l=!0,g=!0,f=x.indent,m=!1,_=!1;continue}else l=!1,m=!1,_=!1,y=!0;if(l){if(!m&&x.trimmed&&(x.trimmed.endsWith("|")||x.trimmed.endsWith("|-")||x.trimmed.endsWith("|+"))){m=!0,p=x.indent;continue}if(m){if(x.trimmed===""||x.indent>p)continue;m=!1}if(x.trimmed.startsWith("-")&&x.indent<=f)l=!1,m=!1,_=!1,y=!0;else if(x.trimmed===""){if(_){_=!1;continue}l=!1,m=!1,_=!1}else if(x.indent<=f&&x.trimmed)l=!1,m=!1,_=!1;else if(x.indent>f||x.trimmed.startsWith("#")){_=!0;continue}}s.push(w)}if(g&&!y&&d!==-1){const w=s[d].match(/^(\s*)/)?.[1]||"";s[d]=`${w}${t}: []`;let x=d+1,S=!1;for(;x<s.length;){const C=Un(s[x]);if(!C.trimmed){S=!0,x++;continue}if(S||C.trimmed&&!C.trimmed.startsWith("#")&&C.indent<=u||C.trimmed.startsWith("#")&&C.indent<=u)break;if(C.trimmed.startsWith("#")||C.indent>u)s.splice(x,1);else break}}return g?fs(s.join(`
`)):e}function n0(e,t){const r=" ".repeat(t),a=[];let s=!0;for(const[o,l]of Object.entries(e)){if(l==null)continue;const u=s?`${r}- `:`${r}  `;if(s=!1,Array.isArray(l)){if(l.length===0)continue;a.push(`${u}${o}: [${l.join(", ")}]`)}else if(typeof l=="object")a.push(`${u}${o}: {}`);else if(typeof l=="number")a.push(`${u}${o}: ${l.toString()}`);else{const d=String(l);if(d.includes(`
`)){const f=r+"    ";a.push(`${u}${o}: |`);const m=d.split(`
`).map(p=>f+p).join(`
`);a.push(m)}else{const f=Pu(d,r+"  ");a.push(`${u}${o}: ${f}`)}}}return a}function fs(e){const t=e.split(`
`),r=[];let a="empty",s=!1,o=0,l=-1,u=[];for(let d=0;d<t.length;d++){const f=t[d],m=Un(f);if(m.trimmed===""){s?(u.push(f),a="pipe-content"):a="empty";continue}if(!s&&(m.trimmed.endsWith("|")||m.trimmed.endsWith("|-")||m.trimmed.endsWith("|+"))){s=!0,o=m.indent,u=[],r.push(f),a="pipe-indicator";continue}if(s)if(m.indent>o||m.trimmed===""){u.push(f),a="pipe-content";continue}else{for(;u.length>0&&u[u.length-1].trim()==="";)u.pop();r.push(...u),u=[],s=!1}let p="field";const g=l;m.trimmed.startsWith("#")?(p="comment",m.indent===0&&(l=-1)):m.trimmed.match(/^\w+:/)&&m.indent===0?m.trimmed.endsWith(":")||m.trimmed.endsWith(": []")?(p="section",l=-1):p="top-level-field":m.trimmed.startsWith("- ")?(p="item",l=m.indent):p="field";let y=!1;r.length===0?y=!1:p==="section"?y=!(r[r.length-1]==="")&&a!=="comment"&&a!=="top-level-field":p==="comment"&&m.indent===0?y=!(r[r.length-1]==="")&&a!=="section"&&a!=="top-level-field"&&a!=="comment":p==="item"?(a==="item"||a==="field"||a==="pipe-content"||a==="pipe-indicator"||a==="empty")&&m.indent===g&&g!==-1?y=!0:(a==="section"||g===-1&&a!=="empty")&&(y=!1):p==="top-level-field"&&(y=!1),y&&r.length>0&&r.push(""),r.push(f),a=p}if(s&&u.length>0){for(;u.length>0&&u[u.length-1].trim()==="";)u.pop();r.push(...u)}return r.join(`
`)}function XU(e){const t=JSON.parse(JSON.stringify(e));t.components&&t.components.forEach(s=>{typeof s.x=="number"&&(s.x=Math.round(s.x)),typeof s.y=="number"&&(s.y=Math.round(s.y))}),t.boundaries&&t.boundaries.forEach(s=>{typeof s.x=="number"&&(s.x=Math.round(s.x)),typeof s.y=="number"&&(s.y=Math.round(s.y)),typeof s.width=="number"&&(s.width=Math.round(s.width)),typeof s.height=="number"&&(s.height=Math.round(s.height))});const a=pu.dump(t,{indent:2,lineWidth:-1,noRefs:!0,sortKeys:!1,flowLevel:3,condenseFlow:!0}).replace(/'y':/g,"y:");return fs(a)}const Sl={x:100,y:100},dm=150,hh=40,ZU={width:400,height:300};function WU(e,t){const r=t.filter(f=>e.includes(f.ref));if(r.length===0)return null;const a=140,s=80;let o=1/0,l=1/0,u=-1/0,d=-1/0;return r.forEach((f,m)=>{const p=f.x??Sl.x+m*dm,g=f.y??Sl.y+m*dm;o=Math.min(o,p),l=Math.min(l,g),u=Math.max(u,p+a),d=Math.max(d,g+s)}),{x:o-hh,y:l-hh,width:u-o+hh*2,height:d-l+hh*2}}function QU(e){const t=new Map;return[...e].sort((a,s)=>(a.components?.length||0)-(s.components?.length||0)).forEach((a,s)=>{t.set(a.ref,s)}),t}function JU(e=[],t=[]){const r=QU(e);return e.map(a=>{let s,o;if(a.x!==void 0&&a.y!==void 0&&a.width!==void 0&&a.height!==void 0)s={x:a.x,y:a.y},o={width:a.width,height:a.height};else{const u=WU(a.components||[],t);u?(s={x:u.x,y:u.y},o={width:u.width,height:u.height}):(s={x:Sl.x,y:Sl.y},o=ZU)}const l=r.get(a.ref)||0;return{id:a.ref,type:"boundaryNode",position:s,selectable:!0,style:{width:o.width,height:o.height,zIndex:-(l+1)*10},data:{label:a.name,description:a.description}}})}function e7(e=[]){return e.map((t,r)=>{const a={x:t.x??Sl.x+r*dm,y:t.y??Sl.y+r*dm};return{id:t.ref,type:"threatModelNode",position:a,data:{label:t.name,ref:t.ref,description:t.description,componentType:t.component_type,assets:t.assets||[]}}})}function t7(e=[],t){const r=[];return e.forEach(a=>{const s={id:a.ref,type:"editableEdge",source:a.source,target:a.destination,sourceHandle:a.source_point,targetHandle:a.destination_point?`target-${a.destination_point}`:void 0,label:a.label,animated:!1,style:{stroke:"#000",strokeWidth:3},data:{direction:a.direction,label:a.label,onLabelChange:t?o=>t(a.ref,o):void 0}};a.direction==="bidirectional"?r.push({...s,style:{stroke:"#000",strokeWidth:2},markerStart:{type:"arrowclosed"},markerEnd:{type:"arrowclosed"}}):r.push({...s,style:{stroke:"#000",strokeWidth:2},markerEnd:{type:"arrowclosed"}})}),r}function oa(e,t){const r=JU(e.boundaries,e.components),a=e7(e.components),s=t7(e.data_flows,t);return{nodes:[...r,...a],edges:s}}var r0={exports:{}},B2;function n7(){return B2||(B2=1,(function(e){var t=(function(){var r=String.fromCharCode,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function l(d,f){if(!o[d]){o[d]={};for(var m=0;m<d.length;m++)o[d][d.charAt(m)]=m}return o[d][f]}var u={compressToBase64:function(d){if(d==null)return"";var f=u._compress(d,6,function(m){return a.charAt(m)});switch(f.length%4){default:case 0:return f;case 1:return f+"===";case 2:return f+"==";case 3:return f+"="}},decompressFromBase64:function(d){return d==null?"":d==""?null:u._decompress(d.length,32,function(f){return l(a,d.charAt(f))})},compressToUTF16:function(d){return d==null?"":u._compress(d,15,function(f){return r(f+32)})+" "},decompressFromUTF16:function(d){return d==null?"":d==""?null:u._decompress(d.length,16384,function(f){return d.charCodeAt(f)-32})},compressToUint8Array:function(d){for(var f=u.compress(d),m=new Uint8Array(f.length*2),p=0,g=f.length;p<g;p++){var y=f.charCodeAt(p);m[p*2]=y>>>8,m[p*2+1]=y%256}return m},decompressFromUint8Array:function(d){if(d==null)return u.decompress(d);for(var f=new Array(d.length/2),m=0,p=f.length;m<p;m++)f[m]=d[m*2]*256+d[m*2+1];var g=[];return f.forEach(function(y){g.push(r(y))}),u.decompress(g.join(""))},compressToEncodedURIComponent:function(d){return d==null?"":u._compress(d,6,function(f){return s.charAt(f)})},decompressFromEncodedURIComponent:function(d){return d==null?"":d==""?null:(d=d.replace(/ /g,"+"),u._decompress(d.length,32,function(f){return l(s,d.charAt(f))}))},compress:function(d){return u._compress(d,16,function(f){return r(f)})},_compress:function(d,f,m){if(d==null)return"";var p,g,y={},_={},b="",w="",x="",S=2,C=3,A=2,E=[],j=0,T=0,z;for(z=0;z<d.length;z+=1)if(b=d.charAt(z),Object.prototype.hasOwnProperty.call(y,b)||(y[b]=C++,_[b]=!0),w=x+b,Object.prototype.hasOwnProperty.call(y,w))x=w;else{if(Object.prototype.hasOwnProperty.call(_,x)){if(x.charCodeAt(0)<256){for(p=0;p<A;p++)j=j<<1,T==f-1?(T=0,E.push(m(j)),j=0):T++;for(g=x.charCodeAt(0),p=0;p<8;p++)j=j<<1|g&1,T==f-1?(T=0,E.push(m(j)),j=0):T++,g=g>>1}else{for(g=1,p=0;p<A;p++)j=j<<1|g,T==f-1?(T=0,E.push(m(j)),j=0):T++,g=0;for(g=x.charCodeAt(0),p=0;p<16;p++)j=j<<1|g&1,T==f-1?(T=0,E.push(m(j)),j=0):T++,g=g>>1}S--,S==0&&(S=Math.pow(2,A),A++),delete _[x]}else for(g=y[x],p=0;p<A;p++)j=j<<1|g&1,T==f-1?(T=0,E.push(m(j)),j=0):T++,g=g>>1;S--,S==0&&(S=Math.pow(2,A),A++),y[w]=C++,x=String(b)}if(x!==""){if(Object.prototype.hasOwnProperty.call(_,x)){if(x.charCodeAt(0)<256){for(p=0;p<A;p++)j=j<<1,T==f-1?(T=0,E.push(m(j)),j=0):T++;for(g=x.charCodeAt(0),p=0;p<8;p++)j=j<<1|g&1,T==f-1?(T=0,E.push(m(j)),j=0):T++,g=g>>1}else{for(g=1,p=0;p<A;p++)j=j<<1|g,T==f-1?(T=0,E.push(m(j)),j=0):T++,g=0;for(g=x.charCodeAt(0),p=0;p<16;p++)j=j<<1|g&1,T==f-1?(T=0,E.push(m(j)),j=0):T++,g=g>>1}S--,S==0&&(S=Math.pow(2,A),A++),delete _[x]}else for(g=y[x],p=0;p<A;p++)j=j<<1|g&1,T==f-1?(T=0,E.push(m(j)),j=0):T++,g=g>>1;S--,S==0&&(S=Math.pow(2,A),A++)}for(g=2,p=0;p<A;p++)j=j<<1|g&1,T==f-1?(T=0,E.push(m(j)),j=0):T++,g=g>>1;for(;;)if(j=j<<1,T==f-1){E.push(m(j));break}else T++;return E.join("")},decompress:function(d){return d==null?"":d==""?null:u._decompress(d.length,32768,function(f){return d.charCodeAt(f)})},_decompress:function(d,f,m){var p=[],g=4,y=4,_=3,b="",w=[],x,S,C,A,E,j,T,z={val:m(0),position:f,index:1};for(x=0;x<3;x+=1)p[x]=x;for(C=0,E=Math.pow(2,2),j=1;j!=E;)A=z.val&z.position,z.position>>=1,z.position==0&&(z.position=f,z.val=m(z.index++)),C|=(A>0?1:0)*j,j<<=1;switch(C){case 0:for(C=0,E=Math.pow(2,8),j=1;j!=E;)A=z.val&z.position,z.position>>=1,z.position==0&&(z.position=f,z.val=m(z.index++)),C|=(A>0?1:0)*j,j<<=1;T=r(C);break;case 1:for(C=0,E=Math.pow(2,16),j=1;j!=E;)A=z.val&z.position,z.position>>=1,z.position==0&&(z.position=f,z.val=m(z.index++)),C|=(A>0?1:0)*j,j<<=1;T=r(C);break;case 2:return""}for(p[3]=T,S=T,w.push(T);;){if(z.index>d)return"";for(C=0,E=Math.pow(2,_),j=1;j!=E;)A=z.val&z.position,z.position>>=1,z.position==0&&(z.position=f,z.val=m(z.index++)),C|=(A>0?1:0)*j,j<<=1;switch(T=C){case 0:for(C=0,E=Math.pow(2,8),j=1;j!=E;)A=z.val&z.position,z.position>>=1,z.position==0&&(z.position=f,z.val=m(z.index++)),C|=(A>0?1:0)*j,j<<=1;p[y++]=r(C),T=y-1,g--;break;case 1:for(C=0,E=Math.pow(2,16),j=1;j!=E;)A=z.val&z.position,z.position>>=1,z.position==0&&(z.position=f,z.val=m(z.index++)),C|=(A>0?1:0)*j,j<<=1;p[y++]=r(C),T=y-1,g--;break;case 2:return w.join("")}if(g==0&&(g=Math.pow(2,_),_++),p[T])b=p[T];else if(T===y)b=S+S.charAt(0);else return null;w.push(b),p[y++]=S+b.charAt(0),g--,S=b,g==0&&(g=Math.pow(2,_),_++)}}};return u})();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})})(r0)),r0.exports}var r7=n7();const aA=xu(r7),jh={schema_version:"sv",name:"n",description:"d",components:"c",component_type:"ct",internal:"i",external_dependency:"e",data_store:"ds",data_flows:"df",boundaries:"b",threats:"th",controls:"co",assets:"a",affected_components:"ac",affected_data_flows:"af",affected_assets:"aa",mitigates:"m",implemented_in:"ii",source:"s",destination:"de",direction:"di",label:"l",source_point:"sp",destination_point:"dp",width:"w",height:"h",status:"st",status_link:"sl",status_note:"sn",unidirectional:"u",bidirectional:"bi",github_metadata:"gm",domain:"do",owner:"o",repository:"r",sha:"sh",loadedAt:"la"},i0=Object.fromEntries(Object.entries(jh).map(([e,t])=>[t,e]));function X0(e){if(e==null)return e;if(Array.isArray(e))return e.map(t=>X0(t));if(typeof e=="object"){const t={};for(const[r,a]of Object.entries(e)){const s=jh[r]||r,o=typeof a=="string"&&jh[a]?jh[a]:X0(a);t[s]=o}return t}return e}function Z0(e){if(e==null)return e;if(Array.isArray(e))return e.map(t=>Z0(t));if(typeof e=="object"){const t={};for(const[r,a]of Object.entries(e)){const s=i0[r]||r,o=typeof a=="string"&&i0[a]?i0[a]:Z0(a);t[s]=o}return t}return e}function i7(e,t){try{const r=t?{...e,github_metadata:t}:e,a=X0(r),s=JSON.stringify(a);return aA.compressToEncodedURIComponent(s)}catch(r){throw console.error("Failed to encode model for URL:",r),new Error("Failed to encode threat model for URL sharing")}}function a7(e){try{const t=aA.decompressFromEncodedURIComponent(e);if(!t)throw new Error("Failed to decompress URL data");const r=JSON.parse(t),a=Z0(r),{github_metadata:s,...o}=a;return{model:o,...s&&{githubMetadata:s}}}catch(t){throw console.error("Failed to decode model from URL:",t),new Error("Failed to decode threat model from URL")}}function sA(e,t,r){const a=i7(e,t);return`${window.location.origin+window.location.pathname}?model=${a}`}function s7(){return new URLSearchParams(window.location.search).get("model")}const o7={minDistance:20,maxTolerance:500,toleranceStep:50};function oA(e,t,r,a,s={}){const{minDistance:o,maxTolerance:l,toleranceStep:u}={...o7,...s},d=r.includes("-");for(let f=u;f<=l;f+=u){let m=null,p=1/0;for(const g of a){const y=g.x-e,_=g.y-t;let b=!1,w=0;if(d){const x=Math.sqrt(y*y+_*_),S=Math.atan2(_,y);let C;switch(r){case"up-right":C=-Math.PI/4;break;case"down-right":C=Math.PI/4;break;case"down-left":C=3*Math.PI/4;break;case"up-left":C=-3*Math.PI/4;break;default:C=0}let A=Math.abs(S-C);A>Math.PI&&(A=2*Math.PI-A);const E=Math.PI/6+f/500*(Math.PI/6);b=A<=E&&x>=o,w=x}else switch(r){case"left":case"right":{const x=Math.abs(y),S=Math.abs(_),C=r==="left"?y<0:y>0,A=x>=o,E=S<=f;b=C&&A&&E,w=x;break}case"up":case"down":{const x=Math.abs(_),S=Math.abs(y),C=r==="up"?_<0:_>0,A=x>=o,E=S<=f;b=C&&A&&E,w=x;break}}b&&w<p&&(m=g,p=w)}if(m)return m}return null}function lA(e,t,r,a,s=[],o={}){const l=a.filter(d=>!s.includes(d.id)).map(d=>({node:d,x:d.position.x+(d.width||0)/2,y:d.position.y+(d.height||0)/2}));return oA(e,t,r,l,o)?.node||null}function H2(e,t,r,a=140,s=80,o=-10,l=-20){const f=a+o*2,m=s+l*2;let p=e,g=t;const y=21,_=[[0,0],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1],[1,2],[0,2],[-1,2],[-1,-2],[0,-2],[1,-2],[1,3],[0,3],[-1,3],[-1,-3],[0,-3],[1,-3]];for(let b=0;b<_.length&&b<y;b++)if(p=e+_[b][0]*f,g=t+_[b][1]*m,!r.some(x=>{if(x.type==="boundaryNode")return!1;const S=x.style?.width||(x.type==="boundaryNode"?150:140),C=x.style?.height||(x.type==="boundaryNode"?75:80),A=p- -20,E=p+a+-20,j=g- -20,T=g+s+-20,z=x.position.x- -20,L=x.position.x+S+-20,V=x.position.y- -20,F=x.position.y+C+-20,M=A<L&&E>z,O=j<F&&T>V;return M&&O}))return{x:p,y:g};return p=e,g=t,{x:p,y:g}}function l7(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),a=r.createElement("base"),s=r.createElement("a");return r.head.appendChild(a),r.body.appendChild(s),t&&(a.href=t),s.href=e,s.href}const c7=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function as(e){const t=[];for(let r=0,a=e.length;r<a;r++)t.push(e[r]);return t}let Jo=null;function cA(e={}){return Jo||(e.includeStyleProperties?(Jo=e.includeStyleProperties,Jo):(Jo=as(window.getComputedStyle(document.documentElement)),Jo))}function fm(e,t){const a=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return a?parseFloat(a.replace("px","")):0}function u7(e){const t=fm(e,"border-left-width"),r=fm(e,"border-right-width");return e.clientWidth+t+r}function d7(e){const t=fm(e,"border-top-width"),r=fm(e,"border-bottom-width");return e.clientHeight+t+r}function f7(e,t={}){const r=t.width||u7(e),a=t.height||d7(e);return{width:r,height:a}}function W0(e){return new Promise((t,r)=>{const a=new Image;a.onload=()=>{a.decode().then(()=>{requestAnimationFrame(()=>t(a))})},a.onerror=r,a.crossOrigin="anonymous",a.decoding="async",a.src=e})}async function h7(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function m7(e,t,r){const a="http://www.w3.org/2000/svg",s=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return s.setAttribute("width",`${t}`),s.setAttribute("height",`${r}`),s.setAttribute("viewBox",`0 0 ${t} ${r}`),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),s.appendChild(o),o.appendChild(e),h7(s)}const vr=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||vr(r,t)};function p7(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function g7(e,t){return cA(t).map(r=>{const a=e.getPropertyValue(r),s=e.getPropertyPriority(r);return`${r}: ${a}${s?" !important":""};`}).join(" ")}function y7(e,t,r,a){const s=`.${e}:${t}`,o=r.cssText?p7(r):g7(r,a);return document.createTextNode(`${s}{${o}}`)}function U2(e,t,r,a){const s=window.getComputedStyle(e,r),o=s.getPropertyValue("content");if(o===""||o==="none")return;const l=c7();try{t.className=`${t.className} ${l}`}catch{return}const u=document.createElement("style");u.appendChild(y7(l,r,s,a)),t.appendChild(u)}function v7(e,t,r){U2(e,t,":before",r),U2(e,t,":after",r)}const F2="application/font-woff",q2="image/jpeg",b7={woff:F2,woff2:F2,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:q2,jpeg:q2,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function w7(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function eb(e){const t=w7(e).toLowerCase();return b7[t]||""}function x7(e){return e.split(/,/)[1]}function Q0(e){return e.search(/^(data:)/)!==-1}function _7(e,t){return`data:${t};base64,${e}`}async function uA(e,t,r){const a=await fetch(e,t);if(a.status===404)throw new Error(`Resource "${a.url}" not found`);const s=await a.blob();return new Promise((o,l)=>{const u=new FileReader;u.onerror=l,u.onloadend=()=>{try{o(r({res:a,result:u.result}))}catch(d){l(d)}},u.readAsDataURL(s)})}const a0={};function S7(e,t,r){let a=e.replace(/\?.*/,"");return r&&(a=e),/ttf|otf|eot|woff2?/i.test(a)&&(a=a.replace(/.*\//,"")),t?`[${t}]${a}`:a}async function tb(e,t,r){const a=S7(e,t,r.includeQueryParams);if(a0[a]!=null)return a0[a];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let s;try{const o=await uA(e,r.fetchRequestInit,({res:l,result:u})=>(t||(t=l.headers.get("Content-Type")||""),x7(u)));s=_7(o,t)}catch(o){s=r.imagePlaceholder||"";let l=`Failed to fetch resource: ${e}`;o&&(l=typeof o=="string"?o:o.message),l&&console.warn(l)}return a0[a]=s,s}async function C7(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):W0(t)}async function E7(e,t){if(e.currentSrc){const o=document.createElement("canvas"),l=o.getContext("2d");o.width=e.clientWidth,o.height=e.clientHeight,l?.drawImage(e,0,0,o.width,o.height);const u=o.toDataURL();return W0(u)}const r=e.poster,a=eb(r),s=await tb(r,a,t);return W0(s)}async function k7(e,t){var r;try{if(!((r=e?.contentDocument)===null||r===void 0)&&r.body)return await ip(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function N7(e,t){return vr(e,HTMLCanvasElement)?C7(e):vr(e,HTMLVideoElement)?E7(e,t):vr(e,HTMLIFrameElement)?k7(e,t):e.cloneNode(dA(e))}const A7=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",dA=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function j7(e,t,r){var a,s;if(dA(t))return t;let o=[];return A7(e)&&e.assignedNodes?o=as(e.assignedNodes()):vr(e,HTMLIFrameElement)&&(!((a=e.contentDocument)===null||a===void 0)&&a.body)?o=as(e.contentDocument.body.childNodes):o=as(((s=e.shadowRoot)!==null&&s!==void 0?s:e).childNodes),o.length===0||vr(e,HTMLVideoElement)||await o.reduce((l,u)=>l.then(()=>ip(u,r)).then(d=>{d&&t.appendChild(d)}),Promise.resolve()),t}function T7(e,t,r){const a=t.style;if(!a)return;const s=window.getComputedStyle(e);s.cssText?(a.cssText=s.cssText,a.transformOrigin=s.transformOrigin):cA(r).forEach(o=>{let l=s.getPropertyValue(o);o==="font-size"&&l.endsWith("px")&&(l=`${Math.floor(parseFloat(l.substring(0,l.length-2)))-.1}px`),vr(e,HTMLIFrameElement)&&o==="display"&&l==="inline"&&(l="block"),o==="d"&&t.getAttribute("d")&&(l=`path(${t.getAttribute("d")})`),a.setProperty(o,l,s.getPropertyPriority(o))})}function D7(e,t){vr(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),vr(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function R7(e,t){if(vr(e,HTMLSelectElement)){const a=Array.from(t.children).find(s=>e.value===s.getAttribute("value"));a&&a.setAttribute("selected","")}}function $7(e,t,r){return vr(t,Element)&&(T7(e,t,r),v7(e,t,r),D7(e,t),R7(e,t)),t}async function M7(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const a={};for(let o=0;o<r.length;o++){const u=r[o].getAttribute("xlink:href");if(u){const d=e.querySelector(u),f=document.querySelector(u);!d&&f&&!a[u]&&(a[u]=await ip(f,t,!0))}}const s=Object.values(a);if(s.length){const o="http://www.w3.org/1999/xhtml",l=document.createElementNS(o,"svg");l.setAttribute("xmlns",o),l.style.position="absolute",l.style.width="0",l.style.height="0",l.style.overflow="hidden",l.style.display="none";const u=document.createElementNS(o,"defs");l.appendChild(u);for(let d=0;d<s.length;d++)u.appendChild(s[d]);e.appendChild(l)}return e}async function ip(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(a=>N7(a,t)).then(a=>j7(e,a,t)).then(a=>$7(e,a,t)).then(a=>M7(a,t))}const fA=/url\((['"]?)([^'"]+?)\1\)/g,O7=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,z7=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function L7(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function I7(e){const t=[];return e.replace(fA,(r,a,s)=>(t.push(s),r)),t.filter(r=>!Q0(r))}async function P7(e,t,r,a,s){try{const o=r?l7(t,r):t,l=eb(t);let u;return s||(u=await tb(o,l,a)),e.replace(L7(t),`$1${u}$3`)}catch{}return e}function B7(e,{preferredFontFormat:t}){return t?e.replace(z7,r=>{for(;;){const[a,,s]=O7.exec(r)||[];if(!s)return"";if(s===t)return`src: ${a};`}}):e}function hA(e){return e.search(fA)!==-1}async function mA(e,t,r){if(!hA(e))return e;const a=B7(e,r);return I7(a).reduce((o,l)=>o.then(u=>P7(u,l,t,r)),Promise.resolve(a))}async function el(e,t,r){var a;const s=(a=t.style)===null||a===void 0?void 0:a.getPropertyValue(e);if(s){const o=await mA(s,null,r);return t.style.setProperty(e,o,t.style.getPropertyPriority(e)),!0}return!1}async function H7(e,t){await el("background",e,t)||await el("background-image",e,t),await el("mask",e,t)||await el("-webkit-mask",e,t)||await el("mask-image",e,t)||await el("-webkit-mask-image",e,t)}async function U7(e,t){const r=vr(e,HTMLImageElement);if(!(r&&!Q0(e.src))&&!(vr(e,SVGImageElement)&&!Q0(e.href.baseVal)))return;const a=r?e.src:e.href.baseVal,s=await tb(a,eb(a),t);await new Promise((o,l)=>{e.onload=o,e.onerror=t.onImageErrorHandler?(...d)=>{try{o(t.onImageErrorHandler(...d))}catch(f){l(f)}}:l;const u=e;u.decode&&(u.decode=o),u.loading==="lazy"&&(u.loading="eager"),r?(e.srcset="",e.src=s):e.href.baseVal=s})}async function F7(e,t){const a=as(e.childNodes).map(s=>pA(s,t));await Promise.all(a).then(()=>e)}async function pA(e,t){vr(e,Element)&&(await H7(e,t),await U7(e,t),await F7(e,t))}function q7(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const a=t.style;return a!=null&&Object.keys(a).forEach(s=>{r[s]=a[s]}),e}const V2={};async function Y2(e){let t=V2[e];if(t!=null)return t;const a=await(await fetch(e)).text();return t={url:e,cssText:a},V2[e]=t,t}async function G2(e,t){let r=e.cssText;const a=/url\(["']?([^"')]+)["']?\)/g,o=(r.match(/url\([^)]+\)/g)||[]).map(async l=>{let u=l.replace(a,"$1");return u.startsWith("https://")||(u=new URL(u,e.url).href),uA(u,t.fetchRequestInit,({result:d})=>(r=r.replace(l,`url(${d})`),[l,d]))});return Promise.all(o).then(()=>r)}function K2(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let a=e.replace(r,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const d=s.exec(a);if(d===null)break;t.push(d[0])}a=a.replace(s,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,l="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",u=new RegExp(l,"gi");for(;;){let d=o.exec(a);if(d===null){if(d=u.exec(a),d===null)break;o.lastIndex=u.lastIndex}else u.lastIndex=o.lastIndex;t.push(d[0])}return t}async function V7(e,t){const r=[],a=[];return e.forEach(s=>{if("cssRules"in s)try{as(s.cssRules||[]).forEach((o,l)=>{if(o.type===CSSRule.IMPORT_RULE){let u=l+1;const d=o.href,f=Y2(d).then(m=>G2(m,t)).then(m=>K2(m).forEach(p=>{try{s.insertRule(p,p.startsWith("@import")?u+=1:s.cssRules.length)}catch(g){console.error("Error inserting rule from remote css",{rule:p,error:g})}})).catch(m=>{console.error("Error loading remote css",m.toString())});a.push(f)}})}catch(o){const l=e.find(u=>u.href==null)||document.styleSheets[0];s.href!=null&&a.push(Y2(s.href).then(u=>G2(u,t)).then(u=>K2(u).forEach(d=>{l.insertRule(d,l.cssRules.length)})).catch(u=>{console.error("Error loading remote stylesheet",u)})),console.error("Error inlining remote css file",o)}}),Promise.all(a).then(()=>(e.forEach(s=>{if("cssRules"in s)try{as(s.cssRules||[]).forEach(o=>{r.push(o)})}catch(o){console.error(`Error while reading CSS rules from ${s.href}`,o)}}),r))}function Y7(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>hA(t.style.getPropertyValue("src")))}async function G7(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=as(e.ownerDocument.styleSheets),a=await V7(r,t);return Y7(a)}function gA(e){return e.trim().replace(/["']/g,"")}function K7(e){const t=new Set;function r(a){(a.style.fontFamily||getComputedStyle(a).fontFamily).split(",").forEach(o=>{t.add(gA(o))}),Array.from(a.children).forEach(o=>{o instanceof HTMLElement&&r(o)})}return r(e),t}async function X7(e,t){const r=await G7(e,t),a=K7(e);return(await Promise.all(r.filter(o=>a.has(gA(o.style.fontFamily))).map(o=>{const l=o.parentStyleSheet?o.parentStyleSheet.href:null;return mA(o.cssText,l,t)}))).join(`
`)}async function Z7(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await X7(e,t);if(r){const a=document.createElement("style"),s=document.createTextNode(r);a.appendChild(s),e.firstChild?e.insertBefore(a,e.firstChild):e.appendChild(a)}}async function W7(e,t={}){const{width:r,height:a}=f7(e,t),s=await ip(e,t,!0);return await Z7(s,t),await pA(s,t),q7(s,t),await m7(s,r,a)}function mh(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var s0={exports:{}};var X2;function Q7(){return X2||(X2=1,(function(e,t){(function(r){e.exports=r()})(function(){return(function r(a,s,o){function l(f,m){if(!s[f]){if(!a[f]){var p=typeof mh=="function"&&mh;if(!m&&p)return p(f,!0);if(u)return u(f,!0);var g=new Error("Cannot find module '"+f+"'");throw g.code="MODULE_NOT_FOUND",g}var y=s[f]={exports:{}};a[f][0].call(y.exports,function(_){var b=a[f][1][_];return l(b||_)},y,y.exports,r,a,s,o)}return s[f].exports}for(var u=typeof mh=="function"&&mh,d=0;d<o.length;d++)l(o[d]);return l})({1:[function(r,a,s){var o=r("./utils"),l=r("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(d){for(var f,m,p,g,y,_,b,w=[],x=0,S=d.length,C=S,A=o.getTypeOf(d)!=="string";x<d.length;)C=S-x,p=A?(f=d[x++],m=x<S?d[x++]:0,x<S?d[x++]:0):(f=d.charCodeAt(x++),m=x<S?d.charCodeAt(x++):0,x<S?d.charCodeAt(x++):0),g=f>>2,y=(3&f)<<4|m>>4,_=1<C?(15&m)<<2|p>>6:64,b=2<C?63&p:64,w.push(u.charAt(g)+u.charAt(y)+u.charAt(_)+u.charAt(b));return w.join("")},s.decode=function(d){var f,m,p,g,y,_,b=0,w=0,x="data:";if(d.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var S,C=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===u.charAt(64)&&C--,d.charAt(d.length-2)===u.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=l.uint8array?new Uint8Array(0|C):new Array(0|C);b<d.length;)f=u.indexOf(d.charAt(b++))<<2|(g=u.indexOf(d.charAt(b++)))>>4,m=(15&g)<<4|(y=u.indexOf(d.charAt(b++)))>>2,p=(3&y)<<6|(_=u.indexOf(d.charAt(b++))),S[w++]=f,y!==64&&(S[w++]=m),_!==64&&(S[w++]=p);return S}},{"./support":30,"./utils":32}],2:[function(r,a,s){var o=r("./external"),l=r("./stream/DataWorker"),u=r("./stream/Crc32Probe"),d=r("./stream/DataLengthProbe");function f(m,p,g,y,_){this.compressedSize=m,this.uncompressedSize=p,this.crc32=g,this.compression=y,this.compressedContent=_}f.prototype={getContentWorker:function(){var m=new l(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),p=this;return m.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new l(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(m,p,g){return m.pipe(new u).pipe(new d("uncompressedSize")).pipe(p.compressWorker(g)).pipe(new d("compressedSize")).withStreamInfo("compression",p)},a.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,a,s){var o=r("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},s.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,a,s){var o=r("./utils"),l=(function(){for(var u,d=[],f=0;f<256;f++){u=f;for(var m=0;m<8;m++)u=1&u?3988292384^u>>>1:u>>>1;d[f]=u}return d})();a.exports=function(u,d){return u!==void 0&&u.length?o.getTypeOf(u)!=="string"?(function(f,m,p,g){var y=l,_=g+p;f^=-1;for(var b=g;b<_;b++)f=f>>>8^y[255&(f^m[b])];return-1^f})(0|d,u,u.length,0):(function(f,m,p,g){var y=l,_=g+p;f^=-1;for(var b=g;b<_;b++)f=f>>>8^y[255&(f^m.charCodeAt(b))];return-1^f})(0|d,u,u.length,0):0}},{"./utils":32}],5:[function(r,a,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(r,a,s){var o=null;o=typeof Promise<"u"?Promise:r("lie"),a.exports={Promise:o}},{lie:37}],7:[function(r,a,s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=r("pako"),u=r("./utils"),d=r("./stream/GenericWorker"),f=o?"uint8array":"array";function m(p,g){d.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=g,this.meta={}}s.magic="\b\0",u.inherits(m,d),m.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(f,p.data),!1)},m.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(g){p.push({data:g,meta:p.meta})}},s.compressWorker=function(p){return new m("Deflate",p)},s.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,a,s){function o(y,_){var b,w="";for(b=0;b<_;b++)w+=String.fromCharCode(255&y),y>>>=8;return w}function l(y,_,b,w,x,S){var C,A,E=y.file,j=y.compression,T=S!==f.utf8encode,z=u.transformTo("string",S(E.name)),L=u.transformTo("string",f.utf8encode(E.name)),V=E.comment,F=u.transformTo("string",S(V)),M=u.transformTo("string",f.utf8encode(V)),O=L.length!==E.name.length,R=M.length!==V.length,G="",H="",U="",Z=E.dir,X=E.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};_&&!b||(Q.crc32=y.crc32,Q.compressedSize=y.compressedSize,Q.uncompressedSize=y.uncompressedSize);var $=0;_&&($|=8),T||!O&&!R||($|=2048);var B=0,K=0;Z&&(B|=16),x==="UNIX"?(K=798,B|=(function(q,J){var le=q;return q||(le=J?16893:33204),(65535&le)<<16})(E.unixPermissions,Z)):(K=20,B|=(function(q){return 63&(q||0)})(E.dosPermissions)),C=X.getUTCHours(),C<<=6,C|=X.getUTCMinutes(),C<<=5,C|=X.getUTCSeconds()/2,A=X.getUTCFullYear()-1980,A<<=4,A|=X.getUTCMonth()+1,A<<=5,A|=X.getUTCDate(),O&&(H=o(1,1)+o(m(z),4)+L,G+="up"+o(H.length,2)+H),R&&(U=o(1,1)+o(m(F),4)+M,G+="uc"+o(U.length,2)+U);var P="";return P+=`
\0`,P+=o($,2),P+=j.magic,P+=o(C,2),P+=o(A,2),P+=o(Q.crc32,4),P+=o(Q.compressedSize,4),P+=o(Q.uncompressedSize,4),P+=o(z.length,2),P+=o(G.length,2),{fileRecord:p.LOCAL_FILE_HEADER+P+z+G,dirRecord:p.CENTRAL_FILE_HEADER+o(K,2)+P+o(F.length,2)+"\0\0\0\0"+o(B,4)+o(w,4)+z+G+F}}var u=r("../utils"),d=r("../stream/GenericWorker"),f=r("../utf8"),m=r("../crc32"),p=r("../signature");function g(y,_,b,w){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=b,this.encodeFileName=w,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(g,d),g.prototype.push=function(y){var _=y.meta.percent||0,b=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,d.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:b?(_+100*(b-w-1))/b:100}}))},g.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var _=this.streamFiles&&!y.file.dir;if(_){var b=l(y,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(y){this.accumulate=!1;var _=this.streamFiles&&!y.file.dir,b=l(y,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),_)this.push({data:(function(w){return p.DATA_DESCRIPTOR+o(w.crc32,4)+o(w.compressedSize,4)+o(w.uncompressedSize,4)})(y),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var y=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var b=this.bytesWritten-y,w=(function(x,S,C,A,E){var j=u.transformTo("string",E(A));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(x,2)+o(x,2)+o(S,4)+o(C,4)+o(j.length,2)+j})(this.dirRecords.length,b,y,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(y){this._sources.push(y);var _=this;return y.on("data",function(b){_.processChunk(b)}),y.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),y.on("error",function(b){_.error(b)}),this},g.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(y){var _=this._sources;if(!d.prototype.error.call(this,y))return!1;for(var b=0;b<_.length;b++)try{_[b].error(y)}catch{}return!0},g.prototype.lock=function(){d.prototype.lock.call(this);for(var y=this._sources,_=0;_<y.length;_++)y[_].lock()},a.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,a,s){var o=r("../compressions"),l=r("./ZipFileWorker");s.generateWorker=function(u,d,f){var m=new l(d.streamFiles,f,d.platform,d.encodeFileName),p=0;try{u.forEach(function(g,y){p++;var _=(function(S,C){var A=S||C,E=o[A];if(!E)throw new Error(A+" is not a valid compression method !");return E})(y.options.compression,d.compression),b=y.options.compressionOptions||d.compressionOptions||{},w=y.dir,x=y.date;y._compressWorker(_,b).withStreamInfo("file",{name:g,dir:w,date:x,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(m)}),m.entriesCount=p}catch(g){m.error(g)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,a,s){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new o;for(var u in this)typeof this[u]!="function"&&(l[u]=this[u]);return l}}(o.prototype=r("./object")).loadAsync=r("./load"),o.support=r("./support"),o.defaults=r("./defaults"),o.version="3.10.1",o.loadAsync=function(l,u){return new o().loadAsync(l,u)},o.external=r("./external"),a.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,a,s){var o=r("./utils"),l=r("./external"),u=r("./utf8"),d=r("./zipEntries"),f=r("./stream/Crc32Probe"),m=r("./nodejsUtils");function p(g){return new l.Promise(function(y,_){var b=g.decompressed.getContentWorker().pipe(new f);b.on("error",function(w){_(w)}).on("end",function(){b.streamInfo.crc32!==g.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}a.exports=function(g,y){var _=this;return y=o.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),m.isNode&&m.isStream(g)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",g,!0,y.optimizedBinaryString,y.base64).then(function(b){var w=new d(y);return w.load(b),w}).then(function(b){var w=[l.Promise.resolve(b)],x=b.files;if(y.checkCRC32)for(var S=0;S<x.length;S++)w.push(p(x[S]));return l.Promise.all(w)}).then(function(b){for(var w=b.shift(),x=w.files,S=0;S<x.length;S++){var C=x[S],A=C.fileNameStr,E=o.resolve(C.fileNameStr);_.file(E,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:y.createFolders}),C.dir||(_.file(E).unsafeOriginalName=A)}return w.zipComment.length&&(_.comment=w.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,a,s){var o=r("../utils"),l=r("../stream/GenericWorker");function u(d,f){l.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(f)}o.inherits(u,l),u.prototype._bindStream=function(d){var f=this;(this._stream=d).pause(),d.on("data",function(m){f.push({data:m,meta:{percent:0}})}).on("error",function(m){f.isPaused?this.generatedError=m:f.error(m)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},u.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,a,s){var o=r("readable-stream").Readable;function l(u,d,f){o.call(this,d),this._helper=u;var m=this;u.on("data",function(p,g){m.push(p)||m._helper.pause(),f&&f(g)}).on("error",function(p){m.emit("error",p)}).on("end",function(){m.push(null)})}r("../utils").inherits(l,o),l.prototype._read=function(){this._helper.resume()},a.exports=l},{"../utils":32,"readable-stream":16}],14:[function(r,a,s){a.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,l);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,l)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var l=new Buffer(o);return l.fill(0),l},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(r,a,s){function o(E,j,T){var z,L=u.getTypeOf(j),V=u.extend(T||{},m);V.date=V.date||new Date,V.compression!==null&&(V.compression=V.compression.toUpperCase()),typeof V.unixPermissions=="string"&&(V.unixPermissions=parseInt(V.unixPermissions,8)),V.unixPermissions&&16384&V.unixPermissions&&(V.dir=!0),V.dosPermissions&&16&V.dosPermissions&&(V.dir=!0),V.dir&&(E=x(E)),V.createFolders&&(z=w(E))&&S.call(this,z,!0);var F=L==="string"&&V.binary===!1&&V.base64===!1;T&&T.binary!==void 0||(V.binary=!F),(j instanceof p&&j.uncompressedSize===0||V.dir||!j||j.length===0)&&(V.base64=!1,V.binary=!0,j="",V.compression="STORE",L="string");var M=null;M=j instanceof p||j instanceof d?j:_.isNode&&_.isStream(j)?new b(E,j):u.prepareContent(E,j,V.binary,V.optimizedBinaryString,V.base64);var O=new g(E,M,V);this.files[E]=O}var l=r("./utf8"),u=r("./utils"),d=r("./stream/GenericWorker"),f=r("./stream/StreamHelper"),m=r("./defaults"),p=r("./compressedObject"),g=r("./zipObject"),y=r("./generate"),_=r("./nodejsUtils"),b=r("./nodejs/NodejsStreamInputAdapter"),w=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var j=E.lastIndexOf("/");return 0<j?E.substring(0,j):""},x=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},S=function(E,j){return j=j!==void 0?j:m.createFolders,E=x(E),this.files[E]||o.call(this,E,null,{dir:!0,createFolders:j}),this.files[E]};function C(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var j,T,z;for(j in this.files)z=this.files[j],(T=j.slice(this.root.length,j.length))&&j.slice(0,this.root.length)===this.root&&E(T,z)},filter:function(E){var j=[];return this.forEach(function(T,z){E(T,z)&&j.push(z)}),j},file:function(E,j,T){if(arguments.length!==1)return E=this.root+E,o.call(this,E,j,T),this;if(C(E)){var z=E;return this.filter(function(V,F){return!F.dir&&z.test(V)})}var L=this.files[this.root+E];return L&&!L.dir?L:null},folder:function(E){if(!E)return this;if(C(E))return this.filter(function(L,V){return V.dir&&E.test(L)});var j=this.root+E,T=S.call(this,j),z=this.clone();return z.root=T.name,z},remove:function(E){E=this.root+E;var j=this.files[E];if(j||(E.slice(-1)!=="/"&&(E+="/"),j=this.files[E]),j&&!j.dir)delete this.files[E];else for(var T=this.filter(function(L,V){return V.name.slice(0,E.length)===E}),z=0;z<T.length;z++)delete this.files[T[z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var j,T={};try{if((T=u.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");u.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var z=T.comment||this.comment||"";j=y.generateWorker(this,T,z)}catch(L){(j=new d("error")).error(L)}return new f(j,T.type||"string",T.mimeType)},generateAsync:function(E,j){return this.generateInternalStream(E).accumulate(j)},generateNodeStream:function(E,j){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(j)}};a.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,a,s){a.exports=r("stream")},{stream:void 0}],17:[function(r,a,s){var o=r("./DataReader");function l(u){o.call(this,u);for(var d=0;d<this.data.length;d++)u[d]=255&u[d]}r("../utils").inherits(l,o),l.prototype.byteAt=function(u){return this.data[this.zero+u]},l.prototype.lastIndexOfSignature=function(u){for(var d=u.charCodeAt(0),f=u.charCodeAt(1),m=u.charCodeAt(2),p=u.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===d&&this.data[g+1]===f&&this.data[g+2]===m&&this.data[g+3]===p)return g-this.zero;return-1},l.prototype.readAndCheckSignature=function(u){var d=u.charCodeAt(0),f=u.charCodeAt(1),m=u.charCodeAt(2),p=u.charCodeAt(3),g=this.readData(4);return d===g[0]&&f===g[1]&&m===g[2]&&p===g[3]},l.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},a.exports=l},{"../utils":32,"./DataReader":18}],18:[function(r,a,s){var o=r("../utils");function l(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var d,f=0;for(this.checkOffset(u),d=this.index+u-1;d>=this.index;d--)f=(f<<8)+this.byteAt(d);return this.index+=u,f},readString:function(u){return o.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},a.exports=l},{"../utils":32}],19:[function(r,a,s){var o=r("./Uint8ArrayReader");function l(u){o.call(this,u)}r("../utils").inherits(l,o),l.prototype.readData=function(u){this.checkOffset(u);var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},a.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,a,s){var o=r("./DataReader");function l(u){o.call(this,u)}r("../utils").inherits(l,o),l.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},l.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},l.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},l.prototype.readData=function(u){this.checkOffset(u);var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},a.exports=l},{"../utils":32,"./DataReader":18}],21:[function(r,a,s){var o=r("./ArrayReader");function l(u){o.call(this,u)}r("../utils").inherits(l,o),l.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},a.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(r,a,s){var o=r("../utils"),l=r("../support"),u=r("./ArrayReader"),d=r("./StringReader"),f=r("./NodeBufferReader"),m=r("./Uint8ArrayReader");a.exports=function(p){var g=o.getTypeOf(p);return o.checkSupport(g),g!=="string"||l.uint8array?g==="nodebuffer"?new f(p):l.uint8array?new m(o.transformTo("uint8array",p)):new u(o.transformTo("array",p)):new d(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,a,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,a,s){var o=r("./GenericWorker"),l=r("../utils");function u(d){o.call(this,"ConvertWorker to "+d),this.destType=d}l.inherits(u,o),u.prototype.processChunk=function(d){this.push({data:l.transformTo(this.destType,d.data),meta:d.meta})},a.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(r,a,s){var o=r("./GenericWorker"),l=r("../crc32");function u(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(u,o),u.prototype.processChunk=function(d){this.streamInfo.crc32=l(d.data,this.streamInfo.crc32||0),this.push(d)},a.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,a,s){var o=r("../utils"),l=r("./GenericWorker");function u(d){l.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}o.inherits(u,l),u.prototype.processChunk=function(d){if(d){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+d.data.length}l.prototype.processChunk.call(this,d)},a.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(r,a,s){var o=r("../utils"),l=r("./GenericWorker");function u(d){l.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(m){f.dataIsReady=!0,f.data=m,f.max=m&&m.length||0,f.type=o.getTypeOf(m),f.isPaused||f._tickAndRepeat()},function(m){f.error(m)})}o.inherits(u,l),u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,f);break;case"uint8array":d=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":d=this.data.slice(this.index,f)}return this.index=f,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(r,a,s){function o(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,u){return this._listeners[l].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,u){if(this._listeners[l])for(var d=0;d<this._listeners[l].length;d++)this._listeners[l][d].call(this,u)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var u=this;return l.on("data",function(d){u.processChunk(d)}),l.on("end",function(){u.end()}),l.on("error",function(d){u.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,u){return this.extraStreamInfo[l]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},a.exports=o},{}],29:[function(r,a,s){var o=r("../utils"),l=r("./ConvertWorker"),u=r("./GenericWorker"),d=r("../base64"),f=r("../support"),m=r("../external"),p=null;if(f.nodestream)try{p=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(_,b){return new m.Promise(function(w,x){var S=[],C=_._internalType,A=_._outputType,E=_._mimeType;_.on("data",function(j,T){S.push(j),b&&b(T)}).on("error",function(j){S=[],x(j)}).on("end",function(){try{var j=(function(T,z,L){switch(T){case"blob":return o.newBlob(o.transformTo("arraybuffer",z),L);case"base64":return d.encode(z);default:return o.transformTo(T,z)}})(A,(function(T,z){var L,V=0,F=null,M=0;for(L=0;L<z.length;L++)M+=z[L].length;switch(T){case"string":return z.join("");case"array":return Array.prototype.concat.apply([],z);case"uint8array":for(F=new Uint8Array(M),L=0;L<z.length;L++)F.set(z[L],V),V+=z[L].length;return F;case"nodebuffer":return Buffer.concat(z);default:throw new Error("concat : unsupported type '"+T+"'")}})(C,S),E);w(j)}catch(T){x(T)}S=[]}).resume()})}function y(_,b,w){var x=b;switch(b){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=b,this._mimeType=w,o.checkSupport(x),this._worker=_.pipe(new l(x)),_.lock()}catch(S){this._worker=new u("error"),this._worker.error(S)}}y.prototype={accumulate:function(_){return g(this,_)},on:function(_,b){var w=this;return _==="data"?this._worker.on(_,function(x){b.call(w,x.data,x.meta)}):this._worker.on(_,function(){o.delay(b,arguments,w)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},_)}},a.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,a,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var o=new ArrayBuffer(0);try{s.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(o),s.blob=l.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!r("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(r,a,s){for(var o=r("./utils"),l=r("./support"),u=r("./nodejsUtils"),d=r("./stream/GenericWorker"),f=new Array(256),m=0;m<256;m++)f[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;f[254]=f[254]=1;function p(){d.call(this,"utf-8 decode"),this.leftOver=null}function g(){d.call(this,"utf-8 encode")}s.utf8encode=function(y){return l.nodebuffer?u.newBufferFrom(y,"utf-8"):(function(_){var b,w,x,S,C,A=_.length,E=0;for(S=0;S<A;S++)(64512&(w=_.charCodeAt(S)))==55296&&S+1<A&&(64512&(x=_.charCodeAt(S+1)))==56320&&(w=65536+(w-55296<<10)+(x-56320),S++),E+=w<128?1:w<2048?2:w<65536?3:4;for(b=l.uint8array?new Uint8Array(E):new Array(E),S=C=0;C<E;S++)(64512&(w=_.charCodeAt(S)))==55296&&S+1<A&&(64512&(x=_.charCodeAt(S+1)))==56320&&(w=65536+(w-55296<<10)+(x-56320),S++),w<128?b[C++]=w:(w<2048?b[C++]=192|w>>>6:(w<65536?b[C++]=224|w>>>12:(b[C++]=240|w>>>18,b[C++]=128|w>>>12&63),b[C++]=128|w>>>6&63),b[C++]=128|63&w);return b})(y)},s.utf8decode=function(y){return l.nodebuffer?o.transformTo("nodebuffer",y).toString("utf-8"):(function(_){var b,w,x,S,C=_.length,A=new Array(2*C);for(b=w=0;b<C;)if((x=_[b++])<128)A[w++]=x;else if(4<(S=f[x]))A[w++]=65533,b+=S-1;else{for(x&=S===2?31:S===3?15:7;1<S&&b<C;)x=x<<6|63&_[b++],S--;1<S?A[w++]=65533:x<65536?A[w++]=x:(x-=65536,A[w++]=55296|x>>10&1023,A[w++]=56320|1023&x)}return A.length!==w&&(A.subarray?A=A.subarray(0,w):A.length=w),o.applyFromCharCode(A)})(y=o.transformTo(l.uint8array?"uint8array":"array",y))},o.inherits(p,d),p.prototype.processChunk=function(y){var _=o.transformTo(l.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var b=_;(_=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),_.set(b,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var w=(function(S,C){var A;for((C=C||S.length)>S.length&&(C=S.length),A=C-1;0<=A&&(192&S[A])==128;)A--;return A<0||A===0?C:A+f[S[A]]>C?A:C})(_),x=_;w!==_.length&&(l.uint8array?(x=_.subarray(0,w),this.leftOver=_.subarray(w,_.length)):(x=_.slice(0,w),this.leftOver=_.slice(w,_.length))),this.push({data:s.utf8decode(x),meta:y.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=p,o.inherits(g,d),g.prototype.processChunk=function(y){this.push({data:s.utf8encode(y.data),meta:y.meta})},s.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,a,s){var o=r("./support"),l=r("./base64"),u=r("./nodejsUtils"),d=r("./external");function f(b){return b}function m(b,w){for(var x=0;x<b.length;++x)w[x]=255&b.charCodeAt(x);return w}r("setimmediate"),s.newBlob=function(b,w){s.checkSupport("blob");try{return new Blob([b],{type:w})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(b),x.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(b,w,x){var S=[],C=0,A=b.length;if(A<=x)return String.fromCharCode.apply(null,b);for(;C<A;)w==="array"||w==="nodebuffer"?S.push(String.fromCharCode.apply(null,b.slice(C,Math.min(C+x,A)))):S.push(String.fromCharCode.apply(null,b.subarray(C,Math.min(C+x,A)))),C+=x;return S.join("")},stringifyByChar:function(b){for(var w="",x=0;x<b.length;x++)w+=String.fromCharCode(b[x]);return w},applyCanBeUsed:{uint8array:(function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}})()}};function g(b){var w=65536,x=s.getTypeOf(b),S=!0;if(x==="uint8array"?S=p.applyCanBeUsed.uint8array:x==="nodebuffer"&&(S=p.applyCanBeUsed.nodebuffer),S)for(;1<w;)try{return p.stringifyByChunk(b,x,w)}catch{w=Math.floor(w/2)}return p.stringifyByChar(b)}function y(b,w){for(var x=0;x<b.length;x++)w[x]=b[x];return w}s.applyFromCharCode=g;var _={};_.string={string:f,array:function(b){return m(b,new Array(b.length))},arraybuffer:function(b){return _.string.uint8array(b).buffer},uint8array:function(b){return m(b,new Uint8Array(b.length))},nodebuffer:function(b){return m(b,u.allocBuffer(b.length))}},_.array={string:g,array:f,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return u.newBufferFrom(b)}},_.arraybuffer={string:function(b){return g(new Uint8Array(b))},array:function(b){return y(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:f,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return u.newBufferFrom(new Uint8Array(b))}},_.uint8array={string:g,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:f,nodebuffer:function(b){return u.newBufferFrom(b)}},_.nodebuffer={string:g,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return _.nodebuffer.uint8array(b).buffer},uint8array:function(b){return y(b,new Uint8Array(b.length))},nodebuffer:f},s.transformTo=function(b,w){if(w=w||"",!b)return w;s.checkSupport(b);var x=s.getTypeOf(w);return _[x][b](w)},s.resolve=function(b){for(var w=b.split("/"),x=[],S=0;S<w.length;S++){var C=w[S];C==="."||C===""&&S!==0&&S!==w.length-1||(C===".."?x.pop():x.push(C))}return x.join("/")},s.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":o.nodebuffer&&u.isBuffer(b)?"nodebuffer":o.uint8array&&b instanceof Uint8Array?"uint8array":o.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(b){if(!o[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(b){var w,x,S="";for(x=0;x<(b||"").length;x++)S+="\\x"+((w=b.charCodeAt(x))<16?"0":"")+w.toString(16).toUpperCase();return S},s.delay=function(b,w,x){setImmediate(function(){b.apply(x||null,w||[])})},s.inherits=function(b,w){function x(){}x.prototype=w.prototype,b.prototype=new x},s.extend=function(){var b,w,x={};for(b=0;b<arguments.length;b++)for(w in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],w)&&x[w]===void 0&&(x[w]=arguments[b][w]);return x},s.prepareContent=function(b,w,x,S,C){return d.Promise.resolve(w).then(function(A){return o.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new d.Promise(function(E,j){var T=new FileReader;T.onload=function(z){E(z.target.result)},T.onerror=function(z){j(z.target.error)},T.readAsArrayBuffer(A)}):A}).then(function(A){var E=s.getTypeOf(A);return E?(E==="arraybuffer"?A=s.transformTo("uint8array",A):E==="string"&&(C?A=l.decode(A):x&&S!==!0&&(A=(function(j){return m(j,o.uint8array?new Uint8Array(j.length):new Array(j.length))})(A))),A):d.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,a,s){var o=r("./reader/readerFor"),l=r("./utils"),u=r("./signature"),d=r("./zipEntry"),f=r("./support");function m(p){this.files=[],this.loadOptions=p}m.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(g)+", expected "+l.pretty(p)+")")}},isSignature:function(p,g){var y=this.reader.index;this.reader.setIndex(p);var _=this.reader.readString(4)===g;return this.reader.setIndex(y),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),g=f.uint8array?"uint8array":"array",y=l.transformTo(g,p);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,g,y,_=this.zip64EndOfCentralSize-44;0<_;)p=this.reader.readInt(2),g=this.reader.readInt(4),y=this.reader.readData(g),this.zip64ExtensibleData[p]={id:p,length:g,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,g;for(p=0;p<this.files.length;p++)g=this.files[p],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(p=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var g=p;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var _=g-y;if(0<_)this.isSignature(g,u.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(p){this.reader=o(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,a,s){var o=r("./reader/readerFor"),l=r("./utils"),u=r("./compressedObject"),d=r("./crc32"),f=r("./utf8"),m=r("./compressions"),p=r("./support");function g(y,_){this.options=y,this.loadOptions=_}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var _,b;if(y.skip(22),this.fileNameLength=y.readInt(2),b=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=(function(w){for(var x in m)if(Object.prototype.hasOwnProperty.call(m,x)&&m[x].magic===w)return m[x];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,_,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var _=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(_),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=o(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var _,b,w,x=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<x;)_=y.readInt(2),b=y.readInt(2),w=y.readData(b),this.extraFields[_]={id:_,length:b,value:w};y.setIndex(x)},handleUTF8:function(){var y=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var b=l.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var x=l.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var _=o(y.value);return _.readInt(1)!==1||d(this.fileName)!==_.readInt(4)?null:f.utf8decode(_.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var _=o(y.value);return _.readInt(1)!==1||d(this.fileComment)!==_.readInt(4)?null:f.utf8decode(_.readData(y.length-5))}return null}},a.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,a,s){function o(_,b,w){this.name=_,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=b,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var l=r("./stream/StreamHelper"),u=r("./stream/DataWorker"),d=r("./utf8"),f=r("./compressedObject"),m=r("./stream/GenericWorker");o.prototype={internalStream:function(_){var b=null,w="string";try{if(!_)throw new Error("No output type specified.");var x=(w=_.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),b=this._decompressWorker();var S=!this._dataBinary;S&&!x&&(b=b.pipe(new d.Utf8EncodeWorker)),!S&&x&&(b=b.pipe(new d.Utf8DecodeWorker))}catch(C){(b=new m("error")).error(C)}return new l(b,w,"")},async:function(_,b){return this.internalStream(_).accumulate(b)},nodeStream:function(_,b){return this.internalStream(_||"nodebuffer").toNodejsStream(b)},_compressWorker:function(_,b){if(this._data instanceof f&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new d.Utf8EncodeWorker)),f.createWorkerFrom(w,_,b)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof m?this._data:new u(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<p.length;y++)o.prototype[p[y]]=g;a.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,a,s){(function(o){var l,u,d=o.MutationObserver||o.WebKitMutationObserver;if(d){var f=0,m=new d(_),p=o.document.createTextNode("");m.observe(p,{characterData:!0}),l=function(){p.data=f=++f%2}}else if(o.setImmediate||o.MessageChannel===void 0)l="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var b=o.document.createElement("script");b.onreadystatechange=function(){_(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},o.document.documentElement.appendChild(b)}:function(){setTimeout(_,0)};else{var g=new o.MessageChannel;g.port1.onmessage=_,l=function(){g.port2.postMessage(0)}}var y=[];function _(){var b,w;u=!0;for(var x=y.length;x;){for(w=y,y=[],b=-1;++b<x;)w[b]();x=y.length}u=!1}a.exports=function(b){y.push(b)!==1||u||l()}}).call(this,typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,a,s){var o=r("immediate");function l(){}var u={},d=["REJECTED"],f=["FULFILLED"],m=["PENDING"];function p(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,x!==l&&b(this,x)}function g(x,S,C){this.promise=x,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function y(x,S,C){o(function(){var A;try{A=S(C)}catch(E){return u.reject(x,E)}A===x?u.reject(x,new TypeError("Cannot resolve promise with itself")):u.resolve(x,A)})}function _(x){var S=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof S=="function")return function(){S.apply(x,arguments)}}function b(x,S){var C=!1;function A(T){C||(C=!0,u.reject(x,T))}function E(T){C||(C=!0,u.resolve(x,T))}var j=w(function(){S(E,A)});j.status==="error"&&A(j.value)}function w(x,S){var C={};try{C.value=x(S),C.status="success"}catch(A){C.status="error",C.value=A}return C}(a.exports=p).prototype.finally=function(x){if(typeof x!="function")return this;var S=this.constructor;return this.then(function(C){return S.resolve(x()).then(function(){return C})},function(C){return S.resolve(x()).then(function(){throw C})})},p.prototype.catch=function(x){return this.then(null,x)},p.prototype.then=function(x,S){if(typeof x!="function"&&this.state===f||typeof S!="function"&&this.state===d)return this;var C=new this.constructor(l);return this.state!==m?y(C,this.state===f?x:S,this.outcome):this.queue.push(new g(C,x,S)),C},g.prototype.callFulfilled=function(x){u.resolve(this.promise,x)},g.prototype.otherCallFulfilled=function(x){y(this.promise,this.onFulfilled,x)},g.prototype.callRejected=function(x){u.reject(this.promise,x)},g.prototype.otherCallRejected=function(x){y(this.promise,this.onRejected,x)},u.resolve=function(x,S){var C=w(_,S);if(C.status==="error")return u.reject(x,C.value);var A=C.value;if(A)b(x,A);else{x.state=f,x.outcome=S;for(var E=-1,j=x.queue.length;++E<j;)x.queue[E].callFulfilled(S)}return x},u.reject=function(x,S){x.state=d,x.outcome=S;for(var C=-1,A=x.queue.length;++C<A;)x.queue[C].callRejected(S);return x},p.resolve=function(x){return x instanceof this?x:u.resolve(new this(l),x)},p.reject=function(x){var S=new this(l);return u.reject(S,x)},p.all=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=x.length,A=!1;if(!C)return this.resolve([]);for(var E=new Array(C),j=0,T=-1,z=new this(l);++T<C;)L(x[T],T);return z;function L(V,F){S.resolve(V).then(function(M){E[F]=M,++j!==C||A||(A=!0,u.resolve(z,E))},function(M){A||(A=!0,u.reject(z,M))})}},p.race=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=x.length,A=!1;if(!C)return this.resolve([]);for(var E=-1,j=new this(l);++E<C;)T=x[E],S.resolve(T).then(function(z){A||(A=!0,u.resolve(j,z))},function(z){A||(A=!0,u.reject(j,z))});var T;return j}},{immediate:36}],38:[function(r,a,s){var o={};(0,r("./lib/utils/common").assign)(o,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),a.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,a,s){var o=r("./zlib/deflate"),l=r("./utils/common"),u=r("./utils/strings"),d=r("./zlib/messages"),f=r("./zlib/zstream"),m=Object.prototype.toString,p=0,g=-1,y=0,_=8;function b(x){if(!(this instanceof b))return new b(x);this.options=l.assign({level:g,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},x||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var C=o.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(C!==p)throw new Error(d[C]);if(S.header&&o.deflateSetHeader(this.strm,S.header),S.dictionary){var A;if(A=typeof S.dictionary=="string"?u.string2buf(S.dictionary):m.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(C=o.deflateSetDictionary(this.strm,A))!==p)throw new Error(d[C]);this._dict_set=!0}}function w(x,S){var C=new b(S);if(C.push(x,!0),C.err)throw C.msg||d[C.err];return C.result}b.prototype.push=function(x,S){var C,A,E=this.strm,j=this.options.chunkSize;if(this.ended)return!1;A=S===~~S?S:S===!0?4:0,typeof x=="string"?E.input=u.string2buf(x):m.call(x)==="[object ArrayBuffer]"?E.input=new Uint8Array(x):E.input=x,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new l.Buf8(j),E.next_out=0,E.avail_out=j),(C=o.deflate(E,A))!==1&&C!==p)return this.onEnd(C),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(l.shrinkBuf(E.output,E.next_out))):this.onData(l.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&C!==1);return A===4?(C=o.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===p):A!==2||(this.onEnd(p),!(E.avail_out=0))},b.prototype.onData=function(x){this.chunks.push(x)},b.prototype.onEnd=function(x){x===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},s.Deflate=b,s.deflate=w,s.deflateRaw=function(x,S){return(S=S||{}).raw=!0,w(x,S)},s.gzip=function(x,S){return(S=S||{}).gzip=!0,w(x,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,a,s){var o=r("./zlib/inflate"),l=r("./utils/common"),u=r("./utils/strings"),d=r("./zlib/constants"),f=r("./zlib/messages"),m=r("./zlib/zstream"),p=r("./zlib/gzheader"),g=Object.prototype.toString;function y(b){if(!(this instanceof y))return new y(b);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},b||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||b&&b.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&(15&w.windowBits)==0&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var x=o.inflateInit2(this.strm,w.windowBits);if(x!==d.Z_OK)throw new Error(f[x]);this.header=new p,o.inflateGetHeader(this.strm,this.header)}function _(b,w){var x=new y(w);if(x.push(b,!0),x.err)throw x.msg||f[x.err];return x.result}y.prototype.push=function(b,w){var x,S,C,A,E,j,T=this.strm,z=this.options.chunkSize,L=this.options.dictionary,V=!1;if(this.ended)return!1;S=w===~~w?w:w===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof b=="string"?T.input=u.binstring2buf(b):g.call(b)==="[object ArrayBuffer]"?T.input=new Uint8Array(b):T.input=b,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new l.Buf8(z),T.next_out=0,T.avail_out=z),(x=o.inflate(T,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&L&&(j=typeof L=="string"?u.string2buf(L):g.call(L)==="[object ArrayBuffer]"?new Uint8Array(L):L,x=o.inflateSetDictionary(this.strm,j)),x===d.Z_BUF_ERROR&&V===!0&&(x=d.Z_OK,V=!1),x!==d.Z_STREAM_END&&x!==d.Z_OK)return this.onEnd(x),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&x!==d.Z_STREAM_END&&(T.avail_in!==0||S!==d.Z_FINISH&&S!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=u.utf8border(T.output,T.next_out),A=T.next_out-C,E=u.buf2string(T.output,C),T.next_out=A,T.avail_out=z-A,A&&l.arraySet(T.output,T.output,C,A,0),this.onData(E)):this.onData(l.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(V=!0)}while((0<T.avail_in||T.avail_out===0)&&x!==d.Z_STREAM_END);return x===d.Z_STREAM_END&&(S=d.Z_FINISH),S===d.Z_FINISH?(x=o.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===d.Z_OK):S!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(T.avail_out=0))},y.prototype.onData=function(b){this.chunks.push(b)},y.prototype.onEnd=function(b){b===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},s.Inflate=y,s.inflate=_,s.inflateRaw=function(b,w){return(w=w||{}).raw=!0,_(b,w)},s.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,a,s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(d){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var m=f.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var p in m)m.hasOwnProperty(p)&&(d[p]=m[p])}}return d},s.shrinkBuf=function(d,f){return d.length===f?d:d.subarray?d.subarray(0,f):(d.length=f,d)};var l={arraySet:function(d,f,m,p,g){if(f.subarray&&d.subarray)d.set(f.subarray(m,m+p),g);else for(var y=0;y<p;y++)d[g+y]=f[m+y]},flattenChunks:function(d){var f,m,p,g,y,_;for(f=p=0,m=d.length;f<m;f++)p+=d[f].length;for(_=new Uint8Array(p),f=g=0,m=d.length;f<m;f++)y=d[f],_.set(y,g),g+=y.length;return _}},u={arraySet:function(d,f,m,p,g){for(var y=0;y<p;y++)d[g+y]=f[m+y]},flattenChunks:function(d){return[].concat.apply([],d)}};s.setTyped=function(d){d?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,l)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,u))},s.setTyped(o)},{}],42:[function(r,a,s){var o=r("./common"),l=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var d=new o.Buf8(256),f=0;f<256;f++)d[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function m(p,g){if(g<65537&&(p.subarray&&u||!p.subarray&&l))return String.fromCharCode.apply(null,o.shrinkBuf(p,g));for(var y="",_=0;_<g;_++)y+=String.fromCharCode(p[_]);return y}d[254]=d[254]=1,s.string2buf=function(p){var g,y,_,b,w,x=p.length,S=0;for(b=0;b<x;b++)(64512&(y=p.charCodeAt(b)))==55296&&b+1<x&&(64512&(_=p.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(_-56320),b++),S+=y<128?1:y<2048?2:y<65536?3:4;for(g=new o.Buf8(S),b=w=0;w<S;b++)(64512&(y=p.charCodeAt(b)))==55296&&b+1<x&&(64512&(_=p.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(_-56320),b++),y<128?g[w++]=y:(y<2048?g[w++]=192|y>>>6:(y<65536?g[w++]=224|y>>>12:(g[w++]=240|y>>>18,g[w++]=128|y>>>12&63),g[w++]=128|y>>>6&63),g[w++]=128|63&y);return g},s.buf2binstring=function(p){return m(p,p.length)},s.binstring2buf=function(p){for(var g=new o.Buf8(p.length),y=0,_=g.length;y<_;y++)g[y]=p.charCodeAt(y);return g},s.buf2string=function(p,g){var y,_,b,w,x=g||p.length,S=new Array(2*x);for(y=_=0;y<x;)if((b=p[y++])<128)S[_++]=b;else if(4<(w=d[b]))S[_++]=65533,y+=w-1;else{for(b&=w===2?31:w===3?15:7;1<w&&y<x;)b=b<<6|63&p[y++],w--;1<w?S[_++]=65533:b<65536?S[_++]=b:(b-=65536,S[_++]=55296|b>>10&1023,S[_++]=56320|1023&b)}return m(S,_)},s.utf8border=function(p,g){var y;for((g=g||p.length)>p.length&&(g=p.length),y=g-1;0<=y&&(192&p[y])==128;)y--;return y<0||y===0?g:y+d[p[y]]>g?y:g}},{"./common":41}],43:[function(r,a,s){a.exports=function(o,l,u,d){for(var f=65535&o|0,m=o>>>16&65535|0,p=0;u!==0;){for(u-=p=2e3<u?2e3:u;m=m+(f=f+l[d++]|0)|0,--p;);f%=65521,m%=65521}return f|m<<16|0}},{}],44:[function(r,a,s){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,a,s){var o=(function(){for(var l,u=[],d=0;d<256;d++){l=d;for(var f=0;f<8;f++)l=1&l?3988292384^l>>>1:l>>>1;u[d]=l}return u})();a.exports=function(l,u,d,f){var m=o,p=f+d;l^=-1;for(var g=f;g<p;g++)l=l>>>8^m[255&(l^u[g])];return-1^l}},{}],46:[function(r,a,s){var o,l=r("../utils/common"),u=r("./trees"),d=r("./adler32"),f=r("./crc32"),m=r("./messages"),p=0,g=4,y=0,_=-2,b=-1,w=4,x=2,S=8,C=9,A=286,E=30,j=19,T=2*A+1,z=15,L=3,V=258,F=V+L+1,M=42,O=113,R=1,G=2,H=3,U=4;function Z(I,ue){return I.msg=m[ue],ue}function X(I){return(I<<1)-(4<I?9:0)}function Q(I){for(var ue=I.length;0<=--ue;)I[ue]=0}function $(I){var ue=I.state,ce=ue.pending;ce>I.avail_out&&(ce=I.avail_out),ce!==0&&(l.arraySet(I.output,ue.pending_buf,ue.pending_out,ce,I.next_out),I.next_out+=ce,ue.pending_out+=ce,I.total_out+=ce,I.avail_out-=ce,ue.pending-=ce,ue.pending===0&&(ue.pending_out=0))}function B(I,ue){u._tr_flush_block(I,0<=I.block_start?I.block_start:-1,I.strstart-I.block_start,ue),I.block_start=I.strstart,$(I.strm)}function K(I,ue){I.pending_buf[I.pending++]=ue}function P(I,ue){I.pending_buf[I.pending++]=ue>>>8&255,I.pending_buf[I.pending++]=255&ue}function q(I,ue){var ce,re,ne=I.max_chain_length,fe=I.strstart,Ce=I.prev_length,ke=I.nice_match,ye=I.strstart>I.w_size-F?I.strstart-(I.w_size-F):0,Re=I.window,Pe=I.w_mask,Le=I.prev,Fe=I.strstart+V,Ue=Re[fe+Ce-1],Ne=Re[fe+Ce];I.prev_length>=I.good_match&&(ne>>=2),ke>I.lookahead&&(ke=I.lookahead);do if(Re[(ce=ue)+Ce]===Ne&&Re[ce+Ce-1]===Ue&&Re[ce]===Re[fe]&&Re[++ce]===Re[fe+1]){fe+=2,ce++;do;while(Re[++fe]===Re[++ce]&&Re[++fe]===Re[++ce]&&Re[++fe]===Re[++ce]&&Re[++fe]===Re[++ce]&&Re[++fe]===Re[++ce]&&Re[++fe]===Re[++ce]&&Re[++fe]===Re[++ce]&&Re[++fe]===Re[++ce]&&fe<Fe);if(re=V-(Fe-fe),fe=Fe-V,Ce<re){if(I.match_start=ue,ke<=(Ce=re))break;Ue=Re[fe+Ce-1],Ne=Re[fe+Ce]}}while((ue=Le[ue&Pe])>ye&&--ne!=0);return Ce<=I.lookahead?Ce:I.lookahead}function J(I){var ue,ce,re,ne,fe,Ce,ke,ye,Re,Pe,Le=I.w_size;do{if(ne=I.window_size-I.lookahead-I.strstart,I.strstart>=Le+(Le-F)){for(l.arraySet(I.window,I.window,Le,Le,0),I.match_start-=Le,I.strstart-=Le,I.block_start-=Le,ue=ce=I.hash_size;re=I.head[--ue],I.head[ue]=Le<=re?re-Le:0,--ce;);for(ue=ce=Le;re=I.prev[--ue],I.prev[ue]=Le<=re?re-Le:0,--ce;);ne+=Le}if(I.strm.avail_in===0)break;if(Ce=I.strm,ke=I.window,ye=I.strstart+I.lookahead,Re=ne,Pe=void 0,Pe=Ce.avail_in,Re<Pe&&(Pe=Re),ce=Pe===0?0:(Ce.avail_in-=Pe,l.arraySet(ke,Ce.input,Ce.next_in,Pe,ye),Ce.state.wrap===1?Ce.adler=d(Ce.adler,ke,Pe,ye):Ce.state.wrap===2&&(Ce.adler=f(Ce.adler,ke,Pe,ye)),Ce.next_in+=Pe,Ce.total_in+=Pe,Pe),I.lookahead+=ce,I.lookahead+I.insert>=L)for(fe=I.strstart-I.insert,I.ins_h=I.window[fe],I.ins_h=(I.ins_h<<I.hash_shift^I.window[fe+1])&I.hash_mask;I.insert&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[fe+L-1])&I.hash_mask,I.prev[fe&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=fe,fe++,I.insert--,!(I.lookahead+I.insert<L)););}while(I.lookahead<F&&I.strm.avail_in!==0)}function le(I,ue){for(var ce,re;;){if(I.lookahead<F){if(J(I),I.lookahead<F&&ue===p)return R;if(I.lookahead===0)break}if(ce=0,I.lookahead>=L&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+L-1])&I.hash_mask,ce=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),ce!==0&&I.strstart-ce<=I.w_size-F&&(I.match_length=q(I,ce)),I.match_length>=L)if(re=u._tr_tally(I,I.strstart-I.match_start,I.match_length-L),I.lookahead-=I.match_length,I.match_length<=I.max_lazy_match&&I.lookahead>=L){for(I.match_length--;I.strstart++,I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+L-1])&I.hash_mask,ce=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart,--I.match_length!=0;);I.strstart++}else I.strstart+=I.match_length,I.match_length=0,I.ins_h=I.window[I.strstart],I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+1])&I.hash_mask;else re=u._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++;if(re&&(B(I,!1),I.strm.avail_out===0))return R}return I.insert=I.strstart<L-1?I.strstart:L-1,ue===g?(B(I,!0),I.strm.avail_out===0?H:U):I.last_lit&&(B(I,!1),I.strm.avail_out===0)?R:G}function oe(I,ue){for(var ce,re,ne;;){if(I.lookahead<F){if(J(I),I.lookahead<F&&ue===p)return R;if(I.lookahead===0)break}if(ce=0,I.lookahead>=L&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+L-1])&I.hash_mask,ce=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),I.prev_length=I.match_length,I.prev_match=I.match_start,I.match_length=L-1,ce!==0&&I.prev_length<I.max_lazy_match&&I.strstart-ce<=I.w_size-F&&(I.match_length=q(I,ce),I.match_length<=5&&(I.strategy===1||I.match_length===L&&4096<I.strstart-I.match_start)&&(I.match_length=L-1)),I.prev_length>=L&&I.match_length<=I.prev_length){for(ne=I.strstart+I.lookahead-L,re=u._tr_tally(I,I.strstart-1-I.prev_match,I.prev_length-L),I.lookahead-=I.prev_length-1,I.prev_length-=2;++I.strstart<=ne&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+L-1])&I.hash_mask,ce=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),--I.prev_length!=0;);if(I.match_available=0,I.match_length=L-1,I.strstart++,re&&(B(I,!1),I.strm.avail_out===0))return R}else if(I.match_available){if((re=u._tr_tally(I,0,I.window[I.strstart-1]))&&B(I,!1),I.strstart++,I.lookahead--,I.strm.avail_out===0)return R}else I.match_available=1,I.strstart++,I.lookahead--}return I.match_available&&(re=u._tr_tally(I,0,I.window[I.strstart-1]),I.match_available=0),I.insert=I.strstart<L-1?I.strstart:L-1,ue===g?(B(I,!0),I.strm.avail_out===0?H:U):I.last_lit&&(B(I,!1),I.strm.avail_out===0)?R:G}function he(I,ue,ce,re,ne){this.good_length=I,this.max_lazy=ue,this.nice_length=ce,this.max_chain=re,this.func=ne}function ve(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*T),this.dyn_dtree=new l.Buf16(2*(2*E+1)),this.bl_tree=new l.Buf16(2*(2*j+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(z+1),this.heap=new l.Buf16(2*A+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*A+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function W(I){var ue;return I&&I.state?(I.total_in=I.total_out=0,I.data_type=x,(ue=I.state).pending=0,ue.pending_out=0,ue.wrap<0&&(ue.wrap=-ue.wrap),ue.status=ue.wrap?M:O,I.adler=ue.wrap===2?0:1,ue.last_flush=p,u._tr_init(ue),y):Z(I,_)}function ie(I){var ue=W(I);return ue===y&&(function(ce){ce.window_size=2*ce.w_size,Q(ce.head),ce.max_lazy_match=o[ce.level].max_lazy,ce.good_match=o[ce.level].good_length,ce.nice_match=o[ce.level].nice_length,ce.max_chain_length=o[ce.level].max_chain,ce.strstart=0,ce.block_start=0,ce.lookahead=0,ce.insert=0,ce.match_length=ce.prev_length=L-1,ce.match_available=0,ce.ins_h=0})(I.state),ue}function ae(I,ue,ce,re,ne,fe){if(!I)return _;var Ce=1;if(ue===b&&(ue=6),re<0?(Ce=0,re=-re):15<re&&(Ce=2,re-=16),ne<1||C<ne||ce!==S||re<8||15<re||ue<0||9<ue||fe<0||w<fe)return Z(I,_);re===8&&(re=9);var ke=new ve;return(I.state=ke).strm=I,ke.wrap=Ce,ke.gzhead=null,ke.w_bits=re,ke.w_size=1<<ke.w_bits,ke.w_mask=ke.w_size-1,ke.hash_bits=ne+7,ke.hash_size=1<<ke.hash_bits,ke.hash_mask=ke.hash_size-1,ke.hash_shift=~~((ke.hash_bits+L-1)/L),ke.window=new l.Buf8(2*ke.w_size),ke.head=new l.Buf16(ke.hash_size),ke.prev=new l.Buf16(ke.w_size),ke.lit_bufsize=1<<ne+6,ke.pending_buf_size=4*ke.lit_bufsize,ke.pending_buf=new l.Buf8(ke.pending_buf_size),ke.d_buf=1*ke.lit_bufsize,ke.l_buf=3*ke.lit_bufsize,ke.level=ue,ke.strategy=fe,ke.method=ce,ie(I)}o=[new he(0,0,0,0,function(I,ue){var ce=65535;for(ce>I.pending_buf_size-5&&(ce=I.pending_buf_size-5);;){if(I.lookahead<=1){if(J(I),I.lookahead===0&&ue===p)return R;if(I.lookahead===0)break}I.strstart+=I.lookahead,I.lookahead=0;var re=I.block_start+ce;if((I.strstart===0||I.strstart>=re)&&(I.lookahead=I.strstart-re,I.strstart=re,B(I,!1),I.strm.avail_out===0)||I.strstart-I.block_start>=I.w_size-F&&(B(I,!1),I.strm.avail_out===0))return R}return I.insert=0,ue===g?(B(I,!0),I.strm.avail_out===0?H:U):(I.strstart>I.block_start&&(B(I,!1),I.strm.avail_out),R)}),new he(4,4,8,4,le),new he(4,5,16,8,le),new he(4,6,32,32,le),new he(4,4,16,16,oe),new he(8,16,32,32,oe),new he(8,16,128,128,oe),new he(8,32,128,256,oe),new he(32,128,258,1024,oe),new he(32,258,258,4096,oe)],s.deflateInit=function(I,ue){return ae(I,ue,S,15,8,0)},s.deflateInit2=ae,s.deflateReset=ie,s.deflateResetKeep=W,s.deflateSetHeader=function(I,ue){return I&&I.state?I.state.wrap!==2?_:(I.state.gzhead=ue,y):_},s.deflate=function(I,ue){var ce,re,ne,fe;if(!I||!I.state||5<ue||ue<0)return I?Z(I,_):_;if(re=I.state,!I.output||!I.input&&I.avail_in!==0||re.status===666&&ue!==g)return Z(I,I.avail_out===0?-5:_);if(re.strm=I,ce=re.last_flush,re.last_flush=ue,re.status===M)if(re.wrap===2)I.adler=0,K(re,31),K(re,139),K(re,8),re.gzhead?(K(re,(re.gzhead.text?1:0)+(re.gzhead.hcrc?2:0)+(re.gzhead.extra?4:0)+(re.gzhead.name?8:0)+(re.gzhead.comment?16:0)),K(re,255&re.gzhead.time),K(re,re.gzhead.time>>8&255),K(re,re.gzhead.time>>16&255),K(re,re.gzhead.time>>24&255),K(re,re.level===9?2:2<=re.strategy||re.level<2?4:0),K(re,255&re.gzhead.os),re.gzhead.extra&&re.gzhead.extra.length&&(K(re,255&re.gzhead.extra.length),K(re,re.gzhead.extra.length>>8&255)),re.gzhead.hcrc&&(I.adler=f(I.adler,re.pending_buf,re.pending,0)),re.gzindex=0,re.status=69):(K(re,0),K(re,0),K(re,0),K(re,0),K(re,0),K(re,re.level===9?2:2<=re.strategy||re.level<2?4:0),K(re,3),re.status=O);else{var Ce=S+(re.w_bits-8<<4)<<8;Ce|=(2<=re.strategy||re.level<2?0:re.level<6?1:re.level===6?2:3)<<6,re.strstart!==0&&(Ce|=32),Ce+=31-Ce%31,re.status=O,P(re,Ce),re.strstart!==0&&(P(re,I.adler>>>16),P(re,65535&I.adler)),I.adler=1}if(re.status===69)if(re.gzhead.extra){for(ne=re.pending;re.gzindex<(65535&re.gzhead.extra.length)&&(re.pending!==re.pending_buf_size||(re.gzhead.hcrc&&re.pending>ne&&(I.adler=f(I.adler,re.pending_buf,re.pending-ne,ne)),$(I),ne=re.pending,re.pending!==re.pending_buf_size));)K(re,255&re.gzhead.extra[re.gzindex]),re.gzindex++;re.gzhead.hcrc&&re.pending>ne&&(I.adler=f(I.adler,re.pending_buf,re.pending-ne,ne)),re.gzindex===re.gzhead.extra.length&&(re.gzindex=0,re.status=73)}else re.status=73;if(re.status===73)if(re.gzhead.name){ne=re.pending;do{if(re.pending===re.pending_buf_size&&(re.gzhead.hcrc&&re.pending>ne&&(I.adler=f(I.adler,re.pending_buf,re.pending-ne,ne)),$(I),ne=re.pending,re.pending===re.pending_buf_size)){fe=1;break}fe=re.gzindex<re.gzhead.name.length?255&re.gzhead.name.charCodeAt(re.gzindex++):0,K(re,fe)}while(fe!==0);re.gzhead.hcrc&&re.pending>ne&&(I.adler=f(I.adler,re.pending_buf,re.pending-ne,ne)),fe===0&&(re.gzindex=0,re.status=91)}else re.status=91;if(re.status===91)if(re.gzhead.comment){ne=re.pending;do{if(re.pending===re.pending_buf_size&&(re.gzhead.hcrc&&re.pending>ne&&(I.adler=f(I.adler,re.pending_buf,re.pending-ne,ne)),$(I),ne=re.pending,re.pending===re.pending_buf_size)){fe=1;break}fe=re.gzindex<re.gzhead.comment.length?255&re.gzhead.comment.charCodeAt(re.gzindex++):0,K(re,fe)}while(fe!==0);re.gzhead.hcrc&&re.pending>ne&&(I.adler=f(I.adler,re.pending_buf,re.pending-ne,ne)),fe===0&&(re.status=103)}else re.status=103;if(re.status===103&&(re.gzhead.hcrc?(re.pending+2>re.pending_buf_size&&$(I),re.pending+2<=re.pending_buf_size&&(K(re,255&I.adler),K(re,I.adler>>8&255),I.adler=0,re.status=O)):re.status=O),re.pending!==0){if($(I),I.avail_out===0)return re.last_flush=-1,y}else if(I.avail_in===0&&X(ue)<=X(ce)&&ue!==g)return Z(I,-5);if(re.status===666&&I.avail_in!==0)return Z(I,-5);if(I.avail_in!==0||re.lookahead!==0||ue!==p&&re.status!==666){var ke=re.strategy===2?(function(ye,Re){for(var Pe;;){if(ye.lookahead===0&&(J(ye),ye.lookahead===0)){if(Re===p)return R;break}if(ye.match_length=0,Pe=u._tr_tally(ye,0,ye.window[ye.strstart]),ye.lookahead--,ye.strstart++,Pe&&(B(ye,!1),ye.strm.avail_out===0))return R}return ye.insert=0,Re===g?(B(ye,!0),ye.strm.avail_out===0?H:U):ye.last_lit&&(B(ye,!1),ye.strm.avail_out===0)?R:G})(re,ue):re.strategy===3?(function(ye,Re){for(var Pe,Le,Fe,Ue,Ne=ye.window;;){if(ye.lookahead<=V){if(J(ye),ye.lookahead<=V&&Re===p)return R;if(ye.lookahead===0)break}if(ye.match_length=0,ye.lookahead>=L&&0<ye.strstart&&(Le=Ne[Fe=ye.strstart-1])===Ne[++Fe]&&Le===Ne[++Fe]&&Le===Ne[++Fe]){Ue=ye.strstart+V;do;while(Le===Ne[++Fe]&&Le===Ne[++Fe]&&Le===Ne[++Fe]&&Le===Ne[++Fe]&&Le===Ne[++Fe]&&Le===Ne[++Fe]&&Le===Ne[++Fe]&&Le===Ne[++Fe]&&Fe<Ue);ye.match_length=V-(Ue-Fe),ye.match_length>ye.lookahead&&(ye.match_length=ye.lookahead)}if(ye.match_length>=L?(Pe=u._tr_tally(ye,1,ye.match_length-L),ye.lookahead-=ye.match_length,ye.strstart+=ye.match_length,ye.match_length=0):(Pe=u._tr_tally(ye,0,ye.window[ye.strstart]),ye.lookahead--,ye.strstart++),Pe&&(B(ye,!1),ye.strm.avail_out===0))return R}return ye.insert=0,Re===g?(B(ye,!0),ye.strm.avail_out===0?H:U):ye.last_lit&&(B(ye,!1),ye.strm.avail_out===0)?R:G})(re,ue):o[re.level].func(re,ue);if(ke!==H&&ke!==U||(re.status=666),ke===R||ke===H)return I.avail_out===0&&(re.last_flush=-1),y;if(ke===G&&(ue===1?u._tr_align(re):ue!==5&&(u._tr_stored_block(re,0,0,!1),ue===3&&(Q(re.head),re.lookahead===0&&(re.strstart=0,re.block_start=0,re.insert=0))),$(I),I.avail_out===0))return re.last_flush=-1,y}return ue!==g?y:re.wrap<=0?1:(re.wrap===2?(K(re,255&I.adler),K(re,I.adler>>8&255),K(re,I.adler>>16&255),K(re,I.adler>>24&255),K(re,255&I.total_in),K(re,I.total_in>>8&255),K(re,I.total_in>>16&255),K(re,I.total_in>>24&255)):(P(re,I.adler>>>16),P(re,65535&I.adler)),$(I),0<re.wrap&&(re.wrap=-re.wrap),re.pending!==0?y:1)},s.deflateEnd=function(I){var ue;return I&&I.state?(ue=I.state.status)!==M&&ue!==69&&ue!==73&&ue!==91&&ue!==103&&ue!==O&&ue!==666?Z(I,_):(I.state=null,ue===O?Z(I,-3):y):_},s.deflateSetDictionary=function(I,ue){var ce,re,ne,fe,Ce,ke,ye,Re,Pe=ue.length;if(!I||!I.state||(fe=(ce=I.state).wrap)===2||fe===1&&ce.status!==M||ce.lookahead)return _;for(fe===1&&(I.adler=d(I.adler,ue,Pe,0)),ce.wrap=0,Pe>=ce.w_size&&(fe===0&&(Q(ce.head),ce.strstart=0,ce.block_start=0,ce.insert=0),Re=new l.Buf8(ce.w_size),l.arraySet(Re,ue,Pe-ce.w_size,ce.w_size,0),ue=Re,Pe=ce.w_size),Ce=I.avail_in,ke=I.next_in,ye=I.input,I.avail_in=Pe,I.next_in=0,I.input=ue,J(ce);ce.lookahead>=L;){for(re=ce.strstart,ne=ce.lookahead-(L-1);ce.ins_h=(ce.ins_h<<ce.hash_shift^ce.window[re+L-1])&ce.hash_mask,ce.prev[re&ce.w_mask]=ce.head[ce.ins_h],ce.head[ce.ins_h]=re,re++,--ne;);ce.strstart=re,ce.lookahead=L-1,J(ce)}return ce.strstart+=ce.lookahead,ce.block_start=ce.strstart,ce.insert=ce.lookahead,ce.lookahead=0,ce.match_length=ce.prev_length=L-1,ce.match_available=0,I.next_in=ke,I.input=ye,I.avail_in=Ce,ce.wrap=fe,y},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,a,s){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,a,s){a.exports=function(o,l){var u,d,f,m,p,g,y,_,b,w,x,S,C,A,E,j,T,z,L,V,F,M,O,R,G;u=o.state,d=o.next_in,R=o.input,f=d+(o.avail_in-5),m=o.next_out,G=o.output,p=m-(l-o.avail_out),g=m+(o.avail_out-257),y=u.dmax,_=u.wsize,b=u.whave,w=u.wnext,x=u.window,S=u.hold,C=u.bits,A=u.lencode,E=u.distcode,j=(1<<u.lenbits)-1,T=(1<<u.distbits)-1;e:do{C<15&&(S+=R[d++]<<C,C+=8,S+=R[d++]<<C,C+=8),z=A[S&j];t:for(;;){if(S>>>=L=z>>>24,C-=L,(L=z>>>16&255)===0)G[m++]=65535&z;else{if(!(16&L)){if((64&L)==0){z=A[(65535&z)+(S&(1<<L)-1)];continue t}if(32&L){u.mode=12;break e}o.msg="invalid literal/length code",u.mode=30;break e}V=65535&z,(L&=15)&&(C<L&&(S+=R[d++]<<C,C+=8),V+=S&(1<<L)-1,S>>>=L,C-=L),C<15&&(S+=R[d++]<<C,C+=8,S+=R[d++]<<C,C+=8),z=E[S&T];n:for(;;){if(S>>>=L=z>>>24,C-=L,!(16&(L=z>>>16&255))){if((64&L)==0){z=E[(65535&z)+(S&(1<<L)-1)];continue n}o.msg="invalid distance code",u.mode=30;break e}if(F=65535&z,C<(L&=15)&&(S+=R[d++]<<C,(C+=8)<L&&(S+=R[d++]<<C,C+=8)),y<(F+=S&(1<<L)-1)){o.msg="invalid distance too far back",u.mode=30;break e}if(S>>>=L,C-=L,(L=m-p)<F){if(b<(L=F-L)&&u.sane){o.msg="invalid distance too far back",u.mode=30;break e}if(O=x,(M=0)===w){if(M+=_-L,L<V){for(V-=L;G[m++]=x[M++],--L;);M=m-F,O=G}}else if(w<L){if(M+=_+w-L,(L-=w)<V){for(V-=L;G[m++]=x[M++],--L;);if(M=0,w<V){for(V-=L=w;G[m++]=x[M++],--L;);M=m-F,O=G}}}else if(M+=w-L,L<V){for(V-=L;G[m++]=x[M++],--L;);M=m-F,O=G}for(;2<V;)G[m++]=O[M++],G[m++]=O[M++],G[m++]=O[M++],V-=3;V&&(G[m++]=O[M++],1<V&&(G[m++]=O[M++]))}else{for(M=m-F;G[m++]=G[M++],G[m++]=G[M++],G[m++]=G[M++],2<(V-=3););V&&(G[m++]=G[M++],1<V&&(G[m++]=G[M++]))}break}}break}}while(d<f&&m<g);d-=V=C>>3,S&=(1<<(C-=V<<3))-1,o.next_in=d,o.next_out=m,o.avail_in=d<f?f-d+5:5-(d-f),o.avail_out=m<g?g-m+257:257-(m-g),u.hold=S,u.bits=C}},{}],49:[function(r,a,s){var o=r("../utils/common"),l=r("./adler32"),u=r("./crc32"),d=r("./inffast"),f=r("./inftrees"),m=1,p=2,g=0,y=-2,_=1,b=852,w=592;function x(M){return(M>>>24&255)+(M>>>8&65280)+((65280&M)<<8)+((255&M)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(M){var O;return M&&M.state?(O=M.state,M.total_in=M.total_out=O.total=0,M.msg="",O.wrap&&(M.adler=1&O.wrap),O.mode=_,O.last=0,O.havedict=0,O.dmax=32768,O.head=null,O.hold=0,O.bits=0,O.lencode=O.lendyn=new o.Buf32(b),O.distcode=O.distdyn=new o.Buf32(w),O.sane=1,O.back=-1,g):y}function A(M){var O;return M&&M.state?((O=M.state).wsize=0,O.whave=0,O.wnext=0,C(M)):y}function E(M,O){var R,G;return M&&M.state?(G=M.state,O<0?(R=0,O=-O):(R=1+(O>>4),O<48&&(O&=15)),O&&(O<8||15<O)?y:(G.window!==null&&G.wbits!==O&&(G.window=null),G.wrap=R,G.wbits=O,A(M))):y}function j(M,O){var R,G;return M?(G=new S,(M.state=G).window=null,(R=E(M,O))!==g&&(M.state=null),R):y}var T,z,L=!0;function V(M){if(L){var O;for(T=new o.Buf32(512),z=new o.Buf32(32),O=0;O<144;)M.lens[O++]=8;for(;O<256;)M.lens[O++]=9;for(;O<280;)M.lens[O++]=7;for(;O<288;)M.lens[O++]=8;for(f(m,M.lens,0,288,T,0,M.work,{bits:9}),O=0;O<32;)M.lens[O++]=5;f(p,M.lens,0,32,z,0,M.work,{bits:5}),L=!1}M.lencode=T,M.lenbits=9,M.distcode=z,M.distbits=5}function F(M,O,R,G){var H,U=M.state;return U.window===null&&(U.wsize=1<<U.wbits,U.wnext=0,U.whave=0,U.window=new o.Buf8(U.wsize)),G>=U.wsize?(o.arraySet(U.window,O,R-U.wsize,U.wsize,0),U.wnext=0,U.whave=U.wsize):(G<(H=U.wsize-U.wnext)&&(H=G),o.arraySet(U.window,O,R-G,H,U.wnext),(G-=H)?(o.arraySet(U.window,O,R-G,G,0),U.wnext=G,U.whave=U.wsize):(U.wnext+=H,U.wnext===U.wsize&&(U.wnext=0),U.whave<U.wsize&&(U.whave+=H))),0}s.inflateReset=A,s.inflateReset2=E,s.inflateResetKeep=C,s.inflateInit=function(M){return j(M,15)},s.inflateInit2=j,s.inflate=function(M,O){var R,G,H,U,Z,X,Q,$,B,K,P,q,J,le,oe,he,ve,W,ie,ae,I,ue,ce,re,ne=0,fe=new o.Buf8(4),Ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!M||!M.state||!M.output||!M.input&&M.avail_in!==0)return y;(R=M.state).mode===12&&(R.mode=13),Z=M.next_out,H=M.output,Q=M.avail_out,U=M.next_in,G=M.input,X=M.avail_in,$=R.hold,B=R.bits,K=X,P=Q,ue=g;e:for(;;)switch(R.mode){case _:if(R.wrap===0){R.mode=13;break}for(;B<16;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}if(2&R.wrap&&$===35615){fe[R.check=0]=255&$,fe[1]=$>>>8&255,R.check=u(R.check,fe,2,0),B=$=0,R.mode=2;break}if(R.flags=0,R.head&&(R.head.done=!1),!(1&R.wrap)||(((255&$)<<8)+($>>8))%31){M.msg="incorrect header check",R.mode=30;break}if((15&$)!=8){M.msg="unknown compression method",R.mode=30;break}if(B-=4,I=8+(15&($>>>=4)),R.wbits===0)R.wbits=I;else if(I>R.wbits){M.msg="invalid window size",R.mode=30;break}R.dmax=1<<I,M.adler=R.check=1,R.mode=512&$?10:12,B=$=0;break;case 2:for(;B<16;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}if(R.flags=$,(255&R.flags)!=8){M.msg="unknown compression method",R.mode=30;break}if(57344&R.flags){M.msg="unknown header flags set",R.mode=30;break}R.head&&(R.head.text=$>>8&1),512&R.flags&&(fe[0]=255&$,fe[1]=$>>>8&255,R.check=u(R.check,fe,2,0)),B=$=0,R.mode=3;case 3:for(;B<32;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}R.head&&(R.head.time=$),512&R.flags&&(fe[0]=255&$,fe[1]=$>>>8&255,fe[2]=$>>>16&255,fe[3]=$>>>24&255,R.check=u(R.check,fe,4,0)),B=$=0,R.mode=4;case 4:for(;B<16;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}R.head&&(R.head.xflags=255&$,R.head.os=$>>8),512&R.flags&&(fe[0]=255&$,fe[1]=$>>>8&255,R.check=u(R.check,fe,2,0)),B=$=0,R.mode=5;case 5:if(1024&R.flags){for(;B<16;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}R.length=$,R.head&&(R.head.extra_len=$),512&R.flags&&(fe[0]=255&$,fe[1]=$>>>8&255,R.check=u(R.check,fe,2,0)),B=$=0}else R.head&&(R.head.extra=null);R.mode=6;case 6:if(1024&R.flags&&(X<(q=R.length)&&(q=X),q&&(R.head&&(I=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Array(R.head.extra_len)),o.arraySet(R.head.extra,G,U,q,I)),512&R.flags&&(R.check=u(R.check,G,q,U)),X-=q,U+=q,R.length-=q),R.length))break e;R.length=0,R.mode=7;case 7:if(2048&R.flags){if(X===0)break e;for(q=0;I=G[U+q++],R.head&&I&&R.length<65536&&(R.head.name+=String.fromCharCode(I)),I&&q<X;);if(512&R.flags&&(R.check=u(R.check,G,q,U)),X-=q,U+=q,I)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=8;case 8:if(4096&R.flags){if(X===0)break e;for(q=0;I=G[U+q++],R.head&&I&&R.length<65536&&(R.head.comment+=String.fromCharCode(I)),I&&q<X;);if(512&R.flags&&(R.check=u(R.check,G,q,U)),X-=q,U+=q,I)break e}else R.head&&(R.head.comment=null);R.mode=9;case 9:if(512&R.flags){for(;B<16;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}if($!==(65535&R.check)){M.msg="header crc mismatch",R.mode=30;break}B=$=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),M.adler=R.check=0,R.mode=12;break;case 10:for(;B<32;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}M.adler=R.check=x($),B=$=0,R.mode=11;case 11:if(R.havedict===0)return M.next_out=Z,M.avail_out=Q,M.next_in=U,M.avail_in=X,R.hold=$,R.bits=B,2;M.adler=R.check=1,R.mode=12;case 12:if(O===5||O===6)break e;case 13:if(R.last){$>>>=7&B,B-=7&B,R.mode=27;break}for(;B<3;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}switch(R.last=1&$,B-=1,3&($>>>=1)){case 0:R.mode=14;break;case 1:if(V(R),R.mode=20,O!==6)break;$>>>=2,B-=2;break e;case 2:R.mode=17;break;case 3:M.msg="invalid block type",R.mode=30}$>>>=2,B-=2;break;case 14:for($>>>=7&B,B-=7&B;B<32;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}if((65535&$)!=($>>>16^65535)){M.msg="invalid stored block lengths",R.mode=30;break}if(R.length=65535&$,B=$=0,R.mode=15,O===6)break e;case 15:R.mode=16;case 16:if(q=R.length){if(X<q&&(q=X),Q<q&&(q=Q),q===0)break e;o.arraySet(H,G,U,q,Z),X-=q,U+=q,Q-=q,Z+=q,R.length-=q;break}R.mode=12;break;case 17:for(;B<14;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}if(R.nlen=257+(31&$),$>>>=5,B-=5,R.ndist=1+(31&$),$>>>=5,B-=5,R.ncode=4+(15&$),$>>>=4,B-=4,286<R.nlen||30<R.ndist){M.msg="too many length or distance symbols",R.mode=30;break}R.have=0,R.mode=18;case 18:for(;R.have<R.ncode;){for(;B<3;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}R.lens[Ce[R.have++]]=7&$,$>>>=3,B-=3}for(;R.have<19;)R.lens[Ce[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,ce={bits:R.lenbits},ue=f(0,R.lens,0,19,R.lencode,0,R.work,ce),R.lenbits=ce.bits,ue){M.msg="invalid code lengths set",R.mode=30;break}R.have=0,R.mode=19;case 19:for(;R.have<R.nlen+R.ndist;){for(;he=(ne=R.lencode[$&(1<<R.lenbits)-1])>>>16&255,ve=65535&ne,!((oe=ne>>>24)<=B);){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}if(ve<16)$>>>=oe,B-=oe,R.lens[R.have++]=ve;else{if(ve===16){for(re=oe+2;B<re;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}if($>>>=oe,B-=oe,R.have===0){M.msg="invalid bit length repeat",R.mode=30;break}I=R.lens[R.have-1],q=3+(3&$),$>>>=2,B-=2}else if(ve===17){for(re=oe+3;B<re;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}B-=oe,I=0,q=3+(7&($>>>=oe)),$>>>=3,B-=3}else{for(re=oe+7;B<re;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}B-=oe,I=0,q=11+(127&($>>>=oe)),$>>>=7,B-=7}if(R.have+q>R.nlen+R.ndist){M.msg="invalid bit length repeat",R.mode=30;break}for(;q--;)R.lens[R.have++]=I}}if(R.mode===30)break;if(R.lens[256]===0){M.msg="invalid code -- missing end-of-block",R.mode=30;break}if(R.lenbits=9,ce={bits:R.lenbits},ue=f(m,R.lens,0,R.nlen,R.lencode,0,R.work,ce),R.lenbits=ce.bits,ue){M.msg="invalid literal/lengths set",R.mode=30;break}if(R.distbits=6,R.distcode=R.distdyn,ce={bits:R.distbits},ue=f(p,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,ce),R.distbits=ce.bits,ue){M.msg="invalid distances set",R.mode=30;break}if(R.mode=20,O===6)break e;case 20:R.mode=21;case 21:if(6<=X&&258<=Q){M.next_out=Z,M.avail_out=Q,M.next_in=U,M.avail_in=X,R.hold=$,R.bits=B,d(M,P),Z=M.next_out,H=M.output,Q=M.avail_out,U=M.next_in,G=M.input,X=M.avail_in,$=R.hold,B=R.bits,R.mode===12&&(R.back=-1);break}for(R.back=0;he=(ne=R.lencode[$&(1<<R.lenbits)-1])>>>16&255,ve=65535&ne,!((oe=ne>>>24)<=B);){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}if(he&&(240&he)==0){for(W=oe,ie=he,ae=ve;he=(ne=R.lencode[ae+(($&(1<<W+ie)-1)>>W)])>>>16&255,ve=65535&ne,!(W+(oe=ne>>>24)<=B);){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}$>>>=W,B-=W,R.back+=W}if($>>>=oe,B-=oe,R.back+=oe,R.length=ve,he===0){R.mode=26;break}if(32&he){R.back=-1,R.mode=12;break}if(64&he){M.msg="invalid literal/length code",R.mode=30;break}R.extra=15&he,R.mode=22;case 22:if(R.extra){for(re=R.extra;B<re;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}R.length+=$&(1<<R.extra)-1,$>>>=R.extra,B-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=23;case 23:for(;he=(ne=R.distcode[$&(1<<R.distbits)-1])>>>16&255,ve=65535&ne,!((oe=ne>>>24)<=B);){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}if((240&he)==0){for(W=oe,ie=he,ae=ve;he=(ne=R.distcode[ae+(($&(1<<W+ie)-1)>>W)])>>>16&255,ve=65535&ne,!(W+(oe=ne>>>24)<=B);){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}$>>>=W,B-=W,R.back+=W}if($>>>=oe,B-=oe,R.back+=oe,64&he){M.msg="invalid distance code",R.mode=30;break}R.offset=ve,R.extra=15&he,R.mode=24;case 24:if(R.extra){for(re=R.extra;B<re;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}R.offset+=$&(1<<R.extra)-1,$>>>=R.extra,B-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){M.msg="invalid distance too far back",R.mode=30;break}R.mode=25;case 25:if(Q===0)break e;if(q=P-Q,R.offset>q){if((q=R.offset-q)>R.whave&&R.sane){M.msg="invalid distance too far back",R.mode=30;break}J=q>R.wnext?(q-=R.wnext,R.wsize-q):R.wnext-q,q>R.length&&(q=R.length),le=R.window}else le=H,J=Z-R.offset,q=R.length;for(Q<q&&(q=Q),Q-=q,R.length-=q;H[Z++]=le[J++],--q;);R.length===0&&(R.mode=21);break;case 26:if(Q===0)break e;H[Z++]=R.length,Q--,R.mode=21;break;case 27:if(R.wrap){for(;B<32;){if(X===0)break e;X--,$|=G[U++]<<B,B+=8}if(P-=Q,M.total_out+=P,R.total+=P,P&&(M.adler=R.check=R.flags?u(R.check,H,P,Z-P):l(R.check,H,P,Z-P)),P=Q,(R.flags?$:x($))!==R.check){M.msg="incorrect data check",R.mode=30;break}B=$=0}R.mode=28;case 28:if(R.wrap&&R.flags){for(;B<32;){if(X===0)break e;X--,$+=G[U++]<<B,B+=8}if($!==(4294967295&R.total)){M.msg="incorrect length check",R.mode=30;break}B=$=0}R.mode=29;case 29:ue=1;break e;case 30:ue=-3;break e;case 31:return-4;default:return y}return M.next_out=Z,M.avail_out=Q,M.next_in=U,M.avail_in=X,R.hold=$,R.bits=B,(R.wsize||P!==M.avail_out&&R.mode<30&&(R.mode<27||O!==4))&&F(M,M.output,M.next_out,P-M.avail_out)?(R.mode=31,-4):(K-=M.avail_in,P-=M.avail_out,M.total_in+=K,M.total_out+=P,R.total+=P,R.wrap&&P&&(M.adler=R.check=R.flags?u(R.check,H,P,M.next_out-P):l(R.check,H,P,M.next_out-P)),M.data_type=R.bits+(R.last?64:0)+(R.mode===12?128:0)+(R.mode===20||R.mode===15?256:0),(K==0&&P===0||O===4)&&ue===g&&(ue=-5),ue)},s.inflateEnd=function(M){if(!M||!M.state)return y;var O=M.state;return O.window&&(O.window=null),M.state=null,g},s.inflateGetHeader=function(M,O){var R;return M&&M.state?(2&(R=M.state).wrap)==0?y:((R.head=O).done=!1,g):y},s.inflateSetDictionary=function(M,O){var R,G=O.length;return M&&M.state?(R=M.state).wrap!==0&&R.mode!==11?y:R.mode===11&&l(1,O,G,0)!==R.check?-3:F(M,O,G,G)?(R.mode=31,-4):(R.havedict=1,g):y},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,a,s){var o=r("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(m,p,g,y,_,b,w,x){var S,C,A,E,j,T,z,L,V,F=x.bits,M=0,O=0,R=0,G=0,H=0,U=0,Z=0,X=0,Q=0,$=0,B=null,K=0,P=new o.Buf16(16),q=new o.Buf16(16),J=null,le=0;for(M=0;M<=15;M++)P[M]=0;for(O=0;O<y;O++)P[p[g+O]]++;for(H=F,G=15;1<=G&&P[G]===0;G--);if(G<H&&(H=G),G===0)return _[b++]=20971520,_[b++]=20971520,x.bits=1,0;for(R=1;R<G&&P[R]===0;R++);for(H<R&&(H=R),M=X=1;M<=15;M++)if(X<<=1,(X-=P[M])<0)return-1;if(0<X&&(m===0||G!==1))return-1;for(q[1]=0,M=1;M<15;M++)q[M+1]=q[M]+P[M];for(O=0;O<y;O++)p[g+O]!==0&&(w[q[p[g+O]]++]=O);if(T=m===0?(B=J=w,19):m===1?(B=l,K-=257,J=u,le-=257,256):(B=d,J=f,-1),M=R,j=b,Z=O=$=0,A=-1,E=(Q=1<<(U=H))-1,m===1&&852<Q||m===2&&592<Q)return 1;for(;;){for(z=M-Z,V=w[O]<T?(L=0,w[O]):w[O]>T?(L=J[le+w[O]],B[K+w[O]]):(L=96,0),S=1<<M-Z,R=C=1<<U;_[j+($>>Z)+(C-=S)]=z<<24|L<<16|V|0,C!==0;);for(S=1<<M-1;$&S;)S>>=1;if(S!==0?($&=S-1,$+=S):$=0,O++,--P[M]==0){if(M===G)break;M=p[g+w[O]]}if(H<M&&($&E)!==A){for(Z===0&&(Z=H),j+=R,X=1<<(U=M-Z);U+Z<G&&!((X-=P[U+Z])<=0);)U++,X<<=1;if(Q+=1<<U,m===1&&852<Q||m===2&&592<Q)return 1;_[A=$&E]=H<<24|U<<16|j-b|0}}return $!==0&&(_[j+$]=M-Z<<24|64<<16|0),x.bits=H,0}},{"../utils/common":41}],51:[function(r,a,s){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,a,s){var o=r("../utils/common"),l=0,u=1;function d(ne){for(var fe=ne.length;0<=--fe;)ne[fe]=0}var f=0,m=29,p=256,g=p+1+m,y=30,_=19,b=2*g+1,w=15,x=16,S=7,C=256,A=16,E=17,j=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(g+2));d(F);var M=new Array(2*y);d(M);var O=new Array(512);d(O);var R=new Array(256);d(R);var G=new Array(m);d(G);var H,U,Z,X=new Array(y);function Q(ne,fe,Ce,ke,ye){this.static_tree=ne,this.extra_bits=fe,this.extra_base=Ce,this.elems=ke,this.max_length=ye,this.has_stree=ne&&ne.length}function $(ne,fe){this.dyn_tree=ne,this.max_code=0,this.stat_desc=fe}function B(ne){return ne<256?O[ne]:O[256+(ne>>>7)]}function K(ne,fe){ne.pending_buf[ne.pending++]=255&fe,ne.pending_buf[ne.pending++]=fe>>>8&255}function P(ne,fe,Ce){ne.bi_valid>x-Ce?(ne.bi_buf|=fe<<ne.bi_valid&65535,K(ne,ne.bi_buf),ne.bi_buf=fe>>x-ne.bi_valid,ne.bi_valid+=Ce-x):(ne.bi_buf|=fe<<ne.bi_valid&65535,ne.bi_valid+=Ce)}function q(ne,fe,Ce){P(ne,Ce[2*fe],Ce[2*fe+1])}function J(ne,fe){for(var Ce=0;Ce|=1&ne,ne>>>=1,Ce<<=1,0<--fe;);return Ce>>>1}function le(ne,fe,Ce){var ke,ye,Re=new Array(w+1),Pe=0;for(ke=1;ke<=w;ke++)Re[ke]=Pe=Pe+Ce[ke-1]<<1;for(ye=0;ye<=fe;ye++){var Le=ne[2*ye+1];Le!==0&&(ne[2*ye]=J(Re[Le]++,Le))}}function oe(ne){var fe;for(fe=0;fe<g;fe++)ne.dyn_ltree[2*fe]=0;for(fe=0;fe<y;fe++)ne.dyn_dtree[2*fe]=0;for(fe=0;fe<_;fe++)ne.bl_tree[2*fe]=0;ne.dyn_ltree[2*C]=1,ne.opt_len=ne.static_len=0,ne.last_lit=ne.matches=0}function he(ne){8<ne.bi_valid?K(ne,ne.bi_buf):0<ne.bi_valid&&(ne.pending_buf[ne.pending++]=ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0}function ve(ne,fe,Ce,ke){var ye=2*fe,Re=2*Ce;return ne[ye]<ne[Re]||ne[ye]===ne[Re]&&ke[fe]<=ke[Ce]}function W(ne,fe,Ce){for(var ke=ne.heap[Ce],ye=Ce<<1;ye<=ne.heap_len&&(ye<ne.heap_len&&ve(fe,ne.heap[ye+1],ne.heap[ye],ne.depth)&&ye++,!ve(fe,ke,ne.heap[ye],ne.depth));)ne.heap[Ce]=ne.heap[ye],Ce=ye,ye<<=1;ne.heap[Ce]=ke}function ie(ne,fe,Ce){var ke,ye,Re,Pe,Le=0;if(ne.last_lit!==0)for(;ke=ne.pending_buf[ne.d_buf+2*Le]<<8|ne.pending_buf[ne.d_buf+2*Le+1],ye=ne.pending_buf[ne.l_buf+Le],Le++,ke===0?q(ne,ye,fe):(q(ne,(Re=R[ye])+p+1,fe),(Pe=T[Re])!==0&&P(ne,ye-=G[Re],Pe),q(ne,Re=B(--ke),Ce),(Pe=z[Re])!==0&&P(ne,ke-=X[Re],Pe)),Le<ne.last_lit;);q(ne,C,fe)}function ae(ne,fe){var Ce,ke,ye,Re=fe.dyn_tree,Pe=fe.stat_desc.static_tree,Le=fe.stat_desc.has_stree,Fe=fe.stat_desc.elems,Ue=-1;for(ne.heap_len=0,ne.heap_max=b,Ce=0;Ce<Fe;Ce++)Re[2*Ce]!==0?(ne.heap[++ne.heap_len]=Ue=Ce,ne.depth[Ce]=0):Re[2*Ce+1]=0;for(;ne.heap_len<2;)Re[2*(ye=ne.heap[++ne.heap_len]=Ue<2?++Ue:0)]=1,ne.depth[ye]=0,ne.opt_len--,Le&&(ne.static_len-=Pe[2*ye+1]);for(fe.max_code=Ue,Ce=ne.heap_len>>1;1<=Ce;Ce--)W(ne,Re,Ce);for(ye=Fe;Ce=ne.heap[1],ne.heap[1]=ne.heap[ne.heap_len--],W(ne,Re,1),ke=ne.heap[1],ne.heap[--ne.heap_max]=Ce,ne.heap[--ne.heap_max]=ke,Re[2*ye]=Re[2*Ce]+Re[2*ke],ne.depth[ye]=(ne.depth[Ce]>=ne.depth[ke]?ne.depth[Ce]:ne.depth[ke])+1,Re[2*Ce+1]=Re[2*ke+1]=ye,ne.heap[1]=ye++,W(ne,Re,1),2<=ne.heap_len;);ne.heap[--ne.heap_max]=ne.heap[1],(function(Ne,$e){var Ae,Ve,He,Be,Ye,mt,nt=$e.dyn_tree,Ot=$e.max_code,Kt=$e.stat_desc.static_tree,Jt=$e.stat_desc.has_stree,Et=$e.stat_desc.extra_bits,it=$e.stat_desc.extra_base,ut=$e.stat_desc.max_length,kt=0;for(Be=0;Be<=w;Be++)Ne.bl_count[Be]=0;for(nt[2*Ne.heap[Ne.heap_max]+1]=0,Ae=Ne.heap_max+1;Ae<b;Ae++)ut<(Be=nt[2*nt[2*(Ve=Ne.heap[Ae])+1]+1]+1)&&(Be=ut,kt++),nt[2*Ve+1]=Be,Ot<Ve||(Ne.bl_count[Be]++,Ye=0,it<=Ve&&(Ye=Et[Ve-it]),mt=nt[2*Ve],Ne.opt_len+=mt*(Be+Ye),Jt&&(Ne.static_len+=mt*(Kt[2*Ve+1]+Ye)));if(kt!==0){do{for(Be=ut-1;Ne.bl_count[Be]===0;)Be--;Ne.bl_count[Be]--,Ne.bl_count[Be+1]+=2,Ne.bl_count[ut]--,kt-=2}while(0<kt);for(Be=ut;Be!==0;Be--)for(Ve=Ne.bl_count[Be];Ve!==0;)Ot<(He=Ne.heap[--Ae])||(nt[2*He+1]!==Be&&(Ne.opt_len+=(Be-nt[2*He+1])*nt[2*He],nt[2*He+1]=Be),Ve--)}})(ne,fe),le(Re,Ue,ne.bl_count)}function I(ne,fe,Ce){var ke,ye,Re=-1,Pe=fe[1],Le=0,Fe=7,Ue=4;for(Pe===0&&(Fe=138,Ue=3),fe[2*(Ce+1)+1]=65535,ke=0;ke<=Ce;ke++)ye=Pe,Pe=fe[2*(ke+1)+1],++Le<Fe&&ye===Pe||(Le<Ue?ne.bl_tree[2*ye]+=Le:ye!==0?(ye!==Re&&ne.bl_tree[2*ye]++,ne.bl_tree[2*A]++):Le<=10?ne.bl_tree[2*E]++:ne.bl_tree[2*j]++,Re=ye,Ue=(Le=0)===Pe?(Fe=138,3):ye===Pe?(Fe=6,3):(Fe=7,4))}function ue(ne,fe,Ce){var ke,ye,Re=-1,Pe=fe[1],Le=0,Fe=7,Ue=4;for(Pe===0&&(Fe=138,Ue=3),ke=0;ke<=Ce;ke++)if(ye=Pe,Pe=fe[2*(ke+1)+1],!(++Le<Fe&&ye===Pe)){if(Le<Ue)for(;q(ne,ye,ne.bl_tree),--Le!=0;);else ye!==0?(ye!==Re&&(q(ne,ye,ne.bl_tree),Le--),q(ne,A,ne.bl_tree),P(ne,Le-3,2)):Le<=10?(q(ne,E,ne.bl_tree),P(ne,Le-3,3)):(q(ne,j,ne.bl_tree),P(ne,Le-11,7));Re=ye,Ue=(Le=0)===Pe?(Fe=138,3):ye===Pe?(Fe=6,3):(Fe=7,4)}}d(X);var ce=!1;function re(ne,fe,Ce,ke){P(ne,(f<<1)+(ke?1:0),3),(function(ye,Re,Pe,Le){he(ye),K(ye,Pe),K(ye,~Pe),o.arraySet(ye.pending_buf,ye.window,Re,Pe,ye.pending),ye.pending+=Pe})(ne,fe,Ce)}s._tr_init=function(ne){ce||((function(){var fe,Ce,ke,ye,Re,Pe=new Array(w+1);for(ye=ke=0;ye<m-1;ye++)for(G[ye]=ke,fe=0;fe<1<<T[ye];fe++)R[ke++]=ye;for(R[ke-1]=ye,ye=Re=0;ye<16;ye++)for(X[ye]=Re,fe=0;fe<1<<z[ye];fe++)O[Re++]=ye;for(Re>>=7;ye<y;ye++)for(X[ye]=Re<<7,fe=0;fe<1<<z[ye]-7;fe++)O[256+Re++]=ye;for(Ce=0;Ce<=w;Ce++)Pe[Ce]=0;for(fe=0;fe<=143;)F[2*fe+1]=8,fe++,Pe[8]++;for(;fe<=255;)F[2*fe+1]=9,fe++,Pe[9]++;for(;fe<=279;)F[2*fe+1]=7,fe++,Pe[7]++;for(;fe<=287;)F[2*fe+1]=8,fe++,Pe[8]++;for(le(F,g+1,Pe),fe=0;fe<y;fe++)M[2*fe+1]=5,M[2*fe]=J(fe,5);H=new Q(F,T,p+1,g,w),U=new Q(M,z,0,y,w),Z=new Q(new Array(0),L,0,_,S)})(),ce=!0),ne.l_desc=new $(ne.dyn_ltree,H),ne.d_desc=new $(ne.dyn_dtree,U),ne.bl_desc=new $(ne.bl_tree,Z),ne.bi_buf=0,ne.bi_valid=0,oe(ne)},s._tr_stored_block=re,s._tr_flush_block=function(ne,fe,Ce,ke){var ye,Re,Pe=0;0<ne.level?(ne.strm.data_type===2&&(ne.strm.data_type=(function(Le){var Fe,Ue=4093624447;for(Fe=0;Fe<=31;Fe++,Ue>>>=1)if(1&Ue&&Le.dyn_ltree[2*Fe]!==0)return l;if(Le.dyn_ltree[18]!==0||Le.dyn_ltree[20]!==0||Le.dyn_ltree[26]!==0)return u;for(Fe=32;Fe<p;Fe++)if(Le.dyn_ltree[2*Fe]!==0)return u;return l})(ne)),ae(ne,ne.l_desc),ae(ne,ne.d_desc),Pe=(function(Le){var Fe;for(I(Le,Le.dyn_ltree,Le.l_desc.max_code),I(Le,Le.dyn_dtree,Le.d_desc.max_code),ae(Le,Le.bl_desc),Fe=_-1;3<=Fe&&Le.bl_tree[2*V[Fe]+1]===0;Fe--);return Le.opt_len+=3*(Fe+1)+5+5+4,Fe})(ne),ye=ne.opt_len+3+7>>>3,(Re=ne.static_len+3+7>>>3)<=ye&&(ye=Re)):ye=Re=Ce+5,Ce+4<=ye&&fe!==-1?re(ne,fe,Ce,ke):ne.strategy===4||Re===ye?(P(ne,2+(ke?1:0),3),ie(ne,F,M)):(P(ne,4+(ke?1:0),3),(function(Le,Fe,Ue,Ne){var $e;for(P(Le,Fe-257,5),P(Le,Ue-1,5),P(Le,Ne-4,4),$e=0;$e<Ne;$e++)P(Le,Le.bl_tree[2*V[$e]+1],3);ue(Le,Le.dyn_ltree,Fe-1),ue(Le,Le.dyn_dtree,Ue-1)})(ne,ne.l_desc.max_code+1,ne.d_desc.max_code+1,Pe+1),ie(ne,ne.dyn_ltree,ne.dyn_dtree)),oe(ne),ke&&he(ne)},s._tr_tally=function(ne,fe,Ce){return ne.pending_buf[ne.d_buf+2*ne.last_lit]=fe>>>8&255,ne.pending_buf[ne.d_buf+2*ne.last_lit+1]=255&fe,ne.pending_buf[ne.l_buf+ne.last_lit]=255&Ce,ne.last_lit++,fe===0?ne.dyn_ltree[2*Ce]++:(ne.matches++,fe--,ne.dyn_ltree[2*(R[Ce]+p+1)]++,ne.dyn_dtree[2*B(fe)]++),ne.last_lit===ne.lit_bufsize-1},s._tr_align=function(ne){P(ne,2,3),q(ne,C,F),(function(fe){fe.bi_valid===16?(K(fe,fe.bi_buf),fe.bi_buf=0,fe.bi_valid=0):8<=fe.bi_valid&&(fe.pending_buf[fe.pending++]=255&fe.bi_buf,fe.bi_buf>>=8,fe.bi_valid-=8)})(ne)}},{"../utils/common":41}],53:[function(r,a,s){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,a,s){(function(o){(function(l,u){if(!l.setImmediate){var d,f,m,p,g=1,y={},_=!1,b=l.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(l);w=w&&w.setTimeout?w:l,d={}.toString.call(l.process)==="[object process]"?function(A){process.nextTick(function(){S(A)})}:(function(){if(l.postMessage&&!l.importScripts){var A=!0,E=l.onmessage;return l.onmessage=function(){A=!1},l.postMessage("","*"),l.onmessage=E,A}})()?(p="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",C,!1):l.attachEvent("onmessage",C),function(A){l.postMessage(p+A,"*")}):l.MessageChannel?((m=new MessageChannel).port1.onmessage=function(A){S(A.data)},function(A){m.port2.postMessage(A)}):b&&"onreadystatechange"in b.createElement("script")?(f=b.documentElement,function(A){var E=b.createElement("script");E.onreadystatechange=function(){S(A),E.onreadystatechange=null,f.removeChild(E),E=null},f.appendChild(E)}):function(A){setTimeout(S,0,A)},w.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var E=new Array(arguments.length-1),j=0;j<E.length;j++)E[j]=arguments[j+1];var T={callback:A,args:E};return y[g]=T,d(g),g++},w.clearImmediate=x}function x(A){delete y[A]}function S(A){if(_)setTimeout(S,0,A);else{var E=y[A];if(E){_=!0;try{(function(j){var T=j.callback,z=j.args;switch(z.length){case 0:T();break;case 1:T(z[0]);break;case 2:T(z[0],z[1]);break;case 3:T(z[0],z[1],z[2]);break;default:T.apply(u,z)}})(E)}finally{x(A),_=!1}}}}function C(A){A.source===l&&typeof A.data=="string"&&A.data.indexOf(p)===0&&S(+A.data.slice(p.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(s0)),s0.exports}var J7=Q7();const e9=xu(J7);function la(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\n/g,"<br>")}function t9(e,t){const r=[];r.push("<html><body>"),r.push('<div class="ak-editor-expand" data-node-type="expand" data-title="Made with FlowState TM">'),r.push('<div class="ak-editor-expand__title-container">'),r.push("</div>"),r.push('<div class="ak-editor-expand__content">'),r.push("<p>");const a=sA(e,t);if(r.push('- <a href="https://github.com/bjornarfl/FlowState-TM>Learn more about FlowState</a>'),a.length<8e3&&(r.push("<br>"),r.push(`- <a href="${a}">Open/Edit this Threat Model</a>`)),t){const s=`https://${t.domain}/${t.owner}/${t.repository}/blob/${t.branch}/${t.path}`;r.push("<br>"),r.push(`- <a href="${s}">See Source File in GitHub</a>`)}return r.push("</p>"),r.push("</div>"),r.push("</div>"),r.push("<h1>What are we working on?</h1>"),r.push(`<h2>${la(e.name)}</h2>`),e.description&&r.push(`<p>${la(e.description)}</p>`),r.push("<h2>Data-Flow Diagram</h2>"),r.push('<div class="ak-editor-panel" data-panel-type="info">'),r.push('<div class="ak-editor-panel__icon" data-panel-type="info">'),r.push('<span role="img" aria-label="info panel">'),r.push('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="presentation">'),r.push('<path fill-rule="evenodd" clip-rule="evenodd" d="M12 22C9.34784 22 6.8043 20.9464 4.92893 19.0711C3.05357 17.1957 2 14.6522 2 12C2 9.34784 3.05357 6.8043 4.92893 4.92893C6.8043 3.05357 9.34784 2 12 2C14.6522 2 17.1957 3.05357 19.0711 4.92893C20.9464 6.8043 22 9.34784 22 12C22 14.6522 20.9464 17.1957 19.0711 19.0711C17.1957 20.9464 14.6522 22 12 22V22ZM12 11.375C11.6685 11.375 11.3505 11.5067 11.1161 11.7411C10.8817 11.9755 10.75 12.2935 10.75 12.625V15.75C10.75 16.0815 10.8817 16.3995 11.1161 16.6339C11.3505 16.8683 11.6685 17 12 17C12.3315 17 12.6495 16.8683 12.8839 16.6339C13.1183 16.3995 13.25 16.0815 13.25 15.75V12.625C13.25 12.2935 13.1183 11.9755 12.8839 11.7411C12.6495 11.5067 12.3315 11.375 12 11.375ZM12 9.96875C12.4558 9.96875 12.893 9.78767 13.2153 9.46534C13.5377 9.14301 13.7188 8.70584 13.7188 8.25C13.7188 7.79416 13.5377 7.35699 13.2153 7.03466C12.893 6.71233 12.4558 6.53125 12 6.53125C11.5442 6.53125 11.107 6.71233 10.7847 7.03466C10.4623 7.35699 10.2812 7.79416 10.2812 8.25C10.2812 8.70584 10.4623 9.14301 10.7847 9.46534C11.107 9.78767 11.5442 9.96875 12 9.96875Z" fill="currentColor"></path>'),r.push("</svg>"),r.push("</span>"),r.push("</div>"),r.push('<div class="ak-editor-panel__content">'),r.push('<p>To include the data-flow diagram, use the "copy DFD as image" button and paste it here.</p>'),r.push("</div>"),r.push("</div>"),r.push("<p> </p>"),e.assets&&e.assets.length>0&&(r.push("<h2>Assets</h2>"),r.push('<table border="1" cellpadding="8" cellspacing="0" style="width: 100%;">'),r.push("<thead><tr>"),r.push('<th style="background-color: #FFFAE6; text-align: left;" data-cell-background="#fffae6" colorname="Light yellow" data-colwidth="200"><b>Asset Name</b></th>'),r.push('<th style="background-color: #FFFAE6; text-align: left;" data-cell-background="#fffae6" colorname="Light yellow" data-colwidth="600"><b>Asset Description</b></th>'),r.push("</tr></thead>"),r.push("<tbody>"),e.assets.forEach(s=>{const o=s.description||"";r.push("<tr>"),r.push(`<td><b>${la(s.name)}</b></td>`),r.push(`<td>${la(o)}</td>`),r.push("</tr>")}),r.push("</tbody></table>")),e.threats&&e.threats.length>0&&(r.push("<h1>What can go wrong?</h1>"),r.push("<h2>Threats</h2>"),r.push('<table border="1" cellpadding="8" cellspacing="0" style="width: 100%;">'),r.push("<thead><tr>"),r.push('<th style="background-color: #FFEBE6; text-align: left;" data-cell-background="#ffebe6" colorname="Light red" data-colwidth="200"><b>Threat Name</b></th>'),r.push('<th style="background-color: #FFEBE6; text-align: left;" data-cell-background="#ffebe6" colorname="Light red" data-colwidth="600"><b>Threat Description</b></th>'),r.push("</tr></thead>"),r.push("<tbody>"),e.threats.forEach(s=>{const o=s.description||"";r.push("<tr>"),r.push(`<td><b>${la(s.name)}</b></td>`),r.push(`<td>${la(o)}</td>`),r.push("</tr>")}),r.push("</tbody></table>")),e.controls&&e.controls.length>0&&(r.push("<h1>What are we going to do about it?</h1>"),r.push("<h2>Controls</h2>"),r.push('<table border="1" cellpadding="8" cellspacing="0" style="width: 100%;">'),r.push("<thead><tr>"),r.push('<th style="background-color: #E3FCEF; text-align: left;" data-cell-background="#e3fcef" colorname="Light green" data-colwidth="200"><b>Control Name</b></th>'),r.push('<th style="background-color: #E3FCEF; text-align: left;" data-cell-background="#e3fcef" colorname="Light green" data-colwidth="400"><b>Control Description</b></th>'),r.push('<th style="background-color: #E3FCEF; text-align: left;" data-cell-background="#e3fcef" colorname="Light green" data-colwidth="200"><b>Mitigates</b></th>'),r.push("</tr></thead>"),r.push("<tbody>"),e.controls.forEach(s=>{const o=s.description||"",l=s.mitigates?s.mitigates.map(u=>e.threats?.find(f=>f.ref===u)?.name||u).join(", "):"";r.push("<tr>"),r.push(`<td><b>${la(s.name)}</b></td>`),r.push(`<td>${la(o)}</td>`),r.push(`<td>${la(l)}</td>`),r.push("</tr>")}),r.push("</tbody></table>")),r.push("</body></html>"),r.join("")}async function n9(e){const t=new Blob([e],{type:"text/html"}),r=document.createElement("div");r.innerHTML=e;const a=r.textContent||r.innerText||"",s=new Blob([a],{type:"text/plain"}),o=new ClipboardItem({"text/html":t,"text/plain":s});await navigator.clipboard.write([o])}function hm(e,t,r,a=!0){const s=[];s.push("# What are we working on?"),s.push(`## ${e.name}`),s.push(""),e.description&&(s.push(e.description),s.push(""));const o=(t||e.name||"threat_model").replace(/\s+/g,"_").toLowerCase();if(s.push("## Data-Flow Diagram"),s.push(""),a&&t)s.push(`![Threat Model Diagram](${o}_diagram.png)`),s.push("");else{s.push("```mermaid"),s.push("graph LR");const l=new Map;e.components?.forEach((m,p)=>{l.set(m.ref,p)});const u=(m,p,g="    ")=>{const y=`C${p}`,_=m.name.replace(/["\[\]]/g,"");m.component_type==="data_store"?s.push(`${g}${y}[(${_})]`):m.component_type==="external_dependency"?s.push(`${g}${y}[${_}]`):s.push(`${g}${y}(${_})`)},d=new Map;if(e.boundaries&&e.boundaries.length>0&&e.boundaries.forEach(m=>{m.components&&m.components.length>0&&m.components.forEach(p=>{const g=d.get(p)||0;d.set(p,g+1)})}),!Array.from(d.values()).some(m=>m>1)&&e.boundaries&&e.boundaries.length>0){const m=new Set;if(e.boundaries.forEach((p,g)=>{const y=p.name.replace(/["\[\]]/g,"");p.components&&p.components.length>0&&(s.push(`    subgraph B${g}["${y}"]`),p.components.forEach(_=>{const b=l.get(_);if(b!==void 0){const w=e.components[b];u(w,b,"        "),m.add(_)}}),s.push("    end"))}),s.push(""),e.components&&e.components.length>0){const p=e.components.filter(g=>!m.has(g.ref));p.length>0&&(p.forEach(g=>{const y=l.get(g.ref);y!==void 0&&u(g,y)}),s.push(""))}}else e.components&&e.components.length>0&&(e.components.forEach(m=>{const p=l.get(m.ref);p!==void 0&&u(m,p)}),s.push(""));e.data_flows&&e.data_flows.length>0&&e.data_flows.forEach(m=>{const p=l.get(m.source),g=l.get(m.destination);if(p!==void 0&&g!==void 0){const y=`C${p}`,_=`C${g}`,b=m.label?m.label.replace(/["\[\]]/g,""):"";m.direction==="bidirectional"?s.push(`    ${y} <-->|${b}| ${_}`):s.push(`    ${y} -->|${b}| ${_}`)}}),s.push("```"),s.push("")}if(e.assets&&e.assets.length>0&&(s.push("## Assets"),s.push(""),s.push("| Name | Description |"),s.push("|------|-------------|"),e.assets.forEach(l=>{const d=(l.description||"").replace(/\\/g,"\\\\").replace(/\|/g,"\\|").replace(/\n/g," ");s.push(`| ${l.name} | ${d} |`)}),s.push("")),e.components&&e.components.length>0&&(s.push("## Components"),s.push(""),s.push("| Name | Type | Description | Assets |"),s.push("|------|------|-------------|--------|"),e.components.forEach(l=>{const d=(l.description||"").replace(/\\/g,"\\\\").replace(/\|/g,"\\|").replace(/\n/g," "),f=l.assets?l.assets.map(m=>e.assets?.find(g=>g.ref===m)?.name||m).join(", "):"";s.push(`| ${l.name} | ${l.component_type} | ${d} | ${f} |`)}),s.push("")),e.threats&&e.threats.length>0&&(s.push("# What can go wrong?"),s.push("## Threats"),s.push(""),s.push("| Name | Description | Affected Components | Affected Assets |"),s.push("|------|-------------|---------------------|-----------------|"),e.threats.forEach(l=>{const d=(l.description||"").replace(/\\/g,"\\\\").replace(/\|/g,"\\|").replace(/\n/g," "),f=l.affected_components?l.affected_components.map(p=>e.components?.find(y=>y.ref===p)?.name||p).join(", "):"",m=l.affected_assets?l.affected_assets.map(p=>e.assets?.find(y=>y.ref===p)?.name||p).join(", "):"";s.push(`| ${l.name} | ${d} | ${f} | ${m} |`)}),s.push("")),e.controls&&e.controls.length>0&&(s.push("# What are we going to do about it?"),s.push("## Controls"),s.push(""),s.push("| Name | Description | Mitigates | Implemented In |"),s.push("|------|-------------|-----------|----------------|"),e.controls.forEach(l=>{const d=(l.description||"").replace(/\\/g,"\\\\").replace(/\|/g,"\\|").replace(/\n/g," "),f=l.mitigates?l.mitigates.map(p=>e.threats?.find(y=>y.ref===p)?.name||p).join(", "):"",m=l.implemented_in?l.implemented_in.map(p=>e.components?.find(y=>y.ref===p)?.name||p).join(", "):"";s.push(`| ${l.name} | ${d} | ${f} | ${m} |`)}),s.push("")),s.push("---"),s.push(""),r){const l=`https://${window.location.host}/github/${r.owner}/${r.repository}/${r.path}?branch=${r.branch}`,u=`https://${r.domain}/${r.owner}/${r.repository}/blob/${r.branch}/.threat-models/${r.path}`;s.push(`[Made with FlowState TM](https://github.com/bjornarfl/FlowState-TM) - [See Source File on GitHub](${u}) - Edit source file [here](${l})`)}else s.push("[Made with FlowState TM](https://github.com/bjornarfl/FlowState-TM)");return s.join(`
`)}function r9(e,t,r){const a=N.useCallback(async(f=1)=>{try{const m=document.querySelector(".react-flow");if(!m)return;const p=t?"#ffffff":"#000000",g=t?"#1a1a1a":"#ffffff",y=m.querySelector(".react-flow__viewport");if(!y)return;const _=m.querySelector(".react-flow__controls"),b=m.querySelector(".react-flow__minimap"),w=m.querySelector(".react-flow__background");_&&(_.style.display="none"),b&&(b.style.display="none"),w&&(w.style.display="none");const x=m.querySelectorAll(".react-flow__edge circle");x.forEach(le=>{le.style.display="none"});const S=m.querySelectorAll(".react-flow__edge path"),C=[];S.forEach(le=>{const oe=le;C.push({element:oe,style:oe.getAttribute("style")||""}),oe.style.stroke=p,oe.style.strokeWidth="2",oe.style.fill="none"});const A=m.querySelector(".react-flow__edges svg, .react-flow__viewport svg"),E=document.querySelector("svg > defs");let j=null;A&&E&&(j=E.cloneNode(!0),j.querySelectorAll("polygon").forEach(oe=>{oe.setAttribute("fill",p)}),A.insertBefore(j,A.firstChild));const T=y.querySelectorAll(".react-flow__node");let z=1/0,L=1/0,V=-1/0,F=-1/0;const O=y.style.transform.match(/translate\(([-\d.]+)px,\s*([-\d.]+)px\)\s*scale\(([-\d.]+)\)/),R=O?parseFloat(O[1]):0,G=O?parseFloat(O[2]):0,H=O?parseFloat(O[3]):1;T.forEach(le=>{const oe=le,ve=oe.style.transform.match(/translate\(([-\d.]+)px,\s*([-\d.]+)px\)/);if(ve){const W=parseFloat(ve[1]),ie=parseFloat(ve[2]),ae=oe.offsetWidth,I=oe.offsetHeight;z=Math.min(z,W),L=Math.min(L,ie),V=Math.max(V,W+ae),F=Math.max(F,ie+I)}});const U=40,Z=z-U,X=L-U,Q=V-z+U*2,$=F-L+U*2,B=await W7(y,{filter:()=>!0,backgroundColor:g,width:Q,height:$,style:{transform:`translate(${-Z}px, ${-X}px) scale(1)`,transformOrigin:"top left"}});j&&j.parentNode&&j.parentNode.removeChild(j),C.forEach(({element:le,style:oe})=>{oe?le.setAttribute("style",oe):le.removeAttribute("style")});const K=new window.Image;K.src=B,await new Promise(le=>{K.onload=le});const P=document.createElement("canvas");P.width=Q*f,P.height=$*f;const q=P.getContext("2d");let J;return q&&(q.fillStyle=g,q.fillRect(0,0,P.width,P.height),q.scale(f,f),q.drawImage(K,0,0),J=P.toDataURL("image/png")),_&&(_.style.display=""),b&&(b.style.display=""),w&&(w.style.display=""),x.forEach(le=>{le.style.display=""}),J}catch(m){console.error("Failed to capture diagram:",m);return}},[t]),s=N.useCallback(async()=>{if(e){const f=e.name||"threat_model",m=hm(e,f,r,!1),p=new Blob([m],{type:"text/markdown;charset=utf-8"}),g=URL.createObjectURL(p),y=document.createElement("a");y.href=g,y.download=`${f.replace(/\s+/g,"_").toLowerCase()}.md`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(g)}},[e,a,r]),o=N.useCallback(async()=>{const f=e?.name||"threat_model",m=await a(3);if(m){const p=document.createElement("a");p.href=m,p.download=`${f.replace(/\s+/g,"_").toLowerCase()}_diagram.png`,document.body.appendChild(p),p.click(),document.body.removeChild(p)}},[e?.name,a]),l=N.useCallback(async f=>{if(!e)return;const m=e.name||"threat_model",p=m.replace(/\s+/g,"_").toLowerCase();try{const g=new e9,y=g.folder(p);if(!y)throw new Error("Failed to create folder in zip");y.file(`${p}.yaml`,f);const _=hm(e,m,r,!0);y.file(`${p}.md`,_);const b=await a(3);if(b){const C=b.split(",")[1];y.file(`${p}_diagram.png`,C,{base64:!0})}const w=await g.generateAsync({type:"blob"}),x=URL.createObjectURL(w),S=document.createElement("a");S.href=x,S.download=`${p}.zip`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(x)}catch(g){console.error("Failed to create downloadable folder:",g)}},[e,a,r]),u=N.useCallback(async()=>{if(!e)return!1;try{const f=t9(e,r);return await n9(f),!0}catch(f){return console.error("Failed to copy Confluence markup to clipboard:",f),!1}},[e,r]),d=N.useCallback(async()=>{try{const f=await a(3);if(!f)return!1;const m=f.split(",")[1],p=atob(m),g=new Uint8Array(p.length);for(let b=0;b<p.length;b++)g[b]=p.charCodeAt(b);const y=new Blob([g],{type:"image/png"}),_=new ClipboardItem({"image/png":y});return await navigator.clipboard.write([_]),!0}catch(f){return console.error("Failed to copy diagram to clipboard:",f),!1}},[a]);return{captureDiagram:a,handleDownloadMarkdown:s,handleDownloadPng:o,handleDownloadFolder:l,handleCopyToConfluence:u,handleCopyDiagramToClipboard:d}}function Xr(e,t,r,a,s){return(o,l)=>{r(ct(u=>{if(!u)return;const d=u[e];if(!d)return;const f=d.find(m=>m.ref===o);f&&(f[t]=l)})),a(u=>s(u,e,o,t,l))}}function Fc(e,t,r,a,s){return(o,l)=>{r(ct(u=>{if(!u)return;const d=u[e];if(!d)return;const f=d.find(m=>m.ref===o);f&&(f[t]=l.length>0?l:void 0)})),a(u=>s(u,e,o,t,l.length>0?l:void 0))}}const Z2=50;function i9(e){const[t,r]=N.useState({past:[],present:null,future:[]}),a=N.useRef(!1),s=t.past.length>0,o=t.future.length>0,l=N.useCallback(m=>{a.current||r(p=>{const g=p.present?[...p.past,p.present]:p.past;return{past:g.length>=Z2?g.slice(g.length-Z2+1):g,present:m,future:[]}})},[]),u=N.useCallback(()=>{if(!s||!t.present)return;const m=t.past[t.past.length-1],p=t.past.slice(0,t.past.length-1);r({past:p,present:m,future:[t.present,...t.future]}),a.current=!0,e(m),setTimeout(()=>{a.current=!1},0)},[s,t,e]),d=N.useCallback(()=>{if(!o||!t.present)return;const m=t.future[0],p=t.future.slice(1);r({past:[...t.past,t.present],present:m,future:p}),a.current=!0,e(m),setTimeout(()=>{a.current=!1},0)},[o,t,e]),f=N.useCallback(()=>{r({past:[],present:null,future:[]})},[]);return{canUndo:s,canRedo:o,undo:u,redo:d,recordState:l,clearHistory:f}}function a9(){const[e,t]=N.useState([]),[r,a]=N.useState([]),[s,o]=N.useState(null),[l,u]=N.useState(""),[d,f]=N.useState(!1),[m,p]=N.useState(null),[g,y]=N.useState(!1),_=N.useRef(null),b=N.useRef([]),w=N.useRef([]),x=N.useRef(""),S=N.useRef(new Set);N.useEffect(()=>{_.current=s,b.current=e,w.current=r,x.current=l},[s,e,r,l]);const C=N.useCallback(Ne=>{o(Ne.threatModel),t(Ne.nodes),a(Ne.edges),u(Ne.yamlContent)},[]),{canUndo:A,canRedo:E,undo:j,redo:T,recordState:z,clearHistory:L}=i9(C),V=N.useCallback(()=>{const Ne=b.current.map($e=>{if($e.type==="threatModelNode"&&$e.data){const{isFocusedForConnection:Ae,focusedHandleId:Ve,isInDataFlowCreation:He,isHandleSelectionMode:Be,...Ye}=$e.data;return{...$e,data:Ye}}return $e});z({threatModel:_.current,nodes:Ne,edges:w.current,yamlContent:x.current})},[z]),F=N.useRef(!1);N.useEffect(()=>{s&&!F.current&&(V(),F.current=!0)},[s,V]);const M=N.useCallback(Ne=>{u($e=>Ne($e))},[]),O=N.useCallback(Ne=>(...$e)=>{V(),Ne(...$e),setTimeout(()=>{V()},0)},[V]),R=N.useCallback((Ne,$e)=>{O(Xr("assets","name",o,M,st))(Ne,$e)},[M,O]),G=N.useCallback((Ne,$e)=>{O(Xr("assets","description",o,M,st))(Ne,$e)},[M,O]),H=N.useCallback((Ne,$e)=>{O(Xr("threats","name",o,M,st))(Ne,$e)},[M,O]),U=N.useCallback((Ne,$e)=>{O(Xr("threats","description",o,M,st))(Ne,$e)},[M,O]),Z=N.useCallback((Ne,$e)=>{O(Xr("controls","name",o,M,st))(Ne,$e)},[M,O]),X=N.useCallback((Ne,$e)=>{O(Xr("controls","description",o,M,st))(Ne,$e)},[M,O]),Q=N.useCallback((Ne,$e)=>{O(Xr("controls","status",o,M,st))(Ne,$e)},[M,O]),$=N.useCallback((Ne,$e)=>{O(Xr("controls","status_link",o,M,st))(Ne,$e)},[M,O]),B=N.useCallback((Ne,$e)=>{O(Xr("controls","status_note",o,M,st))(Ne,$e)},[M,O]),K=N.useCallback((Ne,$e)=>{O(Xr("threats","status",o,M,st))(Ne,$e)},[M,O]),P=N.useCallback((Ne,$e)=>{O(Xr("threats","status_link",o,M,st))(Ne,$e)},[M,O]),q=N.useCallback((Ne,$e)=>{O(Xr("threats","status_note",o,M,st))(Ne,$e)},[M,O]),J=N.useCallback((Ne,$e)=>{O(Fc("threats","affected_components",o,M,st))(Ne,$e)},[M,O]),le=N.useCallback((Ne,$e)=>{O(Fc("threats","affected_data_flows",o,M,st))(Ne,$e)},[M,O]),oe=N.useCallback((Ne,$e)=>{O(Fc("threats","affected_assets",o,M,st))(Ne,$e)},[M,O]),he=N.useCallback((Ne,$e)=>{O(Fc("controls","mitigates",o,M,st))(Ne,$e)},[M,O]),ve=N.useCallback((Ne,$e)=>{O(Fc("controls","implemented_in",o,M,st))(Ne,$e)},[M,O]),W=N.useCallback((Ne,$e)=>{O((Ae,Ve)=>{o(ct(He=>{if(!He)return;const Be=He.components.find(Ye=>Ye.ref===Ae);Be&&(Be.name=Ve)})),M(He=>st(He,"components",Ae,"name",Ve)),t(He=>He.map(Be=>Be.id===Ae?{...Be,data:{...Be.data,label:Ve}}:Be))})(Ne,$e)},[M,O]),ie=N.useCallback((Ne,$e)=>{O((Ae,Ve)=>{o(ct(He=>{if(!He)return;const Be=He.components.find(Ye=>Ye.ref===Ae);Be&&(Be.component_type=Ve)})),M(He=>st(He,"components",Ae,"component_type",Ve)),t(He=>He.map(Be=>Be.id===Ae?{...Be,data:{...Be.data,componentType:Ve}}:Be))})(Ne,$e)},[M,O]),ae=N.useCallback((Ne,$e)=>{O((Ae,Ve)=>{o(ct(He=>{if(!He)return;const Be=He.components.find(Ye=>Ye.ref===Ae);Be&&(Be.description=Ve)})),M(He=>st(He,"components",Ae,"description",Ve)),t(He=>He.map(Be=>Be.id===Ae?{...Be,data:{...Be.data,description:Ve}}:Be))})(Ne,$e)},[M,O]),I=N.useCallback((Ne,$e)=>{O((Ae,Ve)=>{o(ct(He=>{if(!He)return;const Be=He.components.find(Ye=>Ye.ref===Ae);Be&&(Be.assets=Ve.length>0?Ve:void 0)})),M(He=>st(He,"components",Ae,"assets",Ve.length>0?Ve:void 0)),t(He=>He.map(Be=>Be.id===Ae?{...Be,data:{...Be.data,assets:Ve.length>0?Ve:void 0}}:Be))})(Ne,$e)},[M,O]),ue=N.useCallback((Ne,$e)=>{O((Ae,Ve)=>{o(ct(He=>{if(!He)return;const Be=He.boundaries?.find(Ye=>Ye.ref===Ae);Be&&(Be.name=Ve)})),M(He=>st(He,"boundaries",Ae,"name",Ve)),t(He=>He.map(Be=>Be.id===Ae?{...Be,data:{...Be.data,label:Ve}}:Be))})(Ne,$e)},[M,O]),ce=N.useCallback((Ne,$e)=>{O((Ae,Ve)=>{o(ct(He=>{if(!He)return;const Be=He.boundaries?.find(Ye=>Ye.ref===Ae);Be&&(Be.description=Ve)})),M(He=>st(He,"boundaries",Ae,"description",Ve))})(Ne,$e)},[M,O]),re=N.useCallback((Ne,$e,Ae)=>{O((Ve,He,Be)=>{o(ct(Ye=>{if(!Ye)return;const mt=Ye.boundaries?.find(nt=>nt.ref===Ve);mt&&(mt.width=He,mt.height=Be)})),M(Ye=>{let mt=st(Ye,"boundaries",Ve,"width",He);return mt=st(mt,"boundaries",Ve,"height",Be),mt})})(Ne,$e,Ae)},[M,O]),ne=N.useCallback((Ne,$e)=>{O((Ae,Ve)=>{o(ct(He=>{if(!He)return;const Be=He.data_flows?.find(Ye=>Ye.ref===Ae);Be&&(Be.label=Ve)})),M(He=>st(He,"data_flows",Ae,"label",Ve)),a(He=>He.map(Be=>Be.id===Ae?{...Be,label:Ve}:Be))})(Ne,$e)},[M,O]),fe=N.useCallback((Ne,$e)=>{O((Ae,Ve)=>{const He=_.current?.data_flows?.find(nt=>nt.ref===Ae);if(!He)return;const Be=_.current?.data_flows?.filter(nt=>nt.ref!==Ae).map(nt=>nt.ref)||[],Ye=Jh(He.source,He.destination,Ve,Be),mt=Ye!==Ae;o(ct(nt=>{if(!nt)return;const Ot=nt.data_flows?.find(Kt=>Kt.ref===Ae);Ot&&(Ot.direction=Ve,mt&&(Ot.ref=Ye)),mt&&nt.threats&&nt.threats.forEach(Kt=>{Kt.affected_data_flows&&(Kt.affected_data_flows=Kt.affected_data_flows.map(Jt=>Jt===Ae?Ye:Jt))})})),M(nt=>{let Ot=st(nt,"data_flows",Ae,"direction",Ve);return mt&&(Ot=K0(Ot,Ae,Ye)),Ot}),a(nt=>nt.map(Ot=>{if(Ot.id===Ae){const Kt=Ve==="bidirectional",Jt=mt?Ye:Ot.id;return{...Ot,id:Jt,data:{...Ot.data,direction:Ve,edgeRef:Jt},markerStart:Kt?{type:"arrowclosed"}:void 0,markerEnd:{type:"arrowclosed"}}}return Ot}))})(Ne,$e)},[M,O]),Ce=N.useCallback((Ne,$e)=>{if($e!=="bidirectional"){fe(Ne,"bidirectional");return}O(Ae=>{const Ve=_.current?.data_flows?.find(Et=>Et.ref===Ae);if(!Ve)return;const He=Ve.destination,Be=Ve.source,Ye=Ve.destination_point,mt=Ve.source_point,nt="unidirectional",Ot=_.current?.data_flows?.filter(Et=>Et.ref!==Ae).map(Et=>Et.ref)||[],Kt=Jh(He,Be,nt,Ot),Jt=Kt!==Ae;o(ct(Et=>{if(!Et)return;const it=Et.data_flows?.find(ut=>ut.ref===Ae);it&&(it.source=He,it.destination=Be,it.source_point=Ye,it.destination_point=mt,it.direction=nt,Jt&&(it.ref=Kt)),Jt&&Et.threats&&Et.threats.forEach(ut=>{ut.affected_data_flows&&(ut.affected_data_flows=ut.affected_data_flows.map(kt=>kt===Ae?Kt:kt))})})),M(Et=>{let it=st(Et,"data_flows",Ae,"source",He);return it=st(it,"data_flows",Ae,"destination",Be),it=st(it,"data_flows",Ae,"direction",nt),Ye!==void 0?it=st(it,"data_flows",Ae,"source_point",Ye):it=st(it,"data_flows",Ae,"source_point",void 0),mt!==void 0?it=st(it,"data_flows",Ae,"destination_point",mt):it=st(it,"data_flows",Ae,"destination_point",void 0),Jt&&(it=K0(it,Ae,Kt)),it}),a(Et=>Et.map(it=>{if(it.id===Ae){const ut=Jt?Kt:it.id;return{...it,id:ut,source:He,target:Be,sourceHandle:Ye||void 0,targetHandle:mt?`target-${mt}`:void 0,markerStart:void 0,markerEnd:{type:"arrowclosed"},data:{...it.data,direction:nt,edgeRef:ut}}}return it}))})(Ne)},[fe,M,O]),ke=N.useCallback(Ne=>{O($e=>{o(ct(Ae=>{Ae&&(Ae.name=$e)})),M(Ae=>P2(Ae,"name",$e))})(Ne)},[M,O]),ye=N.useCallback(Ne=>{O($e=>{o(ct(Ae=>{Ae&&(Ae.description=$e)})),M(Ae=>P2(Ae,"description",$e))})(Ne)},[M,O]),Re=N.useCallback(Ne=>{O($e=>{o(ct(Ae=>{Ae&&(Ae.participants=$e.length>0?$e:void 0)})),M(Ae=>KU(Ae,"participants",$e))})(Ne)},[M,O]),Pe=N.useCallback(Ne=>{O($e=>{o(ct(Ae=>{if(!Ae||!Ae.assets)return;const Ve=new Map(Ae.assets.map(He=>[He.ref,He]));Ae.assets=$e.map(He=>Ve.get(He)).filter(Boolean)})),M(Ae=>fh(Ae,"assets",$e))})(Ne)},[M,O]),Le=N.useCallback(Ne=>{O($e=>{o(ct(Ae=>{if(!Ae||!Ae.components)return;const Ve=new Map(Ae.components.map(He=>[He.ref,He]));Ae.components=$e.map(He=>Ve.get(He)).filter(Boolean)})),M(Ae=>fh(Ae,"components",$e))})(Ne)},[M,O]),Fe=N.useCallback(Ne=>{O($e=>{o(ct(Ae=>{if(!Ae||!Ae.threats)return;const Ve=new Map(Ae.threats.map(He=>[He.ref,He]));Ae.threats=$e.map(He=>Ve.get(He)).filter(Boolean)})),M(Ae=>fh(Ae,"threats",$e))})(Ne)},[M,O]),Ue=N.useCallback(Ne=>{O($e=>{o(ct(Ae=>{if(!Ae||!Ae.controls)return;const Ve=new Map(Ae.controls.map(He=>[He.ref,He]));Ae.controls=$e.map(He=>Ve.get(He)).filter(Boolean)})),M(Ae=>fh(Ae,"controls",$e))})(Ne)},[M,O]);return{nodes:e,edges:r,threatModel:s,yamlContent:l,isDraggingEdge:d,isDraggingNode:m,isEditingMode:g,setNodes:t,setEdges:a,setThreatModel:o,setYamlContent:u,setIsDraggingEdge:f,setIsDraggingNode:p,setIsEditingMode:y,threatModelRef:_,nodesRef:b,edgesRef:w,arrowKeyMovedNodesRef:S,updateYaml:M,canUndo:A,canRedo:E,undo:j,redo:T,clearHistory:L,recordState:V,handleAssetNameChange:R,handleAssetDescriptionChange:G,handleThreatNameChange:H,handleThreatDescriptionChange:U,handleThreatStatusChange:K,handleThreatStatusLinkChange:P,handleThreatStatusNoteChange:q,handleControlNameChange:Z,handleControlDescriptionChange:X,handleControlStatusChange:Q,handleControlStatusLinkChange:$,handleControlStatusNoteChange:B,handleThreatAffectedComponentsChange:J,handleThreatAffectedDataFlowsChange:le,handleThreatAffectedAssetsChange:oe,handleControlMitigatesChange:he,handleControlImplementedInChange:ve,handleComponentNameChange:W,handleComponentTypeChange:ie,handleComponentDescriptionChange:ae,handleComponentAssetsChange:I,handleBoundaryNameChange:ue,handleBoundaryDescriptionChange:ce,handleBoundaryResizeEnd:re,handleDataFlowLabelChange:ne,handleDataFlowDirectionChange:fe,handleToggleDirectionAndReverse:Ce,handleThreatModelNameChange:ke,handleThreatModelDescriptionChange:ye,handleParticipantsChange:Re,handleReorderAssets:Pe,handleReorderComponents:Le,handleReorderThreats:Fe,handleReorderControls:Ue}}const Cl=[{position:ze.Top,id:"top-1",offset:0},{position:ze.Top,id:"top-2",offset:.33},{position:ze.Top,id:"top-3",offset:.66},{position:ze.Right,id:"right-1",offset:0},{position:ze.Right,id:"right-2",offset:.33},{position:ze.Right,id:"right-3",offset:.66},{position:ze.Bottom,id:"bottom-1",offset:0},{position:ze.Bottom,id:"bottom-2",offset:.33},{position:ze.Bottom,id:"bottom-3",offset:.66},{position:ze.Left,id:"left-1",offset:0},{position:ze.Left,id:"left-2",offset:.33},{position:ze.Left,id:"left-3",offset:.66}];function yA(e,t){if(Cl.findIndex(o=>o.id===e)===-1)return Cl[0].id;if(["top-1","top-3","bottom-1","bottom-3"].includes(e))switch(e){case"top-1":if(t==="up")return"bottom-1";if(t==="down"||t==="left")return"left-1";if(t==="right")return"top-2";break;case"top-3":if(t==="up")return"bottom-3";if(t==="down")return"right-1";if(t==="left")return"top-2";if(t==="right")return"right-1";break;case"bottom-1":if(t==="up")return"left-3";if(t==="down")return"top-1";if(t==="left")return"left-3";if(t==="right")return"bottom-2";break;case"bottom-3":if(t==="up")return"right-3";if(t==="down")return"top-3";if(t==="left")return"bottom-2";if(t==="right")return"right-3";break}if(e==="top-2"){if(t==="up"||t==="down")return"bottom-2";if(t==="left")return"top-1";if(t==="right")return"top-3"}if(e==="bottom-2"){if(t==="up"||t==="down")return"top-2";if(t==="left")return"bottom-1";if(t==="right")return"bottom-3"}if(e==="left-2"){if(t==="up")return"left-1";if(t==="down")return"left-3";if(t==="left"||t==="right")return"right-2"}if(e==="right-2"){if(t==="up")return"right-1";if(t==="down")return"right-3";if(t==="left"||t==="right")return"left-2"}if(e==="left-1"){if(t==="up")return"top-1";if(t==="down")return"left-2";if(t==="left")return"right-1";if(t==="right")return"top-1"}if(e==="left-3"){if(t==="up")return"left-2";if(t==="down")return"bottom-1";if(t==="left")return"right-3";if(t==="right")return"bottom-1"}if(e==="right-1"){if(t==="up")return"top-3";if(t==="down")return"right-2";if(t==="left")return"top-3";if(t==="right")return"left-1"}if(e==="right-3"){if(t==="up")return"right-2";if(t==="down"||t==="left")return"bottom-3";if(t==="right")return"left-3"}return e}function mm(e,t){const r=t.find(x=>x.id===e.source),a=t.find(x=>x.id===e.target);if(!r||!a)return{x:0,y:0};const s=x=>{if(!x)return ze.Right;const S=x.replace("target-","");return S.startsWith("top-")?ze.Top:S.startsWith("right-")?ze.Right:S.startsWith("bottom-")?ze.Bottom:S.startsWith("left-")?ze.Left:ze.Right},o=r.position.x+(r.width||0)/2,l=r.position.y+(r.height||0)/2,u=a.position.x+(a.width||0)/2,d=a.position.y+(a.height||0)/2,f=50,m=(x,S,C)=>{switch(C){case ze.Top:return{x,y:S-f};case ze.Bottom:return{x,y:S+f};case ze.Left:return{x:x-f,y:S};case ze.Right:return{x:x+f,y:S};default:return{x,y:S}}},p=s(e.sourceHandle),g=s(e.targetHandle),y=m(o,l,p),_=m(u,d,g),b=.125*o+.375*y.x+.375*_.x+.125*u,w=.125*l+.375*y.y+.375*_.y+.125*d;return{x:b,y:w}}function s9(e,t){const r=[];return e.forEach(a=>{r.push({id:a.id,x:a.position.x+(a.width||0)/2,y:a.position.y+(a.height||0)/2,type:"node"})}),t.forEach(a=>{const s=mm(a,e);r.push({id:a.id,x:s.x,y:s.y,type:"edge"})}),r}function J0(e,t,r,a=[]){let s=null,o=1/0;for(const l of r){if(a.includes(l.id))continue;const u=l.position.x+(l.width||0)/2,d=l.position.y+(l.height||0)/2,f=Math.sqrt(Math.pow(u-e,2)+Math.pow(d-t,2));f<o&&(s=l,o=f)}return s}function nb(e,t){if(t)try{const r=t.getViewport(),a=e.width||200,s=e.height||100,o=e.position.x*r.zoom+r.x,l=e.position.y*r.zoom+r.y,u=a*r.zoom,d=s*r.zoom,f=document.querySelector(".react-flow__viewport");if(!f)return;const m=f.parentElement;if(!m)return;const p=m.getBoundingClientRect(),g=50,y=o<g,_=o+u>p.width-g,b=l<g,w=l+d>p.height-g;if(y||_||b||w){const x=e.position.x+a/2,S=e.position.y+s/2;t.setCenter(x,S+100,{zoom:r.zoom,duration:400})}}catch(r){console.error("Error panning to node:",r)}}function o9({nodes:e,edges:t,setNodes:r,setEdges:a,isEditingMode:s,reactFlowInstance:o}){const u=N.useRef(new Set),d=N.useRef(null),f=N.useCallback(g=>{if(o)try{const y=o.getViewport(),_=mm(g,e),b=_.x*y.zoom+y.x,w=_.y*y.zoom+y.y,x=document.querySelector(".react-flow__viewport");if(!x)return;const S=x.parentElement;if(!S)return;const C=S.getBoundingClientRect(),A=15,E=b<A,j=b>C.width-A,T=w<A,z=w>C.height-A;(E||j||T||z)&&o.setCenter(_.x,_.y,{zoom:y.zoom,duration:400})}catch(y){console.error("Error panning to edge:",y)}},[o,e]),m=N.useCallback(g=>{const y=s9(e,t),_=e.filter(E=>E.selected),b=t.filter(E=>E.selected);let w,x,S,C;if(_.length>0){const E=_[0];w=E.position.x+(E.width||0)/2,x=E.position.y+(E.height||0)/2,S=E.id,C="node"}else if(b.length>0){const E=b[0],j=mm(E,e);w=j.x,x=j.y,S=E.id,C="edge"}else return null;const A=y.filter(E=>!(E.id===S&&E.type===C));return oA(w,x,g,A)||null},[e,t,20]),p=N.useCallback(g=>{g.type==="node"?(a(y=>y.map(_=>({..._,selected:!1}))),r(y=>{const _=y.map(w=>({...w,selected:w.id===g.id})),b=_.find(w=>w.id===g.id);return b&&o&&nb(b,o),_})):(r(y=>y.map(_=>({..._,selected:!1}))),a(y=>{const _=y.map(w=>({...w,selected:w.id===g.id})),b=_.find(w=>w.id===g.id);return b&&f(b),_}))},[r,a,f,o]);N.useEffect(()=>{const g=()=>{let w=null;const x=u.current.has("ArrowLeft"),S=u.current.has("ArrowRight"),C=u.current.has("ArrowUp"),A=u.current.has("ArrowDown");if(C&&x?w="up-left":C&&S?w="up-right":A&&x?w="down-left":A&&S?w="down-right":x?w="left":S?w="right":C?w="up":A&&(w="down"),!w)return;const E=m(w);E&&p(E)},y=w=>{!w.altKey||s||["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(w.key)&&(w.preventDefault(),u.current.add(w.key),d.current!==null&&cancelAnimationFrame(d.current),d.current=requestAnimationFrame(()=>{d.current=requestAnimationFrame(()=>{g(),d.current=null})}))},_=w=>{["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(w.key)&&(u.current.delete(w.key),d.current!==null&&(cancelAnimationFrame(d.current),d.current=null))},b=w=>{const x=w.target,S=x.tagName==="INPUT"||x.tagName==="TEXTAREA"||x.isContentEditable;w.shiftKey&&w.key==="F"&&!s&&!S&&o&&(w.preventDefault(),o.fitView({padding:.2,duration:400}))};return window.addEventListener("keydown",y),window.addEventListener("keydown",b),window.addEventListener("keyup",_),()=>{window.removeEventListener("keydown",y),window.removeEventListener("keydown",b),window.removeEventListener("keyup",_),u.current.clear(),d.current!==null&&cancelAnimationFrame(d.current)}},[m,p,s,o])}function l9({setNodes:e,setEdges:t,setThreatModel:r,setIsDraggingNode:a,setIsEditingMode:s,isDraggingNode:o,recordState:l,threatModelRef:u,nodesRef:d,edgesRef:f,arrowKeyMovedNodesRef:m,updateYaml:p,updateBoundaryMemberships:g,handleDataFlowLabelChange:y,handleDataFlowDirectionChange:_,handleToggleDirectionAndReverse:b}){const w=N.useRef(null),x=N.useRef(null),S=N.useRef(!1),C=N.useRef(null);N.useEffect(()=>{const O=U=>{U.shiftKey&&(S.current=!0)},R=U=>{U.shiftKey||(S.current=!1)},G=U=>{C.current={x:U.clientX,y:U.clientY,time:Date.now()}},H=()=>{setTimeout(()=>{C.current=null},50)};return window.addEventListener("keydown",O),window.addEventListener("keyup",R),window.addEventListener("mousedown",G),window.addEventListener("mouseup",H),()=>{window.removeEventListener("keydown",O),window.removeEventListener("keyup",R),window.removeEventListener("mousedown",G),window.removeEventListener("mouseup",H)}},[]);const A=N.useCallback(()=>{x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{l(),x.current=null},10)},[l]),E=N.useCallback(O=>{const R=S.current&&C.current?O.filter(H=>{if(H.type!=="select")return!0;const U=C.current;return Date.now()-(U?.time||0)<500?H.selected!==!1:!0}):O,G=R.filter(H=>H.type==="remove");if(G.length>0){l();const H=[],U=[],Z=[];for(const X of G){const Q=X.id,B=d.current.find(P=>P.id===Q)?.type,K=f.current.filter(P=>P.source===Q||P.target===Q).map(P=>P.id);B==="threatModelNode"?(H.push(Q),Z.push(...K)):B==="boundaryNode"&&U.push(Q)}if((H.length>0||U.length>0)&&(r(ct(X=>{X&&(H.length>0&&(X.components=X.components.filter(Q=>!H.includes(Q.ref)),X.data_flows&&Z.length>0&&(X.data_flows=X.data_flows.filter(Q=>!Z.includes(Q.ref))),X.boundaries?.forEach(Q=>{Q.components&&(Q.components=Q.components.filter($=>!H.includes($)))}),X.threats?.forEach(Q=>{Q.affected_components&&(Q.affected_components=Q.affected_components.filter($=>!H.includes($))),Q.affected_data_flows&&Z.length>0&&(Q.affected_data_flows=Q.affected_data_flows.filter($=>!Z.includes($)))}),X.controls?.forEach(Q=>{Q.implemented_in&&(Q.implemented_in=Q.implemented_in.filter($=>!H.includes($)))})),U.length>0&&(X.boundaries=X.boundaries?.filter(Q=>!U.includes(Q.ref))))})),Z.length>0&&t(X=>X.filter(Q=>!Z.includes(Q.id))),p(X=>{let Q=X;for(const $ of H)Q=oi(Q,"components",$),Q=ns(Q,$,["components","affected_components","implemented_in"]);for(const $ of Z)Q=oi(Q,"data_flows",$),Q=ns(Q,$,["affected_data_flows"]);for(const $ of U)Q=oi(Q,"boundaries",$);return Q})),G.length>0){const X=d.current.find(Q=>Q.id===G[0].id);if(X){const Q=X.position.x+(X.width||0)/2,$=X.position.y+(X.height||0)/2,B=G.map(q=>q.id),K=d.current.filter(q=>!B.includes(q.id)),P=J0(Q,$,K,B);P&&(t(q=>q.map(J=>({...J,selected:!1}))),setTimeout(()=>{e(q=>q.map(J=>({...J,selected:J.id===P.id})))},0))}}}e(H=>{const U=IE(R,H);return O.some(X=>X.type==="position"||X.type==="dimensions"?H.find($=>$.id===X.id)?.type==="boundaryNode":!1)&&setTimeout(()=>{e(X=>(g(X),X))},0),R.forEach(X=>{const Q=U.find($=>$.id===X.id);X.type==="dimensions"&&X.dimensions&&Q?.type==="boundaryNode"&&r(ct($=>{if(!$)return;const B=$.boundaries?.find(K=>K.ref===X.id);B&&(B.width=X.dimensions.width,B.height=X.dimensions.height)})),X.type==="position"&&Q?.position&&o===null&&(m.current.add(X.id),r(ct($=>{if(!$)return;const B=Math.round(Q.position.x),K=Math.round(Q.position.y),P=$.components?.find(J=>J.ref===X.id);P&&(P.x=B,P.y=K);const q=$.boundaries?.find(J=>J.ref===X.id);q&&(q.x=B,q.y=K)})))}),U})},[g,p,e,t,r,o,d,f,m,A]),j=N.useCallback(O=>{const R=O.filter(G=>G.type==="remove");if(R.length>0){l(),R.forEach(H=>{const U=H.id;r(ct(Z=>{Z&&(Z.data_flows&&(Z.data_flows=Z.data_flows.filter(X=>X.ref!==U)),Z.threats?.forEach(X=>{X.affected_data_flows&&(X.affected_data_flows=X.affected_data_flows.filter(Q=>Q!==U))}))})),p(Z=>{let X=oi(Z,"data_flows",U);return X=ns(X,U,["affected_data_flows"]),X})});const G=f.current.find(H=>H.id===R[0].id);if(G&&d.current.length>0){const H=mm(G,d.current),U=J0(H.x,H.y,d.current);U&&setTimeout(()=>{e(Z=>Z.map(X=>({...X,selected:X.id===U.id}))),t(Z=>Z.map(X=>({...X,selected:!1})))},0)}}t(G=>PE(O,G))},[p,t,e,r,d,f,A]),T=N.useCallback((O,R,G)=>{a(null),e(U=>(g(U),U));const H=G&&G.length>0?G:[R];H.length===0||!H[0]?.position||(r(ct(U=>{if(U)for(const Z of H){if(!Z?.position)continue;const X=Math.round(Z.position.x),Q=Math.round(Z.position.y),$=U.components?.find(K=>K.ref===Z.id);$&&($.x=X,$.y=Q);const B=U.boundaries?.find(K=>K.ref===Z.id);B&&(B.x=X,B.y=Q)}})),p(U=>{let Z=U;for(const X of H){if(!X?.position)continue;const Q=Math.round(X.position.x),$=Math.round(X.position.y),K=X.type==="threatModelNode"?"components":"boundaries";Z=st(Z,K,X.id,"x",Q),Z=st(Z,K,X.id,"y",$)}return Z}),setTimeout(()=>{l()},0))},[g,p,a,e,r,l]),z=N.useCallback((O,R,G)=>{l(),a(R.id)},[a,l]),L=N.useCallback((O,R)=>{a(null),e(G=>(g(G),G)),R.length!==0&&(r(ct(G=>{if(G)for(const H of R){if(!H?.position)continue;const U=Math.round(H.position.x),Z=Math.round(H.position.y),X=G.components?.find($=>$.ref===H.id);X&&(X.x=U,X.y=Z);const Q=G.boundaries?.find($=>$.ref===H.id);Q&&(Q.x=U,Q.y=Z)}})),p(G=>{let H=G;for(const U of R){if(!U?.position)continue;const Z=Math.round(U.position.x),X=Math.round(U.position.y),$=U.type==="threatModelNode"?"components":"boundaries";H=st(H,$,U.id,"x",Z),H=st(H,$,U.id,"y",X)}return H}),setTimeout(()=>{l()},0))},[g,p,a,e,r,l]),V=N.useCallback((O,R)=>{l(),a("selection")},[a,l]);N.useEffect(()=>{e(o?O=>O.map(R=>R.id===o?{...R,data:{...R.data,isDraggingNode:!0}}:R):O=>O.some(G=>G.data.isDraggingNode)?O.map(G=>G.data.isDraggingNode?{...G,data:{...G.data,isDraggingNode:!1}}:G):O)},[o,e]),N.useEffect(()=>{const O=R=>{["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(R.key)&&(w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{if(m.current.size>0){const G=Array.from(m.current);r(ct(H=>{H&&G.forEach(U=>{const Z=d.current.find(X=>X.id===U);if(Z?.position){const X=Math.round(Z.position.x),Q=Math.round(Z.position.y),$=H.components?.find(K=>K.ref===U);$&&($.x=X,$.y=Q);const B=H.boundaries?.find(K=>K.ref===U);B&&(B.x=X,B.y=Q)}})})),p(H=>{let U=H;return G.forEach(Z=>{const X=d.current.find(Q=>Q.id===Z);if(X?.position){const Q=Math.round(X.position.x),$=Math.round(X.position.y),K=X.type==="threatModelNode"?"components":"boundaries";U=st(U,K,Z,"x",Q),U=st(U,K,Z,"y",$)}}),U}),m.current.clear()}},400))};return window.addEventListener("keyup",O),()=>{window.removeEventListener("keyup",O),w.current&&clearTimeout(w.current)}},[p,r,d,m]),N.useEffect(()=>()=>{x.current&&clearTimeout(x.current)},[]);const F=N.useCallback(O=>{if(O.source===O.target)return;l();const R=O.target,G=O.source,H=O.targetHandle?.startsWith("target-")?O.targetHandle.substring(7):O.targetHandle,U=O.sourceHandle,Z=u.current?.data_flows?.map(P=>P.ref)||[],X=Jh(R,G,"unidirectional",Z),$=`DF${(u.current?.data_flows?.length||0)+1}`,B={ref:X,source:R,destination:G,label:$};H&&(B.source_point=H),U&&(B.destination_point=U),B.direction="unidirectional",r(ct(P=>{P&&(P.data_flows||(P.data_flows=[]),P.data_flows.push(B))})),p(P=>Gs(P,"data_flows",B));const K=X;e(P=>P.map(q=>({...q,selected:!1}))),t(P=>[...P.map(q=>({...q,selected:!1})),{id:K,source:R,target:G,sourceHandle:H,targetHandle:`target-${U}`,type:"editableEdge",label:$,markerEnd:{type:"arrowclosed"},selected:!0,data:{direction:"unidirectional",label:$,edgeRef:K,onLabelChange:y,onDirectionChange:_,onToggleDirectionAndReverse:b,onEditModeChange:s}}]),setTimeout(()=>{l()},0)},[y,_,b,p,r,t,e,s,l,u]),M=N.useCallback((O,R)=>{if(R.source===R.target)return;l();const G=O.id,H=R.source,U=R.target,Z=R.sourceHandle,X=R.targetHandle?.startsWith("target-")?R.targetHandle.substring(7):R.targetHandle,$=u.current?.data_flows?.find(q=>q.ref===G)?.direction||"unidirectional",B=u.current?.data_flows?.filter(q=>q.ref!==G).map(q=>q.ref)||[],K=Jh(H,U,$,B),P=K!==G;t(q=>q.filter(J=>J.id!==G).concat({...O,...R,id:K,data:{...O.data,edgeRef:K,onLabelChange:y,onDirectionChange:_,onToggleDirectionAndReverse:b}})),r(ct(q=>{if(!q)return;const J=q.data_flows?.find(le=>le.ref===G);J&&(J.source=H,J.destination=U,J.ref=K,Z&&(J.source_point=Z),X&&(J.destination_point=X)),P&&q.threats?.forEach(le=>{le.affected_data_flows&&(le.affected_data_flows=le.affected_data_flows.map(oe=>oe===G?K:oe))})})),p(q=>{let J=q;return O.source!==H&&(J=st(J,"data_flows",G,"source",H)),O.target!==U&&(J=st(J,"data_flows",G,"destination",U)),O.sourceHandle!==Z&&Z&&(J=st(J,"data_flows",G,"source_point",Z)),(O.targetHandle?.substring(7)||O.targetHandle)!==X&&X&&(J=st(J,"data_flows",G,"destination_point",X)),P&&(J=K0(J,G,K)),J})},[p,y,_,b,u,t,r]);return{onNodesChange:E,onEdgesChange:j,onNodeDragStop:T,onNodeDragStart:z,onSelectionDragStop:L,onSelectionDragStart:V,onConnect:F,onReconnect:M}}function c9(e,t,r={}){const{delay:a=2e3,enabled:s=!0,githubMetadata:o,onSave:l,onError:u,autoSaveToBrowser:d=!1,autoSaveToFile:f=!1,browserModelId:m,fileHandle:p,saveSourceMeta:g,lastSavedToSourceAt:y,isDirty:_,onFileWritten:b}=r,w=N.useRef(null),x=N.useRef(t),S=N.useRef(o),C=N.useRef(!1),A=N.useRef(d),E=N.useRef(f),j=N.useRef(m),T=N.useRef(p),z=N.useRef(g),L=N.useRef(y??void 0),V=N.useRef(_),F=N.useRef(l),M=N.useRef(u),O=N.useRef(b);A.current=d,E.current=f,j.current=m,T.current=p,z.current=g,L.current=y??void 0,V.current=_,F.current=l,M.current=u,O.current=b,N.useEffect(()=>{if(o!==S.current&&(S.current=o),!(!s||t===x.current))return w.current&&clearTimeout(w.current),w.current=setTimeout(async()=>{if(!C.current){C.current=!0;try{if((A.current&&j.current||E.current&&T.current)&&(L.current=Date.now()),await Ti(e,t,o??void 0,z.current,L.current,V.current),A.current&&j.current&&await qN(j.current,t,e,o??void 0),E.current&&T.current)try{if(await VN(T.current,"readwrite")){const H=await Kv(T.current,t);O.current?.(H)}}catch{}x.current=t,S.current=o,F.current?.()}catch(R){console.error("Auto-save failed:",R),M.current?.(R)}finally{C.current=!1}}},a),()=>{w.current&&clearTimeout(w.current)}},[e,t,a,s,o])}function u9(e){const{fileHandle:t,isDirty:r,onExternalChange:a,onConflictDetected:s,throttleMs:o=2e3,enabled:l=!0}=e,u=N.useRef(null),d=N.useRef(0),f=N.useRef(!1),m=N.useRef(!1),p=N.useRef(!1),g=N.useRef(a),y=N.useRef(s),_=N.useRef(r),b=N.useRef(t),w=N.useRef(l);g.current=a,y.current=s,_.current=r,b.current=t,w.current=l,N.useEffect(()=>{if(!t){u.current=null,f.current=!1;return}let j=!1;return(async()=>{try{const T=await t.getFile();j||(u.current=T.lastModified)}catch{}})(),()=>{j=!0}},[t]);const x=N.useCallback(async()=>{const j=b.current;if(!j||!w.current||m.current||p.current||f.current)return;const T=Date.now();if(!(T-d.current<o)){p.current=!0,d.current=T;try{const z=await j.getFile(),L=z.lastModified;if(u.current===null){u.current=L,p.current=!1;return}if(L<=u.current){p.current=!1;return}const V=await z.text();u.current=L,_.current?(f.current=!0,y.current(V)):g.current(V)}catch(z){z instanceof DOMException&&z.name==="NotFoundError"&&console.warn("Local file no longer exists on disk")}finally{p.current=!1}}},[o]);N.useEffect(()=>{if(!t||!l)return;const j=()=>{document.hidden||x()},T=()=>{x()};return document.addEventListener("visibilitychange",j),window.addEventListener("focus",T),x(),()=>{document.removeEventListener("visibilitychange",j),window.removeEventListener("focus",T)}},[t,l,x]);const S=N.useCallback(j=>{u.current=j},[]),C=N.useCallback(()=>{f.current=!1},[]),A=N.useCallback(()=>{m.current=!0},[]),E=N.useCallback(()=>{m.current=!1},[]);return{updateLastKnownModified:S,isConflictPending:f.current,resolveConflict:C,pause:A,resume:E}}function d9({nodes:e,isEditingMode:t,onConnect:r,setNodes:a,reactFlowInstance:s}){const[o,l]=N.useState("idle"),[u,d]=N.useState(null),[f,m]=N.useState(null),[p,g]=N.useState(null),[y,_]=N.useState(null),[b,w]=N.useState(null),x=N.useRef({phase:o,sourceNodeId:u,sourceHandleId:f,focusedHandleId:p,targetNodeId:y,focusedNodeId:b});N.useEffect(()=>{x.current={phase:o,sourceNodeId:u,sourceHandleId:f,focusedHandleId:p,targetNodeId:y,focusedNodeId:b}},[o,u,f,p,y,b]);const S=N.useCallback(()=>{l("idle"),d(null),m(null),g(null),_(null),w(null)},[]),C=N.useCallback(()=>{const L=e.find(V=>V.selected&&V.type==="threatModelNode");if(L){if(s){const O=s.getViewport(),G=document.querySelector(".react-flow__viewport")?.parentElement?.clientHeight||window.innerHeight,H=s.flowToScreenPosition({x:L.position.x,y:L.position.y}),Z=(L.measured?.height||L.height||100)*O.zoom,X=H.y+Z/2,B=96+150*Math.max(1,O.zoom);if(H.y<B){const P=G*.4-X;s.setViewport({x:O.x,y:O.y+P/O.zoom,zoom:O.zoom},{duration:300})}}l("source-handle"),d(L.id),g(Cl[0].id)}},[e,s]),A=N.useCallback(()=>{m(p),l("target-node"),g(null);const L=e.find(V=>V.id===u);if(L){const V=L.position.x+(L.width||0)/2,F=L.position.y+(L.height||0)/2,M=e.filter(R=>R.id!==u&&R.type==="threatModelNode"),O=J0(V,F,M,[u]);O&&w(O.id)}},[p,u,e]),E=N.useCallback(()=>{_(b),l("target-handle"),w(null),g(Cl[0].id)},[b]),j=N.useCallback(()=>{u&&f&&y&&p&&r({source:y,target:u,sourceHandle:p,targetHandle:`target-${f}`}),S()},[u,f,y,p,r,S]),T=N.useCallback(()=>{switch(o){case"source-handle":S();break;case"target-node":l("source-handle"),m(null),w(null),g(f);break;case"target-handle":l("target-node"),_(null),g(null),w(y);break}},[o,f,y,S]),z=N.useCallback(L=>{const V=x.current;if(V.phase==="source-handle"||V.phase==="target-handle"){if(V.focusedHandleId){const F=yA(V.focusedHandleId,L);g(F)}}else if(V.phase==="target-node"&&V.focusedNodeId&&V.sourceNodeId){const F=e.find(M=>M.id===V.focusedNodeId);if(F){const M=F.position.x+(F.width||0)/2,O=F.position.y+(F.height||0)/2,R=e.filter(H=>H.type==="threatModelNode"),G=lA(M,O,L,R,[V.sourceNodeId]);G&&(w(G.id),s&&nb(G,s))}}},[e]);return N.useEffect(()=>{const L=V=>{if(t)return;const F=x.current;if(V.key==="d"&&F.phase==="idle"){e.find(O=>O.selected&&O.type==="threatModelNode")&&(V.preventDefault(),C());return}if(F.phase!=="idle"){if(V.key==="Escape"){V.preventDefault(),S();return}if(V.key==="Backspace"){V.preventDefault(),T();return}if(V.key==="Enter"){switch(V.preventDefault(),F.phase){case"source-handle":A();break;case"target-node":F.focusedNodeId&&E();break;case"target-handle":j();break}return}if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(V.key)){V.preventDefault();const M=V.key.replace("Arrow","").toLowerCase();z(M)}}};return window.addEventListener("keydown",L),()=>{window.removeEventListener("keydown",L)}},[t,e,C,A,E,j,T,S,z]),N.useEffect(()=>{a(o==="target-node"&&b?L=>L.map(V=>({...V,data:{...V.data,isFocusedForConnection:V.id===b}})):L=>L.map(V=>V.data?.isFocusedForConnection?{...V,data:{...V.data,isFocusedForConnection:!1}}:V))},[o,b,a]),{creationState:{phase:o,sourceNodeId:u,sourceHandleId:f,focusedHandleId:p,targetNodeId:y,focusedNodeId:b},cancelCreation:S}}function f9({nodes:e,edges:t,isEditingMode:r,setNodes:a,setEdges:s,reactFlowInstance:o}){const[l,u]=N.useState("idle"),[d,f]=N.useState(null),[m,p]=N.useState(null),[g,y]=N.useState(null),[_,b]=N.useState(null),[w,x]=N.useState(null),[S,C]=N.useState(null),[A,E]=N.useState(null),j=N.useRef({phase:l,edgeId:d,sourceNodeId:m,sourceHandleId:g,targetNodeId:_,targetHandleId:w,focusedNodeId:S,focusedHandleId:A});N.useEffect(()=>{j.current={phase:l,edgeId:d,sourceNodeId:m,sourceHandleId:g,targetNodeId:_,targetHandleId:w,focusedNodeId:S,focusedHandleId:A}},[l,d,m,g,_,w,S,A]);const T=N.useCallback(()=>{u("idle"),f(null),p(null),y(null),b(null),x(null),C(null),E(null)},[]),z=N.useCallback(()=>{const G=t.find(U=>U.selected);if(!G)return;const H=G.targetHandle?.replace("target-","")||null;if(o){const U=e.find(Z=>Z.id===G.source);if(U){const $=o.getViewport(),K=document.querySelector(".react-flow__viewport")?.parentElement?.clientHeight||window.innerHeight,P=o.flowToScreenPosition({x:U.position.x,y:U.position.y}),J=(U.measured?.height||U.height||100)*$.zoom,le=P.y+J/2,ve=96+150*Math.max(1,$.zoom);if(P.y<ve){const ie=K*.4-le;o.setViewport({x:$.x,y:$.y+ie/$.zoom,zoom:$.zoom},{duration:300})}}}u("source-node"),f(G.id),p(G.source),y(G.sourceHandle),b(G.target),x(H),C(G.source)},[t,e,o]),L=N.useCallback(()=>{p(S),u("source-handle"),E(S===m&&g?g:Cl[0].id),C(null)},[S,m,g]),V=N.useCallback(()=>{y(A),u("target-node"),E(null),C(_)},[A,_]),F=N.useCallback(()=>{b(S),u("target-handle"),E(S===_&&w?w:Cl[0].id),C(null)},[S,_,w]),M=N.useCallback(()=>{d&&m&&g&&_&&A&&s(G=>G.map(H=>H.id===d?{...H,source:m,sourceHandle:g,target:_,targetHandle:`target-${A}`}:H)),T()},[d,m,g,_,A,s,T]),O=N.useCallback(()=>{switch(l){case"source-node":T();break;case"source-handle":u("source-node"),E(null),C(m);break;case"target-node":u("source-handle"),C(null),E(g);break;case"target-handle":u("target-node"),E(null),C(_);break}},[l,m,g,_,T]),R=N.useCallback(G=>{const H=j.current;if(H.phase==="source-handle"||H.phase==="target-handle"){if(H.focusedHandleId){const U=yA(H.focusedHandleId,G);E(U)}}else if((H.phase==="source-node"||H.phase==="target-node")&&H.focusedNodeId){const U=e.find(Z=>Z.id===H.focusedNodeId);if(U){const Z=U.position.x+(U.width||0)/2,X=U.position.y+(U.height||0)/2,Q=e.filter(K=>K.type==="threatModelNode"),$=H.phase==="source-node"?[H.targetNodeId].filter(Boolean):[H.sourceNodeId].filter(Boolean),B=lA(Z,X,G,Q,$);B&&(C(B.id),o&&nb(B,o))}}},[e]);return N.useEffect(()=>{const G=H=>{if(r)return;const U=j.current;if(H.key==="d"&&U.phase==="idle"){t.find(X=>X.selected)&&(H.preventDefault(),z());return}if(U.phase!=="idle"){if(H.key==="Escape"){H.preventDefault(),T();return}if(H.key==="Backspace"){H.preventDefault(),O();return}if(H.key==="Enter"){switch(H.preventDefault(),U.phase){case"source-node":U.focusedNodeId&&L();break;case"source-handle":U.focusedHandleId&&V();break;case"target-node":U.focusedNodeId&&F();break;case"target-handle":U.focusedHandleId&&M();break}return}if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(H.key)){H.preventDefault();const Z=H.key.replace("Arrow","").toLowerCase();R(Z)}}};return window.addEventListener("keydown",G),()=>{window.removeEventListener("keydown",G)}},[r,t,z,L,V,F,M,O,T,R]),N.useEffect(()=>{a((l==="source-node"||l==="target-node")&&S?G=>G.map(H=>({...H,data:{...H.data,isFocusedForConnection:H.id===S}})):G=>G.map(H=>H.data?.isFocusedForConnection?{...H,data:{...H.data,isFocusedForConnection:!1}}:H))},[l,S,a]),{reconnectionState:{phase:l,edgeId:d,sourceNodeId:m,sourceHandleId:g,targetNodeId:_,targetHandleId:w,focusedNodeId:S,focusedHandleId:A},cancelReconnection:T}}const h9=N.lazy(()=>kD(()=>import("./YamlEditor-Bjju96T-.js"),__vite__mapDeps([0,1]))),m9={threatModelNode:z8,boundaryNode:L8},p9={editableEdge:I8};function g9({domain:e,onFileSelect:t,onBack:r,onError:a,requirePat:s}){const[o,l]=ht.useState(null),[u,d]=ht.useState(e),[f,m]=ht.useState(!0),[p,g]=ht.useState(!1);ht.useEffect(()=>{let _=!1;const b=q0(e);if(b){l(b),d(e),m(!1),g(!0);return}return s("load").then(w=>{if(!_)if(w){const x=w.getDomain(),S=q0(x);S?(l(S),d(x),m(!1),g(!0)):(a("Failed to retrieve PAT after authentication"),r())}else to(),r()}).catch(w=>{_||(a(`GitHub authentication failed: ${w.message||"Unknown error"}`),to(),r())}),()=>{_=!0}},[e,s,r,a]);const y=()=>{g(!1),to(),r()};return f||!o?v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center"},children:v.jsx("div",{style:{color:"var(--text-primary)",background:"var(--bg-primary)",padding:"2rem",borderRadius:"0.5rem",border:"1px solid var(--border-color)"},children:"Authenticating with GitHub..."})}):v.jsx(uH,{isOpen:p,token:o,domain:u,onFileSelect:t,onClose:y,onError:a})}function vA({initialContent:e,initialFile:t,initialGitHubMetadata:r}){const{nodes:a,edges:s,threatModel:o,yamlContent:l,isDraggingEdge:u,isDraggingNode:d,isEditingMode:f,setNodes:m,setEdges:p,setThreatModel:g,setYamlContent:y,setIsDraggingEdge:_,setIsDraggingNode:b,setIsEditingMode:w,threatModelRef:x,nodesRef:S,edgesRef:C,arrowKeyMovedNodesRef:A,updateYaml:E,canUndo:j,canRedo:T,undo:z,redo:L,clearHistory:V,recordState:F,handleAssetNameChange:M,handleAssetDescriptionChange:O,handleThreatNameChange:R,handleThreatDescriptionChange:G,handleThreatStatusChange:H,handleThreatStatusLinkChange:U,handleThreatStatusNoteChange:Z,handleControlNameChange:X,handleControlDescriptionChange:Q,handleControlStatusChange:$,handleControlStatusLinkChange:B,handleControlStatusNoteChange:K,handleThreatAffectedComponentsChange:P,handleThreatAffectedDataFlowsChange:q,handleThreatAffectedAssetsChange:J,handleControlMitigatesChange:le,handleControlImplementedInChange:oe,handleComponentNameChange:he,handleComponentTypeChange:ve,handleComponentDescriptionChange:W,handleComponentAssetsChange:ie,handleBoundaryNameChange:ae,handleBoundaryDescriptionChange:I,handleBoundaryResizeEnd:ue,handleDataFlowLabelChange:ce,handleDataFlowDirectionChange:re,handleToggleDirectionAndReverse:ne,handleThreatModelNameChange:fe,handleThreatModelDescriptionChange:Ce,handleParticipantsChange:ke,handleReorderAssets:ye,handleReorderComponents:Re,handleReorderThreats:Pe,handleReorderControls:Le}=a9(),{domain:Fe,githubMetadata:Ue,isPatModalOpen:Ne,isSettingsModalOpen:$e,patModalAction:Ae,patError:Ve,isValidatingPat:He,setDomain:Be,setGitHubMetadata:Ye,closePatModal:mt,openSettingsModal:nt,closeSettingsModal:Ot,submitPat:Kt,getApiClient:Jt,requirePat:Et,cleanupPat:it,syncWithRepository:ut}=YN(),[kt,Ft]=N.useState(!0),[wn,fn]=N.useState(null),[qt,xn]=N.useState(!1),[an,Xt]=N.useState(!1),[_n,An]=N.useState("tables"),[$n,br]=N.useState("tables"),[Sn,qn]=N.useState(()=>{const te=localStorage.getItem("darkMode");return te?JSON.parse(te):window.matchMedia("(prefers-color-scheme: dark)").matches}),[sr,Vn]=N.useState(()=>{const te=localStorage.getItem("tablesSectionWidth");return te?parseInt(te,10):600}),[sn,hn]=N.useState(!1),[Qr,yi]=N.useState(!1),[ba,ps]=N.useState(null),[Or,zr]=N.useState(null),[wa,or]=N.useState(!1),[vi,wr]=N.useState(!1),[bi,Zt]=N.useState(!1),[Lr,fo]=N.useState(null),[Ir,Jr]=N.useState(!1),[Yn,Wn]=N.useState(null),[gs,xr]=N.useState(null),[ei,Qn]=N.useState(null),[jn,Mn]=N.useState(!1),[ti,ys]=N.useState(!1),[_r,xa]=N.useState(!1),[lr,ho]=N.useState(!1),On=N.useRef(null),Cn=N.useRef(null),_a=N.useRef(null),Pr=N.useRef(null),cr=N.useRef(null),vs=N.useRef(null),Sa=N.useRef(null),Br=N.useRef(null),zl=N.useRef(null),Ll=N.useRef(null),wi=N.useRef(null),bs=N.useRef({x:0,y:0}),Gn=N.useRef(null),Hr=N.useRef(!1),xi=N.useRef(!1),Sr=N.useRef(!1),mo=N.useRef(null),{showToast:Xe}=Xv(),{saveSource:Bt,lastSavedAt:Ca,isDirty:ws,setSaveSource:Il,markSaved:Ht,markDirty:Li,clearSaveState:Kn,autoSaveSettings:po}=ZN(),_t=N.useCallback(te=>{!te&&f&&(Sr.current=!0,setTimeout(()=>{Sr.current=!1},100)),w(te)},[f,w]),mn=N.useCallback(te=>{m(se=>se.map(me=>({...me,selected:me.id===te})))},[m]),{captureDiagram:go,handleDownloadFolder:xs,handleCopyToConfluence:Pl,handleCopyDiagramToClipboard:_s}=r9(o,Sn,Ue),yo=N.useMemo(()=>{if(Bt)switch(Bt.type){case"browser":return{type:"browser",modelId:Bt.modelId,modelName:Bt.modelName};case"file":return{type:"file",fileName:Bt.fileName};case"github":return{type:"github",githubMeta:Bt.metadata};default:return}},[Bt]),Bl=po.autoSaveBrowserFiles&&Bt?.type==="browser",zn=po.autoSaveLocalFiles&&Bt?.type==="file",Ii=Bl||zn,Ea=N.useRef(null),Jn=u9({fileHandle:Yn,isDirty:ws,enabled:Bt?.type==="file",onExternalChange:N.useCallback(te=>{Ea.current?.(te)},[]),onConflictDetected:N.useCallback(te=>{ps(te),yi(!0)},[])});c9(o?.name||"Untitled",l,{enabled:!!o&&!!l,delay:2e3,githubMetadata:Ue,autoSaveToBrowser:Bl,autoSaveToFile:zn,browserModelId:Bt?.type==="browser"?Bt.modelId:null,fileHandle:Bt?.type==="file"?Bt.handle:null,saveSourceMeta:yo,lastSavedToSourceAt:Ca,isDirty:ws,onSave:()=>{Ii&&Ht()},onFileWritten:te=>{Jn.updateLastKnownModified(te)}}),N.useEffect(()=>{Hr.current&&a.length>0&&Gn.current&&(Hr.current=!1,requestAnimationFrame(()=>{Gn.current?.fitView({padding:.2,duration:400})}))},[a]);const Pi=N.useRef(Date.now());N.useEffect(()=>{Date.now()-Pi.current<500||l&&Li()},[l,Li]);const vo=N.useCallback((te,se)=>{if(!te||!se)return!1;const me=te.position,_e=140,Oe=80,qe=se.position,Ie=se.measured?.width??se.width??se.style?.width??0,Me=se.measured?.height??se.height??se.style?.height??0,be={left:qe.x,right:qe.x+Ie,top:qe.y,bottom:qe.y+Me},Ge=me.x+_e/2,We=me.y+Oe/2;return Ge>=be.left&&Ge<=be.right&&We>=be.top&&We<=be.bottom},[]),Hl=N.useCallback(te=>{if(!o)return;const se=te.filter(Oe=>Oe.type==="boundaryNode"),me=te.filter(Oe=>Oe.type==="threatModelNode"),_e=new Map;se.forEach(Oe=>{const qe=new Set;me.forEach(Ie=>{vo(Ie,Oe)&&qe.add(Ie.id)}),_e.set(Oe.id,qe)}),g(ct(Oe=>{Oe&&Oe.boundaries?.forEach(qe=>{const Ie=_e.get(qe.ref),Me=Ie?Array.from(Ie):[],be=se.find(Ge=>Ge.id===qe.ref);be&&(qe.x=be.position.x,qe.y=be.position.y,qe.width=be.measured?.width??be.width??be.style?.width??qe.width,qe.height=be.measured?.height??be.height??be.style?.height??qe.height),qe.components=Me.length>0?Me:void 0})})),E(Oe=>{let qe=Oe;return _e.forEach((Ie,Me)=>{const be=Array.from(Ie);qe=st(qe,"boundaries",Me,"components",be.length>0?be:void 0)}),qe})},[o,vo,E]),{onNodesChange:Ss,onEdgesChange:bo,onNodeDragStop:Bu,onNodeDragStart:ap,onSelectionDragStop:Hu,onSelectionDragStart:Uu,onConnect:wo,onReconnect:sp}=l9({setNodes:m,setEdges:p,setThreatModel:g,setIsDraggingNode:b,setIsEditingMode:w,isDraggingNode:d,threatModelRef:x,nodesRef:S,edgesRef:C,arrowKeyMovedNodesRef:A,updateYaml:E,updateBoundaryMemberships:Hl,handleDataFlowLabelChange:ce,handleDataFlowDirectionChange:re,handleToggleDirectionAndReverse:ne,recordState:F});o9({nodes:a,edges:s,setNodes:m,setEdges:p,isEditingMode:f,reactFlowInstance:Gn.current});const{creationState:tn,cancelCreation:_i}=d9({nodes:a,setNodes:m,isEditingMode:f,onConnect:wo,reactFlowInstance:Gn.current}),{reconnectionState:on,cancelReconnection:Si}=f9({nodes:a,edges:s,setNodes:m,setEdges:p,isEditingMode:f,reactFlowInstance:Gn.current}),Fu=N.useCallback((te,se)=>{wr(!0),Uu(te,se)},[Uu]),op=N.useCallback((te,se)=>{wr(!1),Hu(te,se)},[Hu]),lp=N.useCallback(()=>{wr(!0)},[]),cp=N.useCallback(()=>{wr(!1)},[]),up=N.useCallback(()=>{m(te=>te.map(se=>({...se,selected:!1}))),p(te=>te.map(se=>({...se,selected:!1}))),_i(),Si()},[m,p,_i,Si]),Ul=N.useCallback((te,se)=>{!te.metaKey&&!te.ctrlKey&&(_i(),Si())},[_i,Si]),dp=N.useCallback(()=>{_i(),Si()},[_i,Si]);N.useEffect(()=>{const te=se=>{const me=se.target;wi.current&&!wi.current.contains(me)&&(m(_e=>_e.map(Oe=>({...Oe,selected:!1}))),p(_e=>_e.map(Oe=>({...Oe,selected:!1}))),_i(),Si())};return document.addEventListener("mousedown",te),()=>{document.removeEventListener("mousedown",te)}},[m,p,_i,Si]),N.useEffect(()=>{document.documentElement.setAttribute("data-theme",Sn?"dark":"light"),localStorage.setItem("darkMode",JSON.stringify(Sn))},[Sn]),N.useEffect(()=>{localStorage.setItem("tablesSectionWidth",sr.toString())},[sr]);const fp=N.useCallback(te=>{Vn(te)},[]);N.useEffect(()=>{const te=se=>{const _e=navigator.platform.toUpperCase().indexOf("MAC")>=0?se.metaKey:se.ctrlKey,Oe=se.target,qe=Oe.tagName==="INPUT"||Oe.tagName==="TEXTAREA"||Oe.contentEditable==="true";if(_e&&!qe&&(se.shiftKey&&se.key.toLowerCase()==="z"?(se.preventDefault(),L()):se.key.toLowerCase()==="z"&&(se.preventDefault(),z())),_e&&se.key.toLowerCase()==="s"&&(se.preventDefault(),mo.current?.()),se.key==="-"&&!qe&&!_e){se.preventDefault();const be=jn&&ti&&_r&&lr||!(!jn&&!ti&&!_r&&!lr);Mn(!be),ys(!be),xa(!be),ho(!be)}if(se.key.toLowerCase()==="e"&&!qe&&!_e){const Ie=a.filter(be=>be.selected),Me=s.filter(be=>be.selected);if(Ie.length===1){se.preventDefault();const be=Ie[0];m(Ge=>Ge.map(We=>We.id===be.id?{...We,data:{...We.data,initialEditMode:!0}}:We)),setTimeout(()=>{m(Ge=>Ge.map(We=>We.id===be.id?{...We,data:{...We.data,initialEditMode:!1}}:We))},100)}else if(Me.length===1){se.preventDefault();const be=Me[0];p(Ge=>Ge.map(We=>We.id===be.id?{...We,data:{...We.data,initialEditMode:!0}}:We)),setTimeout(()=>{p(Ge=>Ge.map(We=>We.id===be.id?{...We,data:{...We.data,initialEditMode:!1}}:We))},100)}}if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(se.key)&&!f&&!_e&&!se.altKey&&tn.phase==="idle"&&a.filter(Me=>Me.selected).length>0){se.preventDefault();const Me=se.shiftKey?25:5;let be=0,Ge=0;switch(se.key){case"ArrowUp":Ge=-Me;break;case"ArrowDown":Ge=Me;break;case"ArrowLeft":be=-Me;break;case"ArrowRight":be=Me;break}m(We=>We.map(Qe=>Qe.selected?(A.current.add(Qe.id),{...Qe,position:{x:Qe.position.x+be,y:Qe.position.y+Ge}}):Qe))}};return window.addEventListener("keydown",te),()=>{window.removeEventListener("keydown",te)}},[z,L,a,m,tn.phase,jn,ti,_r,lr]),N.useEffect(()=>{Cn.current&&Cn.current.setContent(l)},[l]),N.useEffect(()=>{if(!o)return;const te=o.assets?.map(se=>({ref:se.ref,name:se.name}))||[];m(se=>se.map(me=>me.type==="threatModelNode"?{...me,data:{...me.data,availableAssets:te}}:me))},[o?.assets,m]),N.useEffect(()=>{m(te=>te.map(se=>{if(se.type==="threatModelNode"){const me=tn.phase==="source-handle"&&se.id===tn.sourceNodeId||tn.phase==="target-handle"&&se.id===tn.targetNodeId||on.phase==="source-handle"&&se.id===on.sourceNodeId||on.phase==="target-handle"&&se.id===on.targetNodeId,_e=me?tn.phase!=="idle"?tn.focusedHandleId:on.focusedHandleId:null,Oe=tn.phase!=="idle"&&se.id===tn.sourceNodeId||on.phase!=="idle"&&(se.id===on.sourceNodeId||se.id===on.targetNodeId),qe=me;return{...se,data:{...se.data,focusedHandleId:_e,isInDataFlowCreation:Oe,isHandleSelectionMode:qe}}}return se}))},[tn.phase,tn.sourceNodeId,tn.targetNodeId,tn.focusedHandleId,on.phase,on.sourceNodeId,on.targetNodeId,on.focusedHandleId,m]);const hp=N.useCallback(()=>{Xt(te=>{const se=!te;return se&&qt&&xn(!1),se})},[qt]),qu=N.useCallback(()=>{xn(te=>{const se=!te;return se&&an&&Xt(!1),se})},[an]),mp=N.useCallback(te=>{br(te),(te==="tables"||te==="yaml")&&An(te)},[]),Ci=N.useCallback((te,se)=>{const me=_8(x.current),_e=j8(me);let Oe,qe;if(se)Oe=se.x,qe=se.y;else if(Gn.current&&wi.current){const be=wi.current.getBoundingClientRect(),Ge=be.left+be.width/2,We=be.top+be.height/2,Qe=Gn.current.screenToFlowPosition({x:Ge,y:We}),ln=Math.round(Qe.x-70),Dt=Math.round(Qe.y-40),dt=H2(ln,Dt,S.current,140,80);Oe=dt.x,qe=dt.y}else Oe=0,qe=0;const Ie={ref:me,name:_e,component_type:te,x:Oe,y:qe};g(ct(be=>{be&&be.components.push(Ie)})),E(be=>Gs(be,"components",Ie));const Me={id:me,type:"threatModelNode",position:{x:Oe,y:qe},selected:!0,data:{label:_e,ref:me,description:void 0,componentType:te,assets:[],availableAssets:x.current?.assets?.map(be=>({ref:be.ref,name:be.name}))||[],initialEditMode:!0,onNameChange:be=>he(me,be),onEditModeChange:_t,onTypeChange:be=>ve(me,be),onDescriptionChange:be=>W(me,be),onAssetsChange:be=>ie(me,be),onCreateAsset:Cr,onSelectNode:()=>mn(me)}};m(be=>[...be.map(Ge=>({...Ge,selected:!1})),Me]),setTimeout(()=>{F()},0)},[E,he,ve,W,ie,F]),Cs=N.useCallback(te=>{const se=S8(x.current),me=T8(se),_e=S.current.filter(Qe=>Qe.type==="boundaryNode").length;let Oe,qe;if(te&&!isNaN(te.x)&&!isNaN(te.y))Oe=te.x,qe=te.y;else if(Gn.current&&wi.current){const Qe=wi.current.getBoundingClientRect(),ln=Qe.left+Qe.width/2,Dt=Qe.top+Qe.height/2,dt=Gn.current.screenToFlowPosition({x:ln,y:Dt}),at=Math.round(dt.x-75),Ut=Math.round(dt.y-37.5),Ur=H2(at,Ut,S.current,150,75);Oe=Ur.x,qe=Ur.y}else Oe=0,qe=0;const Ie=150,Me=75,be={ref:se,name:me,x:Oe,y:qe,width:Ie,height:Me};g(ct(Qe=>{Qe&&(Qe.boundaries||(Qe.boundaries=[]),Qe.boundaries.push(be))})),E(Qe=>Gs(Qe,"boundaries",be));const Ge=-(_e+2)*10,We={id:se,type:"boundaryNode",position:{x:Oe,y:qe},selectable:!0,style:{width:Ie,height:Me,zIndex:Ge},data:{label:me,description:void 0,onNameChange:Qe=>ae(se,Qe),onEditModeChange:_t,onResizeEnd:(Qe,ln)=>ue(se,Qe,ln)}};m(Qe=>[...Qe,We]),setTimeout(()=>{F()},0)},[E,ae,ue,F]),pp=N.useCallback(()=>{const te=Z_(x.current),se={ref:te,name:k8(te)};g(ct(me=>{me&&(me.assets||(me.assets=[]),me.assets.push(se))})),E(me=>Gs(me,"assets",se)),setTimeout(()=>{F()},0)},[E,F]),Cr=N.useCallback(te=>{const se=Z_(x.current),me={ref:se,name:te.trim()};return g(ct(_e=>{_e&&(_e.assets||(_e.assets=[]),_e.assets.push(me))})),E(_e=>Gs(_e,"assets",me)),setTimeout(()=>{F()},0),se},[E,F]),gp=N.useCallback(te=>{g(ct(se=>{se&&(se.assets&&(se.assets=se.assets.filter(me=>me.ref!==te)),se.components.forEach(me=>{me.assets&&(me.assets=me.assets.filter(_e=>_e!==te))}),se.threats?.forEach(me=>{me.affected_assets&&(me.affected_assets=me.affected_assets.filter(_e=>_e!==te))}))})),E(se=>{let me=oi(se,"assets",te);return me=ns(me,te,["assets","affected_assets"]),me}),setTimeout(()=>{F()},0)},[E,F]),yp=N.useCallback(()=>{const te=C8(x.current),se={ref:te,name:N8(te)};g(ct(me=>{me&&(me.threats||(me.threats=[]),me.threats.push(se))})),E(me=>Gs(me,"threats",se)),setTimeout(()=>{F()},0)},[E,F]),vp=N.useCallback(te=>{g(ct(se=>{se&&(se.threats&&(se.threats=se.threats.filter(me=>me.ref!==te)),se.controls?.forEach(me=>{me.mitigates&&(me.mitigates=me.mitigates.filter(_e=>_e!==te))}))})),E(se=>{let me=oi(se,"threats",te);return me=ns(me,te,["mitigates"]),me}),setTimeout(()=>{F()},0)},[E,F]),bp=N.useCallback(()=>{const te=E8(x.current),se={ref:te,name:A8(te)};g(ct(me=>{me&&(me.controls||(me.controls=[]),me.controls.push(se))})),E(me=>Gs(me,"controls",se)),setTimeout(()=>{F()},0)},[E,F]),Fl=N.useCallback(te=>{g(ct(se=>{!se||!se.controls||(se.controls=se.controls.filter(me=>me.ref!==te))})),E(se=>oi(se,"controls",te)),setTimeout(()=>{F()},0)},[E,F]),Es=N.useCallback(te=>{const se=C.current.filter(me=>me.source===te||me.target===te).map(me=>me.id);g(ct(me=>{me&&(me.components=me.components.filter(_e=>_e.ref!==te),me.data_flows&&(me.data_flows=me.data_flows.filter(_e=>!se.includes(_e.ref))),me.boundaries?.forEach(_e=>{_e.components&&(_e.components=_e.components.filter(Oe=>Oe!==te))}),me.threats?.forEach(_e=>{_e.affected_components&&(_e.affected_components=_e.affected_components.filter(Oe=>Oe!==te)),_e.affected_data_flows&&(_e.affected_data_flows=_e.affected_data_flows.filter(Oe=>!se.includes(Oe)))}),me.controls?.forEach(_e=>{_e.implemented_in&&(_e.implemented_in=_e.implemented_in.filter(Oe=>Oe!==te))}))})),E(me=>{let _e=oi(me,"components",te);_e=ns(_e,te,["components","affected_components","implemented_in"]);for(const Oe of se)_e=oi(_e,"data_flows",Oe),_e=ns(_e,Oe,["affected_data_flows"]);return _e}),m(me=>me.filter(_e=>_e.id!==te)),p(me=>me.filter(_e=>_e.source!==te&&_e.target!==te))},[E]),wp=N.useCallback(te=>{g(ct(se=>{!se||!se.boundaries||(se.boundaries=se.boundaries.filter(me=>me.ref!==te))})),E(se=>oi(se,"boundaries",te)),m(se=>se.filter(me=>me.id!==te))},[E]),Vu=N.useCallback(te=>{g(ct(se=>{se&&(se.data_flows&&(se.data_flows=se.data_flows.filter(me=>me.ref!==te)),se.threats?.forEach(me=>{me.affected_data_flows&&(me.affected_data_flows=me.affected_data_flows.filter(_e=>_e!==te))}))})),E(se=>{let me=oi(se,"data_flows",te);return me=ns(me,te,["affected_data_flows"]),me}),p(se=>se.filter(me=>me.id!==te))},[E]);N.useEffect(()=>{const te=se=>{const me=se.target;if(me.tagName==="INPUT"||me.tagName==="TEXTAREA"||me.isContentEditable)return;const Oe=(()=>{if(!Gn.current)return null;const qe=Gn.current.screenToFlowPosition({x:bs.current.x,y:bs.current.y});return isNaN(qe.x)||isNaN(qe.y)?null:{x:qe.x-70,y:qe.y-40}})();switch(se.key){case"1":se.preventDefault(),Ci("internal",Oe||void 0);break;case"2":se.preventDefault(),Ci("external_dependency",Oe||void 0);break;case"3":se.preventDefault(),Ci("data_store",Oe||void 0);break;case"4":se.preventDefault(),Cs(Oe||void 0);break}};return window.addEventListener("keydown",te),()=>{window.removeEventListener("keydown",te)}},[Ci,Cs]);const Yu=N.useCallback(te=>{te.preventDefault(),te.dataTransfer.dropEffect="move"},[]),Gu=N.useCallback(te=>{if(te.preventDefault(),!Gn.current)return;const se=te.dataTransfer.getData("application/reactflow");if(se)try{const me=JSON.parse(se),_e=Gn.current.screenToFlowPosition({x:te.clientX,y:te.clientY});let Oe;me.type==="component"?(Oe={x:Math.round(_e.x-70),y:Math.round(_e.y-40)},Ci(me.componentType,Oe)):me.type==="boundary"&&(Oe={x:Math.round(_e.x-75),y:Math.round(_e.y-37.5)},Cs(Oe))}catch(me){console.error("Error parsing drag data:",me)}},[Ci,Cs]),ql=N.useCallback(te=>te,[]),Vl=N.useCallback(te=>te==="name"?"name":"description",[]),Bi=N.useCallback(te=>te==="name"?0:te==="description"?1:te==="items"?2:3,[]),Ku=N.useCallback(te=>te===0?"name":te===1?"description":te===2?"items":"status",[]),xp=N.useCallback(te=>{te==="down"&&Pr.current?.focus()},[]),_p=N.useCallback(te=>{te||Pr.current?.focus()},[]),Xu=N.useCallback(te=>{te==="up"?_a.current?.focus():te==="down"&&cr.current?.focus()},[]),Zu=N.useCallback(te=>{te?_a.current?.focus():cr.current?.focus()},[]),ks=N.useCallback(te=>{te==="up"?Pr.current?.focus():te==="down"&&vs.current?.focusCellByColumn("name",0)},[]),Ns=N.useCallback(te=>{te?Pr.current?.focus():vs.current?.focusCellByColumn("name",0)},[]),Sp=N.useCallback(te=>{const se=te==="type"?"name":te==="assets"?"description":te;Sa.current?.focusCellByColumn(se,0)},[]),xo=N.useCallback(te=>{cr.current?.focus()},[]),Wu=N.useCallback(te=>{const se=ql(te);Br.current?.focusCellByColumn(se,0)},[ql]),Qu=N.useCallback(te=>{const se=o?.components||[];if(se.length>0){const me=te==="description"?"description":"name";vs.current?.focusCellByColumn(me,se.length-1)}else Pr.current?.focus()},[o?.components]),Yl=N.useCallback(te=>{const se=Bi(te);zl.current?.focusCellByColumnIndex(se,0)},[Bi]),Gl=N.useCallback(te=>{const se=Vl(te);Sa.current?.focusCellByColumn(se,(o?.assets?.length||1)-1)},[Vl,o?.assets?.length]),Ju=N.useCallback(te=>{const se=Ku(te);Br.current?.focusCellByColumn(se,(o?.threats?.length||1)-1)},[Ku,o?.threats?.length]),ed=N.useCallback((te,se)=>{const me=o?.assets||[],_e=o?.boundaries||[];let Oe="name";if((se==="description"||se==="label")&&(Oe="description"),te==="boundary")me.length>0&&Sa.current?.focusCellByColumn(Oe,me.length-1);else if(te==="dataflow")if(_e.length>0){const qe=se==="label"?"description":"name";Ll.current?.focusCell("boundary",qe,_e.length-1)}else me.length>0&&Sa.current?.focusCellByColumn(Oe,me.length-1)},[o?.assets,o?.boundaries]),td=N.useCallback((te,se)=>{if(te==="dataflow"){const me=se==="label"?"description":"name";Br.current?.focusCellByColumn(me,0)}},[]),Kl=N.useCallback(async()=>{const te=Cn.current?.getContent()||l;if(te&&o?.name)try{let se;ei?(await qN(ei,te,o.name,Ue??void 0),se=ei):(se=await Sf(o.name,te,void 0,Ue??void 0),Qn(se));const me={type:"browser",modelId:se,modelName:o.name},_e=Date.now();await Ti(o.name,te,Ue??void 0,{type:"browser",modelId:se,modelName:o.name},_e),Ht(me,_e),Xe(`Saved "${o.name}" to browser storage`,"success")}catch(se){Xe(`Failed to save to browser: ${se instanceof Error?se.message:"Unknown error"}`,"error")}},[l,o?.name,Ue,ei,Ht]),_o=N.useCallback(async()=>{const te=Cn.current?.getContent()||l;if(!te){Xe("No content to save","error");return}try{if(Yn){if(await VN(Yn,"readwrite")){const me=await Kv(Yn,te);Jn.updateLastKnownModified(me);const _e={type:"file",handle:Yn,fileName:Yn.name},Oe=Date.now();await Ti(o?.name||"Untitled",te,Ue??void 0,{type:"file",fileName:Yn.name},Oe),Ht(_e,Oe),Xe(`Saved to ${Yn.name}`,"success")}else if(confirm("Permission to write to the original file was denied. Would you like to save to a new file?")){const _e=await kf(te,o?.name?`${o.name}.yaml`:"threat_model.yaml");if(_e){Wn(_e),xr(_e.name),await Cf(_e);const Oe={type:"file",handle:_e,fileName:_e.name},qe=Date.now();await Ti(o?.name||"Untitled",te,Ue??void 0,{type:"file",fileName:_e.name},qe),Ht(Oe,qe),Xe(`Saved to ${_e.name}`,"success")}}}else{const se=await kf(te,o?.name?`${o.name}.yaml`:"threat_model.yaml");if(se){Wn(se),xr(se.name),await Cf(se);const me={type:"file",handle:se,fileName:se.name},_e=Date.now();await Ti(o?.name||"Untitled",te,Ue??void 0,{type:"file",fileName:se.name},_e),Ht(me,_e),Xe(`Saved to ${se.name}`,"success")}}}catch(se){Xe(`Failed to save to file: ${se instanceof Error?se.message:"Unknown error"}`,"error")}},[l,o?.name,Yn,Ue,Ht,Jn]),Cp=N.useCallback(async()=>{const te=Cn.current?.getContent()||l;if(!te){Xe("No content to save","error");return}try{const se=await kf(te,o?.name?`${o.name}.yaml`:"threat_model.yaml");if(se){Wn(se),xr(se.name),await Cf(se);const me={type:"file",handle:se,fileName:se.name},_e=Date.now();await Ti(o?.name||"Untitled",te,Ue??void 0,{type:"file",fileName:se.name},_e),Ht(me,_e),Xe(`Saved to ${se.name}`,"success")}}catch(se){Xe(`Failed to save to file: ${se instanceof Error?se.message:"Unknown error"}`,"error")}},[l,o?.name,Ue,Ht]),Ep=N.useCallback(async()=>{const te=Cn.current?.getContent()||l;if(!te||!o?.name){Xe("No content to save","error");return}try{const se=prompt("Enter a name for the new browser storage entry:",`${o.name} (copy)`);if(!se)return;const me=await Sf(se,te,void 0,Ue??void 0);Qn(me);const _e={...o,name:se};g(_e);const Oe={type:"browser",modelId:me,modelName:se},qe=Date.now();await Ti(se,te,Ue??void 0,{type:"browser",modelId:me,modelName:se},qe),Ht(Oe,qe),Xe(`Saved as "${se}" to browser storage`,"success")}catch(se){Xe(`Failed to save to browser: ${se instanceof Error?se.message:"Unknown error"}`,"error")}},[l,o,Ue,Ht]),kp=N.useCallback(async()=>{const te=Cn.current?.getContent()||l;te&&await xs(te)},[l,xs]),er=N.useCallback(async()=>{await Pl()?Xe("Confluence markup copied to clipboard! Paste into an empty Confluence page.","success"):Xe("Failed to copy to clipboard","error")},[Pl,Xe]),As=N.useCallback(async()=>{await _s()?Xe("Data Flow Diagram image copied to clipboard!","success"):Xe("Failed to copy diagram to clipboard","error")},[_s,Xe]),nd=N.useCallback(async()=>{try{const te=Cn.current?.getContent()||l;if(!te){Xe("No content to copy","error");return}await navigator.clipboard.writeText(te),Xe("YAML copied to clipboard!","success")}catch(te){console.error("Failed to copy YAML to clipboard:",te),Xe("Failed to copy YAML to clipboard","error")}},[l,Xe]),rd=N.useCallback(async()=>{try{if(!o){Xe("No threat model to export","error");return}const te=hm(o,void 0,Ue,!1);await navigator.clipboard.writeText(te),Xe("Markdown copied to clipboard!","success")}catch(te){console.error("Failed to copy markdown to clipboard:",te),Xe("Failed to copy markdown to clipboard","error")}},[o,Ue,Xe]),So=N.useCallback(async()=>{await Et("commit")&&Jr(!0)},[Et]),Xl=N.useCallback(async()=>{if(!Bt){await _o();return}switch(Bt.type){case"browser":await Kl();break;case"file":await _o();break;case"github":await So();break}},[Bt,Kl,_o,So]);mo.current=Xl;const Zl=N.useCallback(()=>{Jr(!1)},[]),Np=N.useCallback(async(te,se,me,_e,Oe,qe,Ie)=>{const Me=Cn.current?.getContent()||l;if(!Me)throw new Error("No content to commit");try{let be=Jt();if(!be&&(be=await Et("commit"),!be))throw new Error("GitHub authentication required");const Ge=_e.substring(0,_e.lastIndexOf("/")+1),Qe=_e.substring(_e.lastIndexOf("/")+1).replace(/\.(yaml|yml)$/i,"");if(Ie?.includeDiagramImage||Ie?.includeMarkdownFile){const ln=[];ln.push({path:_e,content:Me});let Dt;if(Ie.includeDiagramImage){const Na=await go(3);Na&&(Dt=Na.split(",")[1],ln.push({path:`${Ge}${Qe}.png`,content:Dt,isBase64:!0}))}if(Ie.includeMarkdownFile&&o){const Na=Ie.includeDiagramImage&&!!Dt,nc={domain:Fe,owner:te,repository:se,branch:me,path:_e,sha:qe||"",loadedAt:Date.now()};let Eo=hm(o,o.name||Qe,nc,Na);if(Na){const ur=`${(o.name||Qe).replace(/\s+/g,"_").toLowerCase()}_diagram.png`,Aa=`${Qe}.png`;Eo=Eo.replace(ur,Aa)}ln.push({path:`${Ge}${Qe}.md`,content:Eo})}const dt=await be.createMultiFileCommit(te,se,me,Oe,ln),at=await be.getFileSha(te,se,_e,me),Ut={domain:Fe,owner:te,repository:se,branch:me,path:_e,sha:at||dt.commitSha,loadedAt:Date.now()};Ye(Ut),o?.name&&await Sf(o.name,Me,void 0,Ut);const Ur=Date.now();await Ti(o?.name||"Untitled",Me,Ut,void 0,Ur);const Ei=ln.length;Ht({type:"github",metadata:Ut},Ur),Xe(`Successfully committed ${Ei} file${Ei>1?"s":""} to ${te}/${se}`,"success")}else{const ln=await be.createOrUpdateFile(te,se,_e,Me,Oe,me,qe),Dt={domain:Fe,owner:te,repository:se,branch:me,path:_e,sha:ln.content.sha,loadedAt:Date.now()};Ye(Dt),o?.name&&await Sf(o.name,Me,void 0,Dt);const dt=Date.now();await Ti(o?.name||"Untitled",Me,Dt,void 0,dt),Xe(`Successfully committed to ${te}/${se}`,"success"),Ht({type:"github",metadata:Dt},dt)}}catch(be){throw be}},[l,Fe,o,Jt,Et,Ye,go,Ht]),ka=N.useCallback(()=>Et("commit"),[Et]),Wl=N.useCallback(async()=>{if(!Ue||!o){Xe("No GitHub metadata available","error");return}Ot();try{const te=await ut(o);if(fo(te),te.fileConflict)Zt(!0);else{if(te.controlsSynced.length>0){const se=te.controlsSynced.filter(_e=>_e.synced).length,me=te.controlsSynced.filter(_e=>_e.error).length;Hi(te.controlsSynced),Xe(`Sync complete: ${se} control(s) synced with GitHub issues`+(me>0?`, ${me} had errors`:"")+", no file conflicts","success")}else Xe("Sync complete: No changes needed","success");it()}}catch(te){console.error("Sync error:",te),Xe(`Failed to sync: ${te instanceof Error?te.message:"Unknown error"}`,"error")}},[Ue,o,ut,Ot,Xe]),Hi=N.useCallback(te=>{if(!o||!te.length)return;const se=ct(o,_e=>{if(_e.controls)for(const Oe of te){const qe=_e.controls.find(Ie=>Ie.ref===Oe.ref);qe&&Oe.synced&&Oe.newStatus!==void 0&&(qe.status=Oe.newStatus,Oe.error?.includes("404")&&delete qe.status_link)}});let me=l;for(const _e of te)_e.synced&&_e.newStatus!==void 0&&(me=st(me,"controls",_e.ref,"status",_e.newStatus),_e.error?.includes("404")&&(me=st(me,"controls",_e.ref,"status_link",void 0)));g(se),y(me)},[o,l,g,y]),Ql=N.useCallback(async()=>{if(Zt(!1),!!Ue)try{const te=Jt();if(!te){Xe("GitHub authentication required","error");return}const{content:se,sha:me}=await te.getFileContent(Ue.owner,Ue.repository,Ue.path,Ue.branch),_e=ca(se);g(_e),y(se);const Oe={...Ue,sha:me,loadedAt:Date.now()};Ye(Oe),await Ti(_e.name||"Untitled",se,Oe),it(),Xe("Loaded latest version from GitHub","success")}catch(te){console.error("Failed to load latest:",te),Xe(`Failed to load latest version: ${te instanceof Error?te.message:"Unknown error"}`,"error"),it()}},[Ue,Jt,g,y,Ye,it]),id=N.useCallback(()=>{if(Zt(!1),Lr&&Lr.controlsSynced.length>0){const te=Lr.controlsSynced.filter(se=>se.synced).length;te>0&&(Hi(Lr.controlsSynced),Xe(`Control statuses updated (${te} synced)`,"success"))}it()},[Lr,Hi,it]),Er=N.useCallback((te,se,me)=>{or(!1),Kn(),se===null?(Wn(null),xr(null),Ef()):se&&(Wn(se),xr(se.name),Cf(se)),Qn(me||null);const _e=async Oe=>{const qe=ca(Oe);Pi.current=Date.now(),y(Oe),g(qe),Ye(null);const{nodes:Ie,edges:Me}=oa(qe,ce),be=Ie.map(We=>We.type==="threatModelNode"?{...We,data:{...We.data,availableAssets:qe.assets?.map(Qe=>({ref:Qe.ref,name:Qe.name}))||[],onNameChange:Qe=>he(We.id,Qe),onEditModeChange:_t,onTypeChange:Qe=>ve(We.id,Qe),onDescriptionChange:Qe=>W(We.id,Qe),onAssetsChange:Qe=>ie(We.id,Qe),onCreateAsset:Cr,onSelectNode:()=>mn(We.id)}}:We.type==="boundaryNode"?{...We,data:{...We.data,onNameChange:Qe=>ae(We.id,Qe),onEditModeChange:_t,onResizeEnd:(Qe,ln)=>ue(We.id,Qe,ln)}}:We),Ge=Me.map(We=>({...We,data:{...We.data,edgeRef:We.id,onLabelChange:ce,onDirectionChange:re,onToggleDirectionAndReverse:ne,onEditModeChange:_t}}));m(be),p(Ge),V(),Hr.current=!0,me?Ht({type:"browser",modelId:me,modelName:qe.name||"Untitled"}):se&&Ht({type:"file",handle:se,fileName:se.name})};te instanceof File?te.text().then(_e).catch(Oe=>{console.error("Failed to read file:",Oe),Xe("Failed to read file","error")}):_e(te.content).catch(Oe=>{console.error("Failed to process content:",Oe),Xe("Failed to process content","error")})},[ce,he,ve,W,ie,ae,ue,re,V,Ye,Ht,Kn]);Ea.current=te=>{Pi.current=Date.now();const se=ca(te);y(te),g(se);const{nodes:me,edges:_e}=oa(se,ce),Oe=me.map(Ie=>Ie.type==="threatModelNode"?{...Ie,data:{...Ie.data,availableAssets:se.assets?.map(Me=>({ref:Me.ref,name:Me.name}))||[],onNameChange:Me=>he(Ie.id,Me),onEditModeChange:_t,onTypeChange:Me=>ve(Ie.id,Me),onDescriptionChange:Me=>W(Ie.id,Me),onAssetsChange:Me=>ie(Ie.id,Me),onCreateAsset:Cr,onSelectNode:()=>mn(Ie.id)}}:Ie.type==="boundaryNode"?{...Ie,data:{...Ie.data,onNameChange:Me=>ae(Ie.id,Me),onEditModeChange:_t,onResizeEnd:(Me,be)=>ue(Ie.id,Me,be)}}:Ie),qe=_e.map(Ie=>({...Ie,data:{...Ie.data,edgeRef:Ie.id,onLabelChange:ce,onDirectionChange:re,onToggleDirectionAndReverse:ne,onEditModeChange:_t}}));m(Oe),p(qe),V(),Hr.current=!0,Yn&&Ht({type:"file",handle:Yn,fileName:Yn.name}),Xe("File reloaded  changed externally","info")};const ni=N.useCallback(async()=>{if(SS())try{const te=await lH();if(te){const se={name:te.name,content:te.content};Er(se,te.handle),Jn.updateLastKnownModified(te.lastModified)}}catch(te){console.error("Failed to open file:",te),Xe(`Failed to open file: ${te instanceof Error?te.message:"Unknown error"}`,"error")}else On.current?.click()},[Er,Jn]),Jl=N.useCallback(te=>{const se=ws||!Bt&&j;zr(te),se?hn(!0):te==="empty"?Ah("empty.yaml").then(me=>{const _e=ca(me);Pi.current=Date.now(),y(me),g(_e),Ye(null),Wn(null),xr(null),Qn(null),Ef(),Kn();const{nodes:Oe,edges:qe}=oa(_e,ce),Ie=Oe.map(be=>be.type==="threatModelNode"?{...be,data:{...be.data,availableAssets:_e.assets?.map(Ge=>({ref:Ge.ref,name:Ge.name}))||[],onNameChange:Ge=>he(be.id,Ge),onEditModeChange:_t,onTypeChange:Ge=>ve(be.id,Ge),onDescriptionChange:Ge=>W(be.id,Ge),onAssetsChange:Ge=>ie(be.id,Ge),onCreateAsset:Cr,onSelectNode:()=>mn(be.id)}}:be.type==="boundaryNode"?{...be,data:{...be.data,onNameChange:Ge=>ae(be.id,Ge),onEditModeChange:_t,onResizeEnd:(Ge,We)=>ue(be.id,Ge,We)}}:be),Me=qe.map(be=>({...be,data:{...be.data,edgeRef:be.id,onLabelChange:ce,onDirectionChange:re,onToggleDirectionAndReverse:ne,onEditModeChange:_t}}));m(Ie),p(Me),V(),Hr.current=!0}).catch(me=>{console.error("Failed to load empty template:",me),Xe("Failed to load empty template","error")}):te==="upload"?ni():or(!0)},[ws,Bt,j,ce,he,ve,W,ie,ae,ue,re,V,Ye,ni]),ad=N.useCallback(()=>{hn(!1),Or==="empty"?Ah("empty.yaml").then(te=>{const se=ca(te);Pi.current=Date.now(),y(te),g(se),Ye(null),Wn(null),xr(null),Qn(null),Ef(),Kn();const{nodes:me,edges:_e}=oa(se,ce),Oe=me.map(Ie=>Ie.type==="threatModelNode"?{...Ie,data:{...Ie.data,availableAssets:se.assets?.map(Me=>({ref:Me.ref,name:Me.name}))||[],onNameChange:Me=>he(Ie.id,Me),onEditModeChange:_t,onTypeChange:Me=>ve(Ie.id,Me),onDescriptionChange:Me=>W(Ie.id,Me),onAssetsChange:Me=>ie(Ie.id,Me),onCreateAsset:Cr,onSelectNode:()=>mn(Ie.id)}}:Ie.type==="boundaryNode"?{...Ie,data:{...Ie.data,onNameChange:Me=>ae(Ie.id,Me),onEditModeChange:_t,onResizeEnd:(Me,be)=>ue(Ie.id,Me,be)}}:Ie),qe=_e.map(Ie=>({...Ie,data:{...Ie.data,edgeRef:Ie.id,onLabelChange:ce,onDirectionChange:re,onToggleDirectionAndReverse:ne,onEditModeChange:_t}}));m(Oe),p(qe),V(),Hr.current=!0}).catch(te=>{console.error("Failed to load empty template:",te),Xe("Failed to load empty template","error")}):Or==="upload"?ni():or(!0)},[Or,ce,he,ve,W,ie,ae,ue,re,V,Ye,ni]),Ui=N.useCallback(()=>{hn(!1),zr(null)},[]),sd=N.useCallback(()=>{yi(!1),ps(null),Jn.resolveConflict()},[Jn]),Co=N.useCallback(()=>{ba&&(yi(!1),Jn.resolveConflict(),Ea.current?.(ba),ps(null),Xe("Loaded external changes","success"))},[ba,Jn,Xe]),od=N.useCallback(async()=>{const te=Cn.current?.getContent()||l;if(te){const se=await kf(te,o?.name?`${o.name}.yaml`:"threat_model.yaml");if(!se)return;Xe(`Saved your changes to ${se.name}`,"success")}Co()},[l,o?.name,Co,Xe]),ld=N.useCallback(()=>{or(!1),zr(null)},[]),Ap=N.useCallback((te,se)=>{or(!1),zr(null),Kn();const me=ca(te);Pi.current=Date.now(),y(te),g(me),Ye(se),Wn(null),xr(null),Qn(null),Ef(),Ht({type:"github",metadata:se});const{nodes:_e,edges:Oe}=oa(me,ce),qe=_e.map(Me=>Me.type==="threatModelNode"?{...Me,data:{...Me.data,availableAssets:me.assets?.map(be=>({ref:be.ref,name:be.name}))||[],onNameChange:be=>he(Me.id,be),onEditModeChange:_t,onTypeChange:be=>ve(Me.id,be),onDescriptionChange:be=>W(Me.id,be),onAssetsChange:be=>ie(Me.id,be),onCreateAsset:Cr,onSelectNode:()=>mn(Me.id)}}:Me.type==="boundaryNode"?{...Me,data:{...Me.data,onNameChange:be=>ae(Me.id,be),onEditModeChange:_t,onResizeEnd:(be,Ge)=>ue(Me.id,be,Ge)}}:Me),Ie=Oe.map(Me=>({...Me,data:{...Me.data,edgeRef:Me.id,onLabelChange:ce,onDirectionChange:re,onToggleDirectionAndReverse:ne,onEditModeChange:_t}}));m(qe),p(Ie),V(),Hr.current=!0,it()},[ce,he,ve,W,ie,ae,ue,re,V,Ye,it,Ht,Kn]),jp=N.useCallback(te=>{console.error("GitHub error:",te),Xe(te,"error")},[Xe]),ec=N.useCallback(()=>{if(!o){Xe("No threat model to share","error");return}try{const te=sA(o,Ue),se=te.length;se>8e3&&Xe("Warning: Share link is very large and may have compatibility issues","warning"),navigator.clipboard.writeText(te).then(()=>{se<=8e3?Xe("Share link copied to clipboard!","success"):Xe("Share link copied (see warning)","success")}).catch(()=>{Xe("Failed to copy share link to clipboard","error")})}catch(te){console.error("Failed to generate share link:",te),Xe("Failed to generate share link","error")}},[o,Xe]),cd=N.useCallback(te=>{const se=te.currentTarget.files?.[0];se&&Er(se),te.currentTarget.value=""},[Er]),tc=N.useCallback((te,se)=>{g(te),y(se);const{nodes:me,edges:_e}=oa(te,ce),Oe=me.map(Ie=>Ie.type==="threatModelNode"?{...Ie,data:{...Ie.data,availableAssets:te.assets?.map(Me=>({ref:Me.ref,name:Me.name}))||[],onNameChange:Me=>he(Ie.id,Me),onEditModeChange:_t,onTypeChange:Me=>ve(Ie.id,Me),onDescriptionChange:Me=>W(Ie.id,Me),onAssetsChange:Me=>ie(Ie.id,Me),onCreateAsset:Cr,onSelectNode:()=>mn(Ie.id)}}:Ie.type==="boundaryNode"?{...Ie,data:{...Ie.data,onNameChange:Me=>ae(Ie.id,Me),onEditModeChange:_t,onResizeEnd:(Me,be)=>ue(Ie.id,Me,be)}}:Ie),qe=_e.map(Ie=>({...Ie,data:{...Ie.data,edgeRef:Ie.id,onLabelChange:ce,onDirectionChange:re,onToggleDirectionAndReverse:ne,onEditModeChange:_t}}));m(Oe),p(qe)},[he,ve,W,ie,ae,ue,ce,re,mn]);return N.useEffect(()=>{async function te(){try{Ft(!0);const se=s7();if(se&&!e&&!t&&!xi.current)try{xi.current=!0;const{model:be,githubMetadata:Ge}=a7(se),We=XU(be);Ge&&Ye(Ge),y(We),g(be);const{nodes:Qe,edges:ln}=oa(be,ce),Dt=Qe.map(at=>at.type==="threatModelNode"?{...at,data:{...at.data,availableAssets:be.assets?.map(Ut=>({ref:Ut.ref,name:Ut.name}))||[],onNameChange:Ut=>he(at.id,Ut),onEditModeChange:_t,onTypeChange:Ut=>ve(at.id,Ut),onDescriptionChange:Ut=>W(at.id,Ut),onAssetsChange:Ut=>ie(at.id,Ut),onCreateAsset:Cr,onSelectNode:()=>mn(at.id)}}:at.type==="boundaryNode"?{...at,data:{...at.data,onNameChange:Ut=>ae(at.id,Ut),onEditModeChange:_t,onResizeEnd:(Ut,Ur)=>ue(at.id,Ut,Ur)}}:at),dt=ln.map(at=>({...at,data:{...at.data,edgeRef:at.id,onLabelChange:ce,onDirectionChange:re,onToggleDirectionAndReverse:ne,onEditModeChange:_t}}));m(Dt),p(dt),fn(null),V(),Hr.current=!0,Xe("Threat model loaded from share link","success"),Ft(!1),setTimeout(()=>{window.history.replaceState({},"",window.location.pathname)},100);return}catch(be){console.error("Failed to load threat model from URL:",be),Xe("Failed to load shared threat model","error"),xi.current=!1}if(!e&&!t&&!xi.current){const be=await iH();if(be)try{const Ge=ca(be.content);if(y(be.content),be.githubMetadata&&Ye(be.githubMetadata),be.saveSource){if(be.saveSource.type==="browser"&&be.saveSource.modelId)Qn(be.saveSource.modelId),Ht({type:"browser",modelId:be.saveSource.modelId,modelName:be.saveSource.modelName||"Untitled"},be.lastSavedToSourceAt);else if(be.saveSource.type==="file"&&be.saveSource.fileName){const dt=await oH();dt&&(Wn(dt),xr(dt.name),Ht({type:"file",handle:dt,fileName:dt.name},be.lastSavedToSourceAt))}else be.saveSource.type==="github"&&be.saveSource.githubMeta&&Ht({type:"github",metadata:be.saveSource.githubMeta},be.lastSavedToSourceAt);be.isDirty&&Li()}g(Ge);const{nodes:We,edges:Qe}=oa(Ge,ce),ln=We.map(dt=>dt.type==="threatModelNode"?{...dt,data:{...dt.data,availableAssets:Ge.assets?.map(at=>({ref:at.ref,name:at.name}))||[],onNameChange:at=>he(dt.id,at),onEditModeChange:_t,onTypeChange:at=>ve(dt.id,at),onDescriptionChange:at=>W(dt.id,at),onAssetsChange:at=>ie(dt.id,at),onCreateAsset:Cr,onSelectNode:()=>mn(dt.id)}}:dt.type==="boundaryNode"?{...dt,data:{...dt.data,onNameChange:at=>ae(dt.id,at),onEditModeChange:_t,onResizeEnd:(at,Ut)=>ue(dt.id,at,Ut)}}:dt),Dt=Qe.map(dt=>({...dt,data:{...dt.data,edgeRef:dt.id,onLabelChange:ce,onDirectionChange:re,onToggleDirectionAndReverse:ne,onEditModeChange:_t}}));m(ln),p(Dt),V(),Hr.current=!0,Pi.current=Date.now(),Ft(!1);return}catch(Ge){console.error("Failed to load auto-save draft (corrupted or invalid), loading empty template instead:",Ge),await aH()}}let me;if(xi.current)return;e?(me=e,r&&(Ye(r),Il({type:"github",metadata:r}))):t?me=await t.text():me=await Ah("empty.yaml"),y(me);const _e=ca(me),{nodes:Oe,edges:qe}=oa(_e,ce),Ie=Oe.map(be=>be.type==="threatModelNode"?{...be,data:{...be.data,availableAssets:_e.assets?.map(Ge=>({ref:Ge.ref,name:Ge.name}))||[],onNameChange:Ge=>he(be.id,Ge),onEditModeChange:_t,onTypeChange:Ge=>ve(be.id,Ge),onDescriptionChange:Ge=>W(be.id,Ge),onAssetsChange:Ge=>ie(be.id,Ge),onCreateAsset:Cr,onSelectNode:()=>mn(be.id)}}:be.type==="boundaryNode"?{...be,data:{...be.data,onNameChange:Ge=>ae(be.id,Ge),onEditModeChange:_t,onResizeEnd:(Ge,We)=>ue(be.id,Ge,We)}}:be),Me=qe.map(be=>({...be,data:{...be.data,edgeRef:be.id,onLabelChange:ce,onDirectionChange:re,onToggleDirectionAndReverse:ne,onEditModeChange:_t}}));m(Ie),p(Me),g(_e),fn(null),Hr.current=!0}catch(se){console.error("Failed to load threat model:",se),fn("Failed to load threat model. Please check the console for details.")}finally{Ft(!1)}}te()},[e,t,r,he,ve,W,ie,ae,ue,ce,re,V,Xe]),N.useEffect(()=>{const te=me=>{const _e=me.target;(_e.closest(".react-flow__handle")||_e.closest("svg")?.closest(".react-flow__edges"))&&(_(!0),document.addEventListener("mouseup",se))},se=()=>{_(!1),document.removeEventListener("mouseup",se)};return document.addEventListener("mousedown",te),()=>{document.removeEventListener("mousedown",te),document.removeEventListener("mouseup",se)}},[]),kt?v.jsx("div",{style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:v.jsx("div",{style:{fontSize:"18px",color:"#666"},children:"Loading threat model..."})}):wn?v.jsx("div",{style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:v.jsxs("div",{style:{fontSize:"18px",color:"#dc2626",textAlign:"center"},children:[v.jsx("div",{style:{fontWeight:"bold",marginBottom:"8px"},children:"Error"}),v.jsx("div",{children:wn})]})}):v.jsxs("div",{className:`app-container ${vi?"selecting":""}`,"data-mobile-view":$n,children:[v.jsx(bH,{isCollapsed:qt,isCanvasCollapsed:an,sidebarView:_n,mobileView:$n,isDarkMode:Sn,canUndo:j,canRedo:T,localFileName:gs,canSaveToFile:SS(),onSidebarCollapse:qu,onCanvasCollapse:hp,onSidebarViewChange:An,onMobileViewChange:mp,onCopyToConfluence:er,onCopyDiagramToClipboard:As,onCopyAsYaml:nd,onCopyAsMarkdown:rd,onUndo:z,onRedo:L,onNewThreatModel:Jl,onQuickSave:Xl,onSaveToBrowser:Kl,onSaveToFile:_o,onSaveToNewFile:Cp,onSaveToNewBrowser:Ep,onCommitToGitHub:So,onDownloadFolder:kp,onDarkModeToggle:()=>qn(!Sn),onGitHubSettingsClick:nt,onGenerateShareLink:ec}),v.jsxs("div",{className:"content-wrapper",children:[v.jsxs("div",{className:`tables-container ${qt?"collapsed":""} ${_n==="yaml"?"yaml-view":""}`,style:{width:qt?0:an?"100%":`${sr}px`},children:[v.jsx("div",{style:{display:_n==="yaml"?"flex":"none",height:"100%"},children:_n==="yaml"&&l&&v.jsx(N.Suspense,{fallback:v.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-secondary)"},children:"Loading YAML editor..."}),children:v.jsx(h9,{ref:Cn,initialContent:l,onUpdate:tc})})}),_n==="tables"&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"header-section",children:v.jsxs("div",{className:"title-section",children:[v.jsx("div",{className:"threat-model-title",children:v.jsx(ls,{ref:_a,value:o?.name||"",placeholder:o?.name==="TM Title"?"TM Title":void 0,onSave:fe,onNavigate:xp,onTabPress:_p,allowEmpty:!1})}),v.jsx("div",{className:"threat-model-description",children:v.jsx(co,{ref:Pr,value:o?.description||"",placeholder:!o?.description||o?.description==="Description of scope..."?"Description of scope...":void 0,onSave:Ce,onNavigate:Xu,onTabPress:Zu})}),v.jsx("div",{className:"threat-model-participants",children:v.jsx(eN,{ref:cr,value:o?.participants||[],onSave:ke,onNavigate:ks,onTabPress:Ns})})]})}),v.jsxs("div",{className:"tables-container-content",children:[v.jsxs("h2",{className:"collapsible-section-header",onClick:()=>Mn(!jn),children:[v.jsx("span",{children:"What are we working on?"}),v.jsx("span",{className:"collapse-arrow",children:jn?"":""})]}),!jn&&v.jsxs(v.Fragment,{children:[v.jsx(wB,{ref:vs,threatModel:o,onComponentNameChange:he,onComponentTypeChange:ve,onComponentDescriptionChange:W,onComponentAssetsChange:ie,onCreateAsset:Cr,onRemoveComponent:Es,onAddComponent:te=>Ci(te),onReorderComponents:Re,onNavigateToNextTable:Sp,onNavigateToPreviousTable:xo}),v.jsx(xB,{ref:Sa,threatModel:o,onAssetNameChange:M,onAssetDescriptionChange:O,onRemoveAsset:gp,onAddAsset:pp,onReorderAssets:ye,onNavigateToNextTable:Wu,onNavigateToPreviousTable:Qu}),v.jsx(AB,{ref:Ll,threatModel:o,handleBoundaryNameChange:ae,handleBoundaryDescriptionChange:I,handleDataFlowDirectionChange:re,handleDataFlowLabelChange:ce,handleRemoveBoundary:wp,handleRemoveDataFlow:Vu,onNavigateToPreviousTable:ed,onNavigateToNextTable:td})]}),v.jsx("div",{className:"tables-divider"}),v.jsxs("h2",{className:"collapsible-section-header",onClick:()=>ys(!ti),children:[v.jsx("span",{children:"What can go wrong?"}),v.jsx("span",{className:"collapse-arrow",children:ti?"":""})]}),!ti&&v.jsx(kB,{ref:Br,threatModel:o,githubMetadata:Ue??void 0,onThreatNameChange:R,onThreatDescriptionChange:G,onThreatAffectedComponentsChange:P,onThreatAffectedDataFlowsChange:q,onThreatAffectedAssetsChange:J,onThreatStatusChange:H,onThreatStatusLinkChange:U,onThreatStatusNoteChange:Z,onRemoveThreat:vp,onAddThreat:yp,onReorderThreats:Pe,onNavigateToNextTable:Yl,onNavigateToPreviousTable:Gl}),v.jsx("div",{className:"tables-divider"}),v.jsxs("h2",{className:"collapsible-section-header",onClick:()=>xa(!_r),children:[v.jsx("span",{children:"What are we going to do about it?"}),v.jsx("span",{className:"collapse-arrow",children:_r?"":""})]}),!_r&&v.jsx(NB,{ref:zl,threatModel:o,githubMetadata:Ue??void 0,onControlNameChange:X,onControlDescriptionChange:Q,onControlStatusChange:$,onControlStatusLinkChange:B,onControlStatusNoteChange:K,onControlMitigatesChange:le,onControlImplementedInChange:oe,onRemoveControl:Fl,onAddControl:bp,onReorderControls:Le,onNavigateToPreviousTable:Ju}),v.jsx("div",{className:"tables-divider"}),v.jsxs("h2",{className:"collapsible-section-header",onClick:()=>ho(!lr),children:[v.jsx("span",{children:"Did we do a good job?"}),v.jsx("span",{className:"collapse-arrow",children:lr?"":""})]}),!lr&&v.jsx(jB,{threatModel:o,threatsTableRef:Br,controlsTableRef:zl,onExpandThreatsSection:()=>ys(!1),onExpandControlsSection:()=>xa(!1)})]})]})]}),!qt&&!an&&v.jsx(dH,{onResize:fp,minWidth:500,maxWidth:1e3}),v.jsxs("div",{className:`diagram-section ${an?"collapsed":""}`,children:[v.jsx(gH,{onAddComponent:Ci,onAddBoundary:Cs}),v.jsxs("div",{ref:wi,className:`react-flow__container ${u?"dragging-edge":""}`,onMouseMove:te=>{bs.current={x:te.clientX,y:te.clientY}},onDragOver:Yu,onDrop:Gu,children:[v.jsx(P8,{}),v.jsx(yH,{title:tn.phase!=="idle"?"Creating Data-Flow Connection":on.phase!=="idle"?"Reconnecting Data-Flow":"",instruction:tn.phase==="source-handle"?"Select source handle":tn.phase==="target-node"?"Select target node":tn.phase==="target-handle"?"Select target handle":on.phase==="source-node"?"Select source node":on.phase==="source-handle"?"Select source handle":on.phase==="target-node"?"Select target node":on.phase==="target-handle"?"Select target handle":"",keybindings:[{keys:["Esc"],label:"Cancel"},{keys:[""],label:"Back"},{keys:[],label:"Navigate",isArrowKeys:!0},{keys:[""],label:"Confirm"}],show:tn.phase!=="idle"||on.phase!=="idle"}),v.jsxs(x4,{nodes:a,edges:s,onNodesChange:Ss,onEdgesChange:bo,onNodeClick:Ul,onEdgeClick:dp,onNodeDragStart:ap,onNodeDragStop:Bu,onSelectionDragStart:Fu,onSelectionDragStop:op,onSelectionStart:lp,onSelectionEnd:cp,onPaneClick:up,onConnect:wo,onReconnect:sp,nodeTypes:m9,edgeTypes:p9,connectionLineComponent:B8,fitView:!0,fitViewOptions:{padding:.2},nodesDraggable:!f,nodesFocusable:!0,panOnDrag:!f,panOnScroll:!0,zoomOnDoubleClick:!1,selectionOnDrag:!f&&!Sr.current,selectionMode:pl.Partial,disableKeyboardA11y:!0,multiSelectionKeyCode:["Meta","Control"],deleteKeyCode:tn.phase==="idle"&&on.phase==="idle"?["Backspace","Delete"]:null,onInit:te=>{Gn.current=te},children:[v.jsx(A4,{gap:16}),v.jsx(O4,{showInteractive:!1})]})]})]})]}),v.jsx("input",{ref:On,type:"file",accept:".yaml,.yml,.json",onChange:cd,style:{display:"none"}}),sn&&v.jsx(TB,{onConfirm:ad,onCancel:Ui}),Qr&&v.jsx(DB,{fileName:gs||"file",onKeepMine:sd,onLoadExternal:Co,onSaveAs:od}),Ne&&Ae&&v.jsx(HN,{action:Ae,domain:Fe,onSubmit:Kt,onCancel:mt,onChangeDomain:Be,isValidating:He,error:Ve||void 0}),$e&&v.jsx(VB,{domain:Fe,onDomainChange:Be,githubMetadata:Ue,onClose:Ot,onSync:Ue?Wl:void 0}),bi&&Lr&&v.jsx(KB,{onConfirm:Ql,onCancel:id,hasLocalChanges:j,remoteUpdatedAt:Lr.fileUpdatedAt||new Date().toISOString(),localLoadedAt:new Date(Ue?.loadedAt||Date.now()).toISOString()}),Ir&&v.jsx(GB,{isOpen:Ir,metadata:Ue,threatModelName:o?.name||"Untitled",domain:Fe,getApiClient:ka,onClose:Zl,onCommit:Np}),wa&&Or&&Or!=="github"&&v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,background:"var(--bg-primary)"},children:v.jsx(cH,{source:Or,onFileSelect:Er,onBack:ld,isDarkMode:Sn,onDarkModeChange:qn,onMetadataLoad:te=>Ye(te??null),onGenerateShareLink:ec})}),wa&&Or==="github"&&v.jsx(g9,{domain:Fe,onFileSelect:Ap,onBack:ld,onError:jp,requirePat:Et})]})}function y9({owner:e,repo:t,filename:r,branch:a}){const s=tv(),{showToast:o}=Xv(),{domain:l,setDomain:u,isValidatingPat:d,patError:f,submitPat:m,closePatModal:p}=YN(),[g,y]=N.useState(null),[_,b]=N.useState(null),[w,x]=N.useState(!0);if(g&&_)return v.jsx(vA,{initialContent:g,initialGitHubMetadata:_});const S=async(A,E)=>{if(!await m(A,E))return!1;x(!1);const T=new wu(A,l);return await C(T),!0},C=async A=>{try{const E=A.getDomain();let j=a;if(!j)try{j=(await A.getRepository(e,t)).default_branch}catch(F){throw F instanceof Error?new Error(`Failed to fetch repository: ${F.message}`):new Error("Failed to fetch repository")}const T=`.threat-models/${r}.yaml`;let z,L;try{const F=await A.getFileContent(e,t,T,j);z=F.content,L=F.sha}catch(F){throw F.status===404?new Error(`File not found: ${T} in ${e}/${t} (branch: ${j})`):F.status===401||F.status===403?new Error("GitHub authentication failed. Please check your PAT has the required scopes (repo or public_repo)"):new Error(`Failed to load file: ${F.message||"Unknown error"}`)}try{ca(z)}catch{throw new Error("File is not valid YAML")}const V={domain:E,owner:e,repository:t,branch:j,path:T,sha:L,loadedAt:Date.now()};y(z),b(V),to()}catch(E){const j=E instanceof Error?E.message:"Failed to load GitHub file";o(j,"error"),s("/")}};return v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",fontSize:"1.2rem",gap:"1rem",flexDirection:"column"},children:[v.jsx("div",{className:"spinner",style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"}}),v.jsx("div",{children:"Loading GitHub file..."}),v.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]}),w&&v.jsx(HN,{action:"load",domain:l,onSubmit:S,onCancel:p,onChangeDomain:u,isValidating:d,error:f||void 0})]})}function v9(){const{owner:e,repo:t,filename:r}=NT(),[a]=vD();if(!e||!t||!r)return v.jsx("div",{children:"Invalid GitHub URL"});const s=a.get("branch")||void 0;return v.jsx(y9,{owner:e,repo:t,filename:r,branch:s})}const b9=()=>{const{toasts:e,dismissToast:t}=Xv(),r=a=>{switch(a){case"success":return"";case"error":return"";case"warning":return"";case"loading":return"";default:return""}};return v.jsx("div",{className:"toast-container",children:e.map(a=>v.jsxs("div",{className:`toast toast-${a.type}`,children:[v.jsx("div",{className:"toast-icon",children:r(a.type)}),v.jsx("div",{className:"toast-message",children:a.message}),a.type!=="loading"&&v.jsx("button",{className:"toast-dismiss",onClick:()=>t(a.id),"aria-label":"Dismiss",children:""})]},a.id))})};function w9(){const[e]=N.useState(()=>{const a=localStorage.getItem("darkMode");return a?JSON.parse(a):window.matchMedia("(prefers-color-scheme: dark)").matches}),[t,r]=N.useState(!1);return N.useEffect(()=>{(async()=>{try{const s=await sH();s>0&&console.log(`Migrated ${s} models from localStorage to IndexedDB`)}catch(s){console.error("Failed to migrate data:",s)}finally{r(!0)}})()},[]),N.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("darkMode",JSON.stringify(e))},[e]),t?v.jsx(fH,{children:v.jsxs(pH,{children:[v.jsx(b9,{}),v.jsxs(UT,{children:[v.jsx(l0,{path:"/",element:v.jsx(vA,{})}),v.jsx(l0,{path:"/github/:owner/:repo/:filename",element:v.jsx(v9,{})})]})]})}):v.jsx("div",{className:"app-loading",children:v.jsx("div",{children:"Loading..."})})}const bA=document.getElementById("root");if(!bA)throw new Error("Failed to find the root element");qj.createRoot(bA).render(v.jsx(N.StrictMode,{children:v.jsx(hD,{children:v.jsx(w9,{})})}));export{ht as R,x9 as a,xu as g,v as j,ca as p,N as r};
